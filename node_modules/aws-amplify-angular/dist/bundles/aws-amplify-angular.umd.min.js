!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("url"),require("buffer"),require("http"),require("fs"),require("os"),require("path"),require("child_process"),require("crypto"),require("uuid"),require("https"),require("stream"),require("http2"),require("process"),require("@aws-crypto/crc32"),require("lodash/isEmpty"),require("lodash/isEqual"),require("lodash/get"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("isomorphic-unfetch"),require("js-cookie"),require("fast-xml-parser"),require("axios"),require("events"),require("zen-observable"),require("paho-mqtt"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","url","buffer","http","fs","os","path","child_process","crypto","uuid","https","stream","http2","process","@aws-crypto/crc32","lodash/isEmpty","lodash/isEqual","lodash/get","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","isomorphic-unfetch","js-cookie","fast-xml-parser","axios","events","zen-observable","paho-mqtt","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.url,e.buffer,e.http,e.fs,e.os,e.path,e.child_process,e.crypto$1,e.uuid,e.https,e.stream,e.http2,e.process$1,e.crc32,e.isEmpty,e.isEqual,e.get,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,0,e.Cookies,e.fastXmlParser,e.axios,e.events,e.zenObservable,e.Paho,e.AmplifyUI)}(this,function(e,f,t,A,v,C,m,g,a,i,h,y,n,b,w,o,r,s,u,c,l,p,d,S,_,E,I,k,T,P,O,x,N,R,M){"use strict";var U="default"in A?A.default:A;c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,S=S&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S,_=_&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_,E=E&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N;var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function L(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function j(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function B(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(i<3?o(s):3<i?o(t,n,s):o(t,n))||s);return 3<i&&s&&Object.defineProperty(t,n,s),s}function z(n,r){return function(e,t){r(e,t,n)}}function V(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function q(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function K(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function H(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function W(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(G(arguments[t]));return e}function $(e){return this instanceof $?(this.v=e,this):new $(e)}function Y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i=[],s={};return r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(r){o[r]&&(s[r]=function(n){return new Promise(function(e,t){1<i.push([r,n,e,t])||a(r,n)})})}function a(e,t){try{(n=o[e](t)).value instanceof $?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function J(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=H(s),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=s[i]&&function(o){return new Promise(function(e,t){var n,r;o=s[i](o),n=e,e=t,r=o.done,t=o.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function Z(e){return"function"==typeof e}var X=!1,Q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,X=e},get useDeprecatedSynchronousErrorHandling(){return X}};function ee(e){setTimeout(function(){throw e},0)}var te={closed:!0,next:function(e){},error:function(e){if(Q.useDeprecatedSynchronousErrorHandling)throw e;ee(e)},complete:function(){}},ne=Array.isArray||function(e){return e&&"number"==typeof e.length};function re(e){return null!==e&&"object"==typeof e}var oe,ie=(ue.prototype=Object.create(Error.prototype),ue),se=(ae.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof ae)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(Z(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof ie?ce(t.errors):[t]}}if(ne(o))for(var i=-1,s=o.length;++i<s;){var a=o[i];if(re(a))try{a.unsubscribe()}catch(t){e=e||[],t instanceof ie?e=e.concat(ce(t.errors)):e.push(t)}}if(e)throw new ie(e)}},ae.prototype.add=function(e){var t,n=e;if(!e)return ae.EMPTY;switch(typeof e){case"function":n=new ae(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof ae||(t=n,(n=new ae)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof ae){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}return null===(r=this._subscriptions)?this._subscriptions=[n]:r.push(n),n},ae.prototype.remove=function(e){var t=this._subscriptions;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},ae.EMPTY=((oe=new ae).closed=!0,oe),ae);function ae(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}function ue(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function ce(e){return e.reduce(function(e,t){return e.concat(t instanceof ie?t.errors:t)},[])}var le,pe,de="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),fe=(L(ge,pe=se),ge.prototype[de]=function(){return this},ge.create=function(e,t,n){return(n=new ge(e,t,n)).syncErrorThrowable=!1,n},ge.prototype.next=function(e){this.isStopped||this._next(e)},ge.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},ge.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},ge.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,pe.prototype.unsubscribe.call(this))},ge.prototype._next=function(e){this.destination.next(e)},ge.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},ge.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},ge.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},ge),he=(L(me,le=fe),me.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,Q.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},me.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Q.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):ee(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;ee(e)}}},me.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},Q.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},me.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Q.useDeprecatedSynchronousErrorHandling)throw e;ee(e)}},me.prototype.__tryOrSetError=function(e,t,n){if(!Q.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return Q.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(ee(t),!0)}return!1},me.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},me);function me(e,t,n,r){var o,i=le.call(this)||this;return i._parentSubscriber=e,e=i,Z(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==te&&(Z((e=Object.create(t)).unsubscribe)&&i.add(e.unsubscribe.bind(e)),e.unsubscribe=i.unsubscribe.bind(i))),i._context=e,i._next=o,i._error=n,i._complete=r,i}function ge(e,t,n){var r=pe.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=te;break;case 1:if(!e){r.destination=te;break}if("object"==typeof e){e instanceof ge?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new he(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new he(r,e,t,n)}return r}var ye="function"==typeof Symbol&&Symbol.observable||"@@observable";var ve=(be.prototype.lift=function(e){var t=new be;return t.source=this,t.operator=e,t},be.prototype.subscribe=function(e,t,n){var r=this.operator,n=function(e,t,n){if(e){if(e instanceof fe)return e;if(e[de])return e[de]()}return e||t||n?new fe(e,t,n):new fe(te)}(e,t,n);if(r?n.add(r.call(n,this.source)):n.add(this.source||Q.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),Q.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},be.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Q.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(e){for(;e;){var t=(r=e).closed,n=r.destination,r=r.isStopped;if(t||r)return;e=n&&n instanceof fe?n:null}return 1}(t)?t.error(e):console.warn(e)}},be.prototype.forEach=function(r,e){var o=this;return new(e=we(e))(function(e,t){var n=o.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},be.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},be.prototype[ye]=function(){return this},be.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?function(e){return e}:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},be.prototype.toPromise=function(e){var r=this;return new(e=we(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},be.create=function(e){return new be(e)},be);function be(e){this._isScalar=!1,e&&(this._subscribe=e)}function we(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var Se,Ce,_e,Ee,Ae=(Me.prototype=Object.create(Error.prototype),Me),Ie=(L(Re,Ee=se),Re.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},Re),ke=(L(Ne,_e=fe),Ne),Te=(L(xe,Ce=ve),xe.prototype[de]=function(){return new ke(this)},xe.prototype.lift=function(e){var t=new Pe(this,this);return t.operator=e,t},xe.prototype.next=function(e){if(this.closed)throw new Ae;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},xe.prototype.error=function(e){if(this.closed)throw new Ae;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},xe.prototype.complete=function(){if(this.closed)throw new Ae;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},xe.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},xe.prototype._trySubscribe=function(e){if(this.closed)throw new Ae;return Ce.prototype._trySubscribe.call(this,e)},xe.prototype._subscribe=function(e){if(this.closed)throw new Ae;return this.hasError?(e.error(this.thrownError),se.EMPTY):this.isStopped?(e.complete(),se.EMPTY):(this.observers.push(e),new Ie(this,e))},xe.prototype.asObservable=function(){var e=new ve;return e.source=this,e},xe.create=function(e,t){return new Pe(e,t)},xe),Pe=(L(Oe,Se=Te),Oe.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},Oe.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},Oe.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},Oe.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):se.EMPTY},Oe);function Oe(e,t){var n=Se.call(this)||this;return n.destination=e,n.source=t,n}function xe(){var e=Ce.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}function Ne(e){var t=_e.call(this,e)||this;return t.destination=e,t}function Re(e,t){var n=Ee.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}function Me(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}function Ue(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Le(t,n))}}var De,Le=(Be.prototype.call=function(e,t){return t.subscribe(new Fe(e,this.project,this.thisArg))},Be),Fe=(L(je,De=fe),je.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},je);function je(e,t,n){return(e=De.call(this,e)||this).project=t,e.count=0,e.thisArg=n||e,e}function Be(e,t){this.project=e,this.thisArg=t}function ze(e){return e&&"number"==typeof e.length&&"function"!=typeof e}var Ve="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function qe(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Ke=function(e){if(e&&"function"==typeof e[ye])return i=e,function(e){var t=i[ye]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(ze(e))return o=e,function(e){for(var t=0,n=o.length;t<n&&!e.closed;t++)e.next(o[t]);e.complete()};if(qe(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,ee),t};if(e&&"function"==typeof e[Ve])return r=e,function(e){for(var t=r[Ve]();;){var n=void 0;try{n=t.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var r,n,o,i,e=re(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function He(e,t){return t?function(e,t){if(null!=e){if((n=e)&&"function"==typeof n[ye])return a=e,u=t,new ve(function(t){var n=new se;return n.add(u.schedule(function(){var e=a[ye]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(qe(e))return i=e,s=t,new ve(function(t){var n=new se;return n.add(s.schedule(function(){return i.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(ze(e))return r=e,o=t,new ve(function(e){var t=new se,n=0;return t.add(o.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[Ve]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new ve(function(r){var o,e=new se;return e.add(function(){o&&"function"==typeof o.return&&o.return()}),e.add(n.schedule(function(){o=t[Ve](),e.add(n.schedule(function(){if(!r.closed){try{var e=o.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,o,i,s,a,u,n;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof ve?e:new ve(Ke(e))}function Ge(u,c){return new ve(function(r){var o=u.length;if(0!==o)for(var i=new Array(o),s=0,a=0,e=0;e<o;e++)!function(t){var e=He(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),i[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==o&&n||(a===o&&r.next(c?c.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),r.complete())}}))}(e);else r.complete()})}var We=null,$e=(Object.defineProperty(Ye.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),Ye);function Ye(){this.resourceLoaderType=null}var Je,Ze=(L(Xe,Je=$e),Xe.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Xe.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Xe.prototype.supportsDOMEvents=function(){return!0},Xe.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Xe.prototype.getAnimationPrefix=function(){return this._animationPrefix||""},Xe.prototype.getTransitionEnd=function(){return this._transitionEnd||""},Xe.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Xe);function Xe(){var t=Je.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var Qe,et={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},tt={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"};f["ɵglobal"].Node&&(Qe=f["ɵglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var rt,ot=(L(it,rt=Ze),it.prototype.parse=function(e){throw new Error("parse not implemented")},it.makeCurrent=function(){var e=new it;We=We||e},it.prototype.hasProperty=function(e,t){return t in e},it.prototype.setProperty=function(e,t,n){e[t]=n},it.prototype.getProperty=function(e,t){return e[t]},it.prototype.invoke=function(e,t,n){e[t].apply(e,n)},it.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},it.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},it.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},it.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(it.prototype,"attrToPropMap",{get:function(){return et},enumerable:!0,configurable:!0}),it.prototype.contains=function(e,t){return Qe.call(e,t)},it.prototype.querySelector=function(e,t){return e.querySelector(t)},it.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},it.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},it.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},it.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},it.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},it.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},it.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},it.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},it.prototype.getInnerHTML=function(e){return e.innerHTML},it.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},it.prototype.getOuterHTML=function(e){return e.outerHTML},it.prototype.nodeName=function(e){return e.nodeName},it.prototype.nodeValue=function(e){return e.nodeValue},it.prototype.type=function(e){return e.type},it.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},it.prototype.firstChild=function(e){return e.firstChild},it.prototype.nextSibling=function(e){return e.nextSibling},it.prototype.parentElement=function(e){return e.parentNode},it.prototype.childNodes=function(e){return e.childNodes},it.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},it.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},it.prototype.appendChild=function(e,t){e.appendChild(t)},it.prototype.removeChild=function(e,t){e.removeChild(t)},it.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},it.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},it.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},it.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},it.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},it.prototype.setInnerHTML=function(e,t){e.innerHTML=t},it.prototype.getText=function(e){return e.textContent},it.prototype.setText=function(e,t){e.textContent=t},it.prototype.getValue=function(e){return e.value},it.prototype.setValue=function(e,t){e.value=t},it.prototype.getChecked=function(e){return e.checked},it.prototype.setChecked=function(e,t){e.checked=t},it.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},it.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},it.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},it.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},it.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},it.prototype.createScriptTag=function(e,t,n){return(n=(n=n||this.getDefaultDocument()).createElement("SCRIPT")).setAttribute(e,t),n},it.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},it.prototype.createShadowRoot=function(e){return e.createShadowRoot()},it.prototype.getShadowRoot=function(e){return e.shadowRoot},it.prototype.getHost=function(e){return e.host},it.prototype.clone=function(e){return e.cloneNode(!0)},it.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},it.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},it.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},it.prototype.addClass=function(e,t){e.classList.add(t)},it.prototype.removeClass=function(e,t){e.classList.remove(t)},it.prototype.hasClass=function(e,t){return e.classList.contains(t)},it.prototype.setStyle=function(e,t,n){e.style[t]=n},it.prototype.removeStyle=function(e,t){e.style[t]=""},it.prototype.getStyle=function(e,t){return e.style[t]},it.prototype.hasStyle=function(e,t,n){return t=this.getStyle(e,t)||"",n?t==n:0<t.length},it.prototype.tagName=function(e){return e.tagName},it.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);t.set(o.name,o.value)}return t},it.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},it.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},it.prototype.getAttribute=function(e,t){return e.getAttribute(t)},it.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},it.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},it.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},it.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},it.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},it.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},it.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},it.prototype.getDefaultDocument=function(){return document},it.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},it.prototype.getTitle=function(e){return e.title},it.prototype.setTitle=function(e,t){e.title=t||""},it.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},it.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},it.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},it.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},it.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},it.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},it.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},it.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},it.prototype.adoptNode=function(e){return document.adoptNode(e)},it.prototype.getHref=function(e){return e.getAttribute("href")},it.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&nt.hasOwnProperty(t)&&(t=nt[t]))}return tt[t]||t},it.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},it.prototype.getHistory=function(){return window.history},it.prototype.getLocation=function(){return window.location},it.prototype.getBaseHref=function(e){var t,n=(at=at||document.querySelector("base"))?at.getAttribute("href"):null;return null==n?null:(t=n,(st=st||document.createElement("a")).setAttribute("href",t),"/"===st.pathname.charAt(0)?st.pathname:"/"+st.pathname)},it.prototype.resetBaseElement=function(){at=null},it.prototype.getUserAgent=function(){return window.navigator.userAgent},it.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},it.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},it.prototype.getComputedStyle=function(e){return getComputedStyle(e)},it.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},it.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},it.prototype.supportsCookies=function(){return!0},it.prototype.getCookie=function(e){return t["ɵparseCookieValue"](document.cookie,e)},it.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},it);function it(){return null!==rt&&rt.apply(this,arguments)||this}var st,at=null,ut=t.DOCUMENT;function ct(){return window.history.pushState}var lt,pt=(L(dt,lt=t.PlatformLocation),dt.prototype._init=function(){this.location=We.getLocation(),this._history=We.getHistory()},dt.prototype.getBaseHrefFromDOM=function(){return We.getBaseHref(this._doc)},dt.prototype.onPopState=function(e){We.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},dt.prototype.onHashChange=function(e){We.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(dt.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),dt.prototype.pushState=function(e,t,n){ct()?this._history.pushState(e,t,n):this.location.hash=n},dt.prototype.replaceState=function(e,t,n){ct()?this._history.replaceState(e,t,n):this.location.hash=n},dt.prototype.forward=function(){this._history.forward()},dt.prototype.back=function(){this._history.back()},dt.decorators=[{type:f.Injectable}],dt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ut]}]}]},dt);function dt(e){var t=lt.call(this)||this;return t._doc=e,t._init(),t}f.Injectable,new f.InjectionToken("TRANSITION_ID");var ft=(ht.init=function(){f.setTestabilityGetter(new ht)},ht.prototype.addToWindow=function(n){f["ɵglobal"].getAngularTestability=function(e,t){if(null==(t=n.findTestabilityInTree(e,t=void 0===t||t)))throw new Error("Could not find testability for element.");return t},f["ɵglobal"].getAllAngularTestabilities=function(){return n.getAllTestabilities()},f["ɵglobal"].getAllAngularRootElements=function(){return n.getAllRootElements()},f["ɵglobal"].frameworkStabilizers||(f["ɵglobal"].frameworkStabilizers=[]),f["ɵglobal"].frameworkStabilizers.push(function(t){function n(e){o=o||e,0==--r&&t(o)}var e=f["ɵglobal"].getAllAngularTestabilities(),r=e.length,o=!1;e.forEach(function(e){e.whenStable(n)})})},ht.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?We.isShadowRoot(t)?this.findTestabilityInTree(e,We.getHost(t),!0):this.findTestabilityInTree(e,We.parentElement(t),!0):null},ht);function ht(){}f.Injectable;f.ApplicationRef,f.NgZone;f.APP_INITIALIZER,f.NgProbeToken,new f.Optional;var mt=new f.InjectionToken("EventManagerPlugins");gt.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},gt.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},gt.prototype.getZone=function(){return this._zone},gt.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},gt.decorators=[{type:f.Injectable}],gt.ctorParameters=function(){return[{type:Array,decorators:[{type:f.Inject,args:[mt]}]},{type:f.NgZone}]};function gt(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var yt=(vt.prototype.addGlobalEventListener=function(e,t,n){if(!(e=We.getGlobalEventTarget(this._doc,e)))throw new Error("Unsupported event target "+e+" for event "+t);return this.addEventListener(e,t,n)},vt);function vt(e){this._doc=e}var bt=(wt.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},wt.prototype.onStylesAdded=function(e){},wt.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},wt.decorators=[{type:f.Injectable}],wt.ctorParameters=function(){return[]},wt);function wt(){this._stylesSet=new Set}var St;L(Ct,St=bt),Ct.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},Ct.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},Ct.prototype.removeHost=function(e){this._hostNodes.delete(e)},Ct.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},Ct.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return We.remove(e)})},Ct.decorators=[{type:f.Injectable}],Ct.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ut]}]}]};function Ct(e){var t=St.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Et=/%COMP%/g;function At(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?At(e,o,n):(o=o.replace(Et,e),n.push(o))}return n}function It(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}f.Injectable;var kt=(Tt.prototype.destroy=function(){},Tt.prototype.createElement=function(e,t){return t?document.createElementNS(_t[t],e):document.createElement(e)},Tt.prototype.createComment=function(e){return document.createComment(e)},Tt.prototype.createText=function(e){return document.createTextNode(e)},Tt.prototype.appendChild=function(e,t){e.appendChild(t)},Tt.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},Tt.prototype.removeChild=function(e,t){e&&e.removeChild(t)},Tt.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},Tt.prototype.parentNode=function(e){return e.parentNode},Tt.prototype.nextSibling=function(e){return e.nextSibling},Tt.prototype.setAttribute=function(e,t,n,r){r?(t=r+":"+t,(r=_t[r])?e.setAttributeNS(r,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},Tt.prototype.removeAttribute=function(e,t,n){var r;n?(r=_t[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},Tt.prototype.addClass=function(e,t){e.classList.add(t)},Tt.prototype.removeClass=function(e,t){e.classList.remove(t)},Tt.prototype.setStyle=function(e,t,n,r){r&f.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&f.RendererStyleFlags2.Important?"important":""):e.style[t]=n},Tt.prototype.removeStyle=function(e,t,n){n&f.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},Tt.prototype.setProperty=function(e,t,n){Ot(t,"property"),e[t]=n},Tt.prototype.setValue=function(e,t){e.nodeValue=t},Tt.prototype.listen=function(e,t,n){return Ot(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,It(n)):this.eventManager.addEventListener(e,t,It(n))},Tt);function Tt(e){this.eventManager=e,this.data=Object.create(null)}var Pt="@".charCodeAt(0);function Ot(e,t){if(e.charCodeAt(0)===Pt)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var xt;L(Nt,xt=kt),Nt.prototype.applyToHost=function(e){xt.prototype.setAttribute.call(this,e,this.hostAttr,"")},Nt.prototype.createElement=function(e,t){return t=xt.prototype.createElement.call(this,e,t),xt.prototype.setAttribute.call(this,t,this.contentAttr,""),t};function Nt(e,t,n){var r=xt.call(this,e)||this,e=At((r.component=n).id,n.styles,[]);return t.addStyles(e),r.contentAttr=(e=n.id,"_ngcontent-%COMP%".replace(Et,e)),r.hostAttr=(n=n.id,"_nghost-%COMP%".replace(Et,n)),r}var Rt;L(Mt,Rt=kt),Mt.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Mt.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Mt.prototype.appendChild=function(e,t){return Rt.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Mt.prototype.insertBefore=function(e,t,n){return Rt.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Mt.prototype.removeChild=function(e,t){return Rt.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Mt.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Rt.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))};function Mt(e,t,n,r){var o=Rt.call(this,e)||this;o.sharedStylesHost=t,o.hostEl=n,o.component=r,o.shadowRoot=n.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var i=At(r.id,r.styles,[]),s=0;s<i.length;s++){var a=document.createElement("style");a.textContent=i[s],o.shadowRoot.appendChild(a)}return o}var Ut,Dt,Lt="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Ft=Lt("addEventListener"),jt=Lt("removeEventListener"),Bt={},zt="removeEventListener",Vt="__zone_symbol__propagationStopped",qt="__zone_symbol__stopImmediatePropagation";function Kt(e){return Ut&&Ut.hasOwnProperty(e)}function Ht(e){var t=Bt[e.type];if(t=t&&this[t]){var n=[e];if(1===t.length)return(r=t[0]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n);for(var r,o=t.slice(),i=0;i<o.length&&!0!==e[Vt];i++)(r=o[i]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n)}}function Gt(e,t){return(e=Dt.call(this,e)||this).ngZone=t,e.patchEvent(),e}(vu="undefined"!=typeof Zone&&Zone[Lt("BLACK_LISTED_EVENTS")])&&(Ut={},vu.forEach(function(e){Ut[e]=e})),L(Gt,Dt=yt),Gt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[qt]||(e=Event.prototype[qt]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[Vt]=!0),e&&e.apply(this,arguments)}))},Gt.prototype.supports=function(e){return!0},Gt.prototype.addEventListener=function(e,t,n){var r=this,o=e[Ft],i=n;if(!o||f.NgZone.isInAngularZone()&&!Kt(t))e.addEventListener(t,i,!1);else{var n=(n=Bt[t])||(Bt[t]=Lt("ANGULAR"+t+"FALSE")),o=(s=e[n])&&0<s.length,s=s||(e[n]=[]),n=Kt(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:n,handler:i});else{for(var a=!1,u=0;u<s.length;u++)if(s[u].handler===i){a=!0;break}a||s.push({zone:n,handler:i})}o||e[Ft](t,Ht,!1)}return function(){return r.removeEventListener(e,t,i)}},Gt.prototype.removeEventListener=function(e,t,n){var r=e[jt];if(!r)return e[zt].apply(e,[t,n,!1]);var o=Bt[t],i=o&&e[o];if(!i)return e[zt].apply(e,[t,n,!1]);for(var s=!1,a=0;a<i.length;a++)if(i[a].handler===n){s=!0,i.splice(a,1);break}s?0===i.length&&r.apply(e,[t,Ht,!1]):e[zt].apply(e,[t,n,!1])},Gt.decorators=[{type:f.Injectable}],Gt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ut]}]},{type:f.NgZone}]};var Wt,$t={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Yt=new f.InjectionToken("HammerGestureConfig"),Jt=(Zt.prototype.buildHammer=function(e){var t,n=new Hammer(e);for(t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},Zt.decorators=[{type:f.Injectable}],Zt.ctorParameters=function(){return[]},Zt);function Zt(){this.events=[],this.overrides={}}function Xt(e,t){return(e=Wt.call(this,e)||this)._config=t,e}L(Xt,Wt=yt),Xt.prototype.supports=function(e){if(!$t.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},Xt.prototype.addEventListener=function(n,r,o){var i=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){o(e)})}var t=i._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},Xt.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},Xt.decorators=[{type:f.Injectable}],Xt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ut]}]},{type:Jt,decorators:[{type:f.Inject,args:[Yt]}]}]};var Qt,en=["alt","control","meta","shift"],tn={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};function nn(e){return Qt.call(this,e)||this}L(nn,Qt=yt),nn.prototype.supports=function(e){return null!=nn.parseEventName(e)},nn.prototype.addEventListener=function(e,t,n){var r=nn.parseEventName(t),o=nn.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return We.onAndCancel(e,r.domEventName,o)})},nn.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var e=nn._normalizeKey(n.pop()),r="";return en.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r+=e+".")}),r+=e,0!=n.length||0===e.length?null:((e={}).domEventName=t,e.fullKey=r,e)},nn.getEventFullKey=function(t){var n="",r=We.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),en.forEach(function(e){e!=r&&(0,tn[e])(t)&&(n+=e+".")}),n+=r},nn.eventCallback=function(t,n,r){return function(e){nn.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},nn._normalizeKey=function(e){return"esc"!==e?e:"escape"},nn.decorators=[{type:f.Injectable}],nn.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ut]}]}]};var rn=(on.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;return t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null),(t=t.response.body).removeChild(t.firstChild),t},on.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},on.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},on.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var o=t[e];this.DOM.isElementNode(o)&&this.stripCustomNsAttrs(o)}},on);function on(e,t){this.defaultDoc=e,this.DOM=t,e=this.DOM.createHtmlDocument(),this.inertBodyElement=e.body,null==this.inertBodyElement&&(t=this.DOM.createElement("html",e),this.inertBodyElement=this.DOM.createElement("body",e),this.DOM.appendChild(t,this.inertBodyElement),this.DOM.appendChild(e,t)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return window.DOMParser}catch(e){return}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var sn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,an=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function un(e){return(e=String(e)).match(sn)||e.match(an)?e:(f.isDevMode()&&We.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function cn(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function ln(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,o=e;r<o.length;r++){var i,s=o[r];for(i in s)s.hasOwnProperty(i)&&(n[i]=!0)}return n}var pn=cn("area,br,col,hr,img,wbr"),dn=cn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fn=ln(mE=cn("rp,rt"),dn),hn=ln(dn,cn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mn=ln(mE,cn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gn=ln(pn,hn,mn,fn),yn=cn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vn=cn("srcset"),bn=cn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wn=ln(yn,vn,bn),Sn=(Cn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},Cn.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();gn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();wn.hasOwnProperty(n)?(yn[n]&&(e=un(e)),vn[n]&&(e=String(e).split(",").map(function(e){return un(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(In(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},Cn.prototype.endElement=function(e){e=this.DOM.nodeName(e).toLowerCase(),gn.hasOwnProperty(e)&&!pn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},Cn.prototype.chars=function(e){this.buf.push(In(e))},Cn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},Cn);function Cn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=We}var _n,En=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,An=/([^\#-~ |!])/g;function In(e){return e.replace(/&/g,"&amp;").replace(En,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(An,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var kn,Tn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Pn=/^url\(([^)]+)\)$/;function On(e){var t=kn.call(this)||this;return t._doc=e,t}L(On,kn=function(){}),On.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case f.SecurityContext.NONE:return t;case f.SecurityContext.HTML:return t instanceof Mn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=We,r=null;try{_n=_n||new rn(e,n);var o=t?String(t):"",r=_n.getInertBodyElement(o),i=5,s=o;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable")}while(i--,o=s,s=n.getInnerHTML(r),r=_n.getInertBodyElement(o),o!==s);var a=new Sn,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return f.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case f.SecurityContext.STYLE:return t instanceof Ln?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(Pn);return t&&un(t[1])===t[1]||e.match(Tn)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var o=e.charAt(r);"'"===o&&n?t=!t:'"'===o&&t&&(n=!n)}return t&&n}(e)?e:(f.isDevMode()&&We.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case f.SecurityContext.SCRIPT:if(t instanceof Bn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case f.SecurityContext.URL:return t instanceof Gn||t instanceof qn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),un(String(t)));case f.SecurityContext.RESOURCE_URL:if(t instanceof Gn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},On.prototype.checkNotSafeValue=function(e,t){if(e instanceof xn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},On.prototype.bypassSecurityTrustHtml=function(e){return new Mn(e)},On.prototype.bypassSecurityTrustStyle=function(e){return new Ln(e)},On.prototype.bypassSecurityTrustScript=function(e){return new Bn(e)},On.prototype.bypassSecurityTrustUrl=function(e){return new qn(e)},On.prototype.bypassSecurityTrustResourceUrl=function(e){return new Gn(e)},On.decorators=[{type:f.Injectable}],On.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ut]}]}]};var xn=(Nn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},Nn);function Nn(e){this.changingThisBreaksApplicationSecurity=e}var Rn,Mn=(L(Un,Rn=xn),Un.prototype.getTypeName=function(){return"HTML"},Un);function Un(){return null!==Rn&&Rn.apply(this,arguments)||this}var Dn,Ln=(L(Fn,Dn=xn),Fn.prototype.getTypeName=function(){return"Style"},Fn);function Fn(){return null!==Dn&&Dn.apply(this,arguments)||this}var jn,Bn=(L(zn,jn=xn),zn.prototype.getTypeName=function(){return"Script"},zn);function zn(){return null!==jn&&jn.apply(this,arguments)||this}var Vn,qn=(L(Kn,Vn=xn),Kn.prototype.getTypeName=function(){return"URL"},Kn);function Kn(){return null!==Vn&&Vn.apply(this,arguments)||this}var Hn,Gn=(L(Wn,Hn=xn),Wn.prototype.getTypeName=function(){return"ResourceURL"},Wn);function Wn(){return null!==Hn&&Hn.apply(this,arguments)||this}var $n=[{provide:f.PLATFORM_ID,useValue:t["ɵPLATFORM_BROWSER_ID"]},{provide:f.PLATFORM_INITIALIZER,useValue:function(){ot.makeCurrent(),ft.init()},multi:!0},{provide:t.PlatformLocation,useClass:pt,deps:[ut]},{provide:ut,useFactory:function(){return document},deps:[]}];f.createPlatformFactory(f.platformCore,"browser",$n),f.Injectable,new f.Version("5.2.11");var Yn=(Object.defineProperty(Jn.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Jn.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},Jn.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},Jn.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},Jn);function Jn(){}var Zn,Xn=(L(Qn,Zn=Yn),Object.defineProperty(Qn.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Qn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Qn);function Qn(){return null!==Zn&&Zn.apply(this,arguments)||this}function er(e){return null==e||0===e.length}var tr=new f.InjectionToken("NgValidators"),c=new f.InjectionToken("NgAsyncValidators"),nr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,rr=(or.min=function(n){return function(e){if(er(e.value)||er(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},or.max=function(n){return function(e){if(er(e.value)||er(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},or.required=function(e){return er(e.value)?{required:!0}:null},or.requiredTrue=function(e){return!0===e.value?null:{required:!0}},or.email=function(e){return er(e.value)||nr.test(e.value)?null:{email:!0}},or.minLength=function(t){return function(e){return!er(e.value)&&(e=e.value?e.value.length:0)<t?{minlength:{requiredLength:t,actualLength:e}}:null}},or.maxLength=function(t){return function(e){return e=e.value?e.value.length:0,t<e?{maxlength:{requiredLength:t,actualLength:e}}:null}},or.pattern=function(e){if(!e)return or.nullValidator;var t,n="string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),new RegExp(t)):(t=e.toString(),e);return function(e){return er(e.value)?null:(e=e.value,n.test(e)?null:{pattern:{requiredPattern:t,actualValue:e}})}},or.nullValidator=function(e){return null},or.compose=function(e){if(!e)return null;var n=e.filter(ir);return 0==n.length?null:function(e){return ar((t=e,n.map(function(e){return e(t)})));var t}},or.composeAsync=function(e){if(!e)return null;var n=e.filter(ir);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(ne(n))return Ge(n,null);if(re(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Ge(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return Ge(e,null);var o=e.pop();return Ge(e=1===e.length&&ne(e[0])?e[0]:e,null).pipe(Ue(function(e){return o.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(sr))).pipe(Ue(ar))}},or);function or(){}function ir(e){return null!=e}function sr(e){if(e=f["ɵisPromise"](e)?He(e):e,!f["ɵisObservable"](e))throw new Error("Expected validator to return Promise or Observable.");return e}function ar(e){return e=e.reduce(function(e,t){return null!=t?F({},e,t):e},{}),0===Object.keys(e).length?null:e}var p={provide:l=new f.InjectionToken("NgValueAccessor"),useExisting:f.forwardRef(function(){return ur}),multi:!0},ur=(cr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},cr.prototype.registerOnChange=function(e){this.onChange=e},cr.prototype.registerOnTouched=function(e){this.onTouched=e},cr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([f.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[p]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],cr));function cr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}S={provide:l,useExisting:f.forwardRef(function(){return lr}),multi:!0};var $e=new f.InjectionToken("CompositionEventMode"),lr=(pr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},pr.prototype.registerOnChange=function(e){this.onChange=e},pr.prototype.registerOnTouched=function(e){this.onTouched=e},pr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},pr.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},pr.prototype._compositionStart=function(){this._composing=!0},pr.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},B([f.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[S]}),z(2,f.Optional()),z(2,f.Inject($e)),V("design:paramtypes",[f.Renderer2,f.ElementRef,Boolean])],pr));function pr(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=We?We.getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}function dr(t){return t.validate?function(e){return t.validate(e)}:t}function fr(t){return t.validate?function(e){return t.validate(e)}:t}var Ze={provide:l,useExisting:f.forwardRef(function(){return hr}),multi:!0},hr=(mr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},mr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},mr.prototype.registerOnTouched=function(e){this.onTouched=e},mr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([f.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Ze]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],mr));function mr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function gr(){throw new Error("unimplemented")}var yr,vr=(L(br,yr=Yn),Object.defineProperty(br.prototype,"validator",{get:gr,enumerable:!0,configurable:!0}),Object.defineProperty(br.prototype,"asyncValidator",{get:gr,enumerable:!0,configurable:!0}),br);function br(){var e=null!==yr&&yr.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}function wr(){this._accessors=[]}bt={provide:l,useExisting:f.forwardRef(function(){return Sr}),multi:!0},wr.prototype.add=function(e,t){this._accessors.push([e,t])},wr.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},wr.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},wr.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},vu=B([f.Injectable()],wr);var Sr=(Cr.prototype.ngOnInit=function(){this._control=this._injector.get(vr),this._checkName(),this._registry.add(this._control,this)},Cr.prototype.ngOnDestroy=function(){this._registry.remove(this)},Cr.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},Cr.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},Cr.prototype.fireUncheck=function(e){this.writeValue(e)},Cr.prototype.registerOnTouched=function(e){this.onTouched=e},Cr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Cr.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},Cr.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},B([f.Input(),V("design:type",String)],Cr.prototype,"name",void 0),B([f.Input(),V("design:type",String)],Cr.prototype,"formControlName",void 0),B([f.Input(),V("design:type",Object)],Cr.prototype,"value",void 0),B([f.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[bt]}),V("design:paramtypes",[f.Renderer2,f.ElementRef,vu,f.Injector])],Cr));function Cr(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var yt={provide:l,useExisting:f.forwardRef(function(){return _r}),multi:!0},_r=(Er.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},Er.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},Er.prototype.registerOnTouched=function(e){this.onTouched=e},Er.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([f.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[yt]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],Er));function Er(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Ar='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Ir='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',kr='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Tr=(Pr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ar)},Pr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Ir+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+kr)},Pr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Ar)},Pr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ir)},Pr.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},Pr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Pr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Pr);function Pr(){}function Or(e,t){return null==e?""+t:(e+": "+(t=t&&"object"==typeof t?"Object":t)).slice(0,50)}dn={provide:l,useExisting:f.forwardRef(function(){return xr}),multi:!0};var xr=(Object.defineProperty(Nr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Nr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1),e=Or(t,e),this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},Nr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},Nr.prototype.registerOnTouched=function(e){this.onTouched=e},Nr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Nr.prototype._registerOption=function(){return(this._idCounter++).toString()},Nr.prototype._getOptionId=function(e){var t,n;try{for(var r=H(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Nr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},B([f.Input(),V("design:type",Function),V("design:paramtypes",[Function])],Nr.prototype,"compareWith",null),B([f.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[dn]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],Nr));function Nr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ɵlooseIdentical"]}function Rr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}function Mr(e,t){return null==e?""+t:(e+": "+(t=(t="string"==typeof t?"'"+t+"'":t)&&"object"==typeof t?"Object":t)).slice(0,50)}Object.defineProperty(Rr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Or(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Rr.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),Rr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Rr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},B([f.Input("ngValue"),V("design:type",Object),V("design:paramtypes",[Object])],Rr.prototype,"ngValue",null),B([f.Input("value"),V("design:type",Object),V("design:paramtypes",[Object])],Rr.prototype,"value",null),mE=B([f.Directive({selector:"option"}),z(2,f.Optional()),z(2,f.Host()),V("design:paramtypes",[f.ElementRef,f.Renderer2,xr])],Rr),hn={provide:l,useExisting:f.forwardRef(function(){return Ur}),multi:!0};var Ur=(Object.defineProperty(Dr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Dr.prototype.writeValue=function(e){var n,t=this;this.value=e,e=Array.isArray(e)?(n=e.map(function(e){return t._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(e)},Dr.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var o=n.item(r),i=a._getOptionValue(o.value);t.push(i)}else for(n=e.options,r=0;r<n.length;r++)(o=n.item(r)).selected&&(i=a._getOptionValue(o.value),t.push(i));a.value=t,s(t)}},Dr.prototype.registerOnTouched=function(e){this.onTouched=e},Dr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Dr.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},Dr.prototype._getOptionId=function(e){var t,n;try{for(var r=H(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Dr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},B([f.Input(),V("design:type",Function),V("design:paramtypes",[Function])],Dr.prototype,"compareWith",null),B([f.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[hn]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],Dr));function Dr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ɵlooseIdentical"]}function Lr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function Fr(e,t){return W(t.path,[e])}function jr(t,n){var r,o,i,e,s;t||qr(n,"Cannot find control with"),n.valueAccessor||qr(n,"No value accessor for form control with"),t.validator=rr.compose([t.validator,n.validator]),t.asyncValidator=rr.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(o=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Br(r,o)}),i=n,t.registerOnChange(function(e,t){i.valueAccessor.writeValue(e),t&&i.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Br(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function Br(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function zr(e,t){null==e&&qr(t,"Cannot find control with"),e.validator=rr.compose([e.validator,t.validator]),e.asyncValidator=rr.composeAsync([e.asyncValidator,t.asyncValidator])}function Vr(e){return qr(e,"There is no FormControl instance attached to form control element with")}function qr(e,t){throw e=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+e)}function Kr(e){return null!=e?rr.compose(e.map(dr)):null}function Hr(e){return null!=e?rr.composeAsync(e.map(fr)):null}function Gr(e,t){return e.hasOwnProperty("model")&&((e=e.model).isFirstChange()||!f["ɵlooseIdentical"](t,e.currentValue))}Object.defineProperty(Lr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Mr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Lr.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Mr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),Lr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Lr.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},Lr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},B([f.Input("ngValue"),V("design:type",Object),V("design:paramtypes",[Object])],Lr.prototype,"ngValue",null),B([f.Input("value"),V("design:type",Object),V("design:paramtypes",[Object])],Lr.prototype,"value",null),mn=B([f.Directive({selector:"option"}),z(2,f.Optional()),z(2,f.Host()),V("design:paramtypes",[f.ElementRef,f.Renderer2,Ur])],Lr);var Wr=[ur,_r,hr,xr,Ur,Sr];function $r(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Yr(n,e){if(!e)return null;Array.isArray(e)||qr(n,"Value accessor was not provided as an array for form control with");var r=void 0,o=void 0,i=void 0;return e.forEach(function(e){var t;e.constructor===lr?r=e:(t=e,Wr.some(function(e){return t.constructor===e})?(o&&qr(n,"More than one built-in value accessor matches form control with"),o=e):(i&&qr(n,"More than one custom value accessor matches form control with"),i=e))}),i||o||r||(qr(n,"No valid value accessor for form control with"),null)}function Jr(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function Zr(e,t,n,r){f.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Tr.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var Xr,Qr=(L(eo,Xr=Xn),eo.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},eo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(eo.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"path",{get:function(){return Fr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"validator",{get:function(){return Kr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"asyncValidator",{get:function(){return Hr(this._asyncValidators)},enumerable:!0,configurable:!0}),eo.prototype._checkParentType=function(){},eo);function eo(){return null!==Xr&&Xr.apply(this,arguments)||this}function to(e){this._cd=e}Object.defineProperty(to.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(to.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(to.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(to.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(to.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(to.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(to.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0});var no,bn={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},pt=(L(ro,no=fn=to),B([f.Directive({selector:"[formControlName],[ngModel],[formControl]",host:bn}),z(0,f.Self()),V("design:paramtypes",[vr])],ro));function ro(e){return no.call(this,e)||this}var oo,$n=(L(io,oo=fn),B([f.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:bn}),z(0,f.Self()),V("design:paramtypes",[Xn])],io));function io(e){return oo.call(this,e)||this}var so="VALID",ao="INVALID",uo="PENDING",co="DISABLED";function lo(e){return e=fo(e)?e.validators:e,Array.isArray(e)?Kr(e):e||null}function po(e,t){return e=fo(t)?t.asyncValidators:e,Array.isArray(e)?Hr(e):e||null}function fo(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function ho(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}Object.defineProperty(ho.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"valid",{get:function(){return this.status===so},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"invalid",{get:function(){return this.status===ao},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"pending",{get:function(){return this.status==uo},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"disabled",{get:function(){return this.status===co},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"enabled",{get:function(){return this.status!==co},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"updateOn",{get:function(){return this._updateOn||(this.parent?this.parent.updateOn:"change")},enumerable:!0,configurable:!0}),ho.prototype.setValidators=function(e){this.validator=lo(e)},ho.prototype.setAsyncValidators=function(e){this.asyncValidator=po(e)},ho.prototype.clearValidators=function(){this.validator=null},ho.prototype.clearAsyncValidators=function(){this.asyncValidator=null},ho.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},ho.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},ho.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},ho.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},ho.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=uo)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},ho.prototype.disable=function(t){void 0===t&&(t={}),this.status=co,this.errors=null,this._forEachChild(function(e){e.disable(F({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},ho.prototype.enable=function(t){void 0===t&&(t={}),this.status=so,this._forEachChild(function(e){e.enable(F({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},ho.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},ho.prototype.setParent=function(e){this._parent=e},ho.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==so&&this.status!==uo||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},ho.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},ho.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?co:so},ho.prototype._runValidator=function(){return this.validator?this.validator(this):null},ho.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=uo,e=sr(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},ho.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},ho.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},ho.prototype.get=function(e){return null==e||(e=e instanceof Array?e:e.split("."))instanceof Array&&0===e.length?null:e.reduce(function(e,t){return e instanceof bo?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Co&&e.at(t)||null},this)},ho.prototype.getError=function(e,t){return(t=t?this.get(t):this)&&t.errors?t.errors[e]:null},ho.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(ho.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),ho.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},ho.prototype._initObservables=function(){this.valueChanges=new f.EventEmitter,this.statusChanges=new f.EventEmitter},ho.prototype._calculateStatus=function(){return this._allControlsDisabled()?co:this.errors?ao:this._anyControlsHaveStatus(uo)?uo:this._anyControlsHaveStatus(ao)?ao:so},ho.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},ho.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},ho.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},ho.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},ho.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},ho.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},ho.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},ho.prototype._setUpdateStrategy=function(e){fo(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)};var mo,go=(L(yo,mo=p=ho),yo.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},yo.prototype.patchValue=function(e,t){this.setValue(e,t=void 0===t?{}:t)},yo.prototype.reset=function(e,t){void 0===t&&(t={}),this._applyFormState(e=void 0===e?null:e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},yo.prototype._updateValue=function(){},yo.prototype._anyControls=function(e){return!1},yo.prototype._allControlsDisabled=function(){return this.disabled},yo.prototype.registerOnChange=function(e){this._onChange.push(e)},yo.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},yo.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},yo.prototype._forEachChild=function(e){},yo.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},yo.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},yo);function yo(e,t,n){return void 0===e&&(e=null),(n=mo.call(this,lo(t),po(n,t))||this)._onChange=[],n._applyFormState(e),n._setUpdateStrategy(t),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n._initObservables(),n}var vo,bo=(L(wo,vo=p),wo.prototype.registerControl=function(e,t){return this.controls[e]||((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},wo.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},wo.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},wo.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},wo.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},wo.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},wo.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},wo.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},wo.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof go?t.value:t.getRawValue(),e})},wo.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},wo.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},wo.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},wo.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},wo.prototype._updateValue=function(){this.value=this._reduceValue()},wo.prototype._anyControls=function(n){var r=this,o=!1;return this._forEachChild(function(e,t){o=o||r.contains(t)&&n(e)}),o},wo.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},wo.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},wo.prototype._allControlsDisabled=function(){var e,t;try{for(var n=H(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var o=r.value;if(this.controls[o].enabled)return!1}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<Object.keys(this.controls).length||this.disabled},wo.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},wo);function wo(e,t,n){return(n=vo.call(this,lo(t),po(n,t))||this).controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var So,Co=(L(_o,So=p),_o.prototype.at=function(e){return this.controls[e]},_o.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},_o.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},_o.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},_o.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(_o.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),_o.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},_o.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},_o.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},_o.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof go?e.value:e.getRawValue()})},_o.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},_o.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},_o.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},_o.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},_o.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},_o.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},_o.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},_o.prototype._allControlsDisabled=function(){var e,t;try{for(var n=H(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<this.controls.length||this.disabled},_o.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},_o);function _o(e,t,n){return(n=So.call(this,lo(t),po(n,t))||this).controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var Eo,S={provide:Xn,useExisting:f.forwardRef(function(){return Io})},Ao=Promise.resolve(null),Io=(L(ko,Eo=Xn),ko.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(ko.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),ko.prototype.addControl=function(t){var n=this;Ao.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),jr(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},ko.prototype.getControl=function(e){return this.form.get(e.path)},ko.prototype.removeControl=function(t){var n=this;Ao.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),Jr(n._directives,t)})},ko.prototype.addFormGroup=function(n){var r=this;Ao.then(function(){var e=r._findContainer(n.path),t=new bo({});zr(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},ko.prototype.removeFormGroup=function(t){var n=this;Ao.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},ko.prototype.getFormGroup=function(e){return this.form.get(e.path)},ko.prototype.updateModel=function(e,t){var n=this;Ao.then(function(){n.form.get(e.path).setValue(t)})},ko.prototype.setValue=function(e){this.control.setValue(e)},ko.prototype.onSubmit=function(e){return this.submitted=!0,$r(this.form,this._directives),this.ngSubmit.emit(e),!1},ko.prototype.onReset=function(){this.resetForm()},ko.prototype.resetForm=function(e){this.form.reset(e=void 0===e?void 0:e),this.submitted=!1},ko.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},ko.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},B([f.Input("ngFormOptions"),V("design:type",Object)],ko.prototype,"options",void 0),B([f.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[S],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(tr)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(c)),V("design:paramtypes",[Array,Array])],ko));function ko(e,t){var n=Eo.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new f.EventEmitter,n.form=new bo({},Kr(e),Hr(t)),n}var To=(Po.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Ar+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},Po.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Ir+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+kr)},Po.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},Po.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Ir+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+kr)},Po);function Po(){}var Oo,xo,$e={provide:Xn,useExisting:f.forwardRef(function(){return No})},No=(L(Ro,Oo=Qr),(xo=Ro).prototype._checkParentType=function(){this._parent instanceof xo||this._parent instanceof Io||To.modelGroupParentException()},B([f.Input("ngModelGroup"),V("design:type",String)],Ro.prototype,"name",void 0),xo=B([f.Directive({selector:"[ngModelGroup]",providers:[$e],exportAs:"ngModelGroup"}),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(tr)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(c)),V("design:paramtypes",[Xn,Array,Array])],Ro));function Ro(e,t,n){var r=Oo.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Mo,Ze={provide:vr,useExisting:f.forwardRef(function(){return Do})},Uo=Promise.resolve(null),Do=(L(Lo,Mo=vr),Lo.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Gr(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},Lo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(Lo.prototype,"path",{get:function(){return this._parent?Fr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(Lo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Lo.prototype,"validator",{get:function(){return Kr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Lo.prototype,"asyncValidator",{get:function(){return Hr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Lo.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Lo.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},Lo.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},Lo.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},Lo.prototype._setUpStandalone=function(){jr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},Lo.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},Lo.prototype._checkParentType=function(){!(this._parent instanceof No)&&this._parent instanceof Qr?To.formGroupNameException():this._parent instanceof No||this._parent instanceof Io||To.modelParentException()},Lo.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||To.missingNameException()},Lo.prototype._updateValue=function(e){var t=this;Uo.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},Lo.prototype._updateDisabled=function(e){var t=this,n=""===(e=e.isDisabled.currentValue)||e&&"false"!==e;Uo.then(function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()})},B([f.Input(),V("design:type",String)],Lo.prototype,"name",void 0),B([f.Input("disabled"),V("design:type",Boolean)],Lo.prototype,"isDisabled",void 0),B([f.Input("ngModel"),V("design:type",Object)],Lo.prototype,"model",void 0),B([f.Input("ngModelOptions"),V("design:type",Object)],Lo.prototype,"options",void 0),B([f.Output("ngModelChange"),V("design:type",Object)],Lo.prototype,"update",void 0),B([f.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[Ze],exportAs:"ngModel"}),z(0,f.Optional()),z(0,f.Host()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(tr)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(c)),z(3,f.Optional()),z(3,f.Self()),z(3,f.Inject(l)),V("design:paramtypes",[Xn,Array,Array,Array])],Lo));function Lo(e,t,n,r){var o=Mo.call(this)||this;return o.control=new go,o._registered=!1,o.update=new f.EventEmitter,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=Yr(o,r),o}var Fo,jo,Bo=new f.InjectionToken("NgModelWithFormControlWarning"),Yn={provide:vr,useExisting:f.forwardRef(function(){return zo})},zo=(L(Vo,Fo=vr),jo=Vo,Object.defineProperty(Vo.prototype,"isDisabled",{set:function(e){Tr.disabledAttrWarning()},enumerable:!0,configurable:!0}),Vo.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(jr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Gr(e,this.viewModel)&&(Zr("formControl",jo,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(Vo.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Vo.prototype,"validator",{get:function(){return Kr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Vo.prototype,"asyncValidator",{get:function(){return Hr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Vo.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Vo.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Vo.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},Vo._ngModelWarningSentOnce=!1,B([f.Input("formControl"),V("design:type",go)],Vo.prototype,"form",void 0),B([f.Input("disabled"),V("design:type",Boolean),V("design:paramtypes",[Boolean])],Vo.prototype,"isDisabled",null),B([f.Input("ngModel"),V("design:type",Object)],Vo.prototype,"model",void 0),B([f.Output("ngModelChange"),V("design:type",Object)],Vo.prototype,"update",void 0),jo=B([f.Directive({selector:"[formControl]",providers:[Yn],exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(tr)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(c)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(l)),z(3,f.Optional()),z(3,f.Inject(Bo)),V("design:paramtypes",[Array,Array,Array,Object])],Vo));function Vo(e,t,n,r){var o=Fo.call(this)||this;return o._ngModelWarningConfig=r,o.update=new f.EventEmitter,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=t||[],o.valueAccessor=Yr(o,n),o}var qo,bt={provide:Xn,useExisting:f.forwardRef(function(){return Ko})},Ko=(L(Ho,qo=Xn),Ho.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(Ho.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Ho.prototype.addControl=function(e){var t=this.form.get(e.path);return jr(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},Ho.prototype.getControl=function(e){return this.form.get(e.path)},Ho.prototype.removeControl=function(e){Jr(this.directives,e)},Ho.prototype.addFormGroup=function(e){var t=this.form.get(e.path);zr(t,e),t.updateValueAndValidity({emitEvent:!1})},Ho.prototype.removeFormGroup=function(e){},Ho.prototype.getFormGroup=function(e){return this.form.get(e.path)},Ho.prototype.addFormArray=function(e){var t=this.form.get(e.path);zr(t,e),t.updateValueAndValidity({emitEvent:!1})},Ho.prototype.removeFormArray=function(e){},Ho.prototype.getFormArray=function(e){return this.form.get(e.path)},Ho.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},Ho.prototype.onSubmit=function(e){return this.submitted=!0,$r(this.form,this.directives),this.ngSubmit.emit(e),!1},Ho.prototype.onReset=function(){this.resetForm()},Ho.prototype.resetForm=function(e){this.form.reset(e=void 0===e?void 0:e),this.submitted=!1},Ho.prototype._updateDomValue=function(){var o=this;this.directives.forEach(function(e){var t,n,r=o.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return Vr(n)}),n.valueAccessor.registerOnTouched(function(){return Vr(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&jr(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},Ho.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},Ho.prototype._updateValidators=function(){var e=Kr(this._validators);this.form.validator=rr.compose([this.form.validator,e]),e=Hr(this._asyncValidators),this.form.asyncValidator=rr.composeAsync([this.form.asyncValidator,e])},Ho.prototype._checkFormPresent=function(){this.form||Tr.missingFormException()},B([f.Input("formGroup"),V("design:type",bo)],Ho.prototype,"form",void 0),B([f.Output(),V("design:type",Object)],Ho.prototype,"ngSubmit",void 0),B([f.Directive({selector:"[formGroup]",providers:[bt],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(tr)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(c)),V("design:paramtypes",[Array,Array])],Ho));function Ho(e,t){var n=qo.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new f.EventEmitter,n}var Go,yt={provide:Xn,useExisting:f.forwardRef(function(){return Wo})},Wo=(L($o,Go=Qr),$o.prototype._checkParentType=function(){Xo(this._parent)&&Tr.groupParentException()},B([f.Input("formGroupName"),V("design:type",String)],$o.prototype,"name",void 0),B([f.Directive({selector:"[formGroupName]",providers:[yt]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(tr)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(c)),V("design:paramtypes",[Xn,Array,Array])],$o));function $o(e,t,n){var r=Go.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Yo,dn={provide:Xn,useExisting:f.forwardRef(function(){return Jo})},Jo=(L(Zo,Yo=Xn),Zo.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Zo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Zo.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Zo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zo.prototype,"path",{get:function(){return Fr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Zo.prototype,"validator",{get:function(){return Kr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Zo.prototype,"asyncValidator",{get:function(){return Hr(this._asyncValidators)},enumerable:!0,configurable:!0}),Zo.prototype._checkParentType=function(){Xo(this._parent)&&Tr.arrayParentException()},B([f.Input("formArrayName"),V("design:type",String)],Zo.prototype,"name",void 0),B([f.Directive({selector:"[formArrayName]",providers:[dn]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(tr)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(c)),V("design:paramtypes",[Xn,Array,Array])],Zo));function Zo(e,t,n){var r=Yo.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function Xo(e){return!(e instanceof Wo||e instanceof Ko||e instanceof Jo)}var Qo,ei,hn={provide:vr,useExisting:f.forwardRef(function(){return ti})},ti=(L(ni,Qo=vr),ei=ni,Object.defineProperty(ni.prototype,"isDisabled",{set:function(e){Tr.disabledAttrWarning()},enumerable:!0,configurable:!0}),ni.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),Gr(e,this.viewModel)&&(Zr("formControlName",ei,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},ni.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},ni.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(ni.prototype,"path",{get:function(){return Fr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"validator",{get:function(){return Kr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"asyncValidator",{get:function(){return Hr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),ni.prototype._checkParentType=function(){!(this._parent instanceof Wo)&&this._parent instanceof Qr?Tr.ngModelGroupException():this._parent instanceof Wo||this._parent instanceof Ko||this._parent instanceof Jo||Tr.controlParentException()},ni.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},ni._ngModelWarningSentOnce=!1,B([f.Input("formControlName"),V("design:type",String)],ni.prototype,"name",void 0),B([f.Input("disabled"),V("design:type",Boolean),V("design:paramtypes",[Boolean])],ni.prototype,"isDisabled",null),B([f.Input("ngModel"),V("design:type",Object)],ni.prototype,"model",void 0),B([f.Output("ngModelChange"),V("design:type",Object)],ni.prototype,"update",void 0),ei=B([f.Directive({selector:"[formControlName]",providers:[hn]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(tr)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(c)),z(3,f.Optional()),z(3,f.Self()),z(3,f.Inject(l)),z(4,f.Optional()),z(4,f.Inject(Bo)),V("design:paramtypes",[Xn,Array,Array,Array,Object])],ni));function ni(e,t,n,r,o){var i=Qo.call(this)||this;return i._ngModelWarningConfig=o,i._added=!1,i.update=new f.EventEmitter,i._ngModelWarningSent=!1,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=Yr(i,r),i}var fn={provide:tr,useExisting:f.forwardRef(function(){return ri}),multi:!0},bn={provide:tr,useExisting:f.forwardRef(function(){return si}),multi:!0},ri=(Object.defineProperty(oi.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),oi.prototype.validate=function(e){return this.required?rr.required(e):null},oi.prototype.registerOnValidatorChange=function(e){this._onChange=e},B([f.Input(),V("design:type",Object),V("design:paramtypes",[Object])],oi.prototype,"required",null),B([f.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[fn],host:{"[attr.required]":'required ? "" : null'}})],oi));function oi(){}var ii,si=(L(ai,ii=ri),ai.prototype.validate=function(e){return this.required?rr.requiredTrue(e):null},B([f.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[bn],host:{"[attr.required]":'required ? "" : null'}})],ai));function ai(){return null!==ii&&ii.apply(this,arguments)||this}var p={provide:tr,useExisting:f.forwardRef(function(){return ui}),multi:!0},ui=(Object.defineProperty(ci.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),ci.prototype.validate=function(e){return this._enabled?rr.email(e):null},ci.prototype.registerOnValidatorChange=function(e){this._onChange=e},B([f.Input(),V("design:type",Object),V("design:paramtypes",[Object])],ci.prototype,"email",null),B([f.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[p]})],ci));function ci(){}var S={provide:tr,useExisting:f.forwardRef(function(){return li}),multi:!0},li=(pi.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},pi.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},pi.prototype.registerOnValidatorChange=function(e){this._onChange=e},pi.prototype._createValidator=function(){this._validator=rr.minLength(parseInt(this.minlength,10))},B([f.Input(),V("design:type",String)],pi.prototype,"minlength",void 0),B([f.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[S],host:{"[attr.minlength]":"minlength ? minlength : null"}})],pi));function pi(){}var $e={provide:tr,useExisting:f.forwardRef(function(){return di}),multi:!0},di=(fi.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},fi.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},fi.prototype.registerOnValidatorChange=function(e){this._onChange=e},fi.prototype._createValidator=function(){this._validator=rr.maxLength(parseInt(this.maxlength,10))},B([f.Input(),V("design:type",String)],fi.prototype,"maxlength",void 0),B([f.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[$e],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],fi));function fi(){}var hi,Ze={provide:tr,useExisting:f.forwardRef(function(){return mi}),multi:!0},mi=(gi.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},gi.prototype.validate=function(e){return this._validator(e)},gi.prototype.registerOnValidatorChange=function(e){this._onChange=e},gi.prototype._createValidator=function(){this._validator=rr.pattern(this.pattern)},B([f.Input(),V("design:type",Object)],gi.prototype,"pattern",void 0),B([f.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Ze],host:{"[attr.pattern]":"pattern ? pattern : null"}})],gi));function gi(){}function yi(){}function vi(){}function bi(e){this.viewContainerRef=e}yi.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),e=null!=t?t.validator:null,t=null!=t?t.asyncValidator:null;return new bo(n,e,t)},yi.prototype.control=function(e,t,n){return new go(e,t,n)},yi.prototype.array=function(e,t,n){var r=this,e=e.map(function(e){return r._createControl(e)});return new Co(e,t,n)},yi.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},yi.prototype._createControl=function(e){if(e instanceof go||e instanceof bo||e instanceof Co)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},Yn=B([f.Injectable()],yi),new f.Version("6.1.10"),bt=[B([f.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],function(){}),mE,mn,lr,hr,_r,ur,xr,Ur,Sr,pt,$n,ri,li,di,mi,si,ui],yt=[Do,No,Io],dn=[zo,Ko,ti,Wo,Jo],hn=B([f.NgModule({declarations:bt,exports:bt})],function(){}),c=B([f.NgModule({declarations:yt,providers:[vu],exports:[hn,yt]})],function(){}),(hi=vi).withConfig=function(e){return{ngModule:hi,providers:[{provide:Bo,useValue:e.warnOnNgModelWithFormControl}]}},hi=B([f.NgModule({declarations:[dn],providers:[Yn,vu],exports:[hn,dn]})],vi),bi.decorators=[{type:f.Directive,args:[{selector:"[component-host]"}]}],bi.ctorParameters=function(){return[{type:f.ViewContainerRef}]},l=bi;function wi(e,t){this.component=e,this.data=t}var Si=new A.Logger("AuthDecorator");var Ci=function(e,t){return(Ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function _i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ci(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ei=function(){return(Ei=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ai(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Ii(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function ki(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function Ti(e){var t;return F(F({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Oi(e):function(){return xi(e)},isCustomEndpoint:!!e.endpoint})}function Pi(e){if(!e.region)throw new Error("Region is missing");return F(F({},e),{region:Ni(e.region)})}var Xn="3.6.1",Oi=function(e){var t=e.endpoint,e=e.urlParser;if("string"==typeof t){var n=Promise.resolve(e(t));return function(){return n}}if("object"!=typeof t)return t;var r=Promise.resolve(t);return function(){return r}},xi=function(r){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return t=void 0===(t=r.tls)||t,[4,r.region()];case 1:if(n=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(!(n=(null!==(n=e.sent())&&void 0!==n?n:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+n)]}})})},fn={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},bn={preferredFile:"credentials"},Ni=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},p="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Ri(){throw new Error("setTimeout has not been defined")}function Mi(){throw new Error("clearTimeout has not been defined")}var Ui=Ri,Di=Mi;function Li(t){if(Ui===setTimeout)return setTimeout(t,0);if((Ui===Ri||!Ui)&&setTimeout)return Ui=setTimeout,setTimeout(t,0);try{return Ui(t,0)}catch(e){try{return Ui.call(null,t,0)}catch(e){return Ui.call(this,t,0)}}}"function"==typeof p.setTimeout&&(Ui=setTimeout),"function"==typeof p.clearTimeout&&(Di=clearTimeout);var Fi,ji=[],Bi=!1,zi=-1;function Vi(){Bi&&Fi&&(Bi=!1,Fi.length?ji=Fi.concat(ji):zi=-1,ji.length&&qi())}function qi(){if(!Bi){var e=Li(Vi);Bi=!0;for(var t=ji.length;t;){for(Fi=ji,ji=[];++zi<t;)Fi&&Fi[zi].run();zi=-1,t=ji.length}Fi=null,Bi=!1,function(t){if(Di===clearTimeout)return clearTimeout(t);if((Di===Mi||!Di)&&clearTimeout)return Di=clearTimeout,clearTimeout(t);try{Di(t)}catch(e){try{return Di.call(null,t)}catch(e){return Di.call(this,t)}}}(e)}}function Ki(e,t){this.fun=e,this.array=t}function Hi(){}Ki.prototype.run=function(){this.fun.apply(null,this.array)},pt=mn=mE=Ze=tr=$e=S=Hi;var Gi,Wi=p.performance||{},$i=Wi.now||Wi.mozNow||Wi.msNow||Wi.oNow||Wi.webkitNow||function(){return(new Date).getTime()},Yi=new Date,Ji={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ji.push(new Ki(e,t)),1!==ji.length||Bi||Li(qi)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:S,addListener:$e,once:tr,off:Ze,removeListener:mE,removeAllListeners:mn,emit:pt,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*$i.call(Wi),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Yi)/1e3}},Zi=(L(Xi,Gi=Error),Xi);function Xi(e,t){return void 0===t&&(t=!0),(e=Gi.call(this,e)||this).tryNextLink=t,e}function Qi(t){return new Promise(function(r,o){var e=g.request(F({method:"GET"},t));e.on("error",function(e){o(Object.assign(new Zi("Unable to connect to instance metadata service"),e))}),e.on("timeout",function(){o(new Error("TimeoutError"))}),e.on("response",function(e){var t=e.statusCode;((t=void 0===t?400:t)<200||300<=t)&&o(Object.assign(new Zi("Error response received from instance metadata service"),{statusCode:t}));var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){r(m.Buffer.concat(n))})}),e.end()})}function es(e){var t=e.maxRetries,e=e.timeout;return{maxRetries:void 0===t?is:t,timeout:void 0===e?os:e}}function ts(e,t){for(var n=e(),r=0;r<t;r++)n=n.catch(e);return n}function ns(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration}function rs(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}}var os=1e3,is=0,ss="AWS_CONTAINER_CREDENTIALS_FULL_URI",as="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",us="AWS_CONTAINER_AUTHORIZATION_TOKEN";function cs(e){var t=this,u=(e=es(e=void 0===e?{}:e)).timeout,n=e.maxRetries;return function(){return function(){if(Ji.env[as])return Promise.resolve({hostname:"169.254.170.2",path:Ji.env[as]});if(Ji.env[ss]){var e=C.parse(Ji.env[ss]);return e.hostname&&e.hostname in ls?e.protocol&&e.protocol in ps?Promise.resolve(F(F({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new Zi(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new Zi(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new Zi("The container metadata credential provider cannot be used unless the "+as+" or "+ss+" environment variable is set",!1))}().then(function(a){return ts(function(){return q(t,void 0,void 0,function(){var o,i,s;return K(this,function(e){switch(e.label){case 0:return s=(i=JSON).parse,[4,(t=u,n=a,Ji.env[us]&&((r=void 0===(r=n.headers)?{}:r).Authorization=Ji.env[us],n.headers=r),Qi(F(F({},n),{timeout:t})).then(function(e){return e.toString()}))];case 1:if(o=s.apply(i,[e.sent()]),!ns(o))throw new Zi("Invalid response received from instance metadata service.");return[2,rs(o)]}var t,n,r})})},n)})}}var ls={localhost:!0,"127.0.0.1":!0},ps={"http:":!0,"https:":!0};function ds(e){var t=void 0===(t=(e=void 0===e?{}:e).filepath)?Ji.env.AWS_SHARED_CREDENTIALS_FILE||h.join(bs(),".aws","credentials"):t,e=void 0===(e=e.configFilepath)?Ji.env.AWS_CONFIG_FILE||h.join(bs(),".aws","config"):e;return Promise.all([vs(e).then(ys).then(gs).catch(ms),vs(t).then(ys).catch(ms)]).then(function(e){return{configFile:(e=G(e,2))[0],credentialsFile:e[1]}})}function fs(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&-1<["undefined","string"].indexOf(typeof e.aws_session_token)}function hs(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}function ms(){return{}}function gs(e){var t,n,r={};try{for(var o=H(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s,a,u,c=i.value;"default"===c?r.default=e.default:(s=Es.exec(c))&&((a=G(s,3))[0],a[1],(u=a[2])&&(r[u]=e[c]))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function ys(e){var t,n,r,o={};try{for(var i=H(e.split(/\r?\n/)),s=i.next();!s.done;s=i.next()){var a,u=s.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(r=c[1],As.includes(r))throw new Error('Found invalid profile name "'+r+'"')}else!r||(a=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(o[r]=o[r]||{},o[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o}function vs(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function bs(){var e=(r=Ji.env).HOME,t=r.USERPROFILE,n=r.HOMEPATH,r=void 0===(r=r.HOMEDRIVE)?"C:"+h.sep:r;return e||t||(n?""+r+n:i.homedir())}function ws(e){return e.profile||Ji.env[Is]||"default"}var Ss,Cs="169.254.169.254",_s="/latest/meta-data/iam/security-credentials/",Es=/^profile\s(["'])?([^\1]+)\1$/,As=["__proto__","profile __proto__"],Is="AWS_PROFILE",ks=function(p,d,f,h){return void 0===h&&(h={}),q(void 0,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l;return K(this,function(e){switch(e.label){case 0:if(n=d[p],0<Object.keys(h).length&&fs(n))return[2,hs(n)];if(t=n,!(Boolean(t)&&"object"==typeof t&&"string"==typeof t.role_arn&&"string"==typeof t.source_profile&&-1<["undefined","string"].indexOf(typeof t.role_session_name)&&-1<["undefined","string"].indexOf(typeof t.external_id)&&-1<["undefined","string"].indexOf(typeof t.mfa_serial)))return[3,4];if(a=n.external_id,r=n.mfa_serial,o=n.role_arn,l=n.role_session_name,s=void 0===l?"aws-sdk-js-"+Date.now():l,i=n.source_profile,!f.roleAssumer)throw new Zi("Profile "+p+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(i in h)throw new Zi("Detected a cycle attempting to resolve credentials for profile "+ws(f)+". Profiles visited: "+Object.keys(h).join(", "),!1);if(l=ks(i,d,f,F(F({},h),((l={})[i]=!0,l))),s={RoleArn:o,RoleSessionName:s,ExternalId:a},!r)return[3,2];if(!f.mfaCodeProvider)throw new Zi("Profile "+p+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return s.SerialNumber=r,a=s,[4,f.mfaCodeProvider(r)];case 1:a.TokenCode=e.sent(),e.label=2;case 2:return c=(u=f).roleAssumer,[4,l];case 3:return[2,c.apply(u,[e.sent(),s])];case 4:if(fs(n))return[2,hs(n)];throw new Zi("Profile "+p+" could not be found or parsed in shared credentials file.")}var t})})},Ts=(L(Ps,Ss=Error),Ps);function Ps(e,t){return void 0===t&&(t=!0),(e=Ss.call(this,e)||this).tryNextLink=t,e}function Os(){return{}}function xs(e){var t,n,r={};try{for(var o=H(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s,a,u,c=i.value;"default"===c?r.default=e.default:(s=Us.exec(c))&&((a=G(s,3))[0],a[1],(u=a[2])&&(r[u]=e[c]))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function Ns(e){var t,n,r,o={};try{for(var i=H(e.split(/\r?\n/)),s=i.next();!s.done;s=i.next()){var a,u=s.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(r=c[1],Ds.includes(r))throw new Error('Found invalid profile name "'+r+'"')}else!r||(a=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(o[r]=o[r]||{},o[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o}function Rs(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function Ms(){var e=(r=Ji.env).HOME,t=r.USERPROFILE,n=r.HOMEPATH,r=void 0===(r=r.HOMEDRIVE)?"C:"+h.sep:r;return e||t||(n?""+r+n:i.homedir())}var Us=/^profile\s(["'])?([^\1]+)\1$/,Ds=["__proto__","profile __proto__"],$n=function(e){var t=F({profile:Ji.env[Is]},e=void 0===e?{}:e);t.loadedConfig||(t.loadedConfig=ds(e));var n,r,o,a,i,s,u,c,l,p,d,e=[(void 0===(r=t)&&(r={}),function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,(n=r,q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,void 0===(t=n.loadedConfig)?ds(n):t];case 1:return t=e.sent(),[2,F(F({},t.configFile),t.credentialsFile)]}})}))];case 1:return t=e.sent(),[2,ks(ws(r),t,r)]}var n})})}),(void 0===(n=t)&&(n={}),function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,(o=n,q(void 0,void 0,void 0,function(){var r;return K(this,function(e){switch(e.label){case 0:return[4,void 0===(r=o.loadedConfig)?(n=void 0===(n=(t=void 0===(t=o)?{}:t).filepath)?Ji.env.AWS_SHARED_CREDENTIALS_FILE||h.join(Ms(),".aws","credentials"):n,t=void 0===(t=t.configFilepath)?Ji.env.AWS_CONFIG_FILE||h.join(Ms(),".aws","config"):t,Promise.all([Rs(t).then(Ns).then(xs).catch(Os),Rs(n).then(Ns).catch(Os)]).then(function(e){return{configFile:(e=G(e,2))[0],credentialsFile:e[1]}})):r];case 1:return r=e.sent(),[2,F(F({},r.configFile),r.credentialsFile)]}var t,n})}))];case 1:return t=e.sent(),[2,(s=n.profile||Ji.env.AWS_PROFILE||"default",r=t,q(void 0,void 0,void 0,function(){var n;return K(this,function(e){switch(e.label){case 0:return n=r[s],r[s]?void 0===(n=n.credential_process)?[3,2]:[4,(t=n,new Promise(function(n,r){y.exec(t,function(e,t){e?r(e):n(t.trim())})}).then(function(e){try{o=JSON.parse(e)}catch(e){throw Error("Profile "+s+" credential_process returned invalid JSON.")}var t=o.Version,n=o.AccessKeyId,r=o.SecretAccessKey,e=o.SessionToken,o=o.Expiration;if(1!==t)throw Error("Profile "+s+" credential_process did not return Version 1.");if(void 0===n||void 0===r)throw Error("Profile "+s+" credential_process returned invalid credentials.");if(o){var i=new Date;if(new Date(o)<i)throw Error("Profile "+s+" credential_process returned expired credentials.");i=Math.floor(new Date(o).valueOf()/1e3)}return{accessKeyId:n,secretAccessKey:r,sessionToken:e,expirationUnix:i}}).catch(function(e){throw new Ts(e.message)}))]:[3,4];case 1:return[2,e.sent()];case 2:throw new Ts("Profile "+s+" did not contain credential_process.");case 3:return[3,5];case 4:throw new Ts("Profile "+s+" could not be found in shared credentials file.");case 5:return[2]}var t})}))]}var s,r,o})})}),Ji.env[as]||Ji.env[ss]?cs(t):Ji.env.AWS_EC2_METADATA_DISABLED?function(){return Promise.reject(new Zi("EC2 Instance Metadata Service access disabled"))}:(a=!1,i=(o=es(o=void 0===(o=t)?{}:o)).timeout,s=o.maxRetries,function(){return q(void 0,void 0,void 0,function(){var n,r;return K(this,function(e){switch(e.label){case 0:return a?[2,f(s,{timeout:i})]:[3,1];case 1:n=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,(t={timeout:i},q(void 0,void 0,void 0,function(){return K(this,function(e){return[2,Qi(F(F({},t),{host:Cs,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]})}))];case 3:return n=e.sent().toString(),[3,5];case 4:if(400===(null==(r=e.sent())?void 0:r.statusCode))throw Object.assign(r,{message:"EC2 Metadata token request returned error"});return"TimeoutError"!==r.message&&![403,404,405].includes(r.statusCode)||(a=!0),[2,f(s,{timeout:i})];case 5:return[2,f(s,{timeout:i,headers:{"x-aws-ec2-metadata-token":n}})]}var t})})})];function f(t,s){return q(void 0,void 0,void 0,function(){var r;return K(this,function(e){switch(e.label){case 0:return[4,ts(function(){return q(void 0,void 0,void 0,function(){var n,r;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(t=s,q(void 0,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,Qi(F(F({},t),{host:Cs,path:_s}))];case 1:return[2,e.sent().toString()]}})}))];case 1:return n=e.sent(),[3,3];case 2:throw 401===(r=e.sent()).statusCode&&(a=!1),r;case 3:return[2,n]}var t})})},t)];case 1:return r=e.sent().trim(),[2,ts(function(){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(o=r,i=s,q(void 0,void 0,void 0,function(){var t,n,r;return K(this,function(e){switch(e.label){case 0:return r=(n=JSON).parse,[4,Qi(F(F({},i),{host:Cs,path:_s+o}))];case 1:if(t=r.apply(n,[e.sent().toString()]),!ns(t))throw new Zi("Invalid response received from instance metadata service.");return[2,rs(t)]}})}))];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(a=!1),n;case 3:return[2,t]}var o,i})})},t)]}})})}return t.profile||e.unshift(function(){var e=Ji.env.AWS_ACCESS_KEY_ID,t=Ji.env.AWS_SECRET_ACCESS_KEY,n=Ji.env.AWS_CREDENTIAL_EXPIRATION;return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:Ji.env.AWS_SESSION_TOKEN,expiration:n?new Date(n):void 0}):Promise.reject(new Zi("Unable to find environment variable credentials."))}),u=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return function(){var e,t,n=Promise.reject(new Zi("No providers in chain"));try{for(var r=H(i),o=r.next();!o.done;o=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(o.value)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n}}.apply(void 0,W(e)),d=!(c=function(e){return void 0!==e.expiration}),function(){return q(void 0,void 0,void 0,function(){var n;return K(this,function(e){switch(e.label){case 0:return p||(l=u(),p=!0),d?[2,l]:[4,l];case 1:return n=e.sent(),c(n)?void 0!==(t=n).expiration&&t.expiration.getTime()-Date.now()<3e5?[2,l=u()]:[2,n]:(d=!0,[2,n])}var t})})}},Ls=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!("function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return m.Buffer.from(e,t,n)},Fs=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?m.Buffer.from(e,t):m.Buffer.from(e)},bt=(js.prototype.update=function(e,t){this.hash.update(Bs(e,t))},js.prototype.digest=function(){return Promise.resolve(this.hash.digest())},js);function js(e,t){this.hash=t?n.createHmac(e,Bs(t)):n.createHash(e)}function Bs(e,t){return m.Buffer.isBuffer(e)?e:"string"==typeof e?Fs(e,t):ArrayBuffer.isView(e)?Ls(e.buffer,e.byteOffset,e.byteLength):Ls(e)}function zs(t){return{applyToStack:function(e){e.add(Vs(t),qs)}}}var Vs=function(i){return function(r,o){return function(n){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){return null!==(t=null==i?void 0:i.retryStrategy)&&void 0!==t&&t.mode&&(o.userAgent=W(o.userAgent||[],[["cfg/retry-mode",i.retryStrategy.mode]])),[2,i.retryStrategy.retry(r,n)]})})}}},qs={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ks=(Hs.isInstance=function(e){return!!e&&"number"==typeof e.statusCode&&"object"==typeof e.headers},Hs);function Hs(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}var Gs=(Ws.isInstance=function(e){return!!e&&("method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers)},Ws.prototype.clone=function(){var r,e=new Ws(F(F({},this),{headers:F({},this.headers)}));return e.query&&(e.query=(r=e.query,Object.keys(r).reduce(function(e,t){var n=r[t];return F(F({},e),((e={})[t]=Array.isArray(n)?W(n):n,e))},{}))),e},Ws);function Ws(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}function $s(e,t){return Math.floor(Math.min(Js,Math.random()*Math.pow(2,t)*e))}function Ys(e){return!!e&&(oa(e)||ia(e)||sa(e)||aa(e))}var Js=2e4,Zs=5,Xs=10,Qs=1,ea=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],ta=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],na=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],ra=[500,502,503,504],oa=function(e){return void 0!==e.$retryable},ia=function(e){return ea.includes(e.name)},sa=function(e){var t;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||ta.includes(e.name)||1==(null===(e=e.$retryable)||void 0===e?void 0:e.throttling)},aa=function(e){return na.includes(e.name)||ra.includes((null===(e=e.$metadata)||void 0===e?void 0:e.httpStatusCode)||0)},ua=(ca.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},ca.prototype.getMaxAttempts=function(){return q(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),[t=3,3];case 3:return[2,t]}})})},ca.prototype.retry=function(p,d){return q(this,void 0,void 0,function(){var i,s,a,u,c,t,l,n;return K(this,function(e){switch(e.label){case 0:return a=s=0,[4,this.getMaxAttempts()];case 1:u=e.sent(),c=d.request,Gs.isInstance(c)&&(c.headers["amz-sdk-invocation-id"]=b.v4()),t=function(){var t,n,r,o;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),Gs.isInstance(c)&&(c.headers["amz-sdk-request"]="attempt="+(s+1)+"; max="+u),[4,p(d)];case 1:return n=e.sent(),t=n.response,n=n.output,l.retryQuota.releaseRetryTokens(i),n.$metadata.attempts=s+1,n.$metadata.totalRetryDelay=a,[2,{value:{response:t,output:n}}];case 2:return r=e.sent(),s++,l.shouldRetry(r,s,u)?(i=l.retryQuota.retrieveRetryTokens(r),o=l.delayDecider(sa(r)?500:100,s),a+=o,[4,new Promise(function(e){return setTimeout(e,o)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw r.$metadata||(r.$metadata={}),r.$metadata.attempts=s,r.$metadata.totalRetryDelay=a,r;case 5:return[2]}})},l=this,e.label=2;case 2:return[5,t()];case 3:return"object"==typeof(n=e.sent())?[2,n.value]:[3,2];case 4:return[2]}})})},ca);function ca(e,t){function n(e){return"TimeoutError"===e.name?Xs:Zs}function r(e){return n(e)<=i}var o,i;this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(e=null==t?void 0:t.retryDecider)&&void 0!==e?e:Ys,this.delayDecider=null!==(e=null==t?void 0:t.delayDecider)&&void 0!==e?e:$s,this.retryQuota=null!==(t=null==t?void 0:t.retryQuota)&&void 0!==t?t:(i=o=500,Object.freeze({hasRetryTokens:r,retrieveRetryTokens:function(e){if(!r(e))throw new Error("No retry token available");return e=n(e),i-=e,e},releaseRetryTokens:function(e){i+=null!=e?e:Qs,i=Math.min(i,o)}}))}function la(e){var t=ha(e.maxAttempts);return F(F({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new ua(t)})}var pa,da="AWS_MAX_ATTEMPTS",fa="max_attempts",yt={environmentVariableSelector:function(e){var t=e[da];if(t){if(e=parseInt(t),Number.isNaN(e))throw new Error("Environment variable "+da+' mast be a number, got "'+t+'"');return e}},configFileSelector:function(e){var t=e[fa];if(t){if(e=parseInt(t),Number.isNaN(e))throw new Error("Shared config file entry "+fa+' mast be a number, got "'+t+'"');return e}},default:3},ha=function(e){if("number"!=typeof(e=void 0===e?3:e))return e;var t=Promise.resolve(e);return function(){return t}},ma=(L(ga,pa=Error),ga);function ga(e,t){return void 0===t&&(t=!0),(e=pa.call(this,e)||this).tryNextLink=t,e}function ya(){return{}}function va(e){var t,n,r={};try{for(var o=H(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s,a,u,c=i.value;"default"===c?r.default=e.default:(s=Ea.exec(c))&&((a=G(s,3))[0],a[1],(u=a[2])&&(r[u]=e[c]))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function ba(e){var t,n,r,o={};try{for(var i=H(e.split(/\r?\n/)),s=i.next();!s.done;s=i.next()){var a,u=s.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(r=c[1],Aa.includes(r))throw new Error('Found invalid profile name "'+r+'"')}else!r||(a=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(o[r]=o[r]||{},o[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o}function wa(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function Sa(){var e=(r=Ji.env).HOME,t=r.USERPROFILE,n=r.HOMEPATH,r=void 0===(r=r.HOMEDRIVE)?"C:"+h.sep:r;return e||t||(n?""+r+n:i.homedir())}function Ca(e,t){var n,r,a,o,i,u,c,s,l=e.environmentVariableSelector,p=e.configFileSelector,e=e.default;return void 0===t&&(t={}),function(n,r,o){var i,s;if(void 0===r)return function(){return s||(i=n(),s=!0),i};var a=!1;return function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return s||(i=n(),s=!0),a?[2,i]:[4,i];case 1:return t=e.sent(),o&&!o(t)?(a=!0,[2,t]):r(t)?[2,i=n()]:[2,t]}})})}}(function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return function(){var e,t,n=Promise.reject(new ma("No providers in chain"));try{for(var r=H(i),o=r.next();!o.done;o=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(o.value)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n}}((s=l,function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){try{if(void 0===(t=s(Ji.env)))throw new Error;return[2,t]}catch(e){throw new ma(e.message||"Cannot load config from environment variables with getter: "+s)}return[2]})})}),(a=p,i=(o=void 0===(o=t)?{}:o).preferredFile,u=void 0===i?"config":i,c=j(o,["preferredFile"]),function(){return q(void 0,void 0,void 0,function(){var r,o,i,s;return K(this,function(e){switch(e.label){case 0:return r=c.loadedConfig,o=void 0===r?(n=void 0===(n=(t=void 0===(t=c)?{}:t).filepath)?Ji.env.AWS_SHARED_CREDENTIALS_FILE||h.join(Sa(),".aws","credentials"):n,t=void 0===(t=t.configFilepath)?Ji.env.AWS_CONFIG_FILE||h.join(Sa(),".aws","config"):t,Promise.all([wa(t).then(ba).then(va).catch(ya),wa(n).then(ba).catch(ya)]).then(function(e){return{configFile:(e=G(e,2))[0],credentialsFile:e[1]}})):r,i=c.profile,r=void 0===i?Ji.env.AWS_PROFILE||"default":i,[4,o];case 1:i=e.sent(),o=i.configFile,i=(i=i.credentialsFile)[r]||{},o=o[r]||{},i="config"===u?F(F({},i),o):F(F({},o),i);try{if(void 0===(s=a(i)))throw new Error;return[2,s]}catch(e){throw new ma(e.message||"Cannot load config for profile "+r+" in SDK configuration files with getter: "+a)}return[2]}var t,n})})}),"function"==typeof(n=e)?function(){return q(void 0,void 0,void 0,function(){return K(this,function(e){return[2,n()]})})}:(r=n,function(){return Promise.resolve(r)})))}function _a(e){return encodeURIComponent(e).replace(/[!'()*]/g,Ia)}var Ea=/^profile\s(["'])?([^\1]+)\1$/,Aa=["__proto__","profile __proto__"],Ia=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},ka=["ECONNRESET","EPIPE","ETIMEDOUT"],Ta=[],Pa=[],Oa="undefined"!=typeof Uint8Array?Uint8Array:Array,xa=!1;function Na(){xa=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Ta[t]=e[t],Pa[e.charCodeAt(t)]=t;Pa["-".charCodeAt(0)]=62,Pa["_".charCodeAt(0)]=63}function Ra(e){var t;xa||Na();for(var n=e.length,r=n%3,o="",i=[],s=0,a=n-r;s<a;s+=16383)i.push(function(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(Ta[r>>18&63]+Ta[r>>12&63]+Ta[r>>6&63]+Ta[63&r]);return o.join("")}(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],o+=Ta[t>>2],o+=Ta[t<<4&63],o+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],o+=Ta[t>>10],o+=Ta[t>>4&63],o+=Ta[t<<2&63],o+="="),i.push(o),i.join("")}function Ma(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?o-1:0,d=n?-1:1,n=e[t+p];for(p+=d,i=n&(1<<-l)-1,n>>=-l,l+=a;0<l;i=256*i+e[t+p],p+=d,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=d,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),i-=c}return(n?-1:1)*s*Math.pow(2,i-r)}function Ua(e,t,n,r,o,i){var s,a,u=8*i-o-1,c=(1<<u)-1,l=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,f=r?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?p/r:p*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;e[n+d]=255&a,d+=f,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;e[n+d]=255&s,d+=f,s/=256,u-=8);e[n+d-f]|=128*i}var Da={}.toString,La=Array.isArray||function(e){return"[object Array]"==Da.call(e)};function Fa(){return Ba.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ja(e,t){if(Fa()<t)throw new RangeError("Invalid typed array length");return Ba.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Ba.prototype:(e=null===e?new Ba(t):e).length=t,e}function Ba(e,t,n){if(!(Ba.TYPED_ARRAY_SUPPORT||this instanceof Ba))return new Ba(e,t,n);if("number"!=typeof e)return za(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return qa(this,e)}function za(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Ba.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Ba.prototype:e=Ka(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Ba.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Wa(t,n);return(n=(e=ja(e,r)).write(t,n))!==r&&(e=e.slice(0,n)),e}(e,t,n):function(e,t){if(Ga(t)){var n=0|Ha(t.length);return 0===(e=ja(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?ja(e,0):Ka(e,t);if("Buffer"===t.type&&La(t.data))return Ka(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Va(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function qa(e,t){if(Va(t),e=ja(e,t<0?0:0|Ha(t)),!Ba.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Ka(e,t){var n=t.length<0?0:0|Ha(t.length);e=ja(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Ha(e){if(e>=Fa())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Fa().toString(16)+" bytes");return 0|e}function Ga(e){return null!=e&&e._isBuffer}function Wa(e,t){if(Ga(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return cu(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return lu(e).length;default:if(r)return cu(e).length;t=(""+t).toLowerCase(),r=!0}}function $a(e,o,i){var t,n,r=!1;if((o=void 0===o||o<0?0:o)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(o>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var o,i="",s=t;s<n;++s)i+=(o=e[s])<16?"0"+o.toString(16):o.toString(16);return i}(this,o,i);case"utf8":case"utf-8":return Qa(this,o,i);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}(this,o,i);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}(this,o,i);case"base64":return n=i,0===(t=o)&&n===this.length?Ra(this):Ra(this.slice(t,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e){for(var t=e.slice(o,i),n="",r=0;r<t.length;r+=2)n+=String.fromCharCode(t[r]+256*t[r+1]);return n}(this);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Ya(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Ja(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?o?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if(Ga(t="string"==typeof t?Ba.from(t,r):t))return 0===t.length?-1:Za(e,t,n,r,o);if("number"==typeof t)return t&=255,Ba.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):Za(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Za(e,t,n,r,o){var i=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var p=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){p=!1;break}if(p)return l}return-1}function Xa(e,t,n,r){return pu(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Qa(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,u,c=e[o],l=null,p=239<c?4:223<c?3:191<c?2:1;if(o+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=p}return function(e){var t=e.length;if(t<=eu)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=eu));return n}(r)}Ba.TYPED_ARRAY_SUPPORT=void 0===p.TYPED_ARRAY_SUPPORT||p.TYPED_ARRAY_SUPPORT,Ba.poolSize=8192,Ba._augment=function(e){return e.__proto__=Ba.prototype,e},Ba.from=function(e,t,n){return za(null,e,t,n)},Ba.TYPED_ARRAY_SUPPORT&&(Ba.prototype.__proto__=Uint8Array.prototype,Ba.__proto__=Uint8Array),Ba.alloc=function(e,t,n){return r=null,Va(e),e<=0||void 0===t?ja(r,e):"string"==typeof n?ja(r,e).fill(t,n):ja(r,e).fill(t);var r},Ba.allocUnsafe=function(e){return qa(null,e)},Ba.allocUnsafeSlow=function(e){return qa(null,e)},Ba.isBuffer=function(e){return null!=e&&(!!e._isBuffer||du(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&du(e.slice(0,0)))},Ba.compare=function(e,t){if(!Ga(e)||!Ga(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},Ba.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ba.concat=function(e,t){if(!La(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ba.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=Ba.allocUnsafe(t),r=0,o=0;o<e.length;++o){var i=e[o];if(!Ga(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},Ba.byteLength=Wa,Ba.prototype._isBuffer=!0,Ba.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ya(this,t,t+1);return this},Ba.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ya(this,t,t+3),Ya(this,t+1,t+2);return this},Ba.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ya(this,t,t+7),Ya(this,t+1,t+6),Ya(this,t+2,t+5),Ya(this,t+3,t+4);return this},Ba.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?Qa(this,0,e):$a.apply(this,arguments)},Ba.prototype.equals=function(e){if(!Ga(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ba.compare(this,e)},Ba.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Ba.prototype.compare=function(e,t,n,r,o){if(!Ga(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},Ba.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Ba.prototype.indexOf=function(e,t,n){return Ja(this,e,t,n,!0)},Ba.prototype.lastIndexOf=function(e,t,n){return Ja(this,e,t,n,!1)},Ba.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,s,a,u,c,l,p=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var o=e.length-n;if((!r||o<(r=Number(r)))&&(r=o),(o=t.length)%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}(this,e,t,n);case"utf8":case"utf-8":return s=t,a=n,pu(cu(e,(i=this).length-s),i,s,a);case"ascii":return Xa(this,e,t,n);case"latin1":case"binary":return Xa(this,e,t,n);case"base64":return i=this,s=t,a=n,pu(lu(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,l=n,pu(function(e,t){for(var n,r,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,r%=256,o.push(r),o.push(n);return o}(e,(u=this).length-c),u,c,l);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},Ba.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var eu=4096;function tu(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function nu(e,t,n,r,o,i){if(!Ga(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function ru(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function ou(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function iu(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function su(e,t,n,r,o){return o||iu(e,0,n,4),Ua(e,t,n,r,23,4),n+4}function au(e,t,n,r,o){return o||iu(e,0,n,8),Ua(e,t,n,r,52,8),n+8}Ba.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),Ba.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=Ba.prototype;else for(var r=t-e,o=new Ba(r,void 0),i=0;i<r;++i)o[i]=this[i+e];return o},Ba.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||tu(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},Ba.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||tu(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},Ba.prototype.readUInt8=function(e,t){return t||tu(e,1,this.length),this[e]},Ba.prototype.readUInt16LE=function(e,t){return t||tu(e,2,this.length),this[e]|this[e+1]<<8},Ba.prototype.readUInt16BE=function(e,t){return t||tu(e,2,this.length),this[e]<<8|this[e+1]},Ba.prototype.readUInt32LE=function(e,t){return t||tu(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ba.prototype.readUInt32BE=function(e,t){return t||tu(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ba.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||tu(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},Ba.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||tu(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},Ba.prototype.readInt8=function(e,t){return t||tu(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ba.prototype.readInt16LE=function(e,t){return t||tu(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},Ba.prototype.readInt16BE=function(e,t){return t||tu(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},Ba.prototype.readInt32LE=function(e,t){return t||tu(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ba.prototype.readInt32BE=function(e,t){return t||tu(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ba.prototype.readFloatLE=function(e,t){return t||tu(e,4,this.length),Ma(this,e,!0,23,4)},Ba.prototype.readFloatBE=function(e,t){return t||tu(e,4,this.length),Ma(this,e,!1,23,4)},Ba.prototype.readDoubleLE=function(e,t){return t||tu(e,8,this.length),Ma(this,e,!0,52,8)},Ba.prototype.readDoubleBE=function(e,t){return t||tu(e,8,this.length),Ma(this,e,!1,52,8)},Ba.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||nu(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},Ba.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||nu(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},Ba.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,1,255,0),Ba.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Ba.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,2,65535,0),Ba.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ru(this,e,t,!0),t+2},Ba.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,2,65535,0),Ba.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ru(this,e,t,!1),t+2},Ba.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,4,4294967295,0),Ba.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):ou(this,e,t,!0),t+4},Ba.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,4,4294967295,0),Ba.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ou(this,e,t,!1),t+4},Ba.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||nu(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},Ba.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||nu(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},Ba.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,1,127,-128),Ba.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},Ba.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,2,32767,-32768),Ba.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ru(this,e,t,!0),t+2},Ba.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,2,32767,-32768),Ba.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ru(this,e,t,!1),t+2},Ba.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,4,2147483647,-2147483648),Ba.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):ou(this,e,t,!0),t+4},Ba.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||nu(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Ba.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ou(this,e,t,!1),t+4},Ba.prototype.writeFloatLE=function(e,t,n){return su(this,e,t,!0,n)},Ba.prototype.writeFloatBE=function(e,t,n){return su(this,e,t,!1,n)},Ba.prototype.writeDoubleLE=function(e,t,n){return au(this,e,t,!0,n)},Ba.prototype.writeDoubleBE=function(e,t,n){return au(this,e,t,!1,n)},Ba.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var o,i=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!Ba.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},Ba.prototype.fill=function(e,t,n,r){if("string"==typeof e){var o;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(o=e.charCodeAt(0))<256&&(e=o),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Ba.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var i=Ga(e)?e:cu(new Ba(e,r).toString()),s=i.length,a=0;a<n-t;++a)this[a+t]=i[a%s];return this};var uu=/[^+\/0-9A-Za-z-_]/g;function cu(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function lu(e){return function(e){var t;xa||Na();var n=e.length;if(0<n%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var r="="===e[n-2]?2:"="===e[n-1]?1:0,o=new Oa(3*n/4-r),i=0<r?n-4:n,s=0,a=0;a<i;a+=4)t=Pa[e.charCodeAt(a)]<<18|Pa[e.charCodeAt(a+1)]<<12|Pa[e.charCodeAt(a+2)]<<6|Pa[e.charCodeAt(a+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;return 2==r?(t=Pa[e.charCodeAt(a)]<<2|Pa[e.charCodeAt(a+1)]>>4,o[s++]=255&t):1==r&&(t=Pa[e.charCodeAt(a)]<<10|Pa[e.charCodeAt(a+1)]<<4|Pa[e.charCodeAt(a+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t),o}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(uu,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function pu(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function du(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function fu(e,t){t instanceof o.Readable?t.pipe(e):t?e.end(Ba.from(t)):e.end()}function hu(e){var t=(r=void 0===e?{}:e).connectionTimeout,n=r.socketTimeout,e=r.httpAgent,r=r.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=t,this.socketTimeout=n,this.httpAgent=e||new g.Agent({keepAlive:!0,maxSockets:50}),this.httpsAgent=r||new w.Agent({keepAlive:!0,maxSockets:50})}hu.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},hu.prototype.handle=function(f,e){var h=this,m=(void 0===e?{}:e).abortSignal;return new Promise(function(t,n){if(null!=m&&m.aborted)return(p=new Error("Request aborted")).name="AbortError",void n(p);var r,o,i,e,s,a,u,c,l="https:"===f.protocol,p=function(e){var t,n,r=[];try{for(var o=H(Object.keys(e).sort()),i=o.next();!i.done;i=o.next()){var s=e[a=i.value],a=_a(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+_a(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+_a(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}(f.query||{}),p={headers:f.headers,host:f.hostname,method:f.method,path:p?f.path+"?"+p:f.path,port:f.port,agent:l?h.httpsAgent:h.httpAgent},d=(0,(l?w:g).request)(p,function(e){e=new Ks({statusCode:e.statusCode||-1,headers:function(e){var t,n,r={};try{for(var o=H(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s=i.value,a=e[s];r[s]=Array.isArray(a)?a.join(","):a}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e.headers),body:e}),t({response:e})});d.on("error",function(e){ka.includes(e.code)?n(Object.assign(e,{name:"TimeoutError"})):n(e)}),r=d,o=n,(i=void 0===(i=h.connectionTimeout)?0:i)&&r.on("socket",function(e){var t;e.connecting&&(t=setTimeout(function(){r.destroy(),o(Object.assign(new Error("Socket timed out without establishing a connection within "+i+" ms"),{name:"TimeoutError"}))},i),e.on("connect",function(){clearTimeout(t)}))}),e=d,s=n,void 0===(a=h.socketTimeout)&&(a=0),e.setTimeout(a,function(){e.destroy(),s(Object.assign(new Error("Connection timed out after "+a+" ms"),{name:"TimeoutError"}))}),m&&(m.onabort=function(){d.abort();var e=new Error("Request aborted");e.name="AbortError",n(e)}),u=d,"100-continue"===((c=f).headers.Expect||c.headers.expect)?u.on("continue",function(){fu(u,c.body)}):fu(u,c.body)})},Yn=hu;var mu,gu=(L(yu,mu=o.Writable),yu.prototype._write=function(e,t,n){this.bufferedBytes.push(e),n()},yu);function yu(){var e=null!==mu&&mu.apply(this,arguments)||this;return e.bufferedBytes=[],e}var vu=function(e){return new Promise(function(t,n){var r=new gu;e.pipe(r),e.on("error",function(e){r.end(),n(e)}),r.on("error",n),r.on("finish",function(){var e=new Uint8Array(Ba.concat(this.bufferedBytes));t(e)})})};function bu(e){return e=function(e){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return m.Buffer.from(e,"base64")}(e),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function wu(e){return function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),r=e,!("function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");var r;return m.Buffer.from(e,t,n)}(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function Su(e){return e?"string"==typeof e?Ba.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?a.lstatSync(e.path).size:void 0:0}var hn=function(e){var r=e.serviceId,o=e.clientVersion;return function(){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return t=[["aws-sdk-js",o],["os/"+i.platform(),i.release()],["lang/js"],["md/nodejs",""+s.versions.node]],r&&t.push(["api/"+r,o]),s.env.AWS_EXECUTION_ENV&&t.push(["exec-env/"+s.env.AWS_EXECUTION_ENV]),[4,Ca({environmentVariableSelector:function(e){return e.AWS_SDK_UA_APP_ID},configFileSelector:function(e){return e["sdk-ua-app-id"]},default:void 0})()];case 1:return(n=e.sent())&&t.push(["app/"+n]),[2,t]}})})}},dn=function(e){return e=function(e){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return m.Buffer.from(e,"utf8")}(e),new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},S=function(e){return function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),r=e,!("function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");var r;return m.Buffer.from(e,t,n)}(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},Cu="pinpoint.{region}.amazonaws.com",_u=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Eu=new Set(["cn-north-1","cn-northwest-1"]),Au=new Set(["us-iso-east-1"]),Iu=new Set(["us-isob-east-1"]),ku=new Set(["us-gov-east-1","us-gov-west-1"]),tr={apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"pinpoint.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-northeast-2":n={hostname:"pinpoint.ap-northeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-1":n={hostname:"pinpoint.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ca-central-1":n={hostname:"pinpoint.ca-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-2":n={hostname:"pinpoint.eu-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"fips-us-east-1":n={hostname:"pinpoint-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-gov-west-1":n={hostname:"pinpoint-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"pinpoint-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-gov-west-1":n={hostname:"pinpoint.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:_u.has(e)&&(n={hostname:Cu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),Eu.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Au.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Iu.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=ku.has(e)?{hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov",signingService:"mobiletargeting"}:n)&&(n={hostname:Cu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(Ei({signingService:"mobiletargeting"},n))},serviceId:"Pinpoint",urlParser:$e=function(e){var t,n=new URL(e),r=n.hostname,o=n.pathname,i=n.port,e=n.protocol;return(n=n.search)&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var o=H(e.split("&")),i=o.next();!i.done;i=o.next()){var s=G(i.value.split("="),2),a=s[0],u=s[1],c=void 0===u?null:u,a=decodeURIComponent(a),c=c&&decodeURIComponent(c);a in r?Array.isArray(r[a])?r[a].push(c):r[a]=[r[a],c]:r[a]=c}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(n)),{hostname:r,port:i?parseInt(i):void 0,protocol:e,path:o,query:t}}},Tu=Ei(Ei({},tr),{runtime:"node",base64Decoder:bu,base64Encoder:wu,bodyLengthChecker:Su,credentialDefaultProvider:$n,defaultUserAgentProvider:hn({serviceId:tr.serviceId,clientVersion:Xn}),maxAttempts:Ca(yt),region:Ca(fn,bn),requestHandler:new Yn,sha256:bt.bind(null,"sha256"),streamCollector:vu,utf8Decoder:dn,utf8Encoder:S}),Pu="content-length";function Ou(t){return{applyToStack:function(e){e.add(function(a){var e=this;return function(s){return function(i){return q(e,void 0,void 0,function(){var t,n,r,o;return K(this,function(e){return t=i.request,Gs.isInstance(t)&&(o=t.body,n=t.headers,o&&-1===Object.keys(n).map(function(e){return e.toLowerCase()}).indexOf(Pu)&&void 0!==(r=a(o))&&(t.headers=F(F({},t.headers),((o={})[Pu]=String(r),o)))),[2,s(F(F({},i),{request:t}))]})})}}}(t.bodyLengthChecker),xu)}}}for(var xu={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Nu={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ru=function(t){return{applyToStack:function(e){var i;e.add((i=t,function(o){return function(r){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){return Gs.isInstance(r.request)&&(t=r.request,0<=(void 0===(n=(i.requestHandler.metadata||{}).handlerProtocol)?"":n).indexOf("h2")&&!t.headers[":authority"]?(delete t.headers.host,t.headers[":authority"]=""):t.headers.host||(t.headers.host=t.hostname)),[2,o(r)]})})}}),Nu)}}},Mu={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Uu=function(e){return{applyToStack:function(e){e.add(function(l,p){return function(c){return q(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u;return K(this,function(e){switch(e.label){case 0:return t=p.clientName,n=p.commandName,r=p.inputFilterSensitiveLog,o=p.logger,i=p.outputFilterSensitiveLog,[4,l(c)];case 1:return s=e.sent(),o&&"function"==typeof o.info&&(u=s.output,a=u.$metadata,u=j(u,["$metadata"]),o.info({clientName:t,commandName:n,input:r(c.input),output:i(u),metadata:a})),[2,s]}})})}},Mu)}}},Du={},Lu=0;Lu<256;Lu++){var Fu=Lu.toString(16).toLowerCase();1===Fu.length&&(Fu="0"+Fu),Du[Lu]=Fu}function ju(e){for(var t="",n=0;n<e.byteLength;n++)t+=Du[e[n]];return t}var Bu="X-Amz-Date",zu="X-Amz-Signature",Vu="X-Amz-Security-Token",qu="authorization",Ku=Bu.toLowerCase(),Hu=[qu,Ku,"date"],Gu=zu.toLowerCase(),Wu="x-amz-content-sha256",$u=Vu.toLowerCase(),Yu={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Ju=/^proxy-/,Zu=/^sec-/,Xu="AWS4-HMAC-SHA256",Qu="AWS4-HMAC-SHA256-PAYLOAD",ec="aws4_request",tc={},nc=[];function rc(e,t,n){return e+"/"+t+"/"+n+"/"+ec}function oc(e,t,n){return(t=new e(t)).update(n),t.digest()}function ic(e,t,n){var r,o,i=e.headers,s={};try{for(var a=H(Object.keys(i).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(!(l in Yu||null!=t&&t.has(l)||Ju.test(l)||Zu.test(l))||n&&n.has(l))&&(s[l]=i[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return s}function sc(e){return encodeURIComponent(e).replace(/[!'()*]/g,ac)}var ac=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function uc(e,u){var c=e.headers,l=e.body;return q(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return K(this,function(e){switch(e.label){case 0:try{for(t=H(Object.keys(c)),n=t.next();!n.done;n=t.next())if((r=n.value).toLowerCase()===Wu)return[2,c[r]]}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return null!=l?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof l||ArrayBuffer.isView(l)||("function"==typeof ArrayBuffer&&l instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(l))?((o=new u).update(l),i=ju,[4,o.digest()]):[3,3];case 2:return[2,i.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function cc(e){var r,t=e.headers,n=e.query,e=j(e,["headers","query"]);return F(F({},e),{headers:F({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return F(F({},e),((e={})[t]=Array.isArray(n)?W(n):n,e))},{})):void 0})}function lc(e){var t,n;e="function"==typeof e.clone?e.clone():cc(e);try{for(var r=H(Object.keys(e.headers)),o=r.next();!o.done;o=r.next()){var i=o.value;-1<Hu.indexOf(i.toLowerCase())&&delete e.headers[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var pc=(dc.prototype.presign=function(w,S){return void 0===S&&(S={}),q(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y,v,b;return K(this,function(e){switch(e.label){case 0:return d=S.signingDate,t=void 0===d?new Date:d,p=S.expiresIn,n=void 0===p?3600:p,r=S.unsignableHeaders,o=S.unhoistableHeaders,i=S.signableHeaders,s=S.signingRegion,a=S.signingService,[4,this.credentialProvider()];case 1:return u=e.sent(),null==s?[3,2]:(l=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:l=e.sent(),e.label=4;case 4:return c=l,d=fc(t),p=d.longDate,d=d.shortDate,604800<n?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(v=rc(d,c,null!=a?a:this.service),f=function(e,t){var n,r,o;void 0===t&&(t={});var i="function"==typeof e.clone?e.clone():cc(e),s=i.headers,a=void 0===(i=i.query)?{}:i;try{for(var u=H(Object.keys(s)),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.toLowerCase();"x-amz-"!==p.substr(0,6)||null!==(o=t.unhoistableHeaders)&&void 0!==o&&o.has(p)||(a[l]=s[l],delete s[l])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return F(F({},e),{headers:s,query:a})}(lc(w),{unhoistableHeaders:o}),u.sessionToken&&(f.query[Vu]=u.sessionToken),f.query["X-Amz-Algorithm"]=Xu,f.query["X-Amz-Credential"]=u.accessKeyId+"/"+v,f.query[Bu]=p,f.query["X-Amz-Expires"]=n.toString(10),b=ic(f,r,i),f.query["X-Amz-SignedHeaders"]=hc(b),h=f.query,m=zu,g=this.getSignature,y=[p,v,this.getSigningKey(u,c,d,a)],v=this.createCanonicalRequest,b=[f,b],[4,uc(w,this.sha256)]);case 5:return[4,g.apply(this,y.concat([v.apply(this,b.concat([e.sent()]))]))];case 6:return h[m]=e.sent(),[2,f]}})})},dc.prototype.sign=function(t,n){return q(this,void 0,void 0,function(){return K(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},dc.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,l=void 0===(e=t.signingDate)?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return K(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,r=fc(l),o=r.shortDate,r=r.longDate,o=rc(o,t,null!=f?f:this.service),[4,uc({headers:{},body:c},this.sha256)];case 4:return i=e.sent(),(a=new this.sha256).update(u),s=ju,[4,a.digest()];case 5:return a=s.apply(void 0,[e.sent()]),a=[Qu,r,o,p,a,i].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:f})]}})})},dc.prototype.signString=function(u,e){var t=void 0===e?{}:e,c=void 0===(e=t.signingDate)?new Date:e,l=t.signingRegion,p=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==l?[3,2]:(r=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,o=fc(c).shortDate,s=(i=this.sha256).bind,[4,this.getSigningKey(t,n,o,p)];case 5:return(o=new(s.apply(i,[void 0,e.sent()]))).update(u),a=ju,[4,o.digest()];case 6:return[2,a.apply(void 0,[e.sent()])]}})})},dc.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,p=void 0===(e=t.signingDate)?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,m=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==h?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,o=lc(l),a=fc(p),i=a.longDate,s=a.shortDate,a=rc(s,n,null!=m?m:this.service),o.headers[Ku]=i,t.sessionToken&&(o.headers[$u]=t.sessionToken),[4,uc(o,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var o=H(Object.keys(t)),i=o.next();!i.done;i=o.next())if(e===i.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(Wu,o.headers)&&this.applyChecksum&&(o.headers[Wu]=c),u=ic(o,f,d),[4,this.getSignature(i,a,this.getSigningKey(t,n,s,m),this.createCanonicalRequest(o,u,c))];case 6:return c=e.sent(),o.headers[qu]=Xu+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+hc(u)+", Signature="+c,[2,o]}})})},dc.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=void 0===(e=e.query)?{}:e,o=[],i={};try{for(var s=H(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){var e;n.toLowerCase()!==Gu&&(o.push(n),"string"==typeof(e=r[n])?i[n]=sc(n)+"="+sc(e):Array.isArray(e)&&(i[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([sc(n)+"="+sc(t)])},[]).join("&")))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o.map(function(e){return i[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},dc.prototype.createStringToSign=function(n,r,o){return q(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(o),[4,t.digest()];case 1:return t=e.sent(),[2,Xu+"\n"+n+"\n"+r+"\n"+ju(t)]}})})},dc.prototype.getCanonicalPath=function(e){return e=e.path,this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},dc.prototype.getSignature=function(s,a,u,c){return q(this,void 0,void 0,function(){var t,n,r,o,i;return K(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(s,a,c)];case 1:return t=e.sent(),o=(r=this.sha256).bind,[4,u];case 2:return(n=new(o.apply(r,[void 0,e.sent()]))).update(t),i=ju,[4,n.digest()];case 3:return[2,i.apply(void 0,[e.sent()])]}})})},dc.prototype.getSigningKey=function(e,t,n,r){return u=this.sha256,c=e,l=n,p=t,d=r||this.service,q(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return K(this,function(e){switch(e.label){case 0:return[4,oc(u,c.secretAccessKey,c.accessKeyId)];case 1:if(i=e.sent(),(t=l+":"+p+":"+d+":"+ju(i)+":"+c.sessionToken)in tc)return[2,tc[t]];for(nc.push(t);50<nc.length;)delete tc[nc.shift()];n="AWS4"+c.secretAccessKey,e.label=2;case 2:e.trys.push([2,7,8,9]),r=H([l,p,d,ec]),o=r.next(),e.label=3;case 3:return o.done?[3,6]:(i=o.value,[4,oc(u,n,i)]);case 4:n=e.sent(),e.label=5;case 5:return o=r.next(),[3,3];case 6:return[3,9];case 7:return s={error:s=e.sent()},[3,9];case 8:try{o&&!o.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 9:return[2,tc[t]=n]}})});var u,c,l,p,d},dc);function dc(e){var t=e.applyChecksum,n=e.credentials,r=e.region,o=e.service,i=e.sha256,e=void 0===(e=e.uriEscapePath)||e;this.service=o,this.sha256=i,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=mc(r),this.credentialProvider=gc(n)}var fc=function(e){var t;return{longDate:e=("number"==typeof(t=e)?new Date(1e3*t):"string"!=typeof t?t:Number(t)?new Date(1e3*Number(t)):new Date(t)).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[\-:]/g,""),shortDate:e.substr(0,8)}},hc=function(e){return Object.keys(e).sort().join(";")},mc=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},gc=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}};function yc(r){var e=this,o=vc(r.credentials||r.credentialDefaultProvider(r)),i=void 0===(t=r.signingEscapePath)||t,t=void 0===(n=r.systemClockOffset)?r.systemClockOffset||0:n,s=r.sha256,n=r.signer?vc(r.signer):function(){return vc(r.region)().then(function(t){return q(e,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,r.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}})})}).then(function(e){var t=(n=G(e,2))[0],e=n[1],n=t.signingRegion,t=t.signingService;return r.signingRegion=r.signingRegion||n||e,r.signingName=r.signingName||t||r.serviceId,new pc({credentials:o,region:r.signingRegion,service:r.signingName,sha256:s,uriEscapePath:i})})};return F(F({},r),{systemClockOffset:t,signingEscapePath:i,credentials:o,signer:n})}function vc(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}}var bc=function(e){return new Date(Date.now()+e)};function wc(t){return{applyToStack:function(e){var d;e.addRelativeTo((d=t,function(l,p){return function(c){return q(this,void 0,void 0,function(){var r,o,i,s,a,u;return K(this,function(e){switch(e.label){case 0:return Gs.isInstance(c.request)?"function"!=typeof d.signer?[3,2]:[4,d.signer()]:[2,l(c)];case 1:return r=e.sent(),[3,3];case 2:r=d.signer,e.label=3;case 3:return a=r,i=l,s=[F({},c)],u={},[4,a.sign(c.request,{signingDate:new Date(Date.now()+d.systemClockOffset),signingRegion:p.signing_region,signingService:p.signing_service})];case 4:return[4,i.apply(void 0,[F.apply(void 0,s.concat([(u.request=e.sent(),u)]))])];case 5:return o=e.sent(),(a=(a=o.response.headers)&&(a.date||a.Date))&&(a=Date.parse(a),t=a,n=d.systemClockOffset,3e5<=Math.abs(bc(n).getTime()-t)&&(d.systemClockOffset=a-Date.now())),[2,o]}var t,n})})}}),Sc)}}}var Sc={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};function Cc(e){return F(F({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}function _c(e){var t=(r=G(e,2))[0],n=r[1],e=t.indexOf("/"),r=t.substring(0,e),e=t.substring(e+1);return[r,e="api"===r?e.toLowerCase():e,n].filter(function(e){return e&&0<e.length}).map(function(e){return null==e?void 0:e.replace(Ic,"_")}).join("/")}function Ec(t){return{applyToStack:function(e){e.add(kc(t),Tc)}}}var Ac="user-agent",Ic=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,kc=function(c){return function(a,u){return function(s){return q(void 0,void 0,void 0,function(){var t,n,r,o,i;return K(this,function(e){switch(e.label){case 0:return t=s.request,Gs.isInstance(t)?(n=t.headers,r=(null===(i=null==u?void 0:u.userAgent)||void 0===i?void 0:i.map(_c))||[],[4,c.defaultUserAgentProvider()]):[2,a(s)];case 1:return o=e.sent().map(_c),i=(null===(i=null==c?void 0:c.customUserAgent)||void 0===i?void 0:i.map(_c))||[],n["x-amz-user-agent"]=W(o,r,i).join(" "),i=W(o.filter(function(e){return e.startsWith("aws-sdk-")}),i).join(" "),"browser"!==c.runtime&&i&&(n[Ac]=n[Ac]?n[Ac]+" "+i:i),[2,a(F(F({},s),{request:t}))]}})})}}},Tc={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Pc=function(){function n(t){return c.forEach(function(e){t.add(e.middleware,F({},e))}),l.forEach(function(e){t.addRelativeTo(e.middleware,F({},e))}),t}var c=[],l=[],o=new Set,p=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,W(p(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,W(p(e)))}),t},t={add:function(e,t){var n=(t=void 0===t?{}:t).name,r=t.override,e=F({step:"initialize",priority:"normal",middleware:e},t);if(n){if(o.has(n)){if(!r)throw new Error("Duplicate middleware name '"+n+"'");if(t=c.findIndex(function(e){return e.name===n}),(r=c[t]).step!==e.step||r.priority!==e.priority)throw new Error('"'+n+'" middleware with '+r.priority+" priority in "+r.step+" step cannot be overridden by same-name middleware with "+e.priority+" priority in "+e.step+" step.");c.splice(t,1)}o.add(n)}c.push(e)},addRelativeTo:function(e,t){var n=t.name,r=t.override,e=F({middleware:e},t);if(n){if(o.has(n)){if(!r)throw new Error("Duplicate middleware name '"+n+"'");if(t=l.findIndex(function(e){return e.name===n}),(r=l[t]).toMiddleware!==e.toMiddleware||r.relation!==e.relation)throw new Error('"'+n+'" middleware '+r.relation+' "'+r.toMiddleware+'" middleware cannot be overridden by same-name middleware '+e.relation+' "'+e.toMiddleware+'" middleware.');l.splice(t,1)}o.add(n)}l.push(e)},clone:function(){return n(Pc())},use:function(e){e.applyToStack(t)},remove:function(e){return("string"==typeof e?function(t){function e(e){return!e.name||e.name!==t||(n=!0,o.delete(t),!1)}var n=!1;return c=c.filter(e),l=l.filter(e),n}:function(t){function e(e){return e.middleware!==t||(n=!0,e.name&&o.delete(e.name),!1)}var n=!1;return c=c.filter(e),l=l.filter(e),n})(e)},removeByTag:function(n){function e(e){var t=e.tags,e=e.name;return!(t&&t.includes(n)&&(e&&o.delete(e),r=!0))}var r=!1;return c=c.filter(e),l=l.filter(e),r},concat:function(e){var t=n(Pc());return t.use(e),t},applyToStack:n,resolve:function(e,t){var n,r,o,i,s;try{for(var a=H((o=[],i=[],s={},c.forEach(function(e){(e=F(F({},e),{before:[],after:[]})).name&&(s[e.name]=e),o.push(e)}),l.forEach(function(e){(e=F(F({},e),{before:[],after:[]})).name&&(s[e.name]=e),i.push(e)}),i.forEach(function(e){if(e.toMiddleware){var t=s[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),o.sort(function(e,t){return Oc[t.step]-Oc[e.step]||xc[t.priority||"normal"]-xc[e.priority||"normal"]}).map(p).reduce(function(e,t){return e.push.apply(e,W(t)),e},[]).map(function(e){return e.middleware}).reverse())),u=a.next();!u.done;u=a.next())e=(0,u.value)(e,t)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return e}};return t},Oc={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},xc={high:3,normal:2,low:1},Ze=(Nc.prototype.send=function(e,t,n){var r="function"==typeof t?t:n,t=e.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!r)return t(e).then(function(e){return e.output});t(e).then(function(e){return r(null,e.output)},function(e){return r(e)}).catch(function(){})},Nc.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},Nc);function Nc(e){this.middlewareStack=Pc(),this.config=e}function Rc(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function Mc(e){return Array.isArray(e)?e:[e]}mE=function(){this.middlewareStack=Pc()};var Uc=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=Uc(e[t]));return e};(mn=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,W([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t}).prototype=Object.create(String.prototype,{constructor:{value:mn,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(mn,String);var Dc,Lc=(L(Fc,Dc=mn),Fc.prototype.deserializeJSON=function(){return JSON.parse(Dc.prototype.toString.call(this))},Fc.prototype.toJSON=function(){return Dc.prototype.toString.call(this)},Fc.fromObject=function(e){return e instanceof Fc?e:e instanceof String||"string"==typeof e?new Fc(e):new Fc(JSON.stringify(e))},Fc);function Fc(){return null!==Dc&&Dc.apply(this,arguments)||this}var jc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Bc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function zc(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),o=e.getUTCDate(),i=e.getUTCHours(),s=e.getUTCMinutes(),e=e.getUTCSeconds();return jc[r]+", "+(o<10?"0"+o:""+o)+" "+Bc[n]+" "+t+" "+(i<10?"0"+i:""+i)+":"+(s<10?"0"+s:""+s)+":"+(e<10?"0"+e:""+e)+" GMT"}var Vc,qc="***SensitiveInformation***",Kc=(_i(Hc,Vc=Ze),Hc.prototype.destroy=function(){Vc.prototype.destroy.call(this)},Hc);function Hc(e){var t=this,e=Cc(la(e=yc(Ti(e=Pi(e=Ei(Ei({},Tu),e))))));return(t=Vc.call(this,e)||this).config=e,t.middlewareStack.use(wc(t.config)),t.middlewareStack.use(zs(t.config)),t.middlewareStack.use(Ou(t.config)),t.middlewareStack.use(Ru(t.config)),t.middlewareStack.use(Uu(t.config)),t.middlewareStack.use(Ec(t.config)),t}function Gc(e){return Ei(Ei({},void 0!==e.Endpoint&&null!==e.Endpoint&&{Endpoint:(t=e.Endpoint,Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei({},void 0!==t.Address&&null!==t.Address&&{Address:t.Address}),void 0!==t.Attributes&&null!==t.Attributes&&{Attributes:ll(t.Attributes)}),void 0!==t.ChannelType&&null!==t.ChannelType&&{ChannelType:t.ChannelType}),void 0!==t.Demographic&&null!==t.Demographic&&{Demographic:il(t.Demographic)}),void 0!==t.EffectiveDate&&null!==t.EffectiveDate&&{EffectiveDate:t.EffectiveDate}),void 0!==t.EndpointStatus&&null!==t.EndpointStatus&&{EndpointStatus:t.EndpointStatus}),void 0!==t.Location&&null!==t.Location&&{Location:sl(t.Location)}),void 0!==t.Metrics&&null!==t.Metrics&&{Metrics:ul(t.Metrics)}),void 0!==t.OptOut&&null!==t.OptOut&&{OptOut:t.OptOut}),void 0!==t.RequestId&&null!==t.RequestId&&{RequestId:t.RequestId}),void 0!==t.User&&null!==t.User&&{User:al(t.User)}))}),void 0!==e.Events&&null!==e.Events&&{Events:(e=e.Events,Object.entries(e).reduce(function(e,t){var n,r,o=ki(t,2),t=o[0];return null===(o=o[1])?e:Ei(Ei({},e),((e={})[t]=Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei({},void 0!==(n=o).AppPackageName&&null!==n.AppPackageName&&{AppPackageName:n.AppPackageName}),void 0!==n.AppTitle&&null!==n.AppTitle&&{AppTitle:n.AppTitle}),void 0!==n.AppVersionCode&&null!==n.AppVersionCode&&{AppVersionCode:n.AppVersionCode}),void 0!==n.Attributes&&null!==n.Attributes&&{Attributes:(r=n.Attributes,Object.entries(r).reduce(function(e,t){var n=ki(t,2),t=n[0],n=n[1];return null===n?e:Ei(Ei({},e),((e={})[t]=n,e))},{}))}),void 0!==n.ClientSdkVersion&&null!==n.ClientSdkVersion&&{ClientSdkVersion:n.ClientSdkVersion}),void 0!==n.EventType&&null!==n.EventType&&{EventType:n.EventType}),void 0!==n.Metrics&&null!==n.Metrics&&{Metrics:ul(n.Metrics)}),void 0!==n.SdkName&&null!==n.SdkName&&{SdkName:n.SdkName}),void 0!==n.Session&&null!==n.Session&&{Session:(r=n.Session,Ei(Ei(Ei(Ei({},void 0!==r.Duration&&null!==r.Duration&&{Duration:r.Duration}),void 0!==r.Id&&null!==r.Id&&{Id:r.Id}),void 0!==r.StartTimestamp&&null!==r.StartTimestamp&&{StartTimestamp:r.StartTimestamp}),void 0!==r.StopTimestamp&&null!==r.StopTimestamp&&{StopTimestamp:r.StopTimestamp}))}),void 0!==n.Timestamp&&null!==n.Timestamp&&{Timestamp:n.Timestamp}),e))},{}))});var t}function Wc(e){return{EndpointItemResponse:void 0!==e.EndpointItemResponse&&null!==e.EndpointItemResponse?{Message:void 0!==(t=e.EndpointItemResponse).Message&&null!==t.Message?t.Message:void 0,StatusCode:void 0!==t.StatusCode&&null!==t.StatusCode?t.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==e.EventsItemResponse&&null!==e.EventsItemResponse?(e=e.EventsItemResponse,Object.entries(e).reduce(function(e,t){var n,r=ki(t,2),t=r[0];return null===(r=r[1])?e:Ei(Ei({},e),((e={})[t]={Message:void 0!==(n=r).Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0},e))},{})):void 0};var t}var $c,Yc,Jc,Zc,pt=function(u,c){return Ai(void 0,void 0,void 0,function(){var n,r,o,i,s,a;return Ii(this,function(e){switch(e.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",Rc(s)),void 0!==u.EventsRequest&&(t=u.EventsRequest,o=Ei({},void 0!==t.BatchItem&&null!==t.BatchItem&&{BatchItem:cl(t.BatchItem)})),void 0===o&&(o={}),o=JSON.stringify(o),[4,c.endpoint()];case 1:return a=e.sent(),i=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new Gs({protocol:s,hostname:i,port:a,method:"POST",headers:n,path:r,body:o})]}var t})})},tr=function(u,c){return Ai(void 0,void 0,void 0,function(){var n,r,o,i,s,a;return Ii(this,function(e){switch(e.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",Rc(s)),void 0===u.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((s=u.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",Rc(s)),void 0!==u.EndpointRequest&&(t=u.EndpointRequest,o=Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei({},void 0!==t.Address&&null!==t.Address&&{Address:t.Address}),void 0!==t.Attributes&&null!==t.Attributes&&{Attributes:ll(t.Attributes)}),void 0!==t.ChannelType&&null!==t.ChannelType&&{ChannelType:t.ChannelType}),void 0!==t.Demographic&&null!==t.Demographic&&{Demographic:il(t.Demographic)}),void 0!==t.EffectiveDate&&null!==t.EffectiveDate&&{EffectiveDate:t.EffectiveDate}),void 0!==t.EndpointStatus&&null!==t.EndpointStatus&&{EndpointStatus:t.EndpointStatus}),void 0!==t.Location&&null!==t.Location&&{Location:sl(t.Location)}),void 0!==t.Metrics&&null!==t.Metrics&&{Metrics:ul(t.Metrics)}),void 0!==t.OptOut&&null!==t.OptOut&&{OptOut:t.OptOut}),void 0!==t.RequestId&&null!==t.RequestId&&{RequestId:t.RequestId}),void 0!==t.User&&null!==t.User&&{User:al(t.User)})),void 0===o&&(o={}),o=JSON.stringify(o),[4,c.endpoint()];case 1:return a=e.sent(),i=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new Gs({protocol:s,hostname:i,port:a,method:"PUT",headers:n,path:r,body:o})]}var t})})},Xn=function(r,o){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&300<=r.statusCode?[2,(h=r,m=o,Ai(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f;return Ii(this,function(e){switch(e.label){case 0:return n=[Ei({},h)],f={},[4,fl(h.body,m)];case 1:switch(t=Ei.apply(void 0,n.concat([(f.body=e.sent(),f)])),o="UnknownError",o=hl(h,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return i=[{}],[4,Xc(t)];case 3:return r=Ei.apply(void 0,[Ei.apply(void 0,i.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 4:return s=[{}],[4,Qc(t)];case 5:return r=Ei.apply(void 0,[Ei.apply(void 0,s.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 6:return a=[{}],[4,el(t)];case 7:return r=Ei.apply(void 0,[Ei.apply(void 0,a.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 8:return u=[{}],[4,tl(t)];case 9:return r=Ei.apply(void 0,[Ei.apply(void 0,u.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 10:return c=[{}],[4,nl(t)];case 11:return r=Ei.apply(void 0,[Ei.apply(void 0,c.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 12:return l=[{}],[4,rl(t)];case 13:return r=Ei.apply(void 0,[Ei.apply(void 0,l.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 14:return p=[{}],[4,ol(t)];case 15:return r=Ei.apply(void 0,[Ei.apply(void 0,p.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 16:d=t.body,o=d.code||d.Code||o,r=Ei(Ei({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:dl(h)}),e.label=17;case 17:return d=r.message||r.Message||o,r.message=d,delete r.Message,[2,Promise.reject(Object.assign(new Error(d),r))]}})}))]:(t={$metadata:dl(r),EventsResponse:void 0},[4,fl(r.body,o)]);case 1:return n=e.sent(),t.EventsResponse={Results:void 0!==n.Results&&null!==n.Results?pl(n.Results):void 0},[2,Promise.resolve(t)]}var h,m})})},mn=function(r,o){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&300<=r.statusCode?[2,(h=r,m=o,Ai(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f;return Ii(this,function(e){switch(e.label){case 0:return n=[Ei({},h)],f={},[4,fl(h.body,m)];case 1:switch(t=Ei.apply(void 0,n.concat([(f.body=e.sent(),f)])),o="UnknownError",o=hl(h,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return i=[{}],[4,Xc(t)];case 3:return r=Ei.apply(void 0,[Ei.apply(void 0,i.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 4:return s=[{}],[4,Qc(t)];case 5:return r=Ei.apply(void 0,[Ei.apply(void 0,s.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 6:return a=[{}],[4,el(t)];case 7:return r=Ei.apply(void 0,[Ei.apply(void 0,a.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 8:return u=[{}],[4,tl(t)];case 9:return r=Ei.apply(void 0,[Ei.apply(void 0,u.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 10:return c=[{}],[4,nl(t)];case 11:return r=Ei.apply(void 0,[Ei.apply(void 0,c.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 12:return l=[{}],[4,rl(t)];case 13:return r=Ei.apply(void 0,[Ei.apply(void 0,l.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 14:return p=[{}],[4,ol(t)];case 15:return r=Ei.apply(void 0,[Ei.apply(void 0,p.concat([e.sent()])),{name:o,$metadata:dl(h)}]),[3,17];case 16:d=t.body,o=d.code||d.Code||o,r=Ei(Ei({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:dl(h)}),e.label=17;case 17:return d=r.message||r.Message||o,r.message=d,delete r.Message,[2,Promise.reject(Object.assign(new Error(d),r))]}})}))]:(t={$metadata:dl(r),MessageBody:void 0},[4,fl(r.body,o)]);case 1:return n=e.sent(),t.MessageBody={Message:void 0!==n.Message&&null!==n.Message?n.Message:void 0,RequestID:void 0!==n.RequestID&&null!==n.RequestID?n.RequestID:void 0},[2,Promise.resolve(t)]}var h,m})})},Xc=function(r,e){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:dl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Qc=function(r,e){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:dl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},el=function(r,e){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:dl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},tl=function(r,e){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:dl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},nl=function(r,e){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:dl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},rl=function(r,e){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:dl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},ol=function(r,e){return Ai(void 0,void 0,void 0,function(){var t,n;return Ii(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:dl(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},il=function(e,t){return Ei(Ei(Ei(Ei(Ei(Ei(Ei(Ei({},void 0!==e.AppVersion&&null!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&null!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&null!==e.Make&&{Make:e.Make}),void 0!==e.Model&&null!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&null!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&null!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&null!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&null!==e.Timezone&&{Timezone:e.Timezone})},sl=function(e,t){return Ei(Ei(Ei(Ei(Ei(Ei({},void 0!==e.City&&null!==e.City&&{City:e.City}),void 0!==e.Country&&null!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&null!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&null!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&null!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&null!==e.Region&&{Region:e.Region})},al=function(e,t){return Ei(Ei({},void 0!==e.UserAttributes&&null!==e.UserAttributes&&{UserAttributes:ll(e.UserAttributes)}),void 0!==e.UserId&&null!==e.UserId&&{UserId:e.UserId})},ul=function(e,t){return Object.entries(e).reduce(function(e,t){var n=ki(t,2),t=n[0];return null===(n=n[1])?e:Ei(Ei({},e),((e={})[t]=n,e))},{})},cl=function(e,t){return Object.entries(e).reduce(function(e,t){var n=ki(t,2),t=n[0];return null===(n=n[1])?e:Ei(Ei({},e),((e={})[t]=Gc(n),e))},{})},ll=function(e,t){return Object.entries(e).reduce(function(e,t){var n=ki(t,2),t=n[0];return null===(n=n[1])?e:Ei(Ei({},e),((e={})[t]=n.filter(function(e){return null!=e}).map(function(e){return null===e?null:e}),e))},{})},pl=function(e,t){return Object.entries(e).reduce(function(e,t){var n=ki(t,2),t=n[0];return null===(n=n[1])?e:Ei(Ei({},e),((e={})[t]=Wc(n),e))},{})},dl=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},fl=function(e,t){return o=r=t,((n=void 0===(n=e)?new Uint8Array:n)instanceof Uint8Array?Promise.resolve(n):o.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return r.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o},hl=function(e,t){function n(e){return 0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},ml={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},gl={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function yl(t,n,r){return{applyToStack:function(e){var i,s,o,a;e.add((i=t,s=r,function(o,e){return function(r){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return[4,o(r)];case 1:return t=e.sent().response,[4,s(t,i)];case 2:return n=e.sent(),[2,{response:t,output:n}]}})})}}),ml),e.add((o=t,a=n,function(r,e){return function(n){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,a(n.input,o)];case 1:return t=e.sent(),[2,r(F(F({},n),{request:t}))]}})})}}),gl)}}}($c=$c||{}).filterSensitiveLog=function(e){return Ei({},e)},(Yc=Yc||{}).filterSensitiveLog=function(e){return Ei({},e)},(Jc=Jc||{}).filterSensitiveLog=function(e){return Ei({},e)},(Zc=Zc||{}).filterSensitiveLog=function(e){return Ei({},e)};var vl,bl=(_i(wl,vl=mE),wl.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"PinpointClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:$c.filterSensitiveLog,outputFilterSensitiveLog:Yc.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},wl.prototype.serialize=pt,wl.prototype.deserialize=Xn,wl);function wl(e){var t=vl.call(this)||this;return t.input=e,t}var Sl,Cl=(_i(_l,Sl=mE),_l.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"PinpointClient",commandName:"UpdateEndpointCommand",inputFilterSensitiveLog:Jc.filterSensitiveLog,outputFilterSensitiveLog:Zc.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},_l.prototype.serialize=tr,_l.prototype.deserialize=mn,_l);function _l(e){var t=Sl.call(this)||this;return t.input=e,t}var El={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new A.StorageHelper).getStorage()};function Al(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function Il(){return(new Date).getTime()}function kl(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var Tl=new A.ConsoleLogger("StorageCache"),Xn=(Pl.prototype.getModuleName=function(){return"Cache"},Pl.prototype.checkConfig=function(){kl(this.config.capacityInBytes)||(Tl.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=El.capacityInBytes),kl(this.config.itemMaxSize)||(Tl.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=El.itemMaxSize),kl(this.config.defaultTTL)||(Tl.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=El.defaultTTL),kl(this.config.defaultPriority)||(Tl.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=El.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(Tl.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=El.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(Tl.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=El.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(Tl.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=El.warningThreshold),5242880<this.config.capacityInBytes&&(Tl.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=El.capacityInBytes)},Pl.prototype.fillCacheItem=function(e,t,n){return(t={key:e,data:t,timestamp:Il(),visitedTime:Il(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0}).byteSize=Al(JSON.stringify(t)),t.byteSize=Al(JSON.stringify(t)),t},Pl.prototype.configure=function(e){return e&&(e.keyPrefix&&Tl.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},Pl);function Pl(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var Ol,xl,tr=(Ol=function(e,t){return(Ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ol(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Nl=new A.ConsoleLogger("Cache");function Rl(e){var t=this,e=e?Object.assign({},El,e):El;return(t=xl.call(this,e)||this).config.storage=e.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var Ml=(tr(Rl,xl=Xn),Rl.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},Rl.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},Rl.prototype._refreshItem=function(e,t){return e.visitedTime=Il(),this.config.storage.setItem(t,JSON.stringify(e)),e},Rl.prototype._isExpired=function(e){return e=this.config.storage.getItem(e),e=JSON.parse(e),Il()>=e.expires},Rl.prototype._removeItem=function(e,t){t=t||JSON.parse(this.config.storage.getItem(e)).byteSize,this._decreaseCurSizeInBytes(t),this.config.storage.removeItem(e)},Rl.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),Nl.error("Failed to set item "+e)}},Rl.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes;return(e=(1-this.config.warningThreshold)*this.config.capacityInBytes)<t?t:e},Rl.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},Rl.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},Rl.prototype._popOutItems=function(e,t){for(var n=[],r=t,o=0;o<e.length;o+=1){var i=this.config.storage.getItem(e[o]);null!=i&&(i=JSON.parse(i),n.push(i))}for(n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1}),o=0;o<n.length;o+=1)if(this._removeItem(n[o].key,n[o].byteSize),(r-=n[o].byteSize)<=0)return},Rl.prototype.setItem=function(e,t,n){Nl.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t)if((n={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+Il()}).priority<1||5<n.priority)Nl.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else if((n=this.fillCacheItem(r,t,n)).byteSize>this.config.itemMaxSize)Nl.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var o,i,s=this.config.storage.getItem(r);s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(n.byteSize)&&(o=this._findValidKeys(),this._isCacheFull(n.byteSize)&&(i=this._sizeToPop(n.byteSize),this._popOutItems(o,i))),this._setItem(r,n)}catch(e){Nl.warn("setItem failed! "+e)}else Nl.warn("The value of item should not be undefined!");else Nl.warn("Invalid key: should not be empty or 'CurSize'")},Rl.prototype.getItem=function(e,t){Nl.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return Nl.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var o=JSON.parse(n);return(o=this._refreshItem(o,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var i=t.callback();return null!==i&&this.setItem(e,i,t),i}return null}catch(e){return Nl.warn("getItem failed! "+e),null}},Rl.prototype.removeItem=function(e){if(Nl.log("Remove item: key is "+e),(e=this.config.keyPrefix+e)!==this.config.keyPrefix&&e!==this.cacheCurSizeKey)try{var t=this.config.storage.getItem(e);t&&this._removeItem(e,JSON.parse(t).byteSize)}catch(e){Nl.warn("removeItem failed! "+e)}},Rl.prototype.clear=function(){Nl.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){Nl.warn("clear failed! "+e)}},Rl.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},Rl.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},Rl.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==El.keyPrefix||(Nl.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=Il.toString()),new Rl(e)},new Rl);A.Amplify.register(Ml);function Ul(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Dl=new A.ConsoleLogger("EventsBuffer"),Ll=[429,500],Fl=[202],jl=(Bl.prototype.push=function(e){if(this._buffer>this._config.bufferSize)return Dl.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var t=((t={})[e.params.event.eventId]=e,t);this._buffer.push(t)},Bl.prototype.pause=function(){this._pause=!0},Bl.prototype.resume=function(){this._pause=!1},Bl.prototype.updateClient=function(e){this._client=e},Bl.prototype.flush=function(){this._flush=!0},Bl.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},Bl.prototype._sendBatch=function(){var e,t=this._buffer.length;this._flush&&!t&&clearInterval(this._interval),!this._pause&&t&&(e=this._config.flushSize,t=Math.min(e,t),t=this._buffer.splice(0,t),this._putEvents(t))},Bl.prototype._putEvents=function(d){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,e;return i=this,s=function(e){switch(e.label){case 0:t=this._bufferToMap(d),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),r=new bl(n),[4,this._client.send(r)];case 2:return o=e.sent(),this._processPutEventsSuccessResponse(o,t),[3,4];case 3:return o=e.sent(),[2,this._handlePutEventsFailure(o,t)];case 4:return[2]}},l={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},e={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function p(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,u&&(c=2&t[0]?u.return:t[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,t[1])).done)return c;switch(u=0,(t=c?[2&t[0],c.value]:t)[0]){case 0:case 1:c=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,u=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(c=0<(c=l.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3])){l.label=t[1];break}if(6===t[0]&&l.label<c[1]){l.label=c[1],c=t;break}if(c&&l.label<c[2]){l.label=c[2],l.ops.push(t);break}c[2]&&l.ops.pop(),l.trys.pop();continue}t=s.call(i,l)}catch(e){t=[6,e],u=0}finally{a=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},Bl.prototype._generateBatchEventParams=function(e){var c={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=(u=e.params).event,n=u.timestamp,r=u.config,o=t.name,i=t.attributes,s=t.metrics,a=t.eventId,e=t.session,u=r.appId,t=r.endpointId,r=c.EventsRequest.BatchItem;c.ApplicationId=c.ApplicationId||u,r[t]||(r[t]={Endpoint:{},Events:{}}),r[t].Events[a]={EventType:o,Timestamp:new Date(n).toISOString(),Attributes:i,Metrics:s,Session:e}}),c},Bl.prototype._handlePutEventsFailure=function(e,t){Dl.debug("_putEvents Failed: ",e),e=e.$metadata&&e.$metadata.httpStatusCode,Ll.includes(e)&&(t=Object.values(t),this._retry(t))},Bl.prototype._processPutEventsSuccessResponse=function(e,a){var e=e.EventsResponse.Results,u=[];Object.entries(e).forEach(function(e){var s=(e=Ul(e,2))[0],e=e[1].EventsItemResponse;Object.entries(e).forEach(function(e){var t=(i=Ul(e,2))[0],n=i[1],r=n.StatusCode,o=n.Message,e=a[t],i={EventsResponse:{Results:((i={})[s]={EventsItemResponse:((n={})[t]={StatusCode:r,Message:o},n)},i)}};if(Fl.includes(r))e.handlers.resolve(i);else{if(!Ll.includes(r))return r=e.params.event.name,Dl.error("event "+t+" : "+r+" failed with error: "+o),e.handlers.reject(i);u.push(e)}})}),u.length&&this._retry(u)},Bl.prototype._retry=function(e){var o=[];e.forEach(function(e){var t=e.params,n=(r=t.event).eventId,r=r.name;if(0<t.resendLimit--)return Dl.debug("resending event "+n+" : "+r+" with "+t.resendLimit+" retry attempts remaining"),void o.push(((t={})[n]=e,t));Dl.debug("no retry attempts remaining for event "+n+" : "+r)}),(e=this._buffer).unshift.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ul(arguments[t]));return e}(o))},Bl.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=Ul(Object.entries(t),1),n=(t=Ul(n[0],2))[0],t=t[1];return e[n]=t,e},{})},Bl);function Bl(e,t){this._pause=!1,this._flush=!1,Dl.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function zl(e,t){A.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Gl)}function Vl(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function ql(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Kl(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var Hl=function(){return(Hl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Gl="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Wl=new A.ConsoleLogger("AWSPinpointProvider"),$l=[429,500],Yl=[202],Jl="_update_endpoint",Zl="_session.stop",Xl="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,Ql=(ep.prototype.getCategory=function(){return ep.category},ep.prototype.getProviderName=function(){return ep.providerName},ep.prototype.configure=function(e){var t=this;return Wl.debug("configure Analytics",e),this._config=Object.assign({},this._config,e||{}),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled?this._config.endpointId?zl("pinpointProvider_configured",null):(e=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(e).then(function(e){Wl.debug("setting endpoint id from the cache",e),t._config.endpointId=e,zl("pinpointProvider_configured",null)}).catch(function(e){Wl.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},ep.prototype.record=function(n,r){return Vl(this,void 0,void 0,function(){var t;return ql(this,function(e){switch(e.label){case 0:return Wl.debug("_public record",n),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),t=(new Date).getTime(),this._generateSession(n),n.event.eventId=b.v1(),Object.assign(n,{timestamp:t,config:this._config}),n.event.immediate?[2,this._send(n,r)]:(this._putToBuffer(n,r),[2])):(Wl.debug("cannot send events without credentials, applicationId or region"),[2,r.reject(new Error("No credentials, applicationId or region"))])}})})},ep.prototype._sendEndpointUpdate=function(n){return Vl(this,void 0,void 0,function(){var t;return ql(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},ep.prototype._putToBuffer=function(e,t){e.event.name!==Jl?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},ep.prototype._generateSession=function(e){this._sessionId=this._sessionId||b.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=b.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case Zl:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||b.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||b.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},ep.prototype._send=function(t,n){return Vl(this,void 0,void 0,function(){return ql(this,function(e){switch(t.event.name){case Jl:return[2,this._updateEndpoint({params:t,handlers:n})];case Zl:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},ep.prototype._generateBatchItemContext=function(e){var t=e.event,n=e.timestamp,r=e.config,o=t.name,i=t.attributes,s=t.metrics,a=t.eventId,u=t.session,c=r.appId,e=r.endpointId,t={ApplicationId:c,EventsRequest:{BatchItem:{}}};return(r={Endpoint:{}}).Events=((c={})[a]={EventType:o,Timestamp:new Date(n).toISOString(),Attributes:i,Metrics:s,Session:u},c),t.EventsRequest.BatchItem[e]=r,t},ep.prototype._pinpointPutEvents=function(a,u){return Vl(this,void 0,void 0,function(){var t,n,r,o,i,s;return ql(this,function(e){switch(e.label){case 0:t=a.event.eventId,n=a.config.endpointId,o=this._generateBatchItemContext(a),r=new bl(o),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(r)];case 2:return s=e.sent(),i=n,o=t,i=s.EventsResponse.Results[i].EventsItemResponse[o],o=i.StatusCode,i=i.Message,Yl.includes(o)?(Wl.debug("record event success. ",s),[2,u.resolve(s)]):$l.includes(o)?(this._retry(a,u),[3,4]):(Wl.error("Event "+t+" is not accepted, the error is "+i),[2,u.reject(s)]);case 3:return s=e.sent(),this._eventError(s),[2,u.reject(s)];case 4:return[2]}})})},ep.prototype._pinpointSendStopSession=function(e,t){if(Xl){var n=this._generateBatchItemContext(e),r=this._config.region,o=n.ApplicationId,i=n.EventsRequest,n={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},o="https://pinpoint."+r+".amazonaws.com/v1/apps/"+o+"/events/legacy",i=JSON.stringify(i),r=A.Signer.signUrl({url:o,body:i,method:"POST"},n,{region:r,service:"mobiletargeting"},null);return navigator.sendBeacon(r,i)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},ep.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(Wl.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Wl.debug("retry times used up for event "+e.eventName)},ep.prototype._updateEndpoint=function(a){return Vl(this,void 0,void 0,function(){var t,n,r,o,i,s;return ql(this,function(e){switch(e.label){case 0:o=a.params,t=a.handlers,n=o.config,i=o.event,r=n.appId,o=n.endpointId,i=this._endpointRequest(n,A.JS.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),o={ApplicationId:r,EndpointId:o,EndpointRequest:i},e.label=1;case 1:return e.trys.push([1,3,,4]),i=new Cl(o),[4,this.pinpointClient.send(i)];case 2:return s=e.sent(),Wl.debug("updateEndpoint success",s),this._endpointGenerating=!1,this._resumeBuffer(),t.resolve(s),[2];case 3:return s={err:s=e.sent(),update_params:o,endpointObject:a},[2,this._handleEndpointUpdateFailure(s)];case 4:return[2]}})})},ep.prototype._handleEndpointUpdateFailure=function(o){return Vl(this,void 0,void 0,function(){var t,n,r;return ql(this,function(e){return t=o.err,n=o.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Wl.debug("updateEndpoint error",t),403===r?[2,this._handleEndpointUpdateForbidden(o)]:$l.includes(r)?[2,this._retryEndpointUpdate(n,!0)]:(Wl.error("updateEndpoint failed",t),n.handlers.reject(t),[2])})})},ep.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,e=t.retryable;if("ExpiredTokenException"!==r&&!e)return n.handlers.reject(t);this._retryEndpointUpdate(n)},ep.prototype._retryEndpointUpdate=function(e,t){Wl.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return Wl.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Wl.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Wl.error("Initial endpoint update failed. ")},ep.prototype._initClients=function(r){return Vl(this,void 0,void 0,function(){var t,n;return ql(this,function(e){return Wl.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?Wl.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,Wl.debug("init clients with credentials",r),this.pinpointClient=new Kc({region:n,credentials:r,customUserAgent:A.getAmplifyUserAgent()}),this.pinpointClient.middlewareStack.addRelativeTo(function(t){return function(e){return delete e.request.headers["amz-sdk-invocation-id"],delete e.request.headers["amz-sdk-request"],t(e)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},ep.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof jl},ep.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new jl(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},ep.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},ep.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},ep.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},ep.prototype._customizePinpointClientReq=function(){},ep.prototype._getEndpointId=function(r){return Vl(this,void 0,void 0,function(){var t,n;return ql(this,function(e){switch(e.label){case 0:return[4,Ml.getItem(r)];case 1:return t=e.sent(),Wl.debug("endpointId from cache",t,"type",typeof t),t||(t=b.v1(),n=(new Date).getTime()+31536e8,Ml.setItem(r,t,{expires:n,priority:1})),[2,t]}})})},ep.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},o=e.clientContext||{},i=e.endpoint||{},e={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},o=(o.clientId,o.appTitle,o.appVersionName,o.appVersionCode,o.appPackageName,Kl(o,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),r=t.address?"android"===r.platform?"GCM":"APNS":void 0,t=((t=Hl(Hl(Hl({channelType:r,requestId:b.v1(),effectiveDate:(new Date).toISOString()},i),t),{attributes:Hl(Hl({},i.attributes),t.attributes),demographic:Hl(Hl(Hl(Hl({},e),o),i.demographic),t.demographic),location:Hl(Hl({},i.location),t.location),metrics:Hl(Hl({},i.metrics),t.metrics),user:{userId:t.userId||i.userId||n.identityId,userAttributes:Hl(Hl({},i.userAttributes),t.userAttributes)}})).userId,t.userAttributes,t.name,t.session,t.eventId,t.immediate,Kl(t,["userId","userAttributes","name","session","eventId","immediate"]));return A.JS.transferKeyToUpperCase(t,[],["metrics","userAttributes","attributes"])},ep.prototype._eventError=function(e){Wl.error("record event failed.",e),Wl.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},ep.prototype._getCredentials=function(){return Vl(this,void 0,void 0,function(){var t;return ql(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,A.Credentials.get()];case 1:return(t=e.sent())?(Wl.debug("set credentials for analytics",t),[2,A.Credentials.shear(t)]):[2,null];case 2:return t=e.sent(),Wl.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},ep.category="Analytics",ep.providerName="AWSPinpoint",ep);function ep(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=A.ClientDevice.clientInfo()}function tp(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(arguments[t]));return e}var np=[],rp=(op.add=function(e,t,n){ip(e,t).set(n)},op.remove=function(e,t){ip(e,t).remove()},op.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,tp(e)))}},op.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},op);function op(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function ip(t,n){var e=np.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new rp(t,n),np.push(e)),e}function sp(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function ap(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var up=new A.ConsoleLogger("PageViewTracker"),cp="aws-amplify-analytics-prevUrl",lp={enable:!1,provider:"AWSPinpoint",getUrl:function(){return A.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},mn=(pp.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},pp.prototype._isSameUrl=function(){return sessionStorage.getItem(cp)===this._config.getUrl()&&(up.debug("the url is same"),!0)},pp.prototype._pageViewTrackDefault=function(){return sp(this,void 0,void 0,function(){var t,n,r;return ap(this,function(e){switch(e.label){case 0:return A.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(up.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=n,r=Object.assign({url:t},r),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){up.debug("Failed to record the page view event",e)}),sessionStorage.setItem(cp,t)),[2]}})})},pp.prototype._trackFunc=function(){return sp(this,void 0,void 0,function(){var t,n,r;return ap(this,function(e){switch(e.label){case 0:return A.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(up.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=n,r=Object.assign({url:t},r),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){up.debug("Failed to record the page view event",e)}),sessionStorage.setItem(cp,t)),[2]}})})},pp.prototype._pageViewTrackSPA=function(){A.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(rp.add(history,"pushState",this._trackFunc),rp.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(rp.remove(history,"pushState"),rp.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):up.debug("not in the supported web enviroment")},pp);function pp(e,t){up.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},lp,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var dp=(tr=A.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null)?tr.matches||tr.matchesSelector||tr.webkitMatchesSelector||tr.mozMatchesSelector||tr.msMatchesSelector||tr.oMatchesSelector:null;function fp(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||hp(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||hp(e,n))return 1}}function hp(e,t){if("string"!=typeof t)return!1;if(dp)return dp.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),o=0;n=r[o];o++)if(n===e)return!0;return!1}function mp(e,t,i,s,a){function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),o=0;n=r[o];o++)1===n.nodeType&&fp(n,i)&&(t=n);else t=function(n,e,t){if(void 0===t&&(t=!1),n&&1===n.nodeType&&e)for(var r,o=(t?[n]:[]).concat(function(){for(var e=[],t=n;t&&t.parentNode&&1===t.parentNode.nodeType;)t=t.parentNode,e.push(t);return e}()),i=0;r=o[i];i++)if(fp(r,e))return r}(e.target,i,!0);t&&s.call(t,e,t)}return void 0===a&&(a={}),e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var gp=new A.ConsoleLogger("EventTracker"),yp={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},Xn=(vp.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=mp(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},vp.prototype._trackFunc=function(f,h){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,e;return s=this,a=function(e){switch(e.label){case 0:return t={},n=h.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=h.getAttribute(this._config.selectorPrefix+"name"),(i=h.getAttribute(this._config.selectorPrefix+"attrs"))&&i.split(/\s*,\s*/).forEach(function(e){e=e.trim().split(/\s*:\s*/),t[e[0]]=e[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return o=e.sent(),[3,3];case 2:o=this._config.attributes,e.label=3;case 3:return i=o,i=Object.assign({type:f.type,target:f.target.localName+" with id "+f.target.id},i,t),gp.debug("events needed to be recorded",n),gp.debug("attributes needed to be attached",t),n.indexOf(f.type)<0?gp.debug("event "+f.type+" is not selected to be recorded"):this._tracker({name:r||"event",attributes:i},this._config.provider).catch(function(e){gp.debug("Failed to record the "+f.type+" event', "+e)}),[2]}},p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},e={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function d(t){return function(e){return function(t){if(u)throw new TypeError("Generator is already executing.");for(;p;)try{if(u=1,c&&(l=2&t[0]?c.return:t[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,t[1])).done)return l;switch(c=0,(t=l?[2&t[0],l.value]:t)[0]){case 0:case 1:l=t;break;case 4:return p.label++,{value:t[1],done:!1};case 5:p.label++,c=t[1],t=[0];continue;case 7:t=p.ops.pop(),p.trys.pop();continue;default:if(!(l=0<(l=p.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){p=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){p.label=t[1];break}if(6===t[0]&&p.label<l[1]){p.label=l[1],l=t;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(t);break}l[2]&&p.ops.pop(),p.trys.pop();continue}t=a.call(s,p)}catch(e){t=[6,e],c=0}finally{u=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},vp);function vp(e,t){A.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},yp,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),gp.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):gp.debug("not in the supported web environment")}function bp(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function wp(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Sp=new A.ConsoleLogger("SessionTracker"),Cp={enable:!1,provider:"AWSPinpoint"},_p=!1,tr=(Ep.prototype._envCheck=function(){if(!A.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return Sp.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return Sp.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},Ep.prototype._trackFunc=function(){return bp(this,void 0,void 0,function(){var t,n;return wp(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=t,n=Object.assign({},n),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch(function(e){Sp.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){Sp.debug("record session start event failed.",e)}),[2]}})})},Ep.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){e=Object.assign({},e),t._tracker({name:"_session.stop",attributes:e,immediate:!0},t._config.provider).catch(function(e){Sp.debug("record session stop event failed.",e)})})},Ep.prototype._sendInitialEvent=function(){return bp(this,void 0,void 0,function(){var t,n;return wp(this,function(e){switch(e.label){case 0:return _p?(Sp.debug("the start session has been sent when the page is loaded"),[2]):(_p=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=t,n=Object.assign({},n),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){Sp.debug("record session start event failed.",e)}),[2]}})})},Ep.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},Ep);function Ep(e,t){this._config=Object.assign({},Cp,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}function Ap(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Ip(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var kp=function(){return(kp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Tp=new A.ConsoleLogger("AnalyticsClass"),Pp="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Op={pageView:mn,event:Xn,session:tr},xp=null,tr=(Np.prototype.getModuleName=function(){return"Analytics"},Np.prototype.configure=function(e){var n=this;if(!e)return this._config;Tp.debug("configure Analytics",e);var t=A.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(kp({disabled:n._config.disabled,autoSessionRecord:n._config.autoSessionRecord},t))}),0===this._pluggables.length&&this.addPluggable(new Ql),A.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",Pp),Tp.debug("current configuration",this._config),this._config},Np.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,t=kp({disabled:this._config.disabled},t);return e.configure(t),t}},Np.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return Tp.debug("No plugin found with providerName",e),null},Np.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;t===this._pluggables.length?Tp.debug("No plugin found with providerName",e):this._pluggables.splice(t,t+1)},Np.prototype.disable=function(){this._disabled=!0},Np.prototype.enable=function(){this._disabled=!1},Np.prototype.startSession=function(n){return Ap(this,void 0,void 0,function(){var t;return Ip(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},Np.prototype.stopSession=function(n){return Ap(this,void 0,void 0,function(){var t;return Ip(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},Np.prototype.record=function(n,r,o){return Ap(this,void 0,void 0,function(){var t;return Ip(this,function(e){return t="string"==typeof n?{event:{name:n,attributes:r,metrics:o},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},Np.prototype.updateEndpoint=function(n,r){return Ap(this,void 0,void 0,function(){var t;return Ip(this,function(e){return t=kp(kp({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},Np.prototype._sendEvent=function(r){var e=this;if(this._disabled)return Tp.debug("Analytics has been disabled"),Promise.resolve();var o=r.provider||"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===o&&e.record(r,{resolve:t,reject:n})})})},Np.prototype.autoTrack=function(e,t){var n;Op[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new Op[e](this.record,t)):Tp.debug("invalid tracker type")},Np);function Np(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(xp=this).record=this.record.bind(this),A.Hub.listen("auth",Dp),A.Hub.listen("storage",Dp),A.Hub.listen("analytics",Dp)}var Rp=!1,Mp=!1,Up=!1,Dp=function(e){var t=e.channel,n=e.payload;switch(Tp.debug("on hub capsule "+t,n),t){case"auth":Fp(n);break;case"storage":Lp(n);break;case"analytics":jp(n)}},Lp=function(e){var e=(t=e.data).attrs,t=t.metrics;e&&Up&&xp.record({name:"Storage",attributes:e,metrics:t}).catch(function(e){Tp.debug("Failed to send the storage event automatically",e)})},Fp=function(e){if(e=e.event){var t=function(n){return Ap(void 0,void 0,void 0,function(){var t;return Ip(this,function(e){switch(e.label){case 0:if(!Mp||!Up)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,xp.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),Tp.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(e){case"signIn":return t("sign_in");case"signUp":return t("sign_up");case"signOut":return t("sign_out");case"signIn_failure":return t("auth_fail");case"configured":Mp=!0,Up&&Bp()}}},jp=function(e){(e=e.event)&&"pinpointProvider_configured"===e&&(Up=!0,Mp&&Up&&Bp())},Bp=function(){var e=xp.configure();!Rp&&e.autoSessionRecord&&(xp.updateEndpoint({immediate:!0}).catch(function(e){Tp.debug("Failed to update the endpoint",e)}),Rp=!0),xp.autoTrack("session",{enable:e.autoSessionRecord})},zp=new tr;A.Amplify.register(zp);for(var Vp={},qp={},Kp=0;Kp<256;Kp++){var Hp=Kp.toString(16).toLowerCase();1===Hp.length&&(Hp="0"+Hp),Vp[Kp]=Hp,qp[Hp]=Kp}function Gp(e){for(var t="",n=0;n<e.byteLength;n++)t+=Vp[e[n]];return t}var Wp=($p.fromNumber=function(e){if(0x8000000000000000<e||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));-1<n&&0<r;n--,r/=256)t[n]=r;return e<0&&Yp(t),new $p(t)},$p.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&Yp(e),parseInt(Gp(e),16)*(t?-1:1)},$p.prototype.toString=function(){return String(this.valueOf())},$p);function $p(e){if(8!==(this.bytes=e).byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}function Yp(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;-1<t&&(e[t]++,0===e[t]);t--);}var Jp=(Zp.prototype.format=function(e){var t,n,r,o,i=[];try{for(var s=H(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);i.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(i.reduce(function(e,t){return e+t.byteLength},0)),p=0;try{for(var d=H(i),f=d.next();!f.done;f=d.next()){var h=f.value;l.set(h,p),p+=h.byteLength}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return l},Zp.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":return(n=new Uint8Array(9))[0]=5,n.set(e.value.bytes,1),n;case"binary":var r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(r.buffer);return o.set(e.value,3),o;case"string":return r=this.fromUtf8(e.value),(o=new DataView(new ArrayBuffer(3+r.byteLength))).setUint8(0,7),o.setUint16(1,r.byteLength,!1),(o=new Uint8Array(o.buffer)).set(r,3),o;case"timestamp":var i=new Uint8Array(9);return i[0]=8,i.set(Wp.fromNumber(e.value.valueOf()).bytes,1),i;case"uuid":if(!ad.test(e.value))throw new Error("Invalid UUID received: "+e.value);return(i=new Uint8Array(17))[0]=9,i.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in qp))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=qp[r]}return t}(e.value.replace(/\-/g,"")),1),i}},Zp.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[o]={type:Xp,value:!0};break;case 1:t[o]={type:Xp,value:!1};break;case 2:t[o]={type:Qp,value:e.getInt8(n++)};break;case 3:t[o]={type:ed,value:e.getInt16(n,!1)},n+=2;break;case 4:t[o]={type:td,value:e.getInt32(n,!1)},n+=4;break;case 5:t[o]={type:nd,value:new Wp(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var i=e.getUint16(n,!1);n+=2,t[o]={type:rd,value:new Uint8Array(e.buffer,e.byteOffset+n,i)},n+=i;break;case 7:var s=e.getUint16(n,!1);n+=2,t[o]={type:od,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[o]={type:id,value:new Date(new Wp(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:s=new Uint8Array(e.buffer,e.byteOffset+n,16),n+=16,t[o]={type:sd,value:Gp(s.subarray(0,4))+"-"+Gp(s.subarray(4,6))+"-"+Gp(s.subarray(6,8))+"-"+Gp(s.subarray(8,10))+"-"+Gp(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},Zp);function Zp(e,t){this.toUtf8=e,this.fromUtf8=t}(jd=jd||{})[jd.boolTrue=0]="boolTrue",jd[jd.boolFalse=1]="boolFalse",jd[jd.byte=2]="byte",jd[jd.short=3]="short",jd[jd.integer=4]="integer",jd[jd.long=5]="long",jd[jd.byteArray=6]="byteArray",jd[jd.string=7]="string",jd[jd.timestamp=8]="timestamp",jd[jd.uuid=9]="uuid";var Xp="boolean",Qp="byte",ed="short",td="integer",nd="long",rd="binary",od="string",id="timestamp",sd="uuid",ad=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ud=(cd.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),o=r.byteLength+n.byteLength+16,i=new Uint8Array(o),e=new DataView(i.buffer,i.byteOffset,i.byteLength),t=new u.Crc32;return e.setUint32(0,o,!1),e.setUint32(4,r.byteLength,!1),e.setUint32(8,t.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(n,r.byteLength+12),e.setUint32(o-4,t.update(i.subarray(8,o-4)).digest(),!1),i},cd.prototype.unmarshall=function(e){var e=(t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var o=(a=new DataView(r,n,t)).getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var i=a.getUint32(4,!1),s=a.getUint32(8,!1),e=a.getUint32(t-4,!1),a=(new u.Crc32).update(new Uint8Array(r,n,8));if(s!==a.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+a.digest()+")");if(a.update(new Uint8Array(r,n+8,t-12)),e!==a.digest())throw new Error("The message checksum ("+a.digest()+") did not match the expected value of "+e);return{headers:new DataView(r,n+8+4,i),body:new Uint8Array(r,n+8+4+i,o-i-16)}}(e)).headers,t=t.body;return{headers:this.headerMarshaller.parse(e),body:t}},cd.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},cd);function cd(e,t){this.headerMarshaller=new Jp(e,t)}var ld=(pd.prototype.deserialize=function(e,t){var a,u,c,l,p,n,d=e=(a=e,c=u=0,p=l=null,(n={})[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,o,i,s;return K(this,function(e){switch(e.label){case 0:t=a[Symbol.asyncIterator](),e.label=1;case 1:return[4,$(t.next())];case 2:return n=e.sent(),r=n.value,n.done?u?[3,4]:[4,$(void 0)]:[3,10];case 3:return[2,e.sent()];case 4:return u!==c?[3,7]:[4,$(l)];case 5:return[4,e.sent()];case 6:return e.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,$(void 0)];case 9:return[2,e.sent()];case 10:o=r.length,i=0,e.label=11;case 11:if(!(i<o))return[3,15];if(!l){if(s=o-i,p=p||new Uint8Array(4),s=Math.min(4-c,s),p.set(r.slice(i,i+s),c),i+=s,(c+=s)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);u=e,c=4,l=new Uint8Array(e),new DataView(l.buffer).setUint32(0,e,!1)}(new DataView(p.buffer).getUint32(0,!1)),p=null}return s=Math.min(u-c,o-i),l.set(r.slice(i,i+s),c),c+=s,i+=s,u&&u===c?[4,$(l)]:[3,14];case 12:return[4,e.sent()];case 13:e.sent(),l=null,c=u=0,e.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},n),f={eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder};return(t={})[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,o,i,s,a,u,c,l,p;return K(this,function(e){switch(e.label){case 0:e.trys.push([0,12,13,18]),t=J(d),e.label=1;case 1:return[4,$(t.next())];case 2:if((n=e.sent()).done)return[3,11];if(i=n.value,r=f.eventMarshaller.unmarshall(i),"error"!==(o=r.headers[":message-type"].value))return[3,3];throw(i=new Error(r.headers[":error-message"].value||"UnknownError")).name=r.headers[":error-code"].value,i;case 3:return"exception"!==o?[3,5]:(s=r.headers[":exception-type"].value,(u={})[s]=r,a=u,[4,$(f.deserializer(a))]);case 4:if((u=e.sent()).$unknown)throw(a=new Error(f.toUtf8(r.body))).name=s,a;throw u[s];case 5:return"event"!==o?[3,9]:((c={})[r.headers[":event-type"].value]=r,[4,$(f.deserializer(c))]);case 6:return(c=e.sent()).$unknown?[3,10]:[4,$(c)];case 7:return[4,e.sent()];case 8:return e.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+r.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return l={error:l=e.sent()},[3,18];case 13:return e.trys.push([13,,16,17]),n&&!n.done&&(p=t.return)?[4,$(p.call(t))]:[3,15];case 14:e.sent(),e.label=15;case 15:return[3,17];case 16:if(l)throw l.error;return[7];case 17:return[7];case 18:return[2]}})})},t},pd.prototype.serialize=function(s,a){var u=this,e={};return e[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,o,i;return K(this,function(e){switch(e.label){case 0:e.trys.push([0,7,8,13]),t=J(s),e.label=1;case 1:return[4,$(t.next())];case 2:return(n=e.sent()).done?[3,6]:(r=n.value,[4,$(u.eventMarshaller.marshall(a(r)))]);case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return o={error:o=e.sent()},[3,13];case 8:return e.trys.push([8,,11,12]),n&&!n.done&&(i=t.return)?[4,$(i.call(t))]:[3,10];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(o)throw o.error;return[7];case 12:return[7];case 13:return[4,$(new Uint8Array(0))];case 14:return[4,e.sent()];case 15:return e.sent(),[2]}})})},e},pd);function pd(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new ud(t,e),this.utfEncoder=t}var dd,fd,hd=(md.prototype.deserialize=function(e,t){return e="function"==typeof e[Symbol.asyncIterator]?e:function(i){return Y(this,arguments,function(){var t,n,r,o;return K(this,function(e){switch(e.label){case 0:n=t=!1,r=new Array,i.on("error",function(e){if(t=t||!0,e)throw e}),i.on("data",function(e){r.push(e)}),i.on("end",function(){t=!0}),e.label=1;case 1:return n?[3,6]:[4,$(new Promise(function(e){return setTimeout(function(){return e(r.shift())},0)}))];case 2:return(o=e.sent())?[4,$(o)]:[3,5];case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return n=t&&0===r.length,[3,1];case 6:return[2]}})})}(e),this.universalMarshaller.deserialize(e,t)},md.prototype.serialize=function(e,t){if(t=this.universalMarshaller.serialize(e,t),"function"==typeof o.Readable.from)return o.Readable.from(t);var r=t[Symbol.asyncIterator](),n=new o.Readable({autoDestroy:!0,objectMode:!0,read:function(){return q(this,void 0,void 0,function(){var n=this;return K(this,function(e){return r.next().then(function(e){var t=e.done,e=e.value;t?n.push(null):n.push(e)}).catch(function(e){n.destroy(e)}),[2]})})}});return n.on("error",function(){n.destroy()}),n.on("end",function(){n.destroy()}),n},md);function md(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new ud(t,e),this.universalMarshaller=new ld({utf8Decoder:e,utf8Encoder:t})}function gd(t){return t&&["provider"].find(function(e){return t.hasOwnProperty(e)})}function yd(e){return void 0!==e.redirectSignIn}(jd=dd=dd||{}).Cognito="COGNITO",jd.Google="Google",jd.Facebook="Facebook",jd.Amazon="LoginWithAmazon",jd.Apple="SignInWithApple",(jd=fd=fd||{}).NoConfig="noConfig",jd.MissingAuthConfig="missingAuthConfig",jd.EmptyUsername="emptyUsername",jd.InvalidUsername="invalidUsername",jd.EmptyPassword="emptyPassword",jd.EmptyCode="emptyCode",jd.SignUpError="signUpError",jd.NoMFA="noMFA",jd.InvalidMFA="invalidMFA",jd.EmptyChallengeResponse="emptyChallengeResponse",jd.NoUserSession="noUserSession",jd.Default="default",jd.DeviceConfig="deviceConfig",jd.NetworkError="networkError";var vd,bd,wd=((bd=Sd.prototype).getUsername=function(){return this.username},bd.getPassword=function(){return this.password},bd.getValidationData=function(){return this.validationData},bd.getAuthParameters=function(){return this.authParameters},bd.getClientMetadata=function(){return this.clientMetadata},Sd);function Sd(e){var t=(o=e||{}).ValidationData,n=o.Username,r=o.Password,e=o.AuthParameters,o=o.ClientMetadata;this.validationData=t||{},this.authParameters=e||{},this.clientMetadata=o||{},this.username=n,this.password=r}if(!(vd=!(vd=!(vd="undefined"!=typeof window&&window.crypto?window.crypto:vd)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:vd)&&void 0!==p&&p.crypto?p.crypto:vd)&&"function"==typeof require)try{vd=require("crypto")}catch(e){}var Cd,_d=((Cd=Ed.prototype).random=function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(vd){if("function"==typeof vd.getRandomValues)try{return vd.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof vd.randomBytes)try{return vd.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new Ed(t,e)},Cd.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")}(this)},Ed);function Ed(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}function Ad(e,t){null!=e&&this.fromString(e,t)}function Id(){return new Ad(null)}p=(jd="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(Ad.prototype.am=function(e,t,n,r,o,i){for(var s=32767&t,a=t>>15;0<=--i;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;o=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&o))>>>30)+(l>>>15)+a*c+(o>>>30),n[r++]=1073741823&u}return o},30):jd&&"Netscape"!=navigator.appName?(Ad.prototype.am=function(e,t,n,r,o,i){for(;0<=--i;){var s=t*this[e++]+n[r]+o;o=Math.floor(s/67108864),n[r++]=67108863&s}return o},26):(Ad.prototype.am=function(e,t,n,r,o,i){for(var s=16383&t,a=t>>14;0<=--i;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;o=((u=s*u+((16383&l)<<14)+n[r]+o)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return o},28);Ad.prototype.DB=p,Ad.prototype.DM=(1<<p)-1,Ad.prototype.DV=1<<p,Ad.prototype.FV=Math.pow(2,52),Ad.prototype.F1=52-p,Ad.prototype.F2=2*p-52;for(var kd=new Array,Td="0".charCodeAt(0),Pd=0;Pd<=9;++Pd)kd[Td++]=Pd;for(Td="a".charCodeAt(0),Pd=10;Pd<36;++Pd)kd[Td++]=Pd;for(Td="A".charCodeAt(0),Pd=10;Pd<36;++Pd)kd[Td++]=Pd;function Od(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function xd(e){var t=Id();return t.fromInt(e),t}function Nd(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function Rd(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Md(e){return m.Buffer.from((new _d).random(e).toString(),"hex")}Rd.prototype.convert=function(e){var t=Id();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(Ad.ZERO)&&this.m.subTo(t,t),t},Rd.prototype.revert=function(e){var t=Id();return e.copyTo(t),this.reduce(t),t},Rd.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},Rd.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},Rd.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Ad.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Ad.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Ad.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,o=!1,i=0;0<=--r;){var s=(s=r,null==(s=kd[e.charCodeAt(s)])?-1:s);s<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0==i?this[this.t++]=s:i+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=n)>=this.DB&&(i-=this.DB))}this.clamp(),o&&Ad.ZERO.subTo(this,this)},Ad.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},Ad.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},Ad.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},Ad.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,o=(1<<r)-1,i=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+i+1]=this[a]>>r|s,s=(this[a]&o)<<n;for(a=i-1;0<=a;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},Ad.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&i)<<o,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}},Ad.prototype.subTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},Ad.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;0<=--o;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Ad.ZERO.subTo(t,t)},Ad.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},Ad.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){if((c=this.abs()).t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Id());var o=Id(),i=this.s,s=e.s;0<(e=this.DB-Nd(r[r.t-1]))?(r.lShiftTo(e,o),c.lShiftTo(e,n)):(r.copyTo(o),c.copyTo(n));var a=o.t,u=o[a-1];if(0!=u){var c=u*(1<<this.F1)+(1<a?o[a-2]>>this.F2:0),l=this.FV/c,p=(1<<this.F1)/c,d=1<<this.F2,f=n.t,h=f-a,m=null==t?Id():t;for(o.dlShiftTo(h,m),0<=n.compareTo(m)&&(n[n.t++]=1,n.subTo(m,n)),Ad.ONE.dlShiftTo(a,m),m.subTo(o,o);o.t<a;)o[o.t++]=0;for(;0<=--h;){var g=n[--f]==u?this.DM:Math.floor(n[f]*l+(n[f-1]+d)*p);if((n[f]+=o.am(0,g,n,h,0,a))<g)for(o.dlShiftTo(h,m),n.subTo(m,n);n[f]<--g;)n.subTo(m,n)}null!=t&&(n.drShiftTo(a,t),i!=s&&Ad.ZERO.subTo(t,t)),n.t=a,n.clamp(),0<e&&n.rShiftTo(e,n),i<0&&Ad.ZERO.subTo(n,n)}}},Ad.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},Ad.prototype.addTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},Ad.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,o=!1,i="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(o=!0,i=Od(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),(o=0<n||o)&&(i+=Od(n));return o?i:"0"},Ad.prototype.negate=function(){var e=Id();return Ad.ZERO.subTo(this,e),e},Ad.prototype.abs=function(){return this.s<0?this.negate():this},Ad.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},Ad.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Nd(this[this.t-1]^this.s&this.DM)},Ad.prototype.mod=function(e){var t=Id();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(Ad.ZERO)&&e.subTo(t,t),t},Ad.prototype.equals=function(e){return 0==this.compareTo(e)},Ad.prototype.add=function(e){var t=Id();return this.addTo(e,t),t},Ad.prototype.subtract=function(e){var t=Id();return this.subTo(e,t),t},Ad.prototype.multiply=function(e){var t=Id();return this.multiplyTo(e,t),t},Ad.prototype.divide=function(e){var t=Id();return this.divRemTo(e,t,null),t},Ad.prototype.modPow=function(e,t,n){var r=e.bitLength(),o=xd(1),i=new Rd(t);if(r<=0)return o;var s=r<18?1:r<48?3:r<144?4:r<768?5:6,a=new Array,u=3,c=s-1,l=(1<<s)-1;if(a[1]=i.convert(this),1<s){var p=Id();for(i.sqrTo(a[1],p);u<=l;)a[u]=Id(),i.mulTo(p,a[u-2],a[u]),u+=2}for(var d,f,h=e.t-1,m=!0,g=Id(),r=Nd(e[h])-1;0<=h;){for(c<=r?d=e[h]>>r-c&l:(d=(e[h]&(1<<r+1)-1)<<c-r,0<h&&(d|=e[h-1]>>this.DB+r-c)),u=s;0==(1&d);)d>>=1,--u;if((r-=u)<0&&(r+=this.DB,--h),m)a[d].copyTo(o),m=!1;else{for(;1<u;)i.sqrTo(o,g),i.sqrTo(g,o),u-=2;0<u?i.sqrTo(o,g):(f=o,o=g,g=f),i.mulTo(g,a[d],o)}for(;0<=h&&0==(e[h]&1<<r);)i.sqrTo(o,g),f=o,o=g,g=f,--r<0&&(r=this.DB-1,--h)}return n(null,t=i.revert(o)),t},Ad.ZERO=xd(0),Ad.ONE=xd(1);var Ud,Dd,Ld=/^[89a-f]/i,Fd=((Dd=zd.prototype).getSmallAValue=function(){return this.smallAValue},Dd.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},Dd.generateRandomSmallA=function(){return new Ad(Md(128).toString("hex"),16)},Dd.generateRandomString=function(){return Md(40).toString("base64")},Dd.getRandomPassword=function(){return this.randomPassword},Dd.getSaltDevices=function(){return this.SaltToHashDevices},Dd.getVerifierDevices=function(){return this.verifierDevices},Dd.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString(),e=""+e+t+":"+this.randomPassword,t=this.hash(e),e=Md(16).toString("hex"),this.SaltToHashDevices=this.padHex(new Ad(e,16)),this.g.modPow(new Ad(this.hexHash(this.SaltToHashDevices+t),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},Dd.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(Ad.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},Dd.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new Ad(this.UHexHash,16)},Dd.hash=function(e){return e=e instanceof m.Buffer?d.lib.WordArray.create(e):e,e=_(e).toString(),new Array(64-e.length).join("0")+e},Dd.hexHash=function(e){return this.hash(m.Buffer.from(e,"hex"))},Dd.computehkdf=function(e,t){var n=d.lib.WordArray.create(m.Buffer.concat([this.infoBits,m.Buffer.from(String.fromCharCode(1),"utf8")])),e=e instanceof m.Buffer?d.lib.WordArray.create(e):e,t=t instanceof m.Buffer?d.lib.WordArray.create(t):t,t=E(e,t),t=E(n,t);return m.Buffer.from(t.toString(),"hex").slice(0,16)},Dd.getPasswordAuthenticationKey=function(e,t,n,r,o){var i=this;if(n.mod(this.N).equals(Ad.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(Ad.ZERO))throw new Error("U cannot be zero.");t=""+this.poolName+e+":"+t,t=this.hash(t),t=new Ad(this.hexHash(this.padHex(r)+t),16),this.calculateS(t,n,function(e,t){e&&o(e,null),t=i.computehkdf(m.Buffer.from(i.padHex(t),"hex"),m.Buffer.from(i.padHex(i.UValue),"hex")),o(null,t)})},Dd.calculateS=function(n,r,o){var i=this;this.g.modPow(n,this.N,function(e,t){e&&o(e,null),r.subtract(i.k.multiply(t)).modPow(i.smallAValue.add(i.UValue.multiply(n)),i.N,function(e,t){e&&o(e,null),o(null,t.mod(i.N))})})},Dd.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},Dd.padHex=function(e){if(!(e instanceof Ad))throw new Error("Not a BigInteger");var t=e.compareTo(Ad.ZERO)<0;return e=(e=e.abs().toString(16)).length%2!=0?"0"+e:e,e=Ld.test(e)?"00"+e:e,t&&(e=new Ad(e.split("").map(function(e){return e=15&~parseInt(e,16),"0123456789ABCDEF".charAt(e)}).join(""),16).add(Ad.ONE).toString(16)).toUpperCase().startsWith("FF8")?e.substring(2):e},zd),jd=((Ud=Bd.prototype).getJwtToken=function(){return this.jwtToken},Ud.getExpiration=function(){return this.payload.exp},Ud.getIssuedAt=function(){return this.payload.iat},Ud.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(m.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},Bd);function Bd(e){this.jwtToken=e||"",this.payload=this.decodePayload()}function zd(e){this.N=new Ad("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Ad("2",16),this.k=new Ad(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=m.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}function Vd(e,t){return(Vd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qd,Kd,Hd,Gd=(Hd=qd=jd,(Kd=Wd).prototype=Object.create(Hd.prototype),Vd(Kd.prototype.constructor=Kd,Hd),Wd);function Wd(e){return e=(void 0===e?{}:e).AccessToken,qd.call(this,e||"")||this}function $d(e,t){return($d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yd,Jd,Zd,Xd,Qd,ef,tf=(ef=Xd=jd,(Qd=Cf).prototype=Object.create(ef.prototype),$d(Qd.prototype.constructor=Qd,ef),Cf),nf=(Sf.prototype.getToken=function(){return this.token},Sf),rf=((Zd=wf.prototype).getIdToken=function(){return this.idToken},Zd.getRefreshToken=function(){return this.refreshToken},Zd.getAccessToken=function(){return this.accessToken},Zd.getClockDrift=function(){return this.clockDrift},Zd.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},Zd.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},wf),of=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],sf=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],af=(bf.prototype.getNowString=function(){var e=new Date,t=sf[e.getUTCDay()],n=of[e.getUTCMonth()],r=e.getUTCDate(),o=e.getUTCHours();o<10&&(o="0"+o);var i=e.getUTCMinutes();i<10&&(i="0"+i);var s=e.getUTCSeconds();return t+" "+n+" "+r+" "+o+":"+i+":"+(s=s<10?"0"+s:s)+" UTC "+e.getUTCFullYear()},bf),uf=((Jd=vf.prototype).getValue=function(){return this.Value},Jd.setValue=function(e){return this.Value=e,this},Jd.getName=function(){return this.Name},Jd.setName=function(e){return this.Name=e,this},Jd.toString=function(){return JSON.stringify(this)},Jd.toJSON=function(){return{Name:this.Name,Value:this.Value}},vf),cf={},lf=(yf.setItem=function(e,t){return cf[e]=t,cf[e]},yf.getItem=function(e){return Object.prototype.hasOwnProperty.call(cf,e)?cf[e]:void 0},yf.removeItem=function(e){return delete cf[e]},yf.clear=function(){return cf={}},yf),pf=(gf.prototype.getStorage=function(){return this.storageWindow},gf),df="undefined"!=typeof navigator?navigator.userAgent:"nodejs",ff=((Yd=mf.prototype).setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},Yd.getSignInUserSession=function(){return this.signInUserSession},Yd.getUsername=function(){return this.username},Yd.getAuthenticationFlowType=function(){return this.authenticationFlowType},Yd.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},Yd.initiateAuth=function(e,r){var o=this,t=e.getAuthParameters();t.USERNAME=this.username,e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return r.onFailure(e);var n=t.ChallengeName,e=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(o.Session=t.Session,r.customChallenge(e)):(o.signInUserSession=o.getCognitoUserSession(t.AuthenticationResult),o.cacheTokens(),r.onSuccess(o.signInUserSession))})},Yd.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},Yd.authenticateUserDefaultAuth=function(n,a){var i,u,c=this,l=new Fd(this.pool.getUserPoolId().split("_")[1]),p=new af,r={};null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey),r.USERNAME=this.username,l.getLargeAValue(function(e,t){e&&a.onFailure(e),r.SRP_A=t.toString(16),"CUSTOM_AUTH"===c.authenticationFlowType&&(r.CHALLENGE_NAME="SRP_A");var s=0!==Object.keys(n.getValidationData()).length?n.getValidationData():n.getClientMetadata(),t={AuthFlow:c.authenticationFlowType,ClientId:c.pool.getClientId(),AuthParameters:r,ClientMetadata:s};c.getUserContextData(c.username)&&(t.UserContextData=c.getUserContextData(c.username)),c.client.request("InitiateAuth",t,function(e,r){if(e)return a.onFailure(e);var o=r.ChallengeParameters;c.username=o.USER_ID_FOR_SRP,c.userDataKey=c.keyPrefix+"."+c.username+".userData",i=new Ad(o.SRP_B,16),u=new Ad(o.SALT,16),c.getCachedDeviceKeyAndPassword(),l.getPasswordAuthenticationKey(c.username,n.getPassword(),i,u,function(e,t){e&&a.onFailure(e);var n=p.getNowString(),e=d.lib.WordArray.create(m.Buffer.concat([m.Buffer.from(c.pool.getUserPoolId().split("_")[1],"utf8"),m.Buffer.from(c.username,"utf8"),m.Buffer.from(o.SECRET_BLOCK,"base64"),m.Buffer.from(n,"utf8")])),t=d.lib.WordArray.create(t),t=I.stringify(E(e,t)),i={};i.USERNAME=c.username,i.PASSWORD_CLAIM_SECRET_BLOCK=o.SECRET_BLOCK,i.TIMESTAMP=n,i.PASSWORD_CLAIM_SIGNATURE=t,null!=c.deviceKey&&(i.DEVICE_KEY=c.deviceKey),n=function n(r,o){return c.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(i.DEVICE_KEY=null,c.deviceKey=null,c.randomPassword=null,c.deviceGroupKey=null,c.clearCachedDeviceKeyAndPassword(),n(r,o)):o(e,t)})},t={ChallengeName:"PASSWORD_VERIFIER",ClientId:c.pool.getClientId(),ChallengeResponses:i,Session:r.Session,ClientMetadata:s},c.getUserContextData()&&(t.UserContextData=c.getUserContextData()),n(t,function(e,t){return e?a.onFailure(e):c.authenticateUserInternal(t,l,a)})})})})},Yd.authenticateUserPlainUsernamePassword=function(e,n){var r,o=this,t={};t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD?(r=new Fd(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey),e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData(this.username)&&(e.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",e,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},Yd.authenticateUserInternal=function(n,t,r){var o=this,e=n.ChallengeName,i=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,r.mfaRequired(e,i);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,r.selectMFAType(e,i);if("MFA_SETUP"===e)return this.Session=n.Session,r.mfaSetup(e,i);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,r.totpRequired(e,i);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,r.customChallenge(i);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(i&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return r.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"===e)return this.Session=n.Session,void this.getDeviceResponse(r);this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return r.onSuccess(this.signInUserSession);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){return e?r.onFailure(e):(e={Salt:m.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:m.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")},o.verifierDevices=e.PasswordVerifier,o.deviceGroupKey=p.DeviceGroupKey,o.randomPassword=t.getRandomPassword(),void o.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:o.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:df},function(e,t){return e?r.onFailure(e):(o.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,o.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(o.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(o.signInUserSession))}))})},Yd.completeNewPasswordChallenge=function(e,t,n,r){var o=this;if(!e)return n.onFailure(new Error("New password is required."));var i=new Fd(this.pool.getUserPoolId().split("_")[1]),s=i.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username,r={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,i,n)})},Yd.getDeviceResponse=function(i,n){var s=this,a=new Fd(this.deviceGroupKey),u=new af,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(e,t){e&&i.onFailure(e),r.SRP_A=t.toString(16),t={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:r,ClientMetadata:n,Session:s.Session},s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,r){if(e)return i.onFailure(e);var o=r.ChallengeParameters,t=new Ad(o.SRP_B,16),e=new Ad(o.SALT,16);a.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,t,e,function(e,t){if(e)return i.onFailure(e);var n=u.getNowString(),e=d.lib.WordArray.create(m.Buffer.concat([m.Buffer.from(s.deviceGroupKey,"utf8"),m.Buffer.from(s.deviceKey,"utf8"),m.Buffer.from(o.SECRET_BLOCK,"base64"),m.Buffer.from(n,"utf8")])),t=d.lib.WordArray.create(t),e=I.stringify(E(e,t));(t={}).USERNAME=s.username,t.PASSWORD_CLAIM_SECRET_BLOCK=o.SECRET_BLOCK,t.TIMESTAMP=n,t.PASSWORD_CLAIM_SIGNATURE=e,t.DEVICE_KEY=s.deviceKey,t={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:t,Session:r.Session},s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,t){return e?i.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),i.onSuccess(s.signInUserSession))})})})})},Yd.confirmRegistration=function(e,t,n,r){r={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",r,function(e){return e?n(e,null):n(null,"SUCCESS")})},Yd.sendCustomChallengeAnswer=function(e,n,t){var r=this,o={};o.USERNAME=this.username,o.ANSWER=e;var i=new Fd(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey),t={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t},this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,i,n)})},Yd.sendMFACode=function(e,r,t,n){var o=this,i={};i.USERNAME=this.username,i.SMS_MFA_CODE=e,"SOFTWARE_TOKEN_MFA"===(t=t||"SMS_MFA")&&(i.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey),n={ChallengeName:t,ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n},this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",n,function(e,n){if(e)return r.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(o.signInUserSession=o.getCognitoUserSession(n.AuthenticationResult),o.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return r.onSuccess(o.signInUserSession);var t=new Fd(o.pool.getUserPoolId().split("_")[1]);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){return e?r.onFailure(e):(e={Salt:m.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:m.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")},o.verifierDevices=e.PasswordVerifier,o.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,o.randomPassword=t.getRandomPassword(),void o.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:o.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:df},function(e,t){return e?r.onFailure(e):(o.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,o.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(o.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(o.signInUserSession))}))})}else o.getDeviceResponse(r)})},Yd.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},Yd.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Yd.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},Yd.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Yd.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},Yd.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},Yd.getUserAttributes=function(i){if(null==this.signInUserSession||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return i(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var o={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},o=new uf(o);n.push(o)}return i(null,n)})},Yd.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},Yd.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},Yd.refreshSessionIfPossible=function(n){var r=this;return void 0===n&&(n={}),new Promise(function(e){var t=r.signInUserSession.getRefreshToken();t&&t.getToken()?r.refreshSession(t,e,n.clientMetadata):e()})},Yd.getUserData=function(t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var e=this.getUserDataFromCache();if(e)if(this.isFetchUserDataAndTokenRequired(n))this.fetchUserData().then(function(e){return r.refreshSessionIfPossible(n).then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(e))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},Yd.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},Yd.isFetchUserDataAndTokenRequired=function(e){return void 0!==(e=(e||{}).bypassCache)&&e},Yd.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},Yd.deleteAttributes=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):n.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},Yd.resendConfirmationCode=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e},this.client.request("ResendConfirmationCode",e,function(e,t){return e?n(e,null):n(null,t)})},Yd.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n=(i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".idToken",r=i+".accessToken",o=i+".refreshToken",i=i+".clockDrift";if(this.storage.getItem(n)){if(n=new tf({IdToken:this.storage.getItem(n)}),r=new Gd({AccessToken:this.storage.getItem(r)}),o=new nf({RefreshToken:this.storage.getItem(o)}),i=parseInt(this.storage.getItem(i),0)||0,(i=new rf({IdToken:n,AccessToken:r,RefreshToken:o,ClockDrift:i})).isValid())return this.signInUserSession=i,e(null,this.signInUserSession);if(!o.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(o,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},Yd.refreshSession=function(n,e,t){var r=this,o=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(e):e,i={};i.REFRESH_TOKEN=n.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=s+".LastAuthUser";this.storage.getItem(e)&&(this.username=this.storage.getItem(e),s=s+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(s),i.DEVICE_KEY=this.deviceKey),t={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:i,ClientMetadata:t},this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",t,function(e,t){return e?("NotAuthorizedException"===e.code&&r.clearCachedUser(),o(e,null)):t?(t=t.AuthenticationResult,Object.prototype.hasOwnProperty.call(t,"RefreshToken")||(t.RefreshToken=n.getToken()),r.signInUserSession=r.getCognitoUserSession(t),r.cacheTokens(),o(null,r.signInUserSession)):void 0})},Yd.cacheTokens=function(){var e=(o="CognitoIdentityServiceProvider."+this.pool.getClientId())+"."+this.username+".idToken",t=o+"."+this.username+".accessToken",n=o+"."+this.username+".refreshToken",r=o+"."+this.username+".clockDrift",o=o+".LastAuthUser";this.storage.setItem(e,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(t,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(r,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},Yd.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},Yd.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey),this.storage.removeItem(this.uploadProgressKey)},Yd.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},Yd.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.setItem(e+".deviceKey",this.deviceKey),this.storage.setItem(t,this.randomPassword),this.storage.setItem(n,this.deviceGroupKey)},Yd.getCachedDeviceKeyAndPassword=function(){var e=(n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".deviceKey",t=n+".randomPasswordKey",n=n+".deviceGroupKey";this.storage.getItem(e)&&(this.deviceKey=this.storage.getItem(e),this.randomPassword=this.storage.getItem(t),this.deviceGroupKey=this.storage.getItem(n))},Yd.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.removeItem(e+".deviceKey"),this.storage.removeItem(t),this.storage.removeItem(n)},Yd.clearCachedTokens=function(){var e=(o="CognitoIdentityServiceProvider."+this.pool.getClientId())+"."+this.username+".idToken",t=o+"."+this.username+".accessToken",n=o+"."+this.username+".refreshToken",r=o+".LastAuthUser",o=o+"."+this.username+".clockDrift";this.storage.removeItem(e),this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(o)},Yd.getCognitoUserSession=function(e){var t=new tf(e),n=new Gd(e),e=new nf(e);return new rf({IdToken:t,AccessToken:n,RefreshToken:e})},Yd.forgotPassword=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",e,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},Yd.confirmPassword=function(e,t,n,r){r={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",r,function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},Yd.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess("SUCCESS")})},Yd.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},Yd.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},Yd.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Yd.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},Yd.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Yd.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Yd.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));e={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e},t&&(e.PaginationToken=t),this.client.request("ListDevices",e,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},Yd.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},Yd.signOut=function(n){var r=this;n&&"function"==typeof n?this.getSession(function(e,t){return e?n(e):void r.revokeTokens(function(e){r.cleanClientData(),n(e)})}):this.cleanClientData()},Yd.revokeTokens=function(e){if("function"!=typeof(e=void 0===e?function(){}:e))throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return e(new Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return e(new Error("No Access token available"));var t=this.signInUserSession.getRefreshToken().getToken(),n=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(n)&&t)return this.revokeToken({token:t,callback:e});e()},Yd.isSessionRevocable=function(e){if(e&&"function"==typeof e.decodePayload)try{return!!e.decodePayload().origin_jti}catch(e){}return!1},Yd.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},Yd.revokeToken=function(e){var t=e.token,n=e.callback;this.client.requestWithRetry("RevokeToken",{Token:t,ClientId:this.pool.getClientId()},function(e){return e?n(e):void n()})},Yd.sendMFASelectionAnswer=function(n,r){var o=this,e={};e.USERNAME=this.username,e.ANSWER=n,e={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",e,function(e,t){return e?r.onFailure(e):(o.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.ChallengeName,t.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.ChallengeName,t.ChallengeParameters):void 0)})},Yd.getUserContextData=function(){return this.pool.getUserContextData(this.username)},Yd.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},Yd.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,(t={}).USERNAME=r.username,t={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:t,Session:r.Session},r.getUserContextData()&&(t.UserContextData=r.getUserContextData()),void r.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))})},mf),hf={userAgent:(p="aws-amplify/5.0.4")+" js",product:"",navigator:null,isReactNative:!1};function mf(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new pf).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData",this.uploadProgressKey="__uploadInProgress"}function gf(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=lf}}function yf(){}function vf(e){var e=(t=void 0===e?{}:e).Name,t=t.Value;this.Name=e||"",this.Value=t||""}function bf(){}function wf(e){var t=(r=void 0===e?{}:e).IdToken,n=r.RefreshToken,e=r.AccessToken,r=r.ClockDrift;if(null==e||null==t)throw new Error("Id token and Access Token must be present.");this.idToken=t,this.refreshToken=n,this.accessToken=e,this.clockDrift=void 0===r?this.calculateClockDrift():r}function Sf(e){e=(void 0===e?{}:e).RefreshToken,this.token=e||""}function Cf(e){return e=(void 0===e?{}:e).IdToken,Xd.call(this,e||"")||this}function _f(){}function Ef(e,t,n){return(Ef=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&Af(r,n.prototype),r}).apply(null,arguments)}function Af(e,t){return(Af=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function If(e){return(If=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}"undefined"!=typeof navigator&&navigator.product&&(hf.product=navigator.product||"",hf.navigator=navigator||null,"ReactNative"===navigator.product?(hf.userAgent=p+" react-native",hf.isReactNative=!0):(hf.userAgent=p+" js",hf.isReactNative=!1)),_f.prototype.userAgent=hf.userAgent;var kf,Tf,Pf,Of,xf,Nf,Rf=(xf=Error,Nf="function"==typeof Map?new Map:void 0,Tf=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==Nf){if(Nf.has(e))return Nf.get(e);Nf.set(e,t)}function t(){return Ef(e,arguments,If(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Af(t,e)}(xf),Of=Tf,(Pf=Ff).prototype=Object.create(Of.prototype),Af(Pf.prototype.constructor=Pf,Of),Ff),Mf=((kf=Lf.prototype).promisifyRequest=function(e,t){var o=this;return new Promise(function(n,r){o.request(e,t,function(e,t){e?r(new Rf(e.message,e.code,e.name,e.statusCode)):n(t)})})},kf.requestWithRetry=function(t,e,n){var r,o=this;(function n(r,o,i,s){if(void 0===s&&(s=1),"function"!=typeof r)throw Error("functionToRetry must be a function");return Uf.debug(r.name+" attempt #"+s+" with args: "+JSON.stringify(o)),r.apply(void 0,o).catch(function(e){if(Uf.debug("error on "+r.name,e),Df(e))throw Uf.debug(r.name+" non retryable error",e),e;var t=i(s,o,e);if(Uf.debug(r.name+" retrying in "+t+" ms"),!1!==t)return new Promise(function(e){return setTimeout(e,t)}).then(function(){return n(r,o,i,s+1)});throw e})})(function(e){return new Promise(function(n,r){o.request(t,e,function(e,t){e?r(e):n(t)})})},[e],(r=5e3,function(e){return e=100*Math.pow(2,e)+100*Math.random(),!(r<e)&&e})).then(function(e){return n(null,e)}).catch(function(e){return n(e)})},kf.request=function(e,t,r){var o,t=Object.assign({},this.fetchOptions,{headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":_f.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,t).then(function(e){return o=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(o.ok)return r(null,e);var t=(e.__type||e.code).split("#").pop();return(e=new Error(e.message||e.Message||null)).name=t,e.code=t,r(e)}).catch(function(e){if(o&&o.headers&&o.headers.get("x-amzn-errortype"))try{var t=o.headers.get("x-amzn-errortype").split(":")[0],n=new Error(o.status?o.status.toString():null);return n.code=t,n.name=t,n.statusCode=o.status,r(n)}catch(t){return r(e)}else e instanceof Error&&"Network error"===e.message&&(e.code="NetworkError");return r(e)})},Lf),Uf={debug:function(){}},Df=function(e){return e&&e.nonRetryable};function Lf(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/",n=(n||{}).credentials,this.fetchOptions=n?{credentials:n}:{}}function Ff(e,t,n,r){return(e=Tf.call(this,e)||this).code=t,e.name=n,e.statusCode=r,e}function jf(e){return(e=window.open(e,$f))?Promise.resolve(e):Promise.reject()}function Bf(e,t,n){A.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Jf)}function zf(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Vf(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function qf(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Kf,Hf,Gf=((Hf=eh.prototype).getUserPoolId=function(){return this.userPoolId},Hf.getClientId=function(){return this.clientId},Hf.signUp=function(n,e,t,r,o,i){var s=this,i={ClientId:this.clientId,Username:n,Password:e,UserAttributes:t,ValidationData:r,ClientMetadata:i};this.getUserContextData(n)&&(i.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",i,function(e,t){return e?o(e,null):(e={Username:n,Pool:s,Storage:s.storage},t={user:new ff(e),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails},o(null,t))})},Hf.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser";return(e=this.storage.getItem(e))?(e={Username:e,Pool:this,Storage:this.storage},new ff(e)):null},Hf.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;return this.advancedSecurityDataCollectionFlag&&(e=t.getData(e,this.userPoolId,this.clientId))?{EncodedData:e}:{}}},eh),Wf=((Kf=Qf.prototype).setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),T.set(e,t,n),T.get(e)},Kf.getItem=function(e){return T.get(e)},Kf.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),T.remove(e,t)},Kf.clear=function(){for(var e=T.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},Qf),$f="_self",Yf=function(){return(Yf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Jf="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Zf=new A.ConsoleLogger("OAuth"),Xf=(th.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},th.prototype.oauthSignIn=function(e,t,n,r,o,i){void 0===e&&(e="code"),void 0===o&&(o=dd.Cognito);var s=this._generateState(32),a=i?s+"-"+A.urlSafeEncode(i):s;window.sessionStorage.setItem("oauth_state",a),i=this._generateRandom(128),window.sessionStorage.setItem("ouath_pkce_key",i),s=this._generateChallenge(i),i=this._scopes.join(" "),e="https://"+t+"/oauth2/authorize?"+Object.entries(Yf(Yf({redirect_uri:n,response_type:e,client_id:r,identity_provider:o,scope:i,state:a},"code"===e?{code_challenge:s}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var e=(t=qf(e,2))[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),Zf.debug("Redirecting to "+e),this._urlOpener(e,n)},th.prototype._handleCodeFlow=function(c){return zf(this,void 0,void 0,function(){var n,r,o,i,s,a,u;return Vf(this,function(e){switch(e.label){case 0:return n=(C.parse(c).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=qf(t,2))[0],n=n[1];return Yf(Yf({},e),((e={})[t]=n,e))},{code:void 0}).code,r=C.parse(c).pathname||"/",o=C.parse(this._config.redirectSignIn).pathname||"/",n&&r===o?(Bf("codeFlow",{},"Retrieving tokens from "+(s="https://"+this._config.domain+"/oauth2/token")),i=yd(this._config)?this._cognitoClientId:this._config.clientID,a=yd(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),i=Yf({grant_type:"authorization_code",code:n,client_id:i,redirect_uri:a},(u=t)?{code_verifier:u}:{}),Zf.debug("Calling token endpoint: "+s+" with",i),a=Object.entries(i).map(function(e){var e=(t=qf(e,2))[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),[4,fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a})]):[2];case 1:return[4,e.sent().json()];case 2:if(u=e.sent(),i=u.access_token,s=u.refresh_token,a=u.id_token,u=u.error)throw new Error(u);return[2,{accessToken:i,refreshToken:s,idToken:a}]}var t})})},th.prototype._handleImplicitFlow=function(r){return zf(this,void 0,void 0,function(){var t,n;return Vf(this,function(e){return n=(C.parse(r).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=qf(t,2))[0],n=n[1];return Yf(Yf({},e),((e={})[t]=n,e))},{id_token:void 0,access_token:void 0}),t=n.id_token,n=n.access_token,Bf("implicitFlow",{},"Got tokens from "+r),Zf.debug("Retrieving implicit tokens from "+r+" with"),[2,{accessToken:n,idToken:t,refreshToken:null}]})})},th.prototype.handleAuthResponse=function(s){return zf(this,void 0,void 0,function(){var t,n,r,o,i;return Vf(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),i=s?Yf(Yf({},(C.parse(s).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=qf(t,2))[0],n=n[1];return e[t]=n,e},{})),(C.parse(s).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=qf(t,2))[0],n=n[1];return e[t]=n,e},{})):{},t=i.error,n=i.error_description,t)throw new Error(n);return n=this._validateState(i),Zf.debug("Starting "+this._config.responseType+" flow with "+s),"code"!==this._config.responseType?[3,2]:(r=[{}],[4,this._handleCodeFlow(s)]);case 1:return[2,Yf.apply(void 0,[Yf.apply(void 0,r.concat([e.sent()])),{state:n}])];case 2:return o=[{}],[4,this._handleImplicitFlow(s)];case 3:return[2,Yf.apply(void 0,[Yf.apply(void 0,o.concat([e.sent()])),{state:n}])];case 4:return[3,6];case 5:throw i=e.sent(),Zf.error("Error handling auth response.",i),i;case 6:return[2]}})})},th.prototype._validateState=function(e){if(e){var t=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),e=e.state;if(t&&t!==e)throw new Error("Invalid state in OAuth flow");return e}},th.prototype.signOut=function(){return zf(this,void 0,void 0,function(){var t,n,r;return Vf(this,function(e){return t="https://"+this._config.domain+"/logout?",n=yd(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=yd(this._config)?this._config.redirectSignOut:this._config.returnTo,Bf("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+(t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){return(e=qf(e,2))[0]+"="+e[1]}).join("&"))),Zf.debug("Signing out from "+t),[2,this._urlOpener(t,r)]})})},th.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},th.prototype._generateChallenge=function(e){return this._base64URL(_(e))},th.prototype._base64URL=function(e){return e.toString(I).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},th.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},th.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var o=e[r]%t.length;n.push(t[o])}return n.join("")},th);function Qf(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}function eh(e,t){var n=e||{},r=n.UserPoolId,o=n.ClientId,i=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!o)throw new Error("Both UserPoolId and ClientId are required.");if(55<r.length||!/^[\w-]+_[0-9a-zA-Z]+$/.test(r))throw new Error("Invalid UserPoolId format.");n=r.split("_")[0],this.userPoolId=r,this.clientId=o,this.client=new Mf(n,i,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new pf).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}function th(e){var t=e.config,n=e.cognitoClientId,e=void 0===(e=e.scopes)?[]:e;if(this._urlOpener=t.urlOpener||jf,this._config=t,this._cognitoClientId=n,!this.isValidScopes(e))throw Error("scopes must be a String Array");this._scopes=e}(jd=Xh=Xh||{}).DEFAULT_MSG="Authentication Error",jd.EMPTY_EMAIL="Email cannot be empty",jd.EMPTY_PHONE="Phone number cannot be empty",jd.EMPTY_USERNAME="Username cannot be empty",jd.INVALID_USERNAME="The username should either be a string or one of the sign in types",jd.EMPTY_PASSWORD="Password cannot be empty",jd.EMPTY_CODE="Confirmation code cannot be empty",jd.SIGN_UP_ERROR="Error creating account",jd.NO_MFA="No valid MFA method provided",jd.INVALID_MFA="Invalid MFA type",jd.EMPTY_CHALLENGE="Challenge response cannot be empty",jd.NO_USER_SESSION="Failed to get the session because the user is empty",jd.NETWORK_ERROR="Network Error",jd.DEVICE_CONFIG="Device tracking has not been configured in this User Pool";var nh,rh,p=(nh=function(e,t){return(nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}nh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),oh=new A.ConsoleLogger("AuthError"),ih=(p(sh,rh=Error),sh);function sh(e){var t=this,e=(n=hh[e]).message,n=n.log;return(t=rh.call(this,e)||this).constructor=sh,Object.setPrototypeOf(t,sh.prototype),t.name="AuthError",t.log=n||e,oh.error(t.log),t}var ah,uh=(p(ch,ah=ih),ch);function ch(e){return(e=ah.call(this,e)||this).constructor=ch,Object.setPrototypeOf(e,ch.prototype),e.name="NoUserPoolError",e}function lh(e,t,n){A.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",vh)}function ph(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function dh(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function fh(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var hh={noConfig:{message:Xh.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:Xh.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:Xh.EMPTY_USERNAME},invalidUsername:{message:Xh.INVALID_USERNAME},emptyPassword:{message:Xh.EMPTY_PASSWORD},emptyCode:{message:Xh.EMPTY_CODE},signUpError:{message:Xh.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:Xh.NO_MFA},invalidMFA:{message:Xh.INVALID_MFA},emptyChallengeResponse:{message:Xh.EMPTY_CHALLENGE},noUserSession:{message:Xh.NO_USER_SESSION},deviceConfig:{message:Xh.DEVICE_CONFIG},networkError:{message:Xh.NETWORK_ERROR},default:{message:Xh.DEFAULT_MSG}},mh=function(){return(mh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gh=new A.ConsoleLogger("AuthClass"),yh="aws.cognito.signin.user.admin",vh="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function bh(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=A.Credentials,this.wrapRefreshSessionCallback=function(n){return function(e,t){return t?lh("tokenRefresh",void 0,"New token retrieved"):lh("tokenRefresh_failure",e,"Failed to retrieve new token"),n(e,t)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),A.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}var wh=(bh.prototype.getModuleName=function(){return"Auth"},bh.prototype.configure=function(e){var t=this;if(!e)return this._config||{};gh.debug("configure Auth");var n=Object.assign({},this._config,A.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var r,o=(f=this._config).userPoolId,i=f.userPoolWebClientId,s=f.cookieStorage,a=f.oauth,u=f.region,c=f.identityPoolId,l=f.mandatorySignIn,p=f.refreshHandlers,d=f.identityPoolRegion,n=f.clientMetadata,f=f.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw gh.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new Wf(s):e.ssr?new A.UniversalStorage:(new A.StorageHelper).getStorage();return this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),o&&((f={UserPoolId:o,ClientId:i,endpoint:f}).Storage=this._storage,this.userPool=new Gf(f,this.wrapRefreshSessionCallback)),this.Credentials.configure({mandatorySignIn:l,region:d||u,userPoolId:o,identityPoolId:c,refreshHandlers:p,storage:this._storage}),(a=a?yd(this._config.oauth)?a:a.awsCognito:void 0)&&(a=Object.assign({cognitoClientId:i,UserPoolId:o,domain:a.domain,scopes:a.scope,redirectSignIn:a.redirectSignIn,redirectSignOut:a.redirectSignOut,responseType:a.responseType,Storage:this._storage,urlOpener:a.urlOpener,clientMetadata:n},a.options),this._oAuthHandler=new Xf({scopes:a.scopes,config:a,cognitoClientId:a.cognitoClientId}),r={},function(){if(A.JS.browserOrNode().isBrowser&&window.location)e=(e={url:window.location.href}).url,r[e]||(r[e]=!0,t._handleAuthResponse(e));else if(!A.JS.browserOrNode().isNode)throw new Error("Not supported");var e}()),lh("configured",null,"The Auth category has been configured successfully"),this._config},bh.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var o,i=null,s=null,a=[],u=null;if(e&&"string"==typeof e){var i=e,s=n?n[0]:null,c=n?n[1]:null,l=n?n[2]:null;c&&a.push(new uf({Name:"email",Value:c})),l&&a.push(new uf({Name:"phone_number",Value:l}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(fd.SignUpError);i=e.username,s=e.password,e&&e.clientMetadata?o=e.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){a.push(new uf({Name:e,Value:p[e]}))});var d=e.validationData;d&&(u=[],Object.keys(d).map(function(e){u.push(new uf({Name:e,Value:d[e]}))}))}return i?s?(gh.debug("signUp attrs:",a),gh.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(i,s,a,u,function(e,t){e?(lh("signUp_failure",e,i+" failed to signup"),r(e)):(lh("signUp",t,i+" has signed up successfully"),n(t))},o)})):this.rejectAuthError(fd.EmptyPassword):this.rejectAuthError(fd.EmptyUsername)},bh.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(fd.EmptyUsername);if(!t)return this.rejectAuthError(fd.EmptyCode);var o,i=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?o=n.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata),new Promise(function(n,r){i.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},o)})},bh.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(fd.EmptyUsername);var o=this.createCognitoUser(e);return new Promise(function(n,r){o.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},bh.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,o=null,i={};if("string"==typeof e)r=e,o=t;else{if(!e.username)return this.rejectAuthError(fd.InvalidUsername);void 0!==t&&gh.warn("The password should be defined under the first parameter object!"),r=e.username,o=e.password,i=e.validationData}return r?(n=new wd({Username:r,Password:o,ValidationData:i,ClientMetadata:n}),o?this.signInWithPassword(n):this.signInWithoutPassword(n)):this.rejectAuthError(fd.EmptyUsername)},bh.prototype.authCallbacks=function(o,i,s){var e=this,a=this;return{onSuccess:function(r){return ph(e,void 0,void 0,function(){var t,n;return dh(this,function(e){switch(e.label){case 0:gh.debug(r),delete o.challengeName,delete o.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(r,"session")];case 3:return t=e.sent(),gh.debug("succeed to get cognito credentials",t),[3,9];case 4:return t=e.sent(),gh.debug("cannot get cognito credentials",t),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return n=e.sent(),lh("signIn",a.user=n,"A user "+o.getUsername()+" has been signed in"),i(n),[3,8];case 7:return n=e.sent(),gh.error("Failed to get the signed in user",n),s(n),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){gh.debug("signIn failure",e),lh("signIn_failure",e,o.getUsername()+" failed to signin"),s(e)},customChallenge:function(e){gh.debug("signIn custom challenge answer required"),o.challengeName="CUSTOM_CHALLENGE",o.challengeParam=e,i(o)},mfaRequired:function(e,t){gh.debug("signIn MFA required"),o.challengeName=e,o.challengeParam=t,i(o)},mfaSetup:function(e,t){gh.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,i(o)},newPasswordRequired:function(e,t){gh.debug("signIn new password"),o.challengeName="NEW_PASSWORD_REQUIRED",o.challengeParam={userAttributes:e,requiredAttributes:t},i(o)},totpRequired:function(e,t){gh.debug("signIn totpRequired"),o.challengeName=e,o.challengeParam=t,i(o)},selectMFAType:function(e,t){gh.debug("signIn selectMFAType",e),o.challengeName=e,o.challengeParam=t,i(o)}}},bh.prototype.signInWithPassword=function(e){var r=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var o=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(t,n){o.authenticateUser(e,r.authCallbacks(o,function(e){r.pendingSignIn=null,t(e)},function(e){r.pendingSignIn=null,n(e)}))}),this.pendingSignIn},bh.prototype.signInWithoutPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return o.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){o.initiateAuth(n,r.authCallbacks(o,e,t))})},bh.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(gh.debug("get MFA Options failed",e),void r(e)):(gh.debug("get MFA options success",t),void n(t))})})},bh.prototype.getPreferredMFA=function(o,i){var s=this,a=this;return new Promise(function(n,r){var e=s._config.clientMetadata,t=!!i&&i.bypassCache;o.getUserData(function(e,t){return e?(gh.debug("getting preferred mfa failed",e),void r(e)):void((t=a._getMfaTypeFromUserData(t))?n(t):r("invalid MFA Type"))},{bypassCache:t,clientMetadata:e})})},bh.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;return n?t=n:(n=e.UserMFASettingList)?0===n.length?t="NOMFA":gh.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA",t},bh.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){e?(gh.debug("getting user data failed",e),r(e)):n(t)},t)})},bh.prototype.setPreferredMFA=function(a,u){return ph(this,void 0,void 0,function(){var t,n,i,s,r,o;return dh(this,function(e){switch(e.label){case 0:return t=this._config.clientMetadata,[4,this._getUserData(a,{bypassCache:!0,clientMetadata:t})];case 1:switch(n=e.sent(),s=i=null,u){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=n.UserMFASettingList,[4,this._getMfaTypeFromUserData(n)];case 5:if("NOMFA"===(o=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===o)i={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==o)return[2,this.rejectAuthError(fd.InvalidMFA)];s={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?i={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(s={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return gh.debug("no validmfa method provided"),[2,this.rejectAuthError(fd.NoMFA)];case 7:return[2,new Promise(function(r,o){a.setUserMfaPreference(i,s,function(e,n){return e?(gh.debug("Set user mfa preference error",e),o(e)):(gh.debug("Set user mfa success",n),gh.debug("Caching the latest user data into local"),void a.getUserData(function(e,t){return e?(gh.debug("getting user data failed",e),o(e)):r(n)},{bypassCache:!0,clientMetadata:t}))})})]}})})},bh.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(gh.debug("disable mfa failed",e),void r(e)):(gh.debug("disable mfa succeed",t),void n(t))})})},bh.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(gh.debug("enable mfa failed",e),void r(e)):(gh.debug("enable mfa succeed",t),void n(t))})})},bh.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){gh.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){gh.debug("associateSoftwareToken sucess",e),t(e)}})})},bh.prototype.verifyTotpToken=function(r,e){return gh.debug("verification totp token",r,e),new Promise(function(t,n){r.verifySoftwareToken(e,"My TOTP device",{onFailure:function(e){gh.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){lh("signIn",r,"A user "+r.getUsername()+" has been signed in"),gh.debug("verifyTotpToken success",e),t(e)}})})},bh.prototype.confirmSignIn=function(o,e,n,i){var s=this;if(void 0===i&&(i=this._config.clientMetadata),!e)return this.rejectAuthError(fd.EmptyCode);var a=this;return new Promise(function(r,t){o.sendMFACode(e,{onSuccess:function(n){return ph(s,void 0,void 0,function(){var t;return dh(this,function(e){switch(e.label){case 0:gh.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),gh.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),gh.debug("cannot get cognito credentials",t),[3,6];case 5:return lh("signIn",a.user=o,"A user "+o.getUsername()+" has been signed in"),r(o),[7];case 6:return[2]}})})},onFailure:function(e){gh.debug("confirm signIn failure",e),t(e)}},n,i)})},bh.prototype.completeNewPassword=function(o,e,n,i){var s=this;if(void 0===n&&(n={}),void 0===i&&(i=this._config.clientMetadata),!e)return this.rejectAuthError(fd.EmptyPassword);var a=this;return new Promise(function(r,t){o.completeNewPasswordChallenge(e,n,{onSuccess:function(n){return ph(s,void 0,void 0,function(){var t;return dh(this,function(e){switch(e.label){case 0:gh.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),gh.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),gh.debug("cannot get cognito credentials",t),[3,6];case 5:return lh("signIn",a.user=o,"A user "+o.getUsername()+" has been signed in"),r(o),[7];case 6:return[2]}})})},onFailure:function(e){gh.debug("completeNewPassword failure",e),lh("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){gh.debug("signIn MFA required"),o.challengeName=e,o.challengeParam=t,r(o)},mfaSetup:function(e,t){gh.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,r(o)},totpRequired:function(e,t){gh.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,r(o)}},i)})},bh.prototype.sendCustomChallengeAnswer=function(n,r,o){var i=this;return void 0===o&&(o=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,i.authCallbacks(n,e,t),o)}):this.rejectAuthError(fd.EmptyChallengeResponse):this.rejectNoUserPool()},bh.prototype.deleteUserAttributes=function(t,o){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.deleteAttributes(o,function(e,t){return e?r(e):n(t)})})})},bh.prototype.updateUserAttributes=function(o,i,s){void 0===s&&(s=this._config.clientMetadata);var a=[],e=this;return new Promise(function(n,r){e.userSession(o).then(function(e){for(var t in i)"sub"!==t&&t.indexOf("_verified")<0&&(t={Name:t,Value:i[t]},a.push(t));o.updateAttributes(a,function(e,t){return e?r(e):n(t)},s)})})},bh.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},bh.prototype.verifiedContact=function(e){var r=this;return this.userAttributes(e).then(function(e){var t=r.attributesToObject(e),n={},e={};return t.email&&(t.email_verified?e.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?e.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:e,unverified:n}})},bh.prototype.currentUserPoolUser=function(l){var e=this;return this.userPool?new Promise(function(u,c){e._storageSync.then(function(){return ph(e,void 0,void 0,function(){var a,t,n=this;return dh(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(gh.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(t){var n=setTimeout(function(){gh.debug("OAuth signIn in progress timeout"),A.Hub.remove("auth",r),t()},1e4);function r(e){"cognitoHostedUI"!==(e=e.payload.event)&&"cognitoHostedUI_failure"!==e||(gh.debug("OAuth signIn resolved: "+e),clearTimeout(n),A.Hub.remove("auth",r),t())}A.Hub.listen("auth",r)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(a=this.userPool.getCurrentUser())?(t=this._config.clientMetadata,a.getSession(function(o,i){return ph(n,void 0,void 0,function(){var t,n,r,s=this;return dh(this,function(e){switch(e.label){case 0:return o?(gh.debug("Failed to get the user session",o),c(o),[2]):(t=!!l&&l.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return n=this._config.clientMetadata,(void 0===(r=i.getAccessToken().decodePayload().scope)?"":r).split(" ").includes(yh)?(a.getUserData(function(e,t){if(e)return gh.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?c(e):u(a));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],o=0;o<t.UserAttributes.length;o++){var i={Name:t.UserAttributes[o].Name,Value:t.UserAttributes[o].Value},i=new uf(i);r.push(i)}return e=s.attributesToObject(r),Object.assign(a,{attributes:e,preferredMFA:n}),u(a)},{bypassCache:t,clientMetadata:n}),[2]):(gh.debug("Unable to get the user data because the "+yh+" is not in the scopes of the access token"),[2,u(a)])}})})},{clientMetadata:t})):(gh.debug("Failed to get user from user pool"),c("No current user")),[2]}})})}).catch(function(e){return gh.debug("Failed to sync cache info into memory",e),c(e)})}):this.rejectNoUserPool()},bh.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},bh.prototype.currentAuthenticatedUser=function(i){return ph(this,void 0,void 0,function(){var t,n,r,o;return dh(this,function(e){switch(e.label){case 0:gh.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw o=e.sent(),gh.debug("Failed to sync cache info into memory",o),o;case 4:try{(n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=mh(mh({},n.user),{token:n.token}))}catch(e){gh.debug("cannot load federated user from auth storage")}return t?(this.user=t,gh.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:gh.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(i)];case 7:return r=e.sent(),[3,9];case 8:return"No userPool"===(o=e.sent())&&gh.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),gh.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=r,[2,this.user]}})})},bh.prototype.currentSession=function(){var r=this;return gh.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){gh.debug("Failed to get the current session",e),n(e)})}).catch(function(e){gh.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},bh.prototype.userSession=function(o){if(!o)return gh.debug("the user is null"),this.rejectAuthError(fd.NoUserSession);var e=this._config.clientMetadata;return new Promise(function(n,r){gh.debug("Getting the session from this user:",o),o.getSession(function(e,t){e?(gh.debug("Failed to get the session from user",o),r(e)):(gh.debug("Succeed to get the user session",t),n(t))},{clientMetadata:e})})},bh.prototype.currentUserCredentials=function(){return ph(this,void 0,void 0,function(){var t,n=this;return dh(this,function(e){switch(e.label){case 0:gh.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),gh.debug("Failed to sync cache info into memory",t),t;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){gh.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(e){return gh.debug("getting session success",e),n.Credentials.set(e,"session")}).catch(function(e){return gh.debug("getting session failed",e),n.Credentials.set(null,"guest")})]}})})},bh.prototype.currentCredentials=function(){return gh.debug("getting current credentials"),this.Credentials.get()},bh.prototype.verifyUserAttribute=function(e,r,o){return void 0===o&&(o=this._config.clientMetadata),new Promise(function(t,n){e.getAttributeVerificationCode(r,{onSuccess:function(e){return t(e)},onFailure:function(e){return n(e)}},o)})},bh.prototype.verifyUserAttributeSubmit=function(e,r,o){return o?new Promise(function(t,n){e.verifyAttribute(r,o,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(fd.EmptyCode)},bh.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},bh.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},bh.prototype.cognitoIdentitySignOut=function(s,a){return ph(this,void 0,void 0,function(){var t,o,i=this;return dh(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),gh.debug("Failed to sync cache info into memory",t),t;case 3:return o=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){var e;s&&s.global?(gh.debug("user global sign out",a),e=i._config.clientMetadata,a.getSession(function(e,t){return e?(gh.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){if(gh.debug("global sign out success"),!o)return n();i.oAuthSignOutRedirect(n,r)},onFailure:function(e){return gh.debug("global sign out failed",e),r(e)}})},{clientMetadata:e})):(gh.debug("user sign out",a),a.signOut(function(){return o?void i.oAuthSignOutRedirect(n,r):n()}))})]}})})},bh.prototype.oAuthSignOutRedirect=function(e,t){A.JS.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},bh.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},bh.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e("Signout timeout fail")},3e3)},bh.prototype.signOut=function(n){return ph(this,void 0,void 0,function(){var t;return dh(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),gh.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:gh.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:gh.debug("no Congito User pool"),e.label=8;case 8:return lh("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},bh.prototype.cleanCachedItems=function(){return ph(this,void 0,void 0,function(){return dh(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},bh.prototype.changePassword=function(t,o,i,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(o,i,function(e,t){return e?(gh.debug("change password failure",e),r(e)):n(t)},s)})})},bh.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(fd.EmptyUsername);var o=this.createCognitoUser(r);return new Promise(function(t,n){o.forgotPassword({onSuccess:function(){t()},onFailure:function(e){gh.debug("forgot password failure",e),lh("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){lh("forgotPassword",o,r+" has initiated forgot password flow"),t(e)}},e)})},bh.prototype.forgotPasswordSubmit=function(r,e,o,i){if(void 0===i&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(fd.EmptyUsername);if(!e)return this.rejectAuthError(fd.EmptyCode);if(!o)return this.rejectAuthError(fd.EmptyPassword);var s=this.createCognitoUser(r);return new Promise(function(t,n){s.confirmPassword(e,o,{onSuccess:function(e){lh("forgotPasswordSubmit",s,r+" forgotPasswordSubmit successful"),t(e)},onFailure:function(e){lh("forgotPasswordSubmit_failure",e,r+" forgotPasswordSubmit failed"),n(e)}},i)})},bh.prototype.currentUserInfo=function(){return ph(this,void 0,void 0,function(){var t,n,r,o,i;return dh(this,function(e){switch(e.label){case 0:return(t=this.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return gh.error(e)})];case 1:if(!(i=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(i)];case 3:r=e.sent(),n=this.attributesToObject(r),r=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=e.sent(),[3,7];case 6:return o=e.sent(),gh.debug("Failed to retrieve credentials while getting current user info",o),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:i.getUsername(),attributes:n}];case 8:return o=e.sent(),gh.error("currentUserInfo error",o),[2,{}];case 9:return"federated"===t?[2,(i=this.user)||{}]:[2]}})})},bh.prototype.federatedSignIn=function(l,p,d){return ph(this,void 0,void 0,function(){var r,o,i,s,a,u,c;return dh(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===l&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return gd(l)||(n=l)&&["customProvider"].find(function(e){return n.hasOwnProperty(e)})||(t=l)&&["customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===l?(r=l||{provider:dd.Cognito},o=gd(r)?r.provider:r.customProvider,gd(r),a=r.customState,this._config.userPoolId&&(s=yd(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,r=yd(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,r,s,o,a)),[3,4]):[3,1];case 1:o=l;try{(i=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&gh.warn("There is already a signed in user: "+i+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return s=p.token,a=p.identity_id,c=p.expires_at,[4,this.Credentials.set({provider:o,token:s,identity_id:a,user:d,expires_at:c},"federation")];case 2:return u=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return lh("signIn",c=e.sent(),"A user "+c.username+" has been signed in"),gh.debug("federated sign in credentials",u),[2,u];case 4:return[2]}var t,n})})},bh.prototype._handleAuthResponse=function(c){return ph(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u;return dh(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return gh.debug("Skipping URL "+c+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(lh("parsingCallbackUrl",{url:c},"The callback url is being parsed"),t=c||(A.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(C.parse(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){return"code"===(e=fh(e,1)[0])||"error"===e}),r=!!(C.parse(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){return"access_token"===(e=fh(e,1)[0])||"error"===e}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return o=e.sent(),a=o.accessToken,i=o.idToken,s=o.refreshToken,o=o.state,i=new rf({IdToken:new tf({IdToken:i}),RefreshToken:new nf({RefreshToken:s}),AccessToken:new Gd({AccessToken:a})}),s=void 0,this._config.identityPoolId?[4,this.Credentials.set(i,"session")]:[3,5];case 4:s=e.sent(),gh.debug("AWS credentials",s),e.label=5;case 5:return a=/-/.test(o),(u=this.createCognitoUser(i.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(i),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),lh("signIn",u,"A user "+u.getUsername()+" has been signed in"),lh("cognitoHostedUI",u,"A user "+u.getUsername()+" has been signed in via Cognito Hosted UI"),a&&(a=o.split("-").splice(1).join("-"),lh("customOAuthState",A.urlSafeDecode(a),"State for user "+u.getUsername())),[2,s];case 6:return u=e.sent(),gh.debug("Error in cognito hosted auth response",u),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),lh("signIn_failure",u,"The OAuth response flow failed"),lh("cognitoHostedUI_failure",u,"A failure occurred when returning to the Cognito Hosted UI"),lh("customState_failure",u,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},bh.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},bh.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value}),n},bh.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},bh.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};return t.Storage=this._storage,e=this._config.authenticationFlowType,t=new ff(t),e&&t.setAuthenticationFlowType(e),t},bh.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},bh.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?fd.NoConfig:fd.MissingAuthConfig},bh.prototype.rejectAuthError=function(e){return Promise.reject(new ih(e))},bh.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new uh(e))},bh.prototype.rememberDevice=function(){return ph(this,void 0,void 0,function(){var r,t;return dh(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return r=e.sent(),[3,3];case 2:return t=e.sent(),gh.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return r.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){r.setDeviceStatusRemembered({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new ih(fd.DeviceConfig)):"NetworkError"===e.code?n(new ih(fd.NetworkError)):n(e)}})})]}})})},bh.prototype.forgetDevice=function(){return ph(this,void 0,void 0,function(){var r,t;return dh(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return r=e.sent(),[3,3];case 2:return t=e.sent(),gh.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return r.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){r.forgetDevice({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new ih(fd.DeviceConfig)):"NetworkError"===e.code?n(new ih(fd.NetworkError)):n(e)}})})]}})})},bh.prototype.fetchDevices=function(){return ph(this,void 0,void 0,function(){var r,t;return dh(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return r=e.sent(),[3,3];case 2:throw t=e.sent(),gh.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return r.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){var e={onSuccess:function(e){e=e.Devices.map(function(e){var t=e.DeviceAttributes.find(function(e){return"device_name"===e.Name})||{};return{id:e.DeviceKey,name:t.Value}}),t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new ih(fd.DeviceConfig)):"NetworkError"===e.code?n(new ih(fd.NetworkError)):n(e)}};r.listDevices(60,null,e)})]}})})},new bh(null));A.Amplify.register(wh);var Sh=function(e,t){return(Sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Ch(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Sh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var _h=function(){return(_h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Eh(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Ah(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Ih,jd="3.6.1",kh=(L(Th,Ih=o.Writable),Th.prototype._write=function(e,t,n){try{this.hash.update(e)}catch(e){return n(e)}n()},Th);function Th(e,t){return(t=Ih.call(this,t)||this).hash=e,t}function Ph(e){var t=e.match(Bh);return[t[2],e.replace(new RegExp("^"+t[0]),"")]}function Oh(e){return e.startsWith("fips-")||e.endsWith("-fips")}function xh(e,t){return e===t||Rh(e)===t||e===Rh(t)}function Nh(t){return{applyToStack:function(e){var v;e.addRelativeTo((v=t,function(g,y){return function(m){return q(void 0,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l,p,d,f,h;return K(this,function(e){switch(e.label){case 0:return n=m.input.Bucket,r=v.bucketEndpoint,o=m.request,Gs.isInstance(o)?v.bucketEndpoint?(o.hostname=n,[3,7]):[3,1]:[3,8];case 1:return"string"==typeof(t=n)&&0===t.indexOf("arn:")&&6<=t.split(":").length?(i=function(e){if((e=e.split(":")).length<6||"arn"!==e[0])throw new Error("Malformed ARN");return{partition:(e=G(e))[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}}(n),s=Rh,[4,v.region()]):[3,5];case 2:return l=s.apply(void 0,[e.sent()]),[4,v.regionInfoProvider(l)];case 3:return u=e.sent()||{},a=u.partition,c=u.signingRegion,u=void 0===c?l:c,[4,v.useArnRegion()];case 4:return c=e.sent(),d=Uh({bucketName:i,baseHostname:o.hostname,accelerateEndpoint:v.useAccelerateEndpoint,dualstackEndpoint:v.useDualstackEndpoint,pathStyleEndpoint:v.forcePathStyle,tlsCompatible:"https:"===o.protocol,useArnRegion:c,clientPartition:a,clientSigningRegion:u,clientRegion:l,isCustomEndpoint:v.isCustomEndpoint}),f=d.hostname,h=d.bucketEndpoint,c=d.signingRegion,d=d.signingService,c&&c!==u&&(y.signing_region=c),d&&"s3"!==d&&(y.signing_service=d),o.hostname=f,r=h,[3,7];case 5:return p=Rh,[4,v.region()];case 6:l=p.apply(void 0,[e.sent()]),d=Uh({bucketName:n,clientRegion:l,baseHostname:o.hostname,accelerateEndpoint:v.useAccelerateEndpoint,dualstackEndpoint:v.useDualstackEndpoint,pathStyleEndpoint:v.forcePathStyle,tlsCompatible:"https:"===o.protocol,isCustomEndpoint:v.isCustomEndpoint}),f=d.hostname,h=d.bucketEndpoint,o.hostname=f,r=h,e.label=7;case 7:r&&(o.path=o.path.replace(/^(\/)?[^\/]+/,""),""===o.path&&(o.path="/")),e.label=8;case 8:return[2,g(F(F({},m),{request:o}))]}var t})})}}),qh)}}}function Rh(e){return Oh(e)?e.replace(/fips-|-fips/,""):e}function Mh(e,t){if(void 0===t&&(t={tlsCompatible:!0}),64<=e.length||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||null!=t&&t.tlsCompatible&&jh.test(e))throw new Error("Invalid DNS label "+e)}function Uh(e){var t=e.isCustomEndpoint,n=(e.baseHostname,e.dualstackEndpoint),r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return("string"==typeof e.bucketName?function(e){var t,n,r=e.accelerateEndpoint,o=void 0!==r&&r,i=e.clientRegion,s=e.baseHostname,a=e.bucketName,u=e.dualstackEndpoint,c=void 0!==u&&u,l=e.pathStyleEndpoint,p=void 0!==l&&l,d=e.tlsCompatible,f=void 0===d||d,h=e.isCustomEndpoint,m=G(void 0!==h&&h?[i,s]:(t=s,zh.test(t)?["us-east-1",Vh]:Ph(t)),2),g=m[0],y=m[1];return p||(n=a,!Dh.test(n)||Lh.test(n)||Fh.test(n))||f&&jh.test(a)?{bucketEndpoint:!1,hostname:c?"s3.dualstack."+g+"."+y:s}:(o?s="s3-accelerate"+(c?".dualstack":"")+"."+y:c&&(s="s3.dualstack."+g+"."+y),{bucketEndpoint:!0,hostname:a+"."+s})}:function(e){var t,n=e.isCustomEndpoint,r=e.baseHostname,o=G(n?[e.clientRegion,r]:(t=r,zh.test(t)?[t.replace("."+Vh,""),Vh]:Ph(t)),2),i=o[0],s=o[1],a=e.pathStyleEndpoint,u=e.dualstackEndpoint,c=void 0!==u&&u,l=e.accelerateEndpoint,p=e.tlsCompatible,d=void 0===p||p,f=e.useArnRegion,h=e.bucketName,m=e.clientPartition,g=void 0===m?"aws":m,y=e.clientSigningRegion,v=void 0===y?i:y;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:a,accelerateEndpoint:void 0!==l&&l,tlsCompatible:d});var b=h.service,w=h.partition,S=h.accountId,C=h.region,_=h.resource;(function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")})(b),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(w,{clientPartition:g}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(S),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!xh(e,t.clientRegion)&&!xh(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&Oh(e))throw new Error("Endpoint does not support FIPS region")}(C,{useArnRegion:f,clientRegion:i,clientSigningRegion:v});var E=function(e){var t=e.includes(":")?":":"/",e=(n=G(e.split(t)))[0],n=n.slice(1);if("accesspoint"===e){if(1!==n.length||""===n[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:n[0]}}if("outpost"!==e)throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'");if(!n[0]||"accesspoint"!==n[1]||!n[2]||3!==n.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");return n=(t=G(n,3))[0],t[1],{outpostId:n,accesspointName:t[2]}}(_),A=E.accesspointName,I=E.outpostId;Mh(A+"-"+S,{tlsCompatible:d});var k=f?C:i,T=f?C:v;return I?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(b),Mh(I,{tlsCompatible:d}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(c),function(e){if(Oh(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(k),{bucketEndpoint:!0,hostname:A+"-"+S+"."+I+(n?"":".s3-outposts."+k)+"."+s,signingRegion:T,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(b),{bucketEndpoint:!0,hostname:A+"-"+S+(n?"":".s3-accesspoint"+(c?".dualstack":"")+"."+k)+"."+s,signingRegion:T})})(F(F({},e),{isCustomEndpoint:t}))}var Dh=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Lh=/(\d+\.){3}\d+/,Fh=/\.\./,jh=/\./,Bh=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,zh=/^s3(-external-1)?\.amazonaws\.com$/,Vh="amazonaws.com",qh={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},Kh="AWS_S3_USE_ARN_REGION",Hh="s3_use_arn_region",p={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Kh)){if("true"===e[Kh])return!0;if("false"===e[Kh])return!1;throw new Error("Cannot load env "+Kh+'. Expected "true" or "false", got '+e[Kh]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Hh)){if("true"===e[Hh])return!0;if("false"===e[Hh])return!1;throw new Error("Cannot load shared config entry "+Hh+'. Expected "true" or "false", got '+e[Hh]+".")}},default:!1},Gh="s3.{region}.amazonaws.com",Wh=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),$h=new Set(["cn-north-1","cn-northwest-1"]),Yh=new Set(["us-iso-east-1"]),Jh=new Set(["us-isob-east-1"]),Zh=new Set(["us-gov-east-1","us-gov-west-1"]),Xh={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Wh.has(e)&&(n={hostname:Gh.replace("{region}",e),partition:"aws"}),$h.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Yh.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Jh.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=Zh.has(e)?{hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:Gh.replace("{region}",e),partition:"aws"})}return Promise.resolve(_h({signingService:"s3"},n))},serviceId:"S3",signingEscapePath:!1,urlParser:$e,useArnRegion:!1},Qh=_h(_h({},Xh),{runtime:"node",base64Decoder:bu,base64Encoder:wu,bodyLengthChecker:Su,credentialDefaultProvider:$n,defaultUserAgentProvider:hn({serviceId:Xh.serviceId,clientVersion:jd}),eventStreamSerdeProvider:function(e){return new hd(e)},maxAttempts:Ca(yt),md5:bt.bind(null,"md5"),region:Ca(fn,bn),requestHandler:new Yn,sha256:bt.bind(null,"sha256"),streamCollector:vu,streamHasher:function(i,s){return new Promise(function(e,t){var n,r,o;"string"==typeof s.path?(n=a.createReadStream(s.path,{start:s.start,end:s.end}),r=new i,o=new kh(r),n.pipe(o),n.on("error",function(e){o.end(),t(e)}),o.on("error",t),o.on("finish",function(){r.digest().then(e).catch(t)})):t(new Error("Unable to calculate hash for non-file streams."))})},useArnRegion:Ca(p),utf8Decoder:dn,utf8Encoder:S});var em={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};function tm(){return{applyToStack:function(e){e.add(function(){var e=this;return function(o){return function(r){return q(e,void 0,void 0,function(){var n;return K(this,function(e){if("string"==typeof(n=r.input.Bucket)&&!("string"==typeof(t=n)&&0===t.indexOf("arn:")&&6<=t.split(":").length)&&0<=n.indexOf("/"))throw(n=new Error("Bucket name shouldn't contain '/', received '"+n+"'")).name="InvalidBucketName",n;var t;return[2,o(F({},r))]})})}}}(),Zm)}}}function nm(t){return{applyToStack:function(e){var c;e.addRelativeTo((c=t,function(u){return function(a){return q(void 0,void 0,void 0,function(){var n,r,o,i,s;return K(this,function(e){switch(e.label){case 0:return[4,u(a)];case 1:return n=e.sent(),r=n.response,Ks.isInstance(r)?(i=r.statusCode,s=r.body,i<200&&300<=i?[2,n]:[4,rm(s,c)]):[2,n];case 2:return o=e.sent(),[4,rm(o,t=c).then(function(e){return t.utf8Encoder(e)})];case 3:if(i=e.sent(),0===o.length)throw(s=new Error("S3 aborted request")).name="InternalError",s;return i&&i.match("<Error>")&&(r.statusCode=400),r.body=o,[2,n]}var t})})}}),Qm)}}}function rm(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}var om,im,sm,am,um,cm,lm,pm,dm,fm,hm,mm,gm,ym,vm,bm,wm,Sm,Cm,_m,Em,Am,Im,km,Tm,Pm,Om,xm,Nm,Rm,Mm,Um,Dm,Lm,Fm,jm,Bm,zm,Vm,qm,Km,Hm,Gm,Wm,$m,Ym,Jm,Zm={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Xm={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},Qm={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},eg=(Ch(tg,om=Ze),tg.prototype.destroy=function(){om.prototype.destroy.call(this)},tg);function tg(e){var t,n,r,o,i=this,s=_h(_h({},Qh),e),a=Pi(s),u=la(c=yc(Ti(a))),c=Cc((e=void 0!==(t=u.bucketEndpoint)&&t,a=void 0!==(s=u.forcePathStyle)&&s,t=void 0!==(c=u.useAccelerateEndpoint)&&c,c=void 0!==(s=u.useDualstackEndpoint)&&s,n=void 0!==(s=u.useArnRegion)&&s,F(F({},u),{bucketEndpoint:e,forcePathStyle:a,useAccelerateEndpoint:t,useDualstackEndpoint:c,useArnRegion:"function"==typeof n?n:function(){return Promise.resolve(n)}}))),c=F(F({},c),{eventStreamMarshaller:c.eventStreamSerdeProvider(c)});return(i=om.call(this,c)||this).config=c,i.middlewareStack.use(wc(i.config)),i.middlewareStack.use(zs(i.config)),i.middlewareStack.use(Ou(i.config)),i.middlewareStack.use(Ru(i.config)),i.middlewareStack.use(Uu(i.config)),i.middlewareStack.use(tm(i.config)),i.middlewareStack.use((r=i.config,{applyToStack:function(e){var i;e.add((i=r,function(o){return function(r){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return t=r.request,!Gs.isInstance(t)||i.isCustomEndpoint?[2,o(F({},r))]:"s3.amazonaws.com"!==t.hostname?[3,1]:(t.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return n="aws-global",[4,i.region()];case 2:n===e.sent()&&(t.hostname="s3.amazonaws.com"),e.label=3;case 3:return[2,o(F({},r))]}})})}}),Xm)}})),i.middlewareStack.use((o=i.config,{applyToStack:function(e){e.add(function(o){var e=this;return function(r){return function(n){return q(e,void 0,void 0,function(){var t;return K(this,function(e){return t=n.request,Gs.isInstance(t)&&t.body&&"node"===o.runtime&&(t.headers=F(F({},t.headers),{Expect:"100-continue"})),[2,r(F(F({},n),{request:t}))]})})}}}(o),em)}})),i.middlewareStack.use(Ec(i.config)),i}(im=im||{}).filterSensitiveLog=function(e){return _h({},e)},(sm=sm||{}).filterSensitiveLog=function(e){return _h({},e)},(am=am||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:qc})},(um=um||{}).filterSensitiveLog=function(e){return _h({},e)},(cm=cm||{}).filterSensitiveLog=function(e){return _h(_h(_h({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:qc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qc})},(lm=lm||{}).filterSensitiveLog=function(e){return _h(_h(_h(_h(_h({},e),e.SSECustomerKey&&{SSECustomerKey:qc}),e.SSEKMSKeyId&&{SSEKMSKeyId:qc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:qc})},(pm=pm||{}).filterSensitiveLog=function(e){return _h(_h(_h({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:qc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qc})},(dm=dm||{}).filterSensitiveLog=function(e){return _h(_h(_h(_h({},e),e.SSECustomerKey&&{SSECustomerKey:qc}),e.SSEKMSKeyId&&{SSEKMSKeyId:qc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qc})},(fm=fm||{}).filterSensitiveLog=function(e){return _h({},e)},(hm=hm||{}).filterSensitiveLog=function(e){return _h({},e)},(vm=vm||{}).filterSensitiveLog=function(e){return _h({},e)},(mm=mm||{}).filterSensitiveLog=function(e){return _h({},e)},(gm=gm||{}).filterSensitiveLog=function(e){return _h({},e)},(vm=ym=ym||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},vm.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:mm.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:gm.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(bm=bm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Filter&&{Filter:ym.filterSensitiveLog(e.Filter)})},(wm=wm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:qc})},(Sm=Sm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:wm.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(Cm=Cm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Rules&&{Rules:e.Rules.map(function(e){return Sm.filterSensitiveLog(e)})})},(_m=_m||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.KeyId&&{KeyId:qc})},(Em=Em||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.SSEKMS&&{SSEKMS:_m.filterSensitiveLog(e.SSEKMS)})},(Am=Am||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Encryption&&{Encryption:Em.filterSensitiveLog(e.Encryption)})},(Im=Im||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.S3BucketDestination&&{S3BucketDestination:Am.filterSensitiveLog(e.S3BucketDestination)})},(km=km||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Destination&&{Destination:Im.filterSensitiveLog(e.Destination)})},(Om=Om||{}).filterSensitiveLog=function(e){return _h({},e)},(Tm=Tm||{}).filterSensitiveLog=function(e){return _h({},e)},(Om=Pm=Pm||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},Om.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:mm.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Tm.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(xm=xm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Filter&&{Filter:Pm.filterSensitiveLog(e.Filter)})},(Mm=Mm||{}).filterSensitiveLog=function(e){return _h({},e)},(Nm=Nm||{}).filterSensitiveLog=function(e){return _h({},e)},(Mm=Rm=Rm||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},Mm.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:mm.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Nm.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Um=Um||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Filter&&{Filter:Rm.filterSensitiveLog(e.Filter)})},(Fm=Fm||{}).filterSensitiveLog=function(e){return _h({},e)},(Dm=Dm||{}).filterSensitiveLog=function(e){return _h({},e)},(Fm=Lm=Lm||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},Fm.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:mm.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Dm.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(jm=jm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Filter&&{Filter:Lm.filterSensitiveLog(e.Filter)})},(Bm=Bm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Rules&&{Rules:e.Rules.map(function(e){return jm.filterSensitiveLog(e)})})},(zm=zm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:qc})},(Vm=Vm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.SSECustomerKey&&{SSECustomerKey:qc})},(qm=qm||{}).filterSensitiveLog=function(e){return _h({},e)},(Km=Km||{}).filterSensitiveLog=function(e){return _h({},e)},(Hm=Hm||{}).filterSensitiveLog=function(e){return _h({},e)},(Gm=Gm||{}).filterSensitiveLog=function(e){return _h({},e)},(Wm=Wm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Rules&&{Rules:e.Rules.map(function(e){return xm.filterSensitiveLog(e)})})},($m=$m||{}).filterSensitiveLog=function(e){return _h(_h(_h({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:qc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qc})},(Ym=Ym||{}).filterSensitiveLog=function(e){return _h(_h(_h(_h({},e),e.SSECustomerKey&&{SSECustomerKey:qc}),e.SSEKMSKeyId&&{SSEKMSKeyId:qc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qc})},(lg=lg||{}).filterSensitiveLog=function(e){return _h({},e)},(pg=pg||{}).filterSensitiveLog=function(e){return _h({},e)},(dg=dg||{}).filterSensitiveLog=function(e){return _h({},e)},(fg=fg||{}).filterSensitiveLog=function(e){return _h({},e)},(hg=hg||{}).filterSensitiveLog=function(e){return _h({},e)},(mg=mg||{}).filterSensitiveLog=function(e){return _h({},e)},(gg=gg||{}).filterSensitiveLog=function(e){return _h({},e)},(yg=yg||{}).filterSensitiveLog=function(e){return _h({},e)},(vg=vg||{}).filterSensitiveLog=function(e){return _h({},e)},(bg=bg||{}).filterSensitiveLog=function(e){return _h({},e)},(wg=wg||{}).filterSensitiveLog=function(e){return _h({},e)},(Jm=Jm||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.KMSKeyId&&{KMSKeyId:qc})};var ng=(rg.prototype.withName=function(e){return this.name=e,this},rg.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},rg.prototype.addChildNode=function(e){return this.children.push(e),this},rg.prototype.removeAttribute=function(e){return delete this.attributes[e],this},rg.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,o=this.attributes;try{for(var i=H(Object.keys(o)),s=i.next();!s.done;s=i.next()){var a=s.value,u=o[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},rg);function rg(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}var og=(ig.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},ig);function ig(e){this.value=e}function sg(e){var t={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(t.DisplayName=e.DisplayName),void 0!==e.ID&&(t.ID=e.ID),t}function ag(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}function ug(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var cg,lg=function(l,p){return Eh(void 0,void 0,void 0,function(){var r,o,i,s,a,u,c;return Ah(this,function(e){switch(e.label){case 0:if(r=_h(_h({"content-type":"application/xml"},ug(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),ug(l.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":l.ExpectedBucketOwner}),o="/{Bucket}/{Key+}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((a=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(o=o.replace("{Bucket}",Rc(a)),void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((a=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return o=o.replace("{Key+}",a.split("/").map(Rc).join("/")),i=_h({},void 0!==l.UploadId&&{uploadId:l.UploadId}),void 0!==l.MultipartUpload&&(t=l.MultipartUpload,n=new ng("CompletedMultipartUpload"),void 0!==t.Parts&&null!==t.Parts&&Ig(t.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),s='<?xml version="1.0" encoding="UTF-8"?>',(u=n).addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=u.toString()),[4,p.endpoint()];case 1:return c=e.sent(),a=c.hostname,u=void 0===(u=c.protocol)?"https":u,c=c.port,[2,new Gs({protocol:u,hostname:a,port:c,method:"POST",headers:r,path:o,query:i,body:s})]}var t,n})})},pg=function(n,r){return Eh(void 0,void 0,void 0,function(){var t;return Ah(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,(u=n,c=r,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return Ah(this,function(e){switch(e.label){case 0:return n=[_h({},u)],a={},[4,xg(u.body,c)];case 1:switch(t=_h.apply(void 0,n.concat([(a.body=e.sent(),a)])),o="UnknownError",o=Ng(u,t.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return i=[{}],[4,Eg(t)];case 3:return r=_h.apply(void 0,[_h.apply(void 0,i.concat([e.sent()])),{name:o,$metadata:Og(u)}]),[3,5];case 4:s=t.body,o=s.code||s.Code||o,r=_h(_h({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Og(u)}),e.label=5;case 5:return s=r.message||r.Message||o,r.message=s,delete r.Message,[2,Promise.reject(Object.assign(new Error(s),r))]}})}))]:(t={$metadata:Og(n),RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,ag(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var u,c})})},dg=function(r,o){return Eh(void 0,void 0,void 0,function(){var t,n;return Ah(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(i=r,s=o,Eh(void 0,void 0,void 0,function(){var t,n,r,o;return Ah(this,function(e){switch(e.label){case 0:return t=[_h({},i)],o={},[4,xg(i.body,s)];case 1:return n=_h.apply(void 0,t.concat([(o.body=e.sent(),o)])),r="UnknownError",r=Ng(i,n.body),n=n.body,r=n.code||n.Code||r,n=_h(_h({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:Og(i)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:Og(r),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,xg(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}var i,s})})},fg=function(i,s){return Eh(void 0,void 0,void 0,function(){var r,o;return Ah(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&300<=i.statusCode?[2,(u=i,c=s,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return Ah(this,function(e){switch(e.label){case 0:return n=[_h({},u)],a={},[4,xg(u.body,c)];case 1:switch(t=_h.apply(void 0,n.concat([(a.body=e.sent(),a)])),o="UnknownError",o=Ng(u,t.body)){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return i=[{}],[4,Ag(t)];case 3:return r=_h.apply(void 0,[_h.apply(void 0,i.concat([e.sent()])),{name:o,$metadata:Og(u)}]),[3,5];case 4:s=t.body,o=s.code||s.Code||o,r=_h(_h({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Og(u)}),e.label=5;case 5:return s=r.message||r.Message||o,r.message=s,delete r.Message,[2,Promise.reject(Object.assign(new Error(s),r))]}})}))]:(r={$metadata:Og(i),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==i.headers["x-amz-expiration"]&&(r.Expiration=i.headers["x-amz-expiration"]),void 0!==i.headers["x-amz-copy-source-version-id"]&&(r.CopySourceVersionId=i.headers["x-amz-copy-source-version-id"]),void 0!==i.headers["x-amz-version-id"]&&(r.VersionId=i.headers["x-amz-version-id"]),void 0!==i.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=i.headers["x-amz-server-side-encryption"]),void 0!==i.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=i.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==i.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=i.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==i.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=i.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==i.headers["x-amz-server-side-encryption-context"]&&(r.SSEKMSEncryptionContext=i.headers["x-amz-server-side-encryption-context"]),void 0!==i.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(r.BucketKeyEnabled="true"===i.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==i.headers["x-amz-request-charged"]&&(r.RequestCharged=i.headers["x-amz-request-charged"]),[4,xg(i.body,s)]);case 1:return o=e.sent(),r.CopyObjectResult=(n={ETag:void 0,LastModified:void 0},void 0!==(t=o).ETag&&(n.ETag=t.ETag),void 0!==t.LastModified&&(n.LastModified=new Date(t.LastModified)),n),[2,Promise.resolve(r)]}var t,n,u,c})})},hg=function(r,o){return Eh(void 0,void 0,void 0,function(){var t,n;return Ah(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(i=r,s=o,Eh(void 0,void 0,void 0,function(){var t,n,r,o;return Ah(this,function(e){switch(e.label){case 0:return t=[_h({},i)],o={},[4,xg(i.body,s)];case 1:return n=_h.apply(void 0,t.concat([(o.body=e.sent(),o)])),r="UnknownError",r=Ng(i,n.body),n=n.body,r=n.code||n.Code||r,n=_h(_h({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:Og(i)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:Og(r),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,xg(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}var i,s})})},mg=function(n,r){return Eh(void 0,void 0,void 0,function(){var t;return Ah(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,(i=n,s=r,Eh(void 0,void 0,void 0,function(){var t,n,r,o;return Ah(this,function(e){switch(e.label){case 0:return t=[_h({},i)],o={},[4,xg(i.body,s)];case 1:return n=_h.apply(void 0,t.concat([(o.body=e.sent(),o)])),r="UnknownError",r=Ng(i,n.body),n=n.body,r=n.code||n.Code||r,n=_h(_h({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:Og(i)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:Og(n),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,ag(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var i,s})})},gg=function(r,o){return Eh(void 0,void 0,void 0,function(){var t,n;return Ah(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,(c=r,l=o,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u;return Ah(this,function(e){switch(e.label){case 0:return n=[_h({},c)],u={},[4,xg(c.body,l)];case 1:switch(t=_h.apply(void 0,n.concat([(u.body=e.sent(),u)])),o="UnknownError",o=Ng(c,t.body)){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return i=[{}],[4,Sg(t)];case 3:return r=_h.apply(void 0,[_h.apply(void 0,i.concat([e.sent()])),{name:o,$metadata:Og(c)}]),[3,7];case 4:return s=[{}],[4,_g(t)];case 5:return r=_h.apply(void 0,[_h.apply(void 0,s.concat([e.sent()])),{name:o,$metadata:Og(c)}]),[3,7];case 6:a=t.body,o=a.code||a.Code||o,r=_h(_h({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:Og(c)}),e.label=7;case 7:return a=r.message||r.Message||o,r.message=a,delete r.Message,[2,Promise.reject(Object.assign(new Error(a),r))]}})}))]:(t={$metadata:Og(r),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)]);var c,l})})},yg=function(r,o){return Eh(void 0,void 0,void 0,function(){var t,n;return Ah(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(u=r,c=o,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return Ah(this,function(e){switch(e.label){case 0:return n=[_h({},u)],a={},[4,xg(u.body,c)];case 1:switch(t=_h.apply(void 0,n.concat([(a.body=e.sent(),a)])),o="UnknownError",o=Ng(u,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return i=[{}],[4,Cg(t)];case 3:return r=_h.apply(void 0,[_h.apply(void 0,i.concat([e.sent()])),{name:o,$metadata:Og(u)}]),[3,5];case 4:s=t.body,o=s.code||s.Code||o,r=_h(_h({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Og(u)}),e.label=5;case 5:return s=r.message||r.Message||o,r.message=s,delete r.Message,[2,Promise.reject(Object.assign(new Error(s),r))]}})}))]:(t={$metadata:Og(r),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,xg(r.body,o)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=(Mc(n.CommonPrefixes)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:kg(e)})),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=(Mc(n.Contents)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Tg(e)})),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}var u,c})})},vg=function(a,u){return Eh(void 0,void 0,void 0,function(){var r,o;return Ah(this,function(e){switch(e.label){case 0:return 200!==a.statusCode&&300<=a.statusCode?[2,(i=a,s=u,Eh(void 0,void 0,void 0,function(){var t,n,r,o;return Ah(this,function(e){switch(e.label){case 0:return t=[_h({},i)],o={},[4,xg(i.body,s)];case 1:return n=_h.apply(void 0,t.concat([(o.body=e.sent(),o)])),r="UnknownError",r=Ng(i,n.body),n=n.body,r=n.code||n.Code||r,n=_h(_h({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:Og(i)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(r={$metadata:Og(a),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==a.headers["x-amz-abort-date"]&&(r.AbortDate=new Date(a.headers["x-amz-abort-date"])),void 0!==a.headers["x-amz-abort-rule-id"]&&(r.AbortRuleId=a.headers["x-amz-abort-rule-id"]),void 0!==a.headers["x-amz-request-charged"]&&(r.RequestCharged=a.headers["x-amz-request-charged"]),[4,xg(a.body,u)]);case 1:return void 0!==(o=e.sent()).Bucket&&(r.Bucket=o.Bucket),void 0!==o.Initiator&&(r.Initiator=(t=o.Initiator,n={ID:void 0,DisplayName:void 0},void 0!==t.ID&&(n.ID=t.ID),void 0!==t.DisplayName&&(n.DisplayName=t.DisplayName),n)),void 0!==o.IsTruncated&&(r.IsTruncated="true"==o.IsTruncated),void 0!==o.Key&&(r.Key=o.Key),void 0!==o.MaxParts&&(r.MaxParts=parseInt(o.MaxParts)),void 0!==o.NextPartNumberMarker&&(r.NextPartNumberMarker=o.NextPartNumberMarker),void 0!==o.Owner&&(r.Owner=sg(o.Owner)),void 0!==o.PartNumberMarker&&(r.PartNumberMarker=o.PartNumberMarker),""===o.Part&&(r.Parts=[]),void 0!==o.Part&&(r.Parts=(Mc(o.Part)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Pg(e)})),void 0!==o.StorageClass&&(r.StorageClass=o.StorageClass),void 0!==o.UploadId&&(r.UploadId=o.UploadId),[2,Promise.resolve(r)]}var t,n,i,s})})},bg=function(n,r){return Eh(void 0,void 0,void 0,function(){var t;return Ah(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,(i=n,s=r,Eh(void 0,void 0,void 0,function(){var t,n,r,o;return Ah(this,function(e){switch(e.label){case 0:return t=[_h({},i)],o={},[4,xg(i.body,s)];case 1:return n=_h.apply(void 0,t.concat([(o.body=e.sent(),o)])),r="UnknownError",r=Ng(i,n.body),n=n.body,r=n.code||n.Code||r,n=_h(_h({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:Og(i)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:Og(n),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===n.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,ag(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var i,s})})},wg=function(n,r){return Eh(void 0,void 0,void 0,function(){var t;return Ah(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,(i=n,s=r,Eh(void 0,void 0,void 0,function(){var t,n,r,o;return Ah(this,function(e){switch(e.label){case 0:return t=[_h({},i)],o={},[4,xg(i.body,s)];case 1:return n=_h.apply(void 0,t.concat([(o.body=e.sent(),o)])),r="UnknownError",r=Ng(i,n.body),n=n.body,r=n.code||n.Code||r,n=_h(_h({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:Og(i)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:Og(n),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===n.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,ag(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var i,s})})},Sg=function(r,e){return Eh(void 0,void 0,void 0,function(){var t,n;return Ah(this,function(e){return t={name:"InvalidObjectState",$fault:"client",$metadata:Og(r),AccessTier:void 0,StorageClass:void 0},void 0!==(n=r.body).AccessTier&&(t.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),[2,t]})})},Cg=function(n,e){return Eh(void 0,void 0,void 0,function(){var t;return Ah(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:Og(n)},n.body,[2,t]})})},_g=function(n,e){return Eh(void 0,void 0,void 0,function(){var t;return Ah(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:Og(n)},n.body,[2,t]})})},Eg=function(n,e){return Eh(void 0,void 0,void 0,function(){var t;return Ah(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:Og(n)},n.body,[2,t]})})},Ag=function(n,e){return Eh(void 0,void 0,void 0,function(){var t;return Ah(this,function(e){return t={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:Og(n)},n.body,[2,t]})})},Ig=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:(t=e,e=new ng("CompletedPart"),void 0!==t.ETag&&null!==t.ETag&&(n=new ng("ETag").addChildNode(new og(t.ETag)).withName("ETag"),e.addChildNode(n)),void 0!==t.PartNumber&&null!==t.PartNumber&&(n=new ng("PartNumber").addChildNode(new og(String(t.PartNumber))).withName("PartNumber"),e.addChildNode(n)),e.withName("member"));var t,n})},kg=function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n},Tg=function(e,t){var n={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Owner&&(n.Owner=sg(e.Owner)),n},Pg=function(e,t){var n={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(n.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),n},Og=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},xg=function(e,t){return ag(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=P.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}});return(t=t[e=Object.keys(t)[0]])["#text"]&&(t[e]=t["#text"],delete t["#text"]),Uc(t)}return{}});var n},Ng=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},Rg=(Ch(Mg,cg=mE),Mg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:sm.filterSensitiveLog,outputFilterSensitiveLog:im.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},Mg.prototype.serialize=function(e,t){return a=e,u=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h({},ug(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),ug(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Rc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(Rc).join("/")),r=_h({"x-id":"AbortMultipartUpload"},void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Mg.prototype.deserialize=pg,Mg);function Mg(e){var t=cg.call(this)||this;return t.input=e,t}var Ug,Dg=(Ch(Lg,Ug=mE),Lg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(nm(t)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:um.filterSensitiveLog,outputFilterSensitiveLog:am.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},Lg.prototype.serialize=lg,Lg.prototype.deserialize=dg,Lg);function Lg(e){var t=Ug.call(this)||this;return t.input=e,t}function Fg(t){return{applyToStack:function(e){e.add(function(g){var e=this;return function(m){return function(h){return q(e,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f;return K(this,function(e){switch(e.label){case 0:t=F({},h.input),n=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],e.label=1;case 1:e.trys.push([1,6,7,8]),r=H(n),o=r.next(),e.label=2;case 2:return o.done?[3,5]:(i=o.value,(s=t[i.target])?(c=ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):"string"==typeof s?g.utf8Decoder(s):new Uint8Array(s),l=g.base64Encoder(c),(s=new g.md5).update(c),a=[F({},t)],(f={})[i.target]=l,u=i.hash,l=(c=g).base64Encoder,[4,s.digest()]):[3,4]);case 3:t=F.apply(void 0,a.concat([(f[u]=l.apply(c,[e.sent()]),f)])),e.label=4;case 4:return o=r.next(),[3,2];case 5:return[3,8];case 6:return p={error:p=e.sent()},[3,8];case 7:try{o&&!o.done&&(d=r.return)&&d.call(r)}finally{if(p)throw p.error}return[7];case 8:return[2,m(F(F({},h),{input:t}))]}})})}}}(t),Bg)}}}var jg,Bg={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},zg=(Ch(Vg,jg=mE),Vg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(nm(t)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:lm.filterSensitiveLog,outputFilterSensitiveLog:cm.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},Vg.prototype.serialize=function(e,t){return a=e,u=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h({},ug(a.ACL)&&{"x-amz-acl":a.ACL}),ug(a.CacheControl)&&{"cache-control":a.CacheControl}),ug(a.ContentDisposition)&&{"content-disposition":a.ContentDisposition}),ug(a.ContentEncoding)&&{"content-encoding":a.ContentEncoding}),ug(a.ContentLanguage)&&{"content-language":a.ContentLanguage}),ug(a.ContentType)&&{"content-type":a.ContentType}),ug(a.CopySource)&&{"x-amz-copy-source":a.CopySource}),ug(a.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":a.CopySourceIfMatch}),ug(a.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":zc(a.CopySourceIfModifiedSince).toString()}),ug(a.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":a.CopySourceIfNoneMatch}),ug(a.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":zc(a.CopySourceIfUnmodifiedSince).toString()}),ug(a.Expires)&&{expires:zc(a.Expires).toString()}),ug(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),ug(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),ug(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),ug(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),ug(a.MetadataDirective)&&{"x-amz-metadata-directive":a.MetadataDirective}),ug(a.TaggingDirective)&&{"x-amz-tagging-directive":a.TaggingDirective}),ug(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),ug(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),ug(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),ug(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),ug(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),ug(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":a.SSECustomerKeyMD5}),ug(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),ug(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),ug(a.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":a.BucketKeyEnabled.toString()}),ug(a.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":a.CopySourceSSECustomerAlgorithm}),ug(a.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":a.CopySourceSSECustomerKey}),ug(a.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":a.CopySourceSSECustomerKeyMD5}),ug(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),ug(a.Tagging)&&{"x-amz-tagging":a.Tagging}),ug(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),ug(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),ug(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),ug(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),ug(a.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":a.ExpectedSourceBucketOwner}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return _h(_h({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=a.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Rc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(Rc).join("/")),r={"x-id":"CopyObject"},[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"PUT",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Vg.prototype.deserialize=fg,Vg);function Vg(e){var t=jg.call(this)||this;return t.input=e,t}var qg,Kg=(Ch(Hg,qg=mE),Hg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:dm.filterSensitiveLog,outputFilterSensitiveLog:pm.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},Hg.prototype.serialize=function(e,t){return a=e,u=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h({},ug(a.ACL)&&{"x-amz-acl":a.ACL}),ug(a.CacheControl)&&{"cache-control":a.CacheControl}),ug(a.ContentDisposition)&&{"content-disposition":a.ContentDisposition}),ug(a.ContentEncoding)&&{"content-encoding":a.ContentEncoding}),ug(a.ContentLanguage)&&{"content-language":a.ContentLanguage}),ug(a.ContentType)&&{"content-type":a.ContentType}),ug(a.Expires)&&{expires:zc(a.Expires).toString()}),ug(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),ug(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),ug(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),ug(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),ug(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),ug(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),ug(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),ug(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),ug(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),ug(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":a.SSECustomerKeyMD5}),ug(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),ug(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),ug(a.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":a.BucketKeyEnabled.toString()}),ug(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),ug(a.Tagging)&&{"x-amz-tagging":a.Tagging}),ug(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),ug(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),ug(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),ug(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return _h(_h({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=a.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Rc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(Rc).join("/")),r={uploads:""},[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"POST",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Hg.prototype.deserialize=hg,Hg);function Hg(e){var t=qg.call(this)||this;return t.input=e,t}var Gg,Wg=(Ch($g,Gg=mE),$g.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:hm.filterSensitiveLog,outputFilterSensitiveLog:fm.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},$g.prototype.serialize=function(e,t){return a=e,u=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h(_h(_h({},ug(a.MFA)&&{"x-amz-mfa":a.MFA}),ug(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),ug(a.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":a.BypassGovernanceRetention.toString()}),ug(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Rc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(Rc).join("/")),r=_h({"x-id":"DeleteObject"},void 0!==a.VersionId&&{versionId:a.VersionId}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},$g.prototype.deserialize=mg,$g);function $g(e){var t=Gg.call(this)||this;return t.input=e,t}var Yg,Jg=(Ch(Zg,Yg=mE),Zg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:Vm.filterSensitiveLog,outputFilterSensitiveLog:zm.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},Zg.prototype.serialize=function(e,t){return a=e,u=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h(_h(_h(_h(_h(_h(_h(_h(_h({},ug(a.IfMatch)&&{"if-match":a.IfMatch}),ug(a.IfModifiedSince)&&{"if-modified-since":zc(a.IfModifiedSince).toString()}),ug(a.IfNoneMatch)&&{"if-none-match":a.IfNoneMatch}),ug(a.IfUnmodifiedSince)&&{"if-unmodified-since":zc(a.IfUnmodifiedSince).toString()}),ug(a.Range)&&{range:a.Range}),ug(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),ug(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),ug(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":a.SSECustomerKeyMD5}),ug(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),ug(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Rc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(Rc).join("/")),r=_h(_h(_h(_h(_h(_h(_h(_h({"x-id":"GetObject"},void 0!==a.ResponseCacheControl&&{"response-cache-control":a.ResponseCacheControl}),void 0!==a.ResponseContentDisposition&&{"response-content-disposition":a.ResponseContentDisposition}),void 0!==a.ResponseContentEncoding&&{"response-content-encoding":a.ResponseContentEncoding}),void 0!==a.ResponseContentLanguage&&{"response-content-language":a.ResponseContentLanguage}),void 0!==a.ResponseContentType&&{"response-content-type":a.ResponseContentType}),void 0!==a.ResponseExpires&&{"response-expires":(a.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==a.VersionId&&{versionId:a.VersionId}),void 0!==a.PartNumber&&{partNumber:a.PartNumber.toString()}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Zg.prototype.deserialize=gg,Zg);function Zg(e){var t=Yg.call(this)||this;return t.input=e,t}var Xg,Qg=(Ch(ey,Xg=mE),ey.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:Km.filterSensitiveLog,outputFilterSensitiveLog:qm.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},ey.prototype.serialize=function(e,t){return a=e,u=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h({},ug(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),ug(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Rc(i)),r=_h(_h(_h(_h(_h({},void 0!==a.Delimiter&&{delimiter:a.Delimiter}),void 0!==a.EncodingType&&{"encoding-type":a.EncodingType}),void 0!==a.Marker&&{marker:a.Marker}),void 0!==a.MaxKeys&&{"max-keys":a.MaxKeys.toString()}),void 0!==a.Prefix&&{prefix:a.Prefix}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},ey.prototype.deserialize=yg,ey);function ey(e){var t=Xg.call(this)||this;return t.input=e,t}var ty,ny=(Ch(ry,ty=mE),ry.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:Gm.filterSensitiveLog,outputFilterSensitiveLog:Hm.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},ry.prototype.serialize=function(e,t){return a=e,u=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h({},ug(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),ug(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Rc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(Rc).join("/")),r=_h(_h(_h({"x-id":"ListParts"},void 0!==a.MaxParts&&{"max-parts":a.MaxParts.toString()}),void 0!==a.PartNumberMarker&&{"part-number-marker":a.PartNumberMarker}),void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},ry.prototype.deserialize=vg,ry);function ry(e){var t=ty.call(this)||this;return t.input=e,t}var oy,iy,sy,ay,uy,cy,ly,py,dy,fy,hy,my,gy,yy,vy,by=(Ch(wy,oy=mE),wy.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Ym.filterSensitiveLog,outputFilterSensitiveLog:$m.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},wy.prototype.serialize=function(e,t){return u=e,c=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h(_h({"content-type":"application/octet-stream"},ug(u.ACL)&&{"x-amz-acl":u.ACL}),ug(u.CacheControl)&&{"cache-control":u.CacheControl}),ug(u.ContentDisposition)&&{"content-disposition":u.ContentDisposition}),ug(u.ContentEncoding)&&{"content-encoding":u.ContentEncoding}),ug(u.ContentLanguage)&&{"content-language":u.ContentLanguage}),ug(u.ContentLength)&&{"content-length":u.ContentLength.toString()}),ug(u.ContentMD5)&&{"content-md5":u.ContentMD5}),ug(u.ContentType)&&{"content-type":u.ContentType}),ug(u.Expires)&&{expires:zc(u.Expires).toString()}),ug(u.GrantFullControl)&&{"x-amz-grant-full-control":u.GrantFullControl}),ug(u.GrantRead)&&{"x-amz-grant-read":u.GrantRead}),ug(u.GrantReadACP)&&{"x-amz-grant-read-acp":u.GrantReadACP}),ug(u.GrantWriteACP)&&{"x-amz-grant-write-acp":u.GrantWriteACP}),ug(u.ServerSideEncryption)&&{"x-amz-server-side-encryption":u.ServerSideEncryption}),ug(u.StorageClass)&&{"x-amz-storage-class":u.StorageClass}),ug(u.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":u.WebsiteRedirectLocation}),ug(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),ug(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),ug(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":u.SSECustomerKeyMD5}),ug(u.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":u.SSEKMSKeyId}),ug(u.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":u.SSEKMSEncryptionContext}),ug(u.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":u.BucketKeyEnabled.toString()}),ug(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),ug(u.Tagging)&&{"x-amz-tagging":u.Tagging}),ug(u.ObjectLockMode)&&{"x-amz-object-lock-mode":u.ObjectLockMode}),ug(u.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(u.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),ug(u.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":u.ObjectLockLegalHoldStatus}),ug(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),void 0!==u.Metadata&&Object.keys(u.Metadata).reduce(function(e,t){return _h(_h({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=u.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Rc(i)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(Rc).join("/")),r={"x-id":"PutObject"},void 0!==u.Body&&(s=u.Body,o=s),[4,c.endpoint()];case 1:return a=e.sent(),i=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new Gs({protocol:s,hostname:i,port:a,method:"PUT",headers:t,path:n,query:r,body:o})]}})});var u,c},wy.prototype.deserialize=bg,wy);function wy(e){var t=oy.call(this)||this;return t.input=e,t}(iy=iy||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.Encryption&&{Encryption:Jm.filterSensitiveLog(e.Encryption)})},(sy=sy||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.S3&&{S3:iy.filterSensitiveLog(e.S3)})},(ay=ay||{}).IGNORE="IGNORE",ay.NONE="NONE",ay.USE="USE",(uy=uy||{}).DOCUMENT="DOCUMENT",uy.LINES="LINES",(cy=cy||{}).ALWAYS="ALWAYS",cy.ASNEEDED="ASNEEDED",(ly=ly||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.OutputLocation&&{OutputLocation:sy.filterSensitiveLog(e.OutputLocation)})},(py=py||{}).filterSensitiveLog=function(e){return _h({},e)},(dy=dy||{}).filterSensitiveLog=function(e){return _h({},e)},(fy=fy||{}).filterSensitiveLog=function(e){return _h({},e)},(hy=hy||{}).filterSensitiveLog=function(e){return _h({},e)},(my=my||{}).filterSensitiveLog=function(e){return _h({},e)},(gy=gy||{}).visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},gy.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:hy.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:my.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:fy.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:py.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:dy.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(yy=yy||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:qc})},(vy=vy||{}).filterSensitiveLog=function(e){return _h(_h({},e),e.SSECustomerKey&&{SSECustomerKey:qc})};var Sy,Cy=(Ch(_y,Sy=mE),_y.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Fg(t)),this.middlewareStack.use(Nh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:vy.filterSensitiveLog,outputFilterSensitiveLog:yy.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},_y.prototype.serialize=function(e,t){return u=e,c=t,Eh(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return Ah(this,function(e){switch(e.label){case 0:if(t=_h(_h(_h(_h(_h(_h(_h({"content-type":"application/octet-stream"},ug(u.ContentLength)&&{"content-length":u.ContentLength.toString()}),ug(u.ContentMD5)&&{"content-md5":u.ContentMD5}),ug(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),ug(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),ug(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":u.SSECustomerKeyMD5}),ug(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),ug(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Rc(i)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(Rc).join("/")),r=_h(_h({"x-id":"UploadPart"},void 0!==u.PartNumber&&{partNumber:u.PartNumber.toString()}),void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.Body&&(s=u.Body,o=s),[4,c.endpoint()];case 1:return a=e.sent(),i=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new Gs({protocol:s,hostname:i,port:a,method:"PUT",headers:t,path:n,query:r,body:o})]}})});var u,c},_y.prototype.deserialize=wg,_y);function _y(e){var t=Sy.call(this)||this;return t.input=e,t}function Ey(e){return encodeURIComponent(e).replace(/[!'()*]/g,Ay)}var Ay=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function Iy(e){var t,n,r=[];try{for(var o=H(Object.keys(e).sort()),i=o.next();!i.done;i=o.next()){var s=e[a=i.value],a=Ey(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+Ey(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+Ey(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}function ky(e){var t=e.port,n=e.query,r=e.protocol,o=e.path,e=e.hostname;return r&&":"!==r.substr(-1)&&(r+=":"),t&&(e+=":"+t),o&&"/"!==o.charAt(0)&&(o="/"+o),r+"//"+e+o+((n=n?Iy(n):"")&&"?"!==n[0]?"?"+n:n)}for(var Ty={},Py=0;Py<256;Py++){var Oy=Py.toString(16).toLowerCase();1===Oy.length&&(Oy="0"+Oy),Ty[Py]=Oy}function xy(e){for(var t="",n=0;n<e.byteLength;n++)t+=Ty[e[n]];return t}var Ny="X-Amz-Date",Ry="X-Amz-Signature",My="X-Amz-Security-Token",Uy="authorization",Dy=Ny.toLowerCase(),Ly=[Uy,Dy,"date"],Fy=Ry.toLowerCase(),jy="x-amz-content-sha256",By=My.toLowerCase(),zy={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Vy=/^proxy-/,qy=/^sec-/,Ky="AWS4-HMAC-SHA256",Hy="AWS4-HMAC-SHA256-PAYLOAD",Gy="aws4_request",Wy={},$y=[];function Yy(e,t,n){return e+"/"+t+"/"+n+"/"+Gy}function Jy(e,t,n){return(t=new e(t)).update(n),t.digest()}function Zy(e,t,n){var r,o,i=e.headers,s={};try{for(var a=H(Object.keys(i).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(!(l in zy||null!=t&&t.has(l)||Vy.test(l)||qy.test(l))||n&&n.has(l))&&(s[l]=i[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return s}function Xy(e){return encodeURIComponent(e).replace(/[!'()*]/g,Qy)}var Qy=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function ev(e,u){var c=e.headers,l=e.body;return q(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return K(this,function(e){switch(e.label){case 0:try{for(t=H(Object.keys(c)),n=t.next();!n.done;n=t.next())if((r=n.value).toLowerCase()===jy)return[2,c[r]]}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return null!=l?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof l||ArrayBuffer.isView(l)||("function"==typeof ArrayBuffer&&l instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(l))?((o=new u).update(l),i=xy,[4,o.digest()]):[3,3];case 2:return[2,i.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function tv(e){var r,t=e.headers,n=e.query,e=j(e,["headers","query"]);return F(F({},e),{headers:F({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return F(F({},e),((e={})[t]=Array.isArray(n)?W(n):n,e))},{})):void 0})}function nv(e){var t,n;e="function"==typeof e.clone?e.clone():tv(e);try{for(var r=H(Object.keys(e.headers)),o=r.next();!o.done;o=r.next()){var i=o.value;-1<Ly.indexOf(i.toLowerCase())&&delete e.headers[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var rv=(ov.prototype.presign=function(w,S){return void 0===S&&(S={}),q(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y,v,b;return K(this,function(e){switch(e.label){case 0:return d=S.signingDate,t=void 0===d?new Date:d,p=S.expiresIn,n=void 0===p?3600:p,r=S.unsignableHeaders,o=S.unhoistableHeaders,i=S.signableHeaders,s=S.signingRegion,a=S.signingService,[4,this.credentialProvider()];case 1:return u=e.sent(),null==s?[3,2]:(l=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:l=e.sent(),e.label=4;case 4:return c=l,d=iv(t),p=d.longDate,d=d.shortDate,604800<n?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(v=Yy(d,c,null!=a?a:this.service),f=function(e,t){var n,r,o;void 0===t&&(t={});var i="function"==typeof e.clone?e.clone():tv(e),s=i.headers,a=void 0===(i=i.query)?{}:i;try{for(var u=H(Object.keys(s)),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.toLowerCase();"x-amz-"!==p.substr(0,6)||null!==(o=t.unhoistableHeaders)&&void 0!==o&&o.has(p)||(a[l]=s[l],delete s[l])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return F(F({},e),{headers:s,query:a})}(nv(w),{unhoistableHeaders:o}),u.sessionToken&&(f.query[My]=u.sessionToken),f.query["X-Amz-Algorithm"]=Ky,f.query["X-Amz-Credential"]=u.accessKeyId+"/"+v,f.query[Ny]=p,f.query["X-Amz-Expires"]=n.toString(10),b=Zy(f,r,i),f.query["X-Amz-SignedHeaders"]=sv(b),h=f.query,m=Ry,g=this.getSignature,y=[p,v,this.getSigningKey(u,c,d,a)],v=this.createCanonicalRequest,b=[f,b],[4,ev(w,this.sha256)]);case 5:return[4,g.apply(this,y.concat([v.apply(this,b.concat([e.sent()]))]))];case 6:return h[m]=e.sent(),[2,f]}})})},ov.prototype.sign=function(t,n){return q(this,void 0,void 0,function(){return K(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},ov.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,l=void 0===(e=t.signingDate)?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return K(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,r=iv(l),o=r.shortDate,r=r.longDate,o=Yy(o,t,null!=f?f:this.service),[4,ev({headers:{},body:c},this.sha256)];case 4:return i=e.sent(),(a=new this.sha256).update(u),s=xy,[4,a.digest()];case 5:return a=s.apply(void 0,[e.sent()]),a=[Hy,r,o,p,a,i].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:f})]}})})},ov.prototype.signString=function(u,e){var t=void 0===e?{}:e,c=void 0===(e=t.signingDate)?new Date:e,l=t.signingRegion,p=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==l?[3,2]:(r=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,o=iv(c).shortDate,s=(i=this.sha256).bind,[4,this.getSigningKey(t,n,o,p)];case 5:return(o=new(s.apply(i,[void 0,e.sent()]))).update(u),a=xy,[4,o.digest()];case 6:return[2,a.apply(void 0,[e.sent()])]}})})},ov.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,p=void 0===(e=t.signingDate)?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,m=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==h?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,o=nv(l),a=iv(p),i=a.longDate,s=a.shortDate,a=Yy(s,n,null!=m?m:this.service),o.headers[Dy]=i,t.sessionToken&&(o.headers[By]=t.sessionToken),[4,ev(o,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var o=H(Object.keys(t)),i=o.next();!i.done;i=o.next())if(e===i.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(jy,o.headers)&&this.applyChecksum&&(o.headers[jy]=c),u=Zy(o,f,d),[4,this.getSignature(i,a,this.getSigningKey(t,n,s,m),this.createCanonicalRequest(o,u,c))];case 6:return c=e.sent(),o.headers[Uy]=Ky+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+sv(u)+", Signature="+c,[2,o]}})})},ov.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=void 0===(e=e.query)?{}:e,o=[],i={};try{for(var s=H(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){var e;n.toLowerCase()!==Fy&&(o.push(n),"string"==typeof(e=r[n])?i[n]=Xy(n)+"="+Xy(e):Array.isArray(e)&&(i[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([Xy(n)+"="+Xy(t)])},[]).join("&")))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o.map(function(e){return i[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},ov.prototype.createStringToSign=function(n,r,o){return q(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(o),[4,t.digest()];case 1:return t=e.sent(),[2,Ky+"\n"+n+"\n"+r+"\n"+xy(t)]}})})},ov.prototype.getCanonicalPath=function(e){return e=e.path,this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},ov.prototype.getSignature=function(s,a,u,c){return q(this,void 0,void 0,function(){var t,n,r,o,i;return K(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(s,a,c)];case 1:return t=e.sent(),o=(r=this.sha256).bind,[4,u];case 2:return(n=new(o.apply(r,[void 0,e.sent()]))).update(t),i=xy,[4,n.digest()];case 3:return[2,i.apply(void 0,[e.sent()])]}})})},ov.prototype.getSigningKey=function(e,t,n,r){return u=this.sha256,c=e,l=n,p=t,d=r||this.service,q(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return K(this,function(e){switch(e.label){case 0:return[4,Jy(u,c.secretAccessKey,c.accessKeyId)];case 1:if(i=e.sent(),(t=l+":"+p+":"+d+":"+xy(i)+":"+c.sessionToken)in Wy)return[2,Wy[t]];for($y.push(t);50<$y.length;)delete Wy[$y.shift()];n="AWS4"+c.secretAccessKey,e.label=2;case 2:e.trys.push([2,7,8,9]),r=H([l,p,d,Gy]),o=r.next(),e.label=3;case 3:return o.done?[3,6]:(i=o.value,[4,Jy(u,n,i)]);case 4:n=e.sent(),e.label=5;case 5:return o=r.next(),[3,3];case 6:return[3,9];case 7:return s={error:s=e.sent()},[3,9];case 8:try{o&&!o.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 9:return[2,Wy[t]=n]}})});var u,c,l,p,d},ov);function ov(e){var t=e.applyChecksum,n=e.credentials,r=e.region,o=e.service,i=e.sha256,e=void 0===(e=e.uriEscapePath)||e;this.service=o,this.sha256=i,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=av(r),this.credentialProvider=uv(n)}var iv=function(e){var t;return{longDate:e=("number"==typeof(t=e)?new Date(1e3*t):"string"!=typeof t?t:Number(t)?new Date(1e3*Number(t)):new Date(t)).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[\-:]/g,""),shortDate:e.substr(0,8)}},sv=function(e){return Object.keys(e).sort().join(";")},av=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},uv=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},cv=(lv.prototype.presign=function(t,e){var n=(e=void 0===e?{}:e).unsignableHeaders,r=void 0===n?new Set:n,o=void 0===(n=e.unhoistableHeaders)?new Set:n,i=j(e,["unsignableHeaders","unhoistableHeaders"]);return q(this,void 0,void 0,function(){return K(this,function(e){return r.add("content-type"),Object.keys(t.headers).map(function(e){return e.toLowerCase()}).filter(function(e){return e.startsWith("x-amz-server-side-encryption")}).forEach(function(e){o.add(e)}),t.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",t.headers.host||(t.headers.host=t.hostname),[2,this.signer.presign(t,F({expiresIn:900,unsignableHeaders:r,unhoistableHeaders:o},i))]})})},lv);function lv(e){e=F({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e),this.signer=new rv(e)}var pv=new A.ConsoleLogger("axios-http-handler"),dv="sendUploadProgress",fv="sendDownloadProgress";function hv(e,t){var n,r;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),i=o.next();!i.done;i=o.next()){var s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(i.value,2),a=s[0],u=s[1];a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=u,delete e[a])}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var mv,gv=[function(e,t){return"undefined"!=typeof Blob&&e instanceof Blob?(hv(t,"Content-Type"),hv(t,"Accept"),e):O.defaults.transformRequest[0].call(null,e,t)}],yv=(vv.prototype.destroy=function(){},vv.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,o=e.path;!e.query||(s=Iy(e.query))&&(o+="?"+s);var i,s=e.port,s=e.protocol+"//"+e.hostname+(s?":"+s:"")+o;return(o={}).url=s,o.method=e.method,o.headers=e.headers,delete o.headers.host,e.body?o.data=e.body:o.headers["Content-Type"]&&(o.data=null),r&&(o.onUploadProgress=function(e){r.emit(dv,e),pv.debug(e)},o.onDownloadProgress=function(e){r.emit(fv,e),pv.debug(e)}),this.cancelTokenSource&&(o.cancelToken=this.cancelTokenSource.token),o.responseType="blob",A.Platform.isReactNative&&(o.transformRequest=gv),n=[O.request(o).then(function(e){return{response:new Ks({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw pv.error(e.message),e}),(void 0===(i=n)&&(i=0),new Promise(function(e,t){i&&setTimeout(function(){var e=new Error("Request did not complete within "+i+" ms");e.name="TimeoutError",t(e)},i)}))],Promise.race(n)},vv);function vv(e,t,n){this.httpOptions=e=void 0===e?{}:e,this.emitter=t,this.cancelTokenSource=n}(wg=mv=mv||{}).NO_CREDENTIALS="No credentials",wg.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',wg.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',(wg=Zv=Zv||{}).CLEANUP_FAILED="Multipart copy clean up failed",wg.NO_OBJECT_FOUND="Object does not exist",wg.INVALID_QUEUESIZE="Queue size must be a positive number",wg.NO_COPYSOURCE="You must specify a copy source",wg.MAX_NUM_PARTS_EXCEEDED="Only a maximum of 10000 parts are allowed";function bv(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function wv(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Sv=function(){return(Sv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Cv=new A.ConsoleLogger("AWSS3ProviderManagedUpload"),_v=(Ev.prototype.upload=function(){return bv(this,void 0,void 0,function(){var t,n,r,o,i,s,a=this;return wv(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,n=new by(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,e.sent().send(n)];case 3:return[4,this.createMultiPartUpload()];case 4:r=e.sent(),o=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=this.createParts(),s=0,e.label=5;case 5:return s<o?[4,this.checkIfUploadCancelled(r)]:[3,10];case 6:return e.sent(),[4,this.uploadParts(r,i.slice(s,s+this.queueSize))];case 7:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 8:e.sent(),e.label=9;case 9:return s+=this.queueSize,[3,5];case 10:return i.map(function(e){a.removeEventListener(e)}),[4,this.finishMultiPartUpload(r)];case 11:return[2,e.sent()]}})})},Ev.prototype.createParts=function(){for(var e=[],t=0;t<this.totalBytesToUpload;){var n=Math.min(t+this.minPartSize,this.totalBytesToUpload);e.push({bodyPart:this.body.slice(t,n),partNumber:e.length+1,emitter:new x.EventEmitter,_lastUploadedBytes:0}),t+=this.minPartSize}return e},Ev.prototype.createMultiPartUpload=function(){return bv(this,void 0,void 0,function(){var t,n,r=this;return wv(this,function(e){switch(e.label){case 0:return t=new Kg(this.params),[4,this._createNewS3Client(this.opts)];case 1:return(n=e.sent()).middlewareStack.add(function(t){return function(e){return r.params.ContentType&&e&&e.request&&e.request.headers&&(e.request.headers["Content-Type"]=r.params.ContentType),t(e)}},{step:"build"}),[4,n.send(t)];case 2:return n=e.sent(),Cv.debug(n.UploadId),[2,n.UploadId]}})})},Ev.prototype.uploadParts=function(u,i){return bv(this,void 0,void 0,function(){var t,n,r,o=this;return wv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Promise.all(i.map(function(a){return bv(o,void 0,void 0,function(){var t,n,r,o,i,s;return wv(this,function(e){switch(e.label){case 0:return this.setupEventListener(a),[4,this._createNewS3Client(this.opts,a.emitter)];case 1:return t=e.sent(),s=this.params,n=s.Key,r=s.Bucket,o=s.SSECustomerAlgorithm,i=s.SSECustomerKey,s=s.SSECustomerKeyMD5,[2,t.send(new Cy(Sv(Sv(Sv({PartNumber:a.partNumber,Body:a.bodyPart,UploadId:u,Key:n,Bucket:r},o&&{SSECustomerAlgorithm:o}),i&&{SSECustomerKey:i}),s&&{SSECustomerKeyMD5:s})))]}})})}))];case 1:for(t=e.sent(),n=0;n<t.length;n++)this.completedParts.push({PartNumber:i[n].partNumber,ETag:t[n].ETag});return[3,3];case 2:return r=e.sent(),Cv.error("error happened while uploading a part. Cancelling the multipart upload",r),this.cancelUpload(),[2];case 3:return[2]}})})},Ev.prototype.finishMultiPartUpload=function(o){return bv(this,void 0,void 0,function(){var t,n,r;return wv(this,function(e){switch(e.label){case 0:return r={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:o,MultipartUpload:{Parts:this.completedParts}},t=new Dg(r),[4,this._createNewS3Client(this.opts)];case 1:n=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,n.send(t)];case 3:return[2,e.sent().Key];case 4:return r=e.sent(),Cv.error("error happened while finishing the upload. Cancelling the multipart upload",r),this.cancelUpload(),[2];case 5:return[2]}})})},Ev.prototype.checkIfUploadCancelled=function(r){return bv(this,void 0,void 0,function(){var t,n;return wv(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=" "+n.message,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},Ev.prototype.cancelUpload=function(){this.cancel=!0},Ev.prototype.cleanup=function(o){return bv(this,void 0,void 0,function(){var t,n,r;return wv(this,function(e){switch(e.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:o},[4,this._createNewS3Client(this.opts)];case 1:return[4,(n=e.sent()).send(new Rg(t))];case 2:return e.sent(),[4,n.send(new ny(t))];case 3:if((r=e.sent())&&r.Parts&&0<r.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},Ev.prototype.removeEventListener=function(e){e.emitter.removeAllListeners(dv),e.emitter.removeAllListeners(fv)},Ev.prototype.setupEventListener=function(t){var n=this;t.emitter.on(dv,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},Ev.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(dv,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},Ev.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},Ev.prototype.validateAndSanitizeBody=function(t){return bv(this,void 0,void 0,function(){return wv(this,function(e){return this.isGenericObject(t)?[2,JSON.stringify(t)]:[2,t]})})},Ev.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},Ev.prototype._createNewS3Client=function(s,a){return bv(this,void 0,void 0,function(){var t,n,r,o,i;return wv(this,function(e){switch(e.label){case 0:return[4,this._getCredentials()];case 1:return t=e.sent(),n=s.region,r=s.dangerouslyConnectToHttpEndpointForTesting,i=s.cancelTokenSource,o=s.useAccelerateEndpoint,(i=new eg(Sv(Sv({region:n,credentials:t,useAccelerateEndpoint:o},r?{endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}:{}),{requestHandler:new yv({},a,i),customUserAgent:A.getAmplifyUserAgent()}))).middlewareStack.remove("contentLengthMiddleware"),[2,i]}})})},Ev.prototype._getCredentials=function(){return A.Credentials.get().then(function(e){return!!e&&(e=A.Credentials.shear(e),Cv.debug("set credentials for storage",e),e)}).catch(function(e){return Cv.warn("ensure credentials error",e),!1})},Ev);function Ev(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.completedParts=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function Av(e,t,n,r,o){e&&(n={attrs:n},r&&(n.metrics=r),A.Hub.dispatch("storage",{event:t,data:n,message:o},"Storage",Ov))}function Iv(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function kv(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Tv=function(){return(Tv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Pv=new A.ConsoleLogger("AWSS3Provider"),Ov="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",xv=(Nv.prototype.getCategory=function(){return Nv.CATEGORY},Nv.prototype.getProviderName=function(){return Nv.PROVIDER_NAME},Nv.prototype.configure=function(e){return Pv.debug("configure Storage",e),e&&(e=A.Parser.parseMobilehubConfig(e),this._config=Object.assign({},this._config,e.Storage),this._config.bucket||Pv.debug("Do not have bucket yet")),this._config},Nv.prototype.copy=function(y,v,b){return Iv(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g;return kv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(mv.NO_CREDENTIALS);if(g=Object.assign({},this._config,b),m=g.acl,t=g.bucket,n=g.cacheControl,r=g.expires,o=g.track,i=g.serverSideEncryption,s=g.SSECustomerAlgorithm,a=g.SSECustomerKey,u=g.SSECustomerKeyMD5,c=g.SSEKMSKeyId,h=y.level,l=void 0===h?"public":h,f=y.identityId,p=y.key,d=v.level,h=void 0===d?"public":d,d=v.key,!p||"string"!=typeof p)throw new Error(mv.NO_SRC_KEY);if(!d||"string"!=typeof d)throw new Error(mv.NO_DEST_KEY);"protected"!==l&&f&&Pv.warn('You may copy files from another user if the source level is "protected", currently it\'s '+l),f=this._prefix(Tv(Tv(Tv({},g),{level:l}),f&&{identityId:f})),h=this._prefix(Tv(Tv({},g),{level:h})),f=t+"/"+f+p,h=""+h+d,Pv.debug("copying "+f+" to "+h),h={Bucket:t,CopySource:f,Key:h,MetadataDirective:"COPY"},n&&(h.CacheControl=n),r&&(h.Expires=r),i&&(h.ServerSideEncryption=i),s&&(h.SSECustomerAlgorithm=s),a&&(h.SSECustomerKey=a),u&&(h.SSECustomerKeyMD5=u),c&&(h.SSEKMSKeyId=c),m&&(h.ACL=m),(m=this._createNewS3Client(g)).middlewareStack.remove("contentLengthMiddleware"),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,m.send(new zg(h))];case 3:return e.sent(),Av(o,"copy",{method:"copy",result:"success"},null,"Copy success from "+p+" to "+d),[2,{key:d}];case 4:throw g=e.sent(),Av(o,"copy",{method:"copy",result:"failed"},null,"Copy failed from "+p+" to "+d),g;case 5:return[2]}})})},Nv.prototype.get=function(S,C){return Iv(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y,v,b,w;return kv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(mv.NO_CREDENTIALS);if(f=Object.assign({},this._config,C),t=f.bucket,g=f.download,n=f.cacheControl,r=f.contentDisposition,o=f.contentEncoding,i=f.contentLanguage,s=f.contentType,a=f.expires,u=f.track,c=f.SSECustomerAlgorithm,l=f.SSECustomerKey,m=f.SSECustomerKeyMD5,p=f.progressCallback,d=this._prefix(f),h=d+S,d=new x.EventEmitter,f=this._createNewS3Client(f,d),Pv.debug("get "+S+" from "+h),h={Bucket:t,Key:h},n&&(h.ResponseCacheControl=n),r&&(h.ResponseContentDisposition=r),o&&(h.ResponseContentEncoding=o),i&&(h.ResponseContentLanguage=i),s&&(h.ResponseContentType=s),c&&(h.SSECustomerAlgorithm=c),l&&(h.SSECustomerKey=l),m&&(h.SSECustomerKeyMD5=m),!0!==g)return[3,5];m=new Jg(h),e.label=2;case 2:return e.trys.push([2,4,,5]),p&&("function"==typeof p?d.on(fv,function(e){p(e)}):Pv.warn("progressCallback should be a function, not a "+typeof p)),[4,f.send(m)];case 3:return g=e.sent(),d.removeAllListeners(fv),Av(u,"download",{method:"get",result:"success"},{fileSize:Number(g.Body.size||g.Body.length)},"Download success for "+S),[2,g];case 4:throw v=e.sent(),Av(u,"download",{method:"get",result:"failed"},null,"Download failed with "+v.message),v;case 5:return e.trys.push([5,8,,9]),y=new cv(Tv({},f.config)),[4,function(o,i){return q(this,void 0,void 0,function(){var t,n,r=this;return K(this,function(e){switch(e.label){case 0:return t=function(e){return function(t){return q(r,void 0,void 0,function(){return K(this,function(e){return[2,{output:{request:t.request},response:void 0}]})})}},(n=o.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,i.resolveMiddleware(n,o.config,void 0)(i).then(function(e){return e.output.request})];case 1:return[2,e.sent()]}})})}(f,new Jg(h))];case 6:return v=e.sent(),b=ky,[4,y.presign(v,{expiresIn:a||900})];case 7:return w=b.apply(void 0,[e.sent()]),Av(u,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+w),[2,w];case 8:throw w=e.sent(),Pv.warn("get signed url error",w),Av(u,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+S),w;case 9:return[2]}})})},Nv.prototype.put=function(w,S,C){return Iv(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y,v,b;return kv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(mv.NO_CREDENTIALS);v=Object.assign({},this._config,C),t=v.bucket,n=v.track,r=v.progressCallback,m=v.contentType,o=v.contentDisposition,i=v.contentEncoding,s=v.cacheControl,a=v.expires,u=v.metadata,c=v.tagging,l=v.acl,p=v.serverSideEncryption,d=v.SSECustomerAlgorithm,f=v.SSECustomerKey,h=v.SSECustomerKeyMD5,y=v.SSEKMSKeyId,g=m||"binary/octet-stream",m=this._prefix(v),m+=w,Pv.debug("put "+w+" to "+m),g={Bucket:t,Key:m,Body:S,ContentType:g},s&&(g.CacheControl=s),o&&(g.ContentDisposition=o),i&&(g.ContentEncoding=i),a&&(g.Expires=a),u&&(g.Metadata=u),c&&(g.Tagging=c),p&&(g.ServerSideEncryption=p),d&&(g.SSECustomerAlgorithm=d),f&&(g.SSECustomerKey=f),h&&(g.SSECustomerKeyMD5=h),y&&(g.SSEKMSKeyId=y),y=new x.EventEmitter,v=new _v(g,v,y),l&&(g.ACL=l),e.label=2;case 2:return e.trys.push([2,4,,5]),r&&("function"==typeof r?y.on(dv,function(e){r(e)}):Pv.warn("progressCallback should be a function, not a "+typeof r)),[4,v.upload()];case 3:return b=e.sent(),Pv.debug("upload result",b),Av(n,"upload",{method:"put",result:"success"},null,"Upload success for "+w),[2,{key:w}];case 4:throw b=e.sent(),Pv.warn("error uploading",b),Av(n,"upload",{method:"put",result:"failed"},null,"Error uploading "+w),b;case 5:return[2]}})})},Nv.prototype.remove=function(s,a){return Iv(this,void 0,void 0,function(){var t,n,r,o,i;return kv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(mv.NO_CREDENTIALS);r=Object.assign({},this._config,a),t=r.bucket,n=r.track,o=this._prefix(r),o+=s,r=this._createNewS3Client(r),Pv.debug("remove "+s+" from "+o),o=new Wg({Bucket:t,Key:o}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,r.send(o)];case 3:return i=e.sent(),Av(n,"delete",{method:"remove",result:"success"},null,"Deleted "+s+" successfully"),[2,i];case 4:throw i=e.sent(),Av(n,"delete",{method:"remove",result:"failed"},null,"Deletion of "+s+" failed with "+i),i;case 5:return[2]}})})},Nv.prototype.list=function(u,c){return Iv(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return kv(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(mv.NO_CREDENTIALS);o=Object.assign({},this._config,c),t=o.bucket,n=o.track,s=o.maxKeys,r=this._prefix(o),i=r+u,o=this._createNewS3Client(o),Pv.debug("list "+u+" from "+i),i=new Qg({Bucket:t,Prefix:i,MaxKeys:s}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,o.send(i)];case 3:return s=e.sent(),a=[],s&&s.Contents&&(a=s.Contents.map(function(e){return{key:e.Key.substr(r.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),Av(n,"list",{method:"list",result:"success"},null,a.length+" items returned from list operation"),Pv.debug("list",a),[2,a];case 4:throw a=e.sent(),Pv.warn("list error",a),Av(n,"list",{method:"list",result:"failed"},null,"Listing items failed: "+a.message),a;case 5:return[2]}})})},Nv.prototype._ensureCredentials=function(){return Iv(this,void 0,void 0,function(){var t,n;return kv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,A.Credentials.get()];case 1:return(t=e.sent())?(n=A.Credentials.shear(t),Pv.debug("set credentials for storage",n),this._config.credentials=n,[2,!0]):[2,!1];case 2:return n=e.sent(),Pv.warn("ensure credentials error",n),[2,!1];case 3:return[2]}})})},Nv.prototype._isWithCredentials=function(e){return"object"==typeof e&&e.hasOwnProperty("credentials")},Nv.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},t=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+t+"/",i=(void 0!==r.protected?r.protected:"protected/")+t+"/",s=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return i;default:return s}},Nv.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o=e.cancelTokenSource,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new eg(Tv(Tv({region:n,credentials:r,customUserAgent:A.getAmplifyUserAgent()},i),{requestHandler:new yv({},t,o)}))},Nv.CATEGORY="Storage",Nv.PROVIDER_NAME="AWSS3",Nv);function Nv(e){this._config=e||{},Pv.debug("Storage Options",this._config)}var Rv=function(){return(Rv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Mv=new A.ConsoleLogger("StorageClass"),Uv="AWSS3",Dv=(Lv.prototype.getModuleName=function(){return"Storage"},Lv.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},Lv.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(Mv.debug("No plugin found with providerName",t),null):e},Lv.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},Lv.prototype.configure=function(e){var t=this;if(Mv.debug("configure Storage"),!e)return this._config;function n(t){return i.some(function(e){return e===t})}var r=A.Parser.parseMobilehubConfig(e),o=Object.keys(r.Storage),i=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return o&&o.find(n)&&!r.Storage[Uv]&&(r.Storage[Uv]={}),Object.entries(r.Storage).map(function(e){var e=(t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2))[0],t=t[1];e&&n(e)&&void 0!==t&&(r.Storage[Uv][e]=t,delete r.Storage[e])}),Object.keys(r.Storage).forEach(function(e){"string"!=typeof r.Storage[e]&&(t._config[e]=Rv(Rv({},t._config[e]),r.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new xv),this._config},Lv.prototype.getCancellableTokenSource=function(){return O.CancelToken.source()},Lv.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenSourceMap.set(e,t)},Lv.prototype.cancel=function(e,t){(e=this._cancelTokenSourceMap.get(e))?e.cancel(t):Mv.debug("The request does not map to any cancel token")},Lv.prototype.copy=function(e,t,n){var r=(null==n?void 0:n.provider)||Uv,o=this._pluggables.find(function(e){return e.getProviderName()===r});if(void 0===o)return Mv.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var i=this.getCancellableTokenSource();return"function"!=typeof o.copy?Promise.reject(".copy is not implemented on provider "+o.getProviderName()):(n=o.copy(e,t,Rv(Rv({},n),{cancelTokenSource:i})),this.updateRequestToBeCancellable(n,i),n)},Lv.prototype.get=function(e,t){var n=(null==t?void 0:t.provider)||Uv,r=this._pluggables.find(function(e){return e.getProviderName()===n});if(void 0===r)return Mv.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource(),t=r.get(e,Rv(Rv({},t),{cancelTokenSource:o}));return this.updateRequestToBeCancellable(t,o),t},Lv.prototype.isCancelError=function(e){return O.isCancel(e)},Lv.prototype.put=function(e,t,n){var r=(null==n?void 0:n.provider)||Uv,o=this._pluggables.find(function(e){return e.getProviderName()===r});if(void 0===o)return Mv.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var i=this.getCancellableTokenSource(),n=o.put(e,t,Rv(Rv({},n),{cancelTokenSource:i}));return this.updateRequestToBeCancellable(n,i),n},Lv.prototype.remove=function(e,t){var n=(null==t?void 0:t.provider)||Uv,r=this._pluggables.find(function(e){return e.getProviderName()===n});return void 0===r?(Mv.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.remove(e,t)},Lv.prototype.list=function(e,t){var n=(null==t?void 0:t.provider)||Uv,r=this._pluggables.find(function(e){return e.getProviderName()===n});return void 0===r?(Mv.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.list(e,t)},Lv);function Lv(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,Mv.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}var Fv=function(){return(Fv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},jv=new A.ConsoleLogger("Storage"),Bv=null,zv=function(){if(Bv)return Bv;jv.debug("Create Storage Instance, debug"),(Bv=new Dv).vault=new Dv;var n=Bv.configure;return Bv.configure=function(e){jv.debug("storage configure called");var t=Fv({},n.call(Bv,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=Fv(Fv({},t[e]),{level:"private"}))}),jv.debug("storage vault configure called"),Bv.vault.configure(t)},Bv}();A.Amplify.register(zv);function Vv(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var qv=function(){return(qv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Kv=new A.ConsoleLogger("RestClient"),Hv=(Gv.prototype.ajax=function(b,w,S){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,e,y=this;return p=this,d=function(e){switch(e.label){case 0:return Kv.debug(w,b),r="us-east-1",o="execute-api",l=void 0,"string"==typeof b?(t=this._parseUrl(b),n=b):(n=b.endpoint,l=b.custom_header,r=b.region,o=b.service,t=this._parseUrl(b.endpoint)),i={method:w,url:n,host:t.host,path:t.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},s={},A.Platform.isReactNative&&(a=A.Platform.userAgent||"aws-amplify/0.1.x",s={"User-Agent":a}),a=Object.assign({},S),u=a.response,a.body&&("function"==typeof FormData&&a.body instanceof FormData?(s["Content-Type"]="multipart/form-data",i.data=a.body):(s["Content-Type"]="application/json; charset=UTF-8",i.data=JSON.stringify(a.body))),a.responseType&&(i.responseType=a.responseType),a.withCredentials&&(i.withCredentials=a.withCredentials),a.timeout&&(i.timeout=a.timeout),a.cancellableToken&&(i.cancelToken=a.cancellableToken.token),i.signerServiceInfo=a.signerServiceInfo,"function"!=typeof l?[3,2]:[4,l()];case 1:return c=e.sent(),[3,3];case 2:c=void 0,e.label=3;case 3:return l=c,i.headers=qv(qv(qv({},s),l),a.headers),(l=C.parse(n,!0,!0)).search,l=Vv(l,["search"]),i.url=C.format(qv(qv({},l),{query:qv(qv({},l.query),a.queryStringParameters||{})})),void 0!==i.headers.Authorization?(i.headers=Object.keys(i.headers).reduce(function(e,t){return i.headers[t]&&(e[t]=i.headers[t]),e},{}),[2,this._request(i,u)]):[2,this.Credentials.get().then(function(e){return y._signed(qv({},i),e,u,{region:r,service:o}).catch(function(e){if(A.DateUtils.isClockSkewError(e)){var t=(n=e.response.headers)&&(n.date||n.Date),n=new Date(t),t=A.DateUtils.getDateFromHeaderString(i.headers["x-amz-date"]);if(A.DateUtils.isClockSkewed(n))return A.DateUtils.setClockOffset(n.getTime()-t.getTime()),y.ajax(b,w,S)}throw e})},function(e){return Kv.debug("No credentials available, the request will be unsigned"),y._request(i,u)})]}},g={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]},e={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function v(t){return function(e){return function(t){if(f)throw new TypeError("Generator is already executing.");for(;g;)try{if(f=1,h&&(m=2&t[0]?h.return:t[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,t[1])).done)return m;switch(h=0,(t=m?[2&t[0],m.value]:t)[0]){case 0:case 1:m=t;break;case 4:return g.label++,{value:t[1],done:!1};case 5:g.label++,h=t[1],t=[0];continue;case 7:t=g.ops.pop(),g.trys.pop();continue;default:if(!(m=0<(m=g.trys).length&&m[m.length-1])&&(6===t[0]||2===t[0])){g=0;continue}if(3===t[0]&&(!m||t[1]>m[0]&&t[1]<m[3])){g.label=t[1];break}if(6===t[0]&&g.label<m[1]){g.label=m[1],m=t;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(t);break}m[2]&&g.ops.pop(),g.trys.pop();continue}t=d.call(p,g)}catch(e){t=[6,e],h=0}finally{f=m=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},Gv.prototype.get=function(e,t){return this.ajax(e,"GET",t)},Gv.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},Gv.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},Gv.prototype.post=function(e,t){return this.ajax(e,"POST",t)},Gv.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},Gv.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},Gv.prototype.cancel=function(e,t){return(e=this._cancelTokenMap.get(e))&&e.cancel(t),!0},Gv.prototype.isCancel=function(e){return O.isCancel(e)},Gv.prototype.getCancellableToken=function(){return O.CancelToken.source()},Gv.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},Gv.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},Gv.prototype._signed=function(e,t,n,r){var o=r.service,i=r.region,r=e.signerServiceInfo,e=Vv(e,["signerServiceInfo"]),i=i||this._region||this._options.region,o=o||this._service||this._options.service,t={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},r=Object.assign({region:i,service:o},r);return(r=A.Signer.sign(e,t,r)).data&&(r.body=r.data),Kv.debug("Signed Request: ",r),delete r.headers.host,O(r).then(function(e){return n?e:e.data}).catch(function(e){throw Kv.debug(e),e})},Gv.prototype._request=function(e,t){return void 0===t&&(t=!1),O(e).then(function(e){return t?e:e.data}).catch(function(e){throw Kv.debug(e),e})},Gv.prototype._parseUrl=function(e){return{host:(e=e.split("/"))[2],path:"/"+e.slice(3).join("/")}},Gv);function Gv(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=A.Credentials,this._options=e,Kv.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var Wv=function(){return(Wv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$v=new A.ConsoleLogger("RestAPI"),Yv=(Jv.prototype.getModuleName=function(){return"RestAPI"},Jv.prototype.configure=function(e){var e=void 0===(e=(t=e||{}).API)?{}:e,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["API"]),t=Wv(Wv({},t),e);return $v.debug("configure Rest API",{opt:t}),t.aws_project_region&&(t.aws_cloud_logic_custom&&(e=t.aws_cloud_logic_custom,t.endpoints="string"==typeof e?JSON.parse(e):e),t=Object.assign({},t,{region:t.aws_project_region,header:{}})),Array.isArray(t.endpoints)?t.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&($v.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?t.endpoints=this._options.endpoints:t.endpoints=[],this._options=Object.assign({},this._options,t),this.createInstance(),this._options},Jv.prototype.createInstance=function(){return $v.debug("create Rest API instance"),this._api=new Hv(this._options),this._api.Credentials=this.Credentials,!0},Jv.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.get(r,i);return this._api.updateRequestToBeCancellable(s,o),s}catch(e){return Promise.reject(e.message)}},Jv.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.post(r,i);return this._api.updateRequestToBeCancellable(s,o),s}catch(e){return Promise.reject(e.message)}},Jv.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.put(r,i);return this._api.updateRequestToBeCancellable(s,o),s}catch(e){return Promise.reject(e.message)}},Jv.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.patch(r,i);return this._api.updateRequestToBeCancellable(s,o),s}catch(e){return Promise.reject(e.message)}},Jv.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.del(r,i);return this._api.updateRequestToBeCancellable(s,o),s}catch(e){return Promise.reject(e.message)}},Jv.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.head(r,i);return this._api.updateRequestToBeCancellable(s,o),s}catch(e){return Promise.reject(e.message)}},Jv.prototype.isCancel=function(e){return this._api.isCancel(e)},Jv.prototype.cancel=function(e,t){return this._api.cancel(e,t)},Jv.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._api.endpoint(u)]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,o,i,s,a,t},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())});var e,s,a,c},Jv.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");if(!(n=n.find(function(e){return e.name===t})))throw new Error("API "+t+" does not exist");return e={endpoint:n.endpoint+e},"string"==typeof n.region?e.region=n.region:"string"==typeof this._options.region&&(e.region=this._options.region),"string"==typeof n.service?e.service=n.service||"execute-api":e.service="execute-api","function"==typeof n.custom_header?e.custom_header=n.custom_header:e.custom_header=void 0,e},Jv);function Jv(e){this._api=null,this.Credentials=A.Credentials,this._options=e,$v.debug("API Options",this._options)}var Zv=new Yv(null);function Xv(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function Qv(e,t){var n=eb(i=e.locationOffset.column-1)+e.body,r=t.line-1,o=e.locationOffset.line-1,o=t.line+o,i=1===t.line?i:0,i=t.column+i,n=n.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(o,":").concat(i,")\n")+function(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=0,r=!0,o=!1,e=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)var a=i.value[0],n=Math.max(n,a.length)}catch(t){o=!0,e=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw e}}return t.map(function(e){var t=e[0],e=e[1];return eb(n-t.length)+t+e}).join("\n")}([["".concat(o-1,": "),n[r-1]],["".concat(o,": "),n[r]],["",eb(i-1)+"^"],["".concat(o+1,": "),n[1+r]]])}function eb(e){return Array(e+1).join(" ")}function tb(e,t,n,r,o,i,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,t=n;!n&&a&&(t=(c=a[0])&&c.loc&&c.loc.source);var u,c=r;(c=!c&&a?a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[]):c)&&0===c.length&&(c=void 0),r&&n?u=r.map(function(e){return Xv(n,e)}):a&&(u=a.reduce(function(e,t){return t.loc&&e.push(Xv(t.loc.source,t.loc.start)),e},[])),s=s||i&&i.extensions,Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:u||void 0,enumerable:Boolean(u)},path:{value:o||void 0,enumerable:Boolean(o)},nodes:{value:a||void 0},source:{value:t||void 0},positions:{value:c||void 0},originalError:{value:i},extensions:{value:s||void 0,enumerable:Boolean(s)}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,tb):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}A.Amplify.register(Zv),tb.prototype=Object.create(Error.prototype,{constructor:{value:tb},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,o=void 0;try{for(var i,s=e.nodes[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;a.loc&&t.push(Qv(a.loc.source,Xv(a.loc.source,a.loc.start)))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}else if(e.source&&e.locations){var u=e.source,c=!0,r=!1,o=void 0;try{for(var l,p=e.locations[Symbol.iterator]();!(c=(l=p.next()).done);c=!0){var d=l.value;t.push(Qv(u,d))}}catch(e){r=!0,o=e}finally{try{c||null==p.return||p.return()}finally{if(r)throw o}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var nb={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},rb={};function ob(e){return Boolean(e&&"string"==typeof e.kind)}function ib(e){return function(e,t,n){var r,o,i,s=2<arguments.length&&void 0!==n?n:nb,a=void 0,u=Array.isArray(e),c=[e],l=-1,p=[],d=void 0,f=void 0,h=void 0,m=[],g=[],y=e;do{var v=++l===c.length,b=v&&0!==p.length;if(v){if(f=0===g.length?void 0:m[m.length-1],d=h,h=g.pop(),b){if(u)d=d.slice();else{var w,S={};for(w in d)d.hasOwnProperty(w)&&(S[w]=d[w]);d=S}for(var C=0,_=0;_<p.length;_++){var E=p[_][0],A=p[_][1];u&&(E-=C),u&&null===A?(d.splice(E,1),C++):d[E]=A}}l=a.index,c=a.keys,p=a.edits,u=a.inArray,a=a.prev}else{if(f=h?u?l:c[l]:void 0,null==(d=h?h[f]:y))continue;h&&m.push(f)}var I=void 0;if(!Array.isArray(d)){if(!ob(d))throw new Error("Invalid AST Node: "+JSON.stringify(d));var k=(r=t,o=d.kind,i=void 0,(i=r[o])?!v&&"function"==typeof i||"function"==typeof(i=v?i.leave:i.enter)?i:void 0:(r=v?r.leave:r.enter)?"function"==typeof r?r:"function"==typeof(o=r[o])?o:void 0:void 0);if(k){if((I=k.call(t,d,f,h,m,g))===rb)break;if(!1===I){if(!v){m.pop();continue}}else if(void 0!==I&&(p.push([f,I]),!v)){if(!ob(I)){m.pop();continue}d=I}}}void 0===I&&b&&p.push([f,d]),v?m.pop():(a={inArray:u,index:l,keys:c,edits:p,prev:a},c=(u=Array.isArray(d))?d:s[d.kind]||[],l=-1,p=[],h&&g.push(h),h=d)}while(void 0!==a);return 0!==p.length?p[p.length-1][1]:y}(e,{leave:sb})}var sb={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return ub(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=lb("(",ub(e.variableDefinitions,", "),")"),o=ub(e.directives," "),e=e.selectionSet;return n||o||r||"query"!==t?ub([t,ub([n,r]),o,e]," "):e},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,e=e.directives;return t+": "+n+lb(" = ",r)+lb(" ",ub(e," "))},SelectionSet:function(e){return cb(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,e=e.selectionSet;return ub([lb("",t,": ")+n+lb("(",ub(r,", "),")"),ub(o," "),e]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+lb(" ",ub(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,e=e.selectionSet;return ub(["...",lb("on ",t),ub(n," "),e]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,e=e.selectionSet;return"fragment ".concat(t).concat(lb("(",ub(r,", "),")")," ")+"on ".concat(n," ").concat(lb("",ub(o," ")," "))+e},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r=e.value;return e.block?(n="description"===t,t=(e=r).replace(/"""/g,'\\"""')," "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:pb(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+ub(e.values,", ")+"]"},ObjectValue:function(e){return"{"+ub(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+lb("(",ub(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,e=e.operationTypes;return ub(["schema",ub(t," "),cb(e)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:ab(function(e){return ub(["scalar",e.name,ub(e.directives," ")]," ")}),ObjectTypeDefinition:ab(function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return ub(["type",t,lb("implements ",ub(n," & ")),ub(r," "),cb(e)]," ")}),FieldDefinition:ab(function(e){var t=e.name,n=e.arguments,r=e.type,e=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?lb("(",ub(n,", "),")"):lb("(\n",pb(ub(n,"\n")),"\n)"))+": "+r+lb(" ",ub(e," "))}),InputValueDefinition:ab(function(e){var t=e.name,n=e.type,r=e.defaultValue,e=e.directives;return ub([t+": "+n,lb("= ",r),ub(e," ")]," ")}),InterfaceTypeDefinition:ab(function(e){var t=e.name,n=e.directives,e=e.fields;return ub(["interface",t,ub(n," "),cb(e)]," ")}),UnionTypeDefinition:ab(function(e){var t=e.name,n=e.directives,e=e.types;return ub(["union",t,ub(n," "),e&&0!==e.length?"= "+ub(e," | "):""]," ")}),EnumTypeDefinition:ab(function(e){var t=e.name,n=e.directives,e=e.values;return ub(["enum",t,ub(n," "),cb(e)]," ")}),EnumValueDefinition:ab(function(e){return ub([e.name,ub(e.directives," ")]," ")}),InputObjectTypeDefinition:ab(function(e){var t=e.name,n=e.directives,e=e.fields;return ub(["input",t,ub(n," "),cb(e)]," ")}),DirectiveDefinition:ab(function(e){var t=e.name,n=e.arguments,e=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?lb("(",ub(n,", "),")"):lb("(\n",pb(ub(n,"\n")),"\n)"))+" on "+ub(e," | ")}),SchemaExtension:function(e){var t=e.directives,e=e.operationTypes;return ub(["extend schema",ub(t," "),cb(e)]," ")},ScalarTypeExtension:function(e){return ub(["extend scalar",e.name,ub(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return ub(["extend type",t,lb("implements ",ub(n," & ")),ub(r," "),cb(e)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return ub(["extend interface",t,ub(n," "),cb(e)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,e=e.types;return ub(["extend union",t,ub(n," "),e&&0!==e.length?"= "+ub(e," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,e=e.values;return ub(["extend enum",t,ub(n," "),cb(e)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return ub(["extend input",t,ub(n," "),cb(e)]," ")}};function ab(t){return function(e){return ub([e.description,t(e)],"\n")}}function ub(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function cb(e){return e&&0!==e.length?"{\n"+pb(ub(e,"\n"))+"\n}":""}function lb(e,t,n){return t?e+t+(n||""):""}function pb(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function db(e){return(db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fb(t){return t&&"object"===db(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(fb).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(fb(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function hb(e,t){if(!e)throw new Error(t)}function mb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gb(e,t,n){mb(this,"body",void 0),mb(this,"name",void 0),mb(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||hb(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||hb(0,"column in locationOffset is 1-indexed and must be positive")}function yb(e,t,n){return new tb("Syntax Error: ".concat(n),void 0,e,[t])}function vb(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function bb(e){return vb(e)===e.length}function wb(){return this.lastToken=this.token,this.token=this.lookahead()}function Sb(){var e=this.token;if(e.kind!==Cb.EOF)for(;(e=e.next||(e.next=function(e,t){var u=e.source,n=u.body,r=n.length,o=function(e,t,n){for(var r=e.length,o=t;o<r;){var i=Eb.call(e,o);if(9===i||32===i||44===i||65279===i)++o;else if(10===i)++o,++n.line,n.lineStart=o;else{if(13!==i)break;10===Eb.call(e,o+1)?o+=2:++o,++n.line,n.lineStart=o}}return o}(n,t.end,e),i=e.line,s=1+o-e.lineStart;if(r<=o)return new Ib(Cb.EOF,r,r,i,s,t);var a,c=Eb.call(n,o);switch(c){case 33:return new Ib(Cb.BANG,o,o+1,i,s,t);case 35:return function(e,t,n,r){for(var o,i=u.body,s=e;null!==(o=Eb.call(i,++s))&&(31<o||9===o););return new Ib(Cb.COMMENT,e,s,t,n,r,Ab.call(i,e+1,s))}(o,i,s,t);case 36:return new Ib(Cb.DOLLAR,o,o+1,i,s,t);case 38:return new Ib(Cb.AMP,o,o+1,i,s,t);case 40:return new Ib(Cb.PAREN_L,o,o+1,i,s,t);case 41:return new Ib(Cb.PAREN_R,o,o+1,i,s,t);case 46:if(46===Eb.call(n,o+1)&&46===Eb.call(n,o+2))return new Ib(Cb.SPREAD,o,o+3,i,s,t);break;case 58:return new Ib(Cb.COLON,o,o+1,i,s,t);case 61:return new Ib(Cb.EQUALS,o,o+1,i,s,t);case 64:return new Ib(Cb.AT,o,o+1,i,s,t);case 91:return new Ib(Cb.BRACKET_L,o,o+1,i,s,t);case 93:return new Ib(Cb.BRACKET_R,o,o+1,i,s,t);case 123:return new Ib(Cb.BRACE_L,o,o+1,i,s,t);case 124:return new Ib(Cb.PIPE,o,o+1,i,s,t);case 125:return new Ib(Cb.BRACE_R,o,o+1,i,s,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r){for(var o=u.body,i=o.length,s=e+1,a=0;s!==i&&null!==(a=Eb.call(o,s))&&(95===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122);)++s;return new Ib(Cb.NAME,e,s,t,n,r,Ab.call(o,e,s))}(o,i,s,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,o,i){var s=e.body,a=n,u=t,n=!1;if(45===a&&(a=Eb.call(s,++u)),48===a){if(48<=(a=Eb.call(s,++u))&&a<=57)throw yb(e,u,"Invalid number, unexpected digit after 0: ".concat(kb(a),"."))}else u=Tb(e,u,a),a=Eb.call(s,u);return 46===a&&(n=!0,a=Eb.call(s,++u),u=Tb(e,u,a),a=Eb.call(s,u)),69!==a&&101!==a||(n=!0,43!==(a=Eb.call(s,++u))&&45!==a||(a=Eb.call(s,++u)),u=Tb(e,u,a)),new Ib(n?Cb.FLOAT:Cb.INT,t,u,r,o,i,Ab.call(s,t,u))}(u,o,c,i,s,t);case 34:return(34===Eb.call(n,o+1)&&34===Eb.call(n,o+2)?function(e,t,n,r,o){for(var i=e.body,s=t+3,a=s,u=0,c="";s<i.length&&null!==(u=Eb.call(i,s));){if(34===u&&34===Eb.call(i,s+1)&&34===Eb.call(i,s+2))return c+=Ab.call(i,a,s),new Ib(Cb.BLOCK_STRING,t,s+3,n,r,o,function(){for(var e=c.split(/\r\n|[\n\r]/g),t=null,n=1;n<e.length;n++){var r=e[n],o=vb(r);if(o<r.length&&(null===t||o<t)&&0===(t=o))break}if(t)for(var i=1;i<e.length;i++)e[i]=e[i].slice(t);for(;0<e.length&&bb(e[0]);)e.shift();for(;0<e.length&&bb(e[e.length-1]);)e.pop();return e.join("\n")}());if(u<32&&9!==u&&10!==u&&13!==u)throw yb(e,s,"Invalid character within String: ".concat(kb(u),"."));92===u&&34===Eb.call(i,s+1)&&34===Eb.call(i,s+2)&&34===Eb.call(i,s+3)?(c+=Ab.call(i,a,s)+'"""',a=s+=4):++s}throw yb(e,s,"Unterminated string.")}:function(e,t,n,r,o){for(var i,s,a,u,c=e.body,l=t+1,p=l,d=0,f="";l<c.length&&null!==(d=Eb.call(c,l))&&10!==d&&13!==d;){if(34===d)return f+=Ab.call(c,p,l),new Ib(Cb.STRING,t,l+1,n,r,o,f);if(d<32&&9!==d)throw yb(e,l,"Invalid character within String: ".concat(kb(d),"."));if(++l,92===d){switch(f+=Ab.call(c,p,l-1),d=Eb.call(c,l)){case 34:f+='"';break;case 47:f+="/";break;case 92:f+="\\";break;case 98:f+="\b";break;case 102:f+="\f";break;case 110:f+="\n";break;case 114:f+="\r";break;case 116:f+="\t";break;case 117:var h=(i=Eb.call(c,l+1),s=Eb.call(c,l+2),a=Eb.call(c,l+3),u=Eb.call(c,l+4),Pb(i)<<12|Pb(s)<<8|Pb(a)<<4|Pb(u));if(h<0)throw yb(e,l,"Invalid character escape sequence: "+"\\u".concat(c.slice(l+1,l+5),"."));f+=String.fromCharCode(h),l+=4;break;default:throw yb(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(d),"."))}p=++l}}throw yb(e,l,"Unterminated string.")})(u,o,i,s,t)}throw yb(u,o,(a=c)<32&&9!==a&&10!==a&&13!==a?"Cannot contain the invalid character ".concat(kb(a),"."):39!==a?"Cannot parse the unexpected character ".concat(kb(a),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?")}(this,e))).kind===Cb.COMMENT;);return e}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(gb.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var Cb=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function _b(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var Eb=String.prototype.charCodeAt,Ab=String.prototype.slice;function Ib(e,t,n,r,o,i,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=o,this.value=s,this.prev=i,this.next=null}function kb(e){return isNaN(e)?Cb.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Tb(e,t,n){var r=e.body,o=t,i=n;if(48<=i&&i<=57){for(;48<=(i=Eb.call(r,++o))&&i<=57;);return o}throw yb(e,o,"Invalid number, expected digit but got: ".concat(kb(i),"."))}function Pb(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}Ib.prototype.toJSON=Ib.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var Ob=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),xb=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Nb(e,t){var n="string"==typeof e?new gb(e):e;if(!(n instanceof gb))throw new TypeError("Must provide Source. Received: ".concat(fb(n)));return n=(t=n={source:e=n,options:n=t||{},lastToken:t=new Ib(Cb.SOF,0,0,0,0,null),token:t,line:1,lineStart:0,advance:wb,lookahead:Sb}).token,{kind:Ob.DOCUMENT,definitions:ww(t,Cb.SOF,Mb,Cb.EOF),loc:fw(t,n)}}function Rb(e){var t=yw(e,Cb.NAME);return{kind:Ob.NAME,value:t.value,loc:fw(e,t)}}function Mb(e){if(mw(e,Cb.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return Ub(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return ew(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===Cb.NAME)switch(t.value){case"schema":return function(e){var t=e.token;vw(e,"extend"),vw(e,"schema");var n=Zb(e,!0),r=mw(e,Cb.BRACE_L)?ww(e,Cb.BRACE_L,rw,Cb.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:Ob.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:fw(e,t)};throw bw(e)}(e);case"scalar":return function(e){var t=e.token;vw(e,"extend"),vw(e,"scalar");var n=Rb(e),r=Zb(e,!0);if(0!==r.length)return{kind:Ob.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:fw(e,t)};throw bw(e)}(e);case"type":return function(e){var t=e.token;vw(e,"extend"),vw(e,"type");var n=Rb(e),r=ow(e),o=Zb(e,!0),i=iw(e);if(0!==r.length||0!==o.length||0!==i.length)return{kind:Ob.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:o,fields:i,loc:fw(e,t)};throw bw(e)}(e);case"interface":return function(e){var t=e.token;vw(e,"extend"),vw(e,"interface");var n=Rb(e),r=Zb(e,!0),o=iw(e);if(0!==r.length||0!==o.length)return{kind:Ob.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:fw(e,t)};throw bw(e)}(e);case"union":return function(e){var t=e.token;vw(e,"extend"),vw(e,"union");var n=Rb(e),r=Zb(e,!0),o=cw(e);if(0!==r.length||0!==o.length)return{kind:Ob.UNION_TYPE_EXTENSION,name:n,directives:r,types:o,loc:fw(e,t)};throw bw(e)}(e);case"enum":return function(e){var t=e.token;vw(e,"extend"),vw(e,"enum");var n=Rb(e),r=Zb(e,!0),o=lw(e);if(0!==r.length||0!==o.length)return{kind:Ob.ENUM_TYPE_EXTENSION,name:n,directives:r,values:o,loc:fw(e,t)};throw bw(e)}(e);case"input":return function(e){var t=e.token;vw(e,"extend"),vw(e,"input");var n=Rb(e),r=Zb(e,!0),o=dw(e);if(0!==r.length||0!==o.length)return{kind:Ob.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:fw(e,t)};throw bw(e)}(e)}throw bw(e,t)}(e)}else{if(mw(e,Cb.BRACE_L))return Ub(e);if(tw(e))return ew(e)}throw bw(e)}function Ub(e){if(mw(e,Cb.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Db(e);case"fragment":return n=(t=e).token,vw(t,"fragment"),t.options.experimentalFragmentVariables?{kind:Ob.FRAGMENT_DEFINITION,name:Gb(t),variableDefinitions:Fb(t),typeCondition:(vw(t,"on"),Qb(t)),directives:Zb(t,!1),selectionSet:zb(t),loc:fw(t,n)}:{kind:Ob.FRAGMENT_DEFINITION,name:Gb(t),typeCondition:(vw(t,"on"),Qb(t)),directives:Zb(t,!1),selectionSet:zb(t),loc:fw(t,n)}}else if(mw(e,Cb.BRACE_L))return Db(e);var t,n;throw bw(e)}function Db(e){var t=e.token;if(mw(e,Cb.BRACE_L))return{kind:Ob.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:zb(e),loc:fw(e,t)};var n,r=Lb(e);return mw(e,Cb.NAME)&&(n=Rb(e)),{kind:Ob.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:Fb(e),directives:Zb(e,!1),selectionSet:zb(e),loc:fw(e,t)}}function Lb(e){var t=yw(e,Cb.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw bw(e,t)}function Fb(e){return mw(e,Cb.PAREN_L)?ww(e,Cb.PAREN_L,jb,Cb.PAREN_R):[]}function jb(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:Ob.VARIABLE_DEFINITION,variable:Bb(e),type:(yw(e,Cb.COLON),Xb(e)),defaultValue:gw(e,Cb.EQUALS)?Wb(e,!0):void 0,directives:Zb(e,!0),loc:fw(e,t)}:{kind:Ob.VARIABLE_DEFINITION,variable:Bb(e),type:(yw(e,Cb.COLON),Xb(e)),defaultValue:gw(e,Cb.EQUALS)?Wb(e,!0):void 0,loc:fw(e,t)}}function Bb(e){var t=e.token;return yw(e,Cb.DOLLAR),{kind:Ob.VARIABLE,name:Rb(e),loc:fw(e,t)}}function zb(e){var t=e.token;return{kind:Ob.SELECTION_SET,selections:ww(e,Cb.BRACE_L,Vb,Cb.BRACE_R),loc:fw(e,t)}}function Vb(e){return(mw(e,Cb.SPREAD)?function(e){var t,n=e.token;return yw(e,Cb.SPREAD),mw(e,Cb.NAME)&&"on"!==e.token.value?{kind:Ob.FRAGMENT_SPREAD,name:Gb(e),directives:Zb(e,!1),loc:fw(e,n)}:("on"===e.token.value&&(e.advance(),t=Qb(e)),{kind:Ob.INLINE_FRAGMENT,typeCondition:t,directives:Zb(e,!1),selectionSet:zb(e),loc:fw(e,n)})}:function(e){var t,n=e.token,r=Rb(e),r=gw(e,Cb.COLON)?(t=r,Rb(e)):r;return{kind:Ob.FIELD,alias:t,name:r,arguments:qb(e,!1),directives:Zb(e,!1),selectionSet:mw(e,Cb.BRACE_L)?zb(e):void 0,loc:fw(e,n)}})(e)}function qb(e,t){return mw(e,Cb.PAREN_L)?ww(e,Cb.PAREN_L,t?Hb:Kb,Cb.PAREN_R):[]}function Kb(e){var t=e.token;return{kind:Ob.ARGUMENT,name:Rb(e),value:(yw(e,Cb.COLON),Wb(e,!1)),loc:fw(e,t)}}function Hb(e){var t=e.token;return{kind:Ob.ARGUMENT,name:Rb(e),value:(yw(e,Cb.COLON),Yb(e)),loc:fw(e,t)}}function Gb(e){if("on"===e.token.value)throw bw(e);return Rb(e)}function Wb(e,t){var n,r,o,i=e.token;switch(i.kind){case Cb.BRACKET_L:return o=(n=e).token,r=t?Yb:Jb,{kind:Ob.LIST,values:function(e,t,n,r){yw(e,t);for(var o=[];!gw(e,r);)o.push(n(e));return o}(n,Cb.BRACKET_L,r,Cb.BRACKET_R),loc:fw(n,o)};case Cb.BRACE_L:return function(e,t){var n=e.token;yw(e,Cb.BRACE_L);for(var r,o,i,s=[];!gw(e,Cb.BRACE_R);)s.push((o=t,i=(r=e).token,{kind:Ob.OBJECT_FIELD,name:Rb(r),value:(yw(r,Cb.COLON),Wb(r,o)),loc:fw(r,i)}));return{kind:Ob.OBJECT,fields:s,loc:fw(e,n)}}(e,t);case Cb.INT:return e.advance(),{kind:Ob.INT,value:i.value,loc:fw(e,i)};case Cb.FLOAT:return e.advance(),{kind:Ob.FLOAT,value:i.value,loc:fw(e,i)};case Cb.STRING:case Cb.BLOCK_STRING:return $b(e);case Cb.NAME:return"true"===i.value||"false"===i.value?(e.advance(),{kind:Ob.BOOLEAN,value:"true"===i.value,loc:fw(e,i)}):"null"===i.value?(e.advance(),{kind:Ob.NULL,loc:fw(e,i)}):(e.advance(),{kind:Ob.ENUM,value:i.value,loc:fw(e,i)});case Cb.DOLLAR:if(!t)return Bb(e)}throw bw(e)}function $b(e){var t=e.token;return e.advance(),{kind:Ob.STRING,value:t.value,block:t.kind===Cb.BLOCK_STRING,loc:fw(e,t)}}function Yb(e){return Wb(e,!0)}function Jb(e){return Wb(e,!1)}function Zb(e,t){for(var n,r,o,i=[];mw(e,Cb.AT);)i.push((r=t,o=(n=e).token,yw(n,Cb.AT),{kind:Ob.DIRECTIVE,name:Rb(n),arguments:qb(n,r),loc:fw(n,o)}));return i}function Xb(e){var t=e.token,n=gw(e,Cb.BRACKET_L)?(n=Xb(e),yw(e,Cb.BRACKET_R),{kind:Ob.LIST_TYPE,type:n,loc:fw(e,t)}):Qb(e);return gw(e,Cb.BANG)?{kind:Ob.NON_NULL_TYPE,type:n,loc:fw(e,t)}:n}function Qb(e){var t=e.token;return{kind:Ob.NAMED_TYPE,name:Rb(e),loc:fw(e,t)}}function ew(e){var t=tw(e)?e.lookahead():e.token;if(t.kind===Cb.NAME)switch(t.value){case"schema":return function(e){var t=e.token;vw(e,"schema");var n=Zb(e,!0),r=ww(e,Cb.BRACE_L,rw,Cb.BRACE_R);return{kind:Ob.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:fw(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=nw(e);vw(e,"scalar");var r=Rb(e),o=Zb(e,!0);return{kind:Ob.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:o,loc:fw(e,t)}}(e);case"type":return function(e){var t=e.token,n=nw(e);vw(e,"type");var r=Rb(e),o=ow(e),i=Zb(e,!0),s=iw(e);return{kind:Ob.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:o,directives:i,fields:s,loc:fw(e,t)}}(e);case"interface":return function(e){var t=e.token,n=nw(e);vw(e,"interface");var r=Rb(e),o=Zb(e,!0),i=iw(e);return{kind:Ob.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:fw(e,t)}}(e);case"union":return function(e){var t=e.token,n=nw(e);vw(e,"union");var r=Rb(e),o=Zb(e,!0),i=cw(e);return{kind:Ob.UNION_TYPE_DEFINITION,description:n,name:r,directives:o,types:i,loc:fw(e,t)}}(e);case"enum":return function(e){var t=e.token,n=nw(e);vw(e,"enum");var r=Rb(e),o=Zb(e,!0),i=lw(e);return{kind:Ob.ENUM_TYPE_DEFINITION,description:n,name:r,directives:o,values:i,loc:fw(e,t)}}(e);case"input":return function(e){var t=e.token,n=nw(e);vw(e,"input");var r=Rb(e),o=Zb(e,!0),i=dw(e);return{kind:Ob.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:fw(e,t)}}(e);case"directive":return function(e){var t=e.token,n=nw(e);vw(e,"directive"),yw(e,Cb.AT);var r=Rb(e),o=aw(e);vw(e,"on");var i=function(e){gw(e,Cb.PIPE);for(var t=[];t.push(function(e){var t=e.token,n=Rb(e);if(xb.hasOwnProperty(n.value))return n;throw bw(e,t)}(e)),gw(e,Cb.PIPE););return t}(e);return{kind:Ob.DIRECTIVE_DEFINITION,description:n,name:r,arguments:o,locations:i,loc:fw(e,t)}}(e)}throw bw(e,t)}function tw(e){return mw(e,Cb.STRING)||mw(e,Cb.BLOCK_STRING)}function nw(e){if(tw(e))return $b(e)}function rw(e){var t=e.token,n=Lb(e);yw(e,Cb.COLON);var r=Qb(e);return{kind:Ob.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:fw(e,t)}}function ow(e){var t=[];if("implements"===e.token.value)for(e.advance(),gw(e,Cb.AMP);t.push(Qb(e)),gw(e,Cb.AMP)||e.options.allowLegacySDLImplementsInterfaces&&mw(e,Cb.NAME););return t}function iw(e){return e.options.allowLegacySDLEmptyFields&&mw(e,Cb.BRACE_L)&&e.lookahead().kind===Cb.BRACE_R?(e.advance(),e.advance(),[]):mw(e,Cb.BRACE_L)?ww(e,Cb.BRACE_L,sw,Cb.BRACE_R):[]}function sw(e){var t=e.token,n=nw(e),r=Rb(e),o=aw(e);yw(e,Cb.COLON);var i=Xb(e),s=Zb(e,!0);return{kind:Ob.FIELD_DEFINITION,description:n,name:r,arguments:o,type:i,directives:s,loc:fw(e,t)}}function aw(e){return mw(e,Cb.PAREN_L)?ww(e,Cb.PAREN_L,uw,Cb.PAREN_R):[]}function uw(e){var t=e.token,n=nw(e),r=Rb(e);yw(e,Cb.COLON);var o,i=Xb(e);gw(e,Cb.EQUALS)&&(o=Yb(e));var s=Zb(e,!0);return{kind:Ob.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:o,directives:s,loc:fw(e,t)}}function cw(e){var t=[];if(gw(e,Cb.EQUALS))for(gw(e,Cb.PIPE);t.push(Qb(e)),gw(e,Cb.PIPE););return t}function lw(e){return mw(e,Cb.BRACE_L)?ww(e,Cb.BRACE_L,pw,Cb.BRACE_R):[]}function pw(e){var t=e.token,n=nw(e),r=Rb(e),o=Zb(e,!0);return{kind:Ob.ENUM_VALUE_DEFINITION,description:n,name:r,directives:o,loc:fw(e,t)}}function dw(e){return mw(e,Cb.BRACE_L)?ww(e,Cb.BRACE_L,uw,Cb.BRACE_R):[]}function fw(e,t){if(!e.options.noLocation)return new hw(t,e.lastToken,e.source)}function hw(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function mw(e,t){return e.token.kind===t}function gw(e,t){return(t=e.token.kind===t)&&e.advance(),t}function yw(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw yb(e.source,n.start,"Expected ".concat(t,", found ").concat(_b(n)))}function vw(e,t){var n=e.token;if(n.kind===Cb.NAME&&n.value===t)return e.advance(),n;throw yb(e.source,n.start,'Expected "'.concat(t,'", found ').concat(_b(n)))}function bw(e,t){return t=t||e.token,yb(e.source,t.start,"Unexpected ".concat(_b(t)))}function ww(e,t,n,r){yw(e,t);for(var o=[n(e)];!gw(e,r);)o.push(n(e));return o}hw.prototype.toJSON=hw.prototype.inspect=function(){return{start:this.start,end:this.end}};var Sw=N,Cw=function(){return(Cw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_w=new A.ConsoleLogger("AbstractPubSubProvider"),wg=(Ew.prototype.configure=function(e){return this._config=Cw(Cw({},e=void 0===e?{}:e),this._config),_w.debug("configure "+this.getProviderName(),this._config),this.options},Ew.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(Ew.prototype,"options",{get:function(){return Cw({},this._config)},enumerable:!0,configurable:!0}),Ew);function Ew(e){this._config=e=void 0===e?{}:e}function Aw(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Iw(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function kw(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var Tw,Zv=(Tw=function(e,t){return(Tw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Tw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Pw=function(){return(Pw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ow=new A.ConsoleLogger("MqttOverWSProvider"),xw=(Nw.prototype.get=function(n,r){return Aw(this,void 0,void 0,function(){var t;return Iw(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(Nw.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),Nw.prototype.remove=function(e){this.promises.delete(e)},Nw);function Nw(){this.promises=new Map}var Rw,Mw="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",N=(Zv(Uw,Rw=wg),Object.defineProperty(Uw.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(Uw.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(Uw.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(Uw.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),Uw.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[Mw]},Uw.prototype.getProviderName=function(){return"MqttOverWSProvider"},Uw.prototype.onDisconnect=function(e){var r,t=this,n=e.clientId,o=e.errorCode,e=kw(e,["clientId","errorCode"]);0!==o&&(Ow.warn(n,JSON.stringify(Pw({errorCode:o},e),null,2)),r=[],(e=this._clientIdObservers.get(n))&&(e.forEach(function(n){n.error("Disconnected, error code: "+o),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&r.push(t)})}),this._clientIdObservers.delete(n),r.forEach(function(e){t._topicObservers.delete(e)})))},Uw.prototype.newClient=function(e){var t=e.url,o=e.clientId;return Aw(this,void 0,void 0,function(){var n,r=this;return Iw(this,function(e){switch(e.label){case 0:return Ow.debug("Creating new MQTT client",o),(n=new R.Client(t,o)).onMessageArrived=function(e){var t=e.destinationName,e=e.payloadString;r._onMessage(t,e)},n.onConnectionLost=function(e){var t=e.errorCode,e=kw(e,["errorCode"]);r.onDisconnect(Pw({clientId:o,errorCode:t},e))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},Uw.prototype.connect=function(n,r){return void 0===r&&(r={}),Aw(this,void 0,void 0,function(){var t=this;return Iw(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(Pw(Pw({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},Uw.prototype.disconnect=function(n){return Aw(this,void 0,void 0,function(){var t;return Iw(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},Uw.prototype.publish=function(i,s){return Aw(this,void 0,void 0,function(){var t,n,r,o;return Iw(this,function(e){switch(e.label){case 0:return t=[].concat(i),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return o=e.sent(),Ow.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return o.send(e,n)}),[2]}})})},Uw.prototype._onMessage=function(t,n){try{var r=[];this._topicObservers.forEach(function(e,a){!function(e){for(var t=a.split("/"),n=t.length,r=e.split("/"),o=0;o<n;++o){var i=t[o],s=r[o];if("#"===i)return r.length>=n;if("+"!==i&&i!==s)return}return n===r.length}(t)||r.push(e)});var o=JSON.parse(n);"object"==typeof o&&(o[Mw]=t),r.forEach(function(e){e.forEach(function(e){return e.next(o)})})}catch(e){Ow.warn("Error handling message",e,n)}},Uw.prototype.subscribe=function(e,u){var n=this;void 0===u&&(u={});var c=[].concat(e);return Ow.debug("Subscribing to topic(s)",c.join(",")),new Sw(function(i){var s;c.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(i)});var e=u.clientId,a=void 0===e?n.clientId:e;return(e=(e=n._clientIdObservers.get(a))||new Set).add(i),n._clientIdObservers.set(a,e),Aw(n,void 0,void 0,function(){var t,n,r,o;return Iw(this,function(e){switch(e.label){case 0:return void 0!==(t=u.url)?[3,2]:[4,this.endpoint];case 1:return r=e.sent(),[3,3];case 2:r=t,e.label=3;case 3:n=r,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(a,{url:n})];case 5:return s=e.sent(),c.forEach(function(e){s.subscribe(e)}),[3,7];case 6:return o=e.sent(),i.error(o),[3,7];case 7:return[2]}})}),function(){return Ow.debug("Unsubscribing from topic(s)",c.join(",")),s&&(n._clientIdObservers.get(a).delete(i),0===n._clientIdObservers.get(a).size&&(n.disconnect(a),n._clientIdObservers.delete(a)),c.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(i),0===t.size&&(n._topicObservers.delete(e),s.isConnected()&&s.unsubscribe(e))})),null}})},Uw);function Uw(e){return(e=Rw.call(this,Pw(Pw({},e=void 0===e?{}:e),{clientId:e.clientId||b.v4()}))||this)._clientsQueue=new xw,e._topicObservers=new Map,e._clientIdObservers=new Map,e}function Dw(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Lw(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Fw(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var jw,Bw,Zv=(jw=function(e,t){return(jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}jw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),zw=new A.ConsoleLogger("AWSAppSyncProvider"),Vw=(Zv(qw,Bw=N),Object.defineProperty(qw.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),qw.prototype.getProviderName=function(){return"AWSAppSyncProvider"},qw.prototype.publish=function(e,t,n){return Dw(this,void 0,void 0,function(){return Lw(this,function(e){throw new Error("Operation not supported")})})},qw.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return Fw(e,2)[1].clientId===t}).map(function(e){return Fw(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},qw.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},qw.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return Fw(e,2)[1].clientId===n}).map(function(e){return Fw(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(o)}),t._topicObservers.delete(e))}),this._cleanUp(n))},qw.prototype.disconnect=function(t){return Dw(this,void 0,void 0,function(){return Lw(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,Bw.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},qw.prototype.subscribe=function(e,i){var n=this;void 0===i&&(i={});var t=new Sw(function(a){var r=[].concat(e);return zw.debug("Subscribing to topic(s)",r.join(",")),Dw(n,void 0,void 0,function(){var o,t,n=this;return Lw(this,function(e){switch(e.label){case 0:return r.forEach(function(e){n._topicObservers.has(e)||n._topicObservers.set(e,new Set),n._topicObservers.get(e).add(a)}),t=i.mqttConnections,o=void 0===t?[]:t,t=i.newSubscriptions,t=Object.entries(t).map(function(e){var t=Fw(e,2),e=t[0];return[t[1].topic,e]}),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Fw(arguments[t]));return e}(Array.from(this._topicAlias.entries()),t)),t=Object.entries(r.reduce(function(e,t){var n,r=o.find(function(e){return-1<e.topics.indexOf(t)});return r&&(n=r.client,r=r.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(t.map(function(e){var o=(e=Fw(e,2))[0],i=(e=e[1]).url,s=e.topics;return Dw(n,void 0,void 0,function(){var t,n,r=this;return Lw(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(o,{clientId:o,url:i})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),a.error({message:"Failed to connect",error:n}),a.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){zw.debug("Unsubscribing from topic(s)",r.join(",")),r.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return Sw.from(t).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var t=(n=Fw(t,2))[0],n=n[1];return e[r||t]=n,e},{}),e})},qw);function qw(){var e=null!==Bw&&Bw.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}function Kw(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Hw(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Gw,Ww,$w,Yw,Zv=(Gw=function(e,t){return(Gw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Gw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Jw=function(){return(Jw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Zw=new A.Logger("AWSAppSyncRealTimeProvider"),Xw="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Qw=[400,401,403];(N=Ww=Ww||{}).GQL_CONNECTION_INIT="connection_init",N.GQL_CONNECTION_ERROR="connection_error",N.GQL_CONNECTION_ACK="connection_ack",N.GQL_START="start",N.GQL_START_ACK="start_ack",N.GQL_DATA="data",N.GQL_CONNECTION_KEEP_ALIVE="ka",N.GQL_STOP="stop",N.GQL_COMPLETE="complete",N.GQL_ERROR="error",(N=$w=$w||{})[N.PENDING=0]="PENDING",N[N.CONNECTED=1]="CONNECTED",N[N.FAILED=2]="FAILED",(N=Yw=Yw||{})[N.CLOSED=0]="CLOSED",N[N.READY=1]="READY",N[N.CONNECTING=2]="CONNECTING";var eS,tS={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},nS=(Zv(rS,eS=wg),rS.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},rS.prototype.newClient=function(){throw new Error("Not used here")},rS.prototype.publish=function(e,t,n){return Kw(this,void 0,void 0,function(){return Hw(this,function(e){throw new Error("Operation not supported")})})},rS.prototype.subscribe=function(e,r){var o=this,i=r.appSyncGraphqlEndpoint;return new Sw(function(t){if(i){var n=b.v4();return o._startSubscriptionWithAWSAppSyncRealTime({options:r,observer:t,subscriptionId:n}).catch(function(e){t.error({errors:[Jw({},new tb(cS.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+e))]}),t.complete()}),function(){return Kw(o,void 0,void 0,function(){var t;return Hw(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(n)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(n)||{}).subscriptionState))return[2];if(t!==$w.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(n),[3,4];case 2:return t=e.sent(),Zw.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(n),[7];case 4:return[2]}})})}}t.error({errors:[Jw({},new tb("Subscribe only available for AWS AppSync endpoint"))]}),t.complete()})},Object.defineProperty(rS.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),rS.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var y=e.options,v=e.observer,b=e.subscriptionId;return Kw(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g=this;return Hw(this,function(e){switch(e.label){case 0:return t=y.appSyncGraphqlEndpoint,n=y.authenticationType,r=y.query,o=y.variables,i=y.apiKey,s=y.region,p=y.graphql_headers,a=void 0===p?function(){return{}}:p,l=y.additionalHeaders,u=void 0===l?{}:l,c=$w.PENDING,p={query:r,variables:o},this.subscriptionObserverMap.set(b,{observer:v,query:r,variables:o,subscriptionState:c,startAckTimeoutId:null}),l=JSON.stringify(p),p=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,payload:l,canonicalUri:"",region:s,additionalHeaders:u})];case 1:return d=[Jw.apply(void 0,p.concat([e.sent()]))],[4,a()];case 2:m=Jw.apply(void 0,[Jw.apply(void 0,[Jw.apply(void 0,d.concat([e.sent()])),u]),((m={})[A.USER_AGENT_HEADER]=A.Constants.userAgent,m)]),m={id:b,payload:{data:l,extensions:{authorization:Jw({},m)}},type:Ww.GQL_START},m=JSON.stringify(m),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,region:s,additionalHeaders:u})];case 4:return e.sent(),[3,6];case 5:return h=e.sent(),Zw.debug({err:h}),f=h.message,h=void 0===f?"":f,v.error({errors:[Jw({},new tb(cS.CONNECTION_FAILED+": "+h))]}),v.complete(),"function"==typeof(f=(this.subscriptionObserverMap.get(b)||{}).subscriptionFailedCallback)&&f(),[2];case 6:return h=this.subscriptionObserverMap.get(b),f=h.subscriptionFailedCallback,h=h.subscriptionReadyCallback,this.subscriptionObserverMap.set(b,{observer:v,subscriptionState:c,variables:o,query:r,subscriptionReadyCallback:h,subscriptionFailedCallback:f,startAckTimeoutId:setTimeout(function(){g._timeoutStartSubscriptionAck.call(g,b)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(m),[2]}})})},rS.prototype._waitForSubscriptionToBeConnected=function(a){return Kw(this,void 0,void 0,function(){var s=this;return Hw(this,function(e){return this.subscriptionObserverMap.get(a).subscriptionState===$w.PENDING?[2,new Promise(function(e,t){var n=(i=s.subscriptionObserverMap.get(a)).observer,r=i.subscriptionState,o=i.variables,i=i.query;s.subscriptionObserverMap.set(a,{observer:n,subscriptionState:r,variables:o,query:i,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},rS.prototype._sendUnsubscriptionMessage=function(e){try{var t,n;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Yw.READY&&(t={id:e,type:Ww.GQL_STOP},n=JSON.stringify(t),this.awsRealTimeSocket.send(n))}catch(e){Zw.debug({err:e})}},rS.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},rS.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(Zw.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=Yw.CLOSED):this.socketStatus=Yw.CLOSED)},rS.prototype._handleIncomingSubscriptionMessage=function(e){Zw.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=void 0===(i=(a=JSON.parse(e.data)).id)?"":i,n=a.payload,r=a.type,o=void 0===(s=(u=this.subscriptionObserverMap.get(t)||{}).observer)?null:s,i=void 0===(e=u.query)?"":e,s=void 0===(a=u.variables)?{}:a,e=u.startAckTimeoutId,a=u.subscriptionReadyCallback,u=u.subscriptionFailedCallback;if(Zw.debug({id:t,observer:o,query:i,variables:s}),r===Ww.GQL_DATA&&n&&n.data)o?o.next(n):Zw.debug("observer not found for id: "+t);else if(r!==Ww.GQL_START_ACK){if(r===Ww.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,cS.TIMEOUT_DISCONNECT),this.keepAliveTimeout));r===Ww.GQL_ERROR&&(c=$w.FAILED,this.subscriptionObserverMap.set(t,{observer:o,query:i,variables:s,startAckTimeoutId:e,subscriptionReadyCallback:a,subscriptionFailedCallback:u,subscriptionState:c}),o.error({errors:[Jw({},new tb(cS.CONNECTION_FAILED+": "+JSON.stringify(n)))]}),clearTimeout(e),o.complete(),"function"==typeof u&&u())}else{Zw.debug("subscription ready for "+JSON.stringify({query:i,variables:s})),"function"==typeof a&&a(),clearTimeout(e),r=cS.SUBSCRIPTION_ACK,n={query:i,variables:s},e="Connection established for subscription",A.Hub.dispatch("api",{event:r,data:n,message:e},"PubSub",Xw);var c=$w.CONNECTED;this.subscriptionObserverMap.set(t,{observer:o,query:i,variables:s,startAckTimeoutId:null,subscriptionState:c,subscriptionReadyCallback:a,subscriptionFailedCallback:u})}},rS.prototype._errorDisconnect=function(t){Zw.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(e){(e=e.observer)&&!e.closed&&e.error({errors:[Jw({},new tb(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=Yw.CLOSED},rS.prototype._timeoutStartSubscriptionAck=function(e){var t=(r=this.subscriptionObserverMap.get(e)||{}).observer,n=r.query,r=r.variables;t&&(this.subscriptionObserverMap.set(e,{observer:t,query:n,variables:r,subscriptionState:$w.FAILED}),t&&!t.closed&&(t.error({errors:[Jw({},new tb("Subscription timeout "+JSON.stringify({query:n,variables:r})))]}),t.complete()),Zw.debug("timeoutStartSubscription",JSON.stringify({query:n,variables:r})))},rS.prototype._initializeWebSocketConnection=function(e){var t=this,l=e.appSyncGraphqlEndpoint,p=e.authenticationType,d=e.apiKey,f=e.region,h=e.additionalHeaders;if(this.socketStatus!==Yw.READY)return new Promise(function(u,c){return Kw(t,void 0,void 0,function(){var t,n,r,o,i,s,a;return Hw(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:u,rej:c}),this.socketStatus!==Yw.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=Yw.CONNECTING,i=this.isSSLEnabled?"wss://":"ws://",t=l.replace("https://",i).replace("http://",i).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),n="{}",o=(r=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:p,payload:n,canonicalUri:"/connect",apiKey:d,appSyncGraphqlEndpoint:l,region:f,additionalHeaders:h})];case 2:return s=o.apply(r,[e.sent()]),i=m.Buffer.from(s).toString("base64"),s=m.Buffer.from(n).toString("base64"),s=t+"?header="+i+"&payload="+s,[4,this._initializeRetryableHandshake({awsRealTimeUrl:s})];case 3:return e.sent(),this.promiseArray.forEach(function(e){e=e.res,Zw.debug("Notifying connection successful"),e()}),this.socketStatus=Yw.READY,this.promiseArray=[],[3,5];case 4:return a=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(a)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=Yw.CLOSED,[3,5];case 5:return[2]}})})})},rS.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return Kw(this,void 0,void 0,function(){return Hw(this,function(e){switch(e.label){case 0:return Zw.debug("Initializaling retryable Handshake"),[4,A.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},rS.prototype._initializeHandshake=function(e){var o=e.awsRealTimeUrl;return Kw(this,void 0,void 0,function(){var t,n,r,s=this;return Hw(this,function(e){switch(e.label){case 0:Zw.debug("Initializing handshake "+o),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(o,"graphql-ws");n.onerror=function(){Zw.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return s.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(r,o){var i=!1;s.awsRealTimeSocket.onerror=function(e){Zw.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){Zw.debug("WebSocket closed "+e.reason),o(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(e){Zw.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,e=(void 0===(e=t.payload)?{}:e).connectionTimeoutMs;if(n===Ww.GQL_CONNECTION_ACK)return i=!0,s.keepAliveTimeout=void 0===e?3e5:e,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){Zw.debug(e),s._errorDisconnect(cS.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){Zw.debug("WebSocket closed "+e.reason),s._errorDisconnect(cS.CONNECTION_CLOSED)},void r("Cool, connected to AWS AppSyncRealTime");n===Ww.GQL_CONNECTION_ERROR&&(n=(t=void 0===(n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(void 0===(t=(void 0===(n=t.payload)?{}:n).errors)?[]:t,1)[0])?{}:n).errorType,t=t.errorCode,o({errorType:void 0===n?"":n,errorCode:void 0===t?0:t}))};var e={type:Ww.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){i||o(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(s),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,Qw.includes(r)?new A.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},rS.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,o=e.payload,i=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.apiKey,u=e.region,c=e.additionalHeaders;return Kw(this,void 0,void 0,function(){var t,n;return Hw(this,function(e){switch(e.label){case 0:return n={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},"function"!=typeof(t=n[r])?(Zw.debug("Authentication type "+r+" not supported"),[2,""]):(n=C.parse(s).host,[4,t({payload:o,canonicalUri:i,appSyncGraphqlEndpoint:s,apiKey:a,region:u,host:n,additionalHeaders:c})]);case 1:return[2,e.sent()]}})})},rS.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return Kw(this,void 0,void 0,function(){return Hw(this,function(e){switch(e.label){case 0:return[4,wh.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},rS.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return Kw(this,void 0,void 0,function(){var t,n;return Hw(this,function(e){switch(e.label){case 0:return[4,Ml.getItem("federatedInfo")];case 1:return(n=e.sent())?(t=n.token,[3,4]):[3,2];case 2:return[4,wh.currentAuthenticatedUser()];case 3:(n=e.sent())&&(t=n.token),e.label=4;case 4:if(!t)throw new Error("No federated jwt");return[2,{Authorization:t,host:r}]}})})},rS.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,r=e.host;return Kw(this,void 0,void 0,function(){var t;return Hw(this,function(e){return t=(t=new Date).toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:r,"x-amz-date":t,"x-api-key":n}]})})},rS.prototype._awsRealTimeIAMHeader=function(e){var o=e.payload,i=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return Kw(this,void 0,void 0,function(){var t,n,r;return Hw(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,A.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+i,data:o,method:"POST",headers:Jw({},tS)},[2,A.Signer.sign(r,n,t).headers]}})})},rS.prototype._customAuthHeader=function(e){var t=e.host;if(!(e=e.additionalHeaders).Authorization)throw new Error("No auth token specified");return{Authorization:e.Authorization,host:t}},rS.prototype._ensureCredentials=function(){return A.Credentials.get().then(function(e){return!!e&&(e=A.Credentials.shear(e),Zw.debug("set credentials for AWSAppSyncRealTimeProvider",e),!0)}).catch(function(e){return Zw.warn("ensure credentials error",e),!1})},rS);function rS(){var e=null!==eS&&eS.apply(this,arguments)||this;return e.socketStatus=Yw.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}function oS(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function iS(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var sS=A.browserOrNode().isNode,aS=new A.ConsoleLogger("PubSub");function uS(e){this._options=e,aS.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}var cS,lS,pS=(Object.defineProperty(uS.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new Vw(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(uS.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new nS(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),uS.prototype.getModuleName=function(){return"PubSub"},uS.prototype.configure=function(e){var t=this,e=e?e.PubSub||e:{};return aS.debug("configure PubSub",{opt:e}),this._options=Object.assign({},this._options,e),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},uS.prototype.addPluggable=function(t){return oS(this,void 0,void 0,function(){return iS(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},uS.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},uS.prototype.getProviderByName=function(t){return t===A.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===A.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},uS.prototype.getProviders=function(e){var t=(e=void 0===e?{}:e).provider;if(!t)return this._pluggables;if(!(e=this.getProviderByName(t)))throw new Error("Could not find provider named "+t);return[e]},uS.prototype.publish=function(t,n,r){return oS(this,void 0,void 0,function(){return iS(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},uS.prototype.subscribe=function(t,r){if(sS&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");aS.debug("subscribe options",r);var o=this.getProviders(r);return new Sw(function(n){var e=o.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},new uS(null));A.Amplify.register(pS),(wg=cS=cS||{}).CONNECTION_CLOSED="Connection closed",wg.CONNECTION_FAILED="Connection failed",wg.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",wg.SUBSCRIPTION_ACK="Subscription ack",wg.TIMEOUT_DISCONNECT="Timeout disconnect",(wg=AS=AS||{}).API_KEY="API_KEY",wg.AWS_IAM="AWS_IAM",wg.OPENID_CONNECT="OPENID_CONNECT",wg.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",wg.AWS_LAMBDA="AWS_LAMBDA",(AS=lS=lS||{}).NO_API_KEY="No api-key configured",AS.NO_CURRENT_USER="No current user",AS.NO_CREDENTIALS="No credentials",AS.NO_FEDERATED_JWT="No federated jwt",AS.NO_AUTH_TOKEN="No auth token specified";function dS(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function fS(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function hS(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var mS=function(){return(mS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gS=new A.ConsoleLogger("GraphQLAPI"),yS=(vS.prototype.getModuleName=function(){return"GraphQLAPI"},vS.prototype.configure=function(e){var e=void 0===(e=(t=e||{}).API)?{}:e,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["API"]),e=mS(mS({},t),e);return gS.debug("configure GraphQL API",{opt:e}),void 0!==(e=e.aws_project_region?Object.assign({},e,{region:e.aws_project_region,header:{}}):e).graphql_headers&&"function"!=typeof e.graphql_headers&&(gS.warn("graphql_headers should be a function"),e.graphql_headers=void 0),this._options=Object.assign({},this._options,e),this.createInstance(),this._options},vS.prototype.createInstance=function(){return gS.debug("create Rest instance"),this._options?(this._api=new Hv(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},vS.prototype._headerBasedAuth=function(s,a){return void 0===a&&(a={}),dS(this,void 0,void 0,function(){var t,n,r,o,i;return fS(this,function(e){switch(e.label){case 0:switch(n=this._options,o=n.aws_appsync_authenticationType,t=n.aws_appsync_apiKey,n={},s||o||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!t)throw new Error(lS.NO_API_KEY);return n={Authorization:null,"X-Api-Key":t},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error(lS.NO_CREDENTIALS);return[3,17];case 4:return e.trys.push([4,9,,10]),r=void 0,[4,Ml.getItem("federatedInfo")];case 5:return(o=e.sent())?(r=o.token,[3,8]):[3,6];case 6:return[4,wh.currentAuthenticatedUser()];case 7:(i=e.sent())&&(r=i.token),e.label=8;case 8:if(!r)throw new Error(lS.NO_FEDERATED_JWT);return n={Authorization:r},[3,10];case 9:throw e.sent(),new Error(lS.NO_CURRENT_USER);case 10:return[3,17];case 11:return e.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return i=e.sent(),n={Authorization:i.getAccessToken().getJwtToken()},[3,14];case 13:throw e.sent(),new Error(lS.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!a.Authorization)throw new Error(lS.NO_AUTH_TOKEN);return n={Authorization:a.Authorization},[3,17];case 16:return n={Authorization:null},[3,17];case 17:return[2,n]}})})},vS.prototype.getGraphqlOperationType=function(e){return e=Nb(e),hS(e.definitions,1)[0].operation},vS.prototype.graphql=function(e,t){var n=e.query,r=e.variables,o=void 0===r?{}:r,i=e.authMode,e=e.authToken,s=Nb("string"==typeof n?n:ib(n)),n=(void 0===(n=hS(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0])?{}:n).operation,a=t||{};switch(e&&(a.Authorization=e),n){case"query":case"mutation":var u=this._api.getCancellableToken(),c=this._graphql({query:s,variables:o,authMode:i},a,{cancellableToken:u});return this._api.updateRequestToBeCancellable(c,u),c;case"subscription":return this._graphqlSubscribe({query:s,variables:o,authMode:i},a)}throw new Error("invalid operation type: "+n)},vS.prototype._graphql=function(e,g,y){var v=e.query,b=e.variables,w=e.authMode;return void 0===g&&(g={}),void 0===y&&(y={}),dS(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m;return fS(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return a=this._options,t=a.aws_appsync_region,n=a.aws_appsync_graphqlEndpoint,s=a.graphql_headers,r=void 0===s?function(){return{}}:s,o=a.graphql_endpoint,i=a.graphql_endpoint_iam_region,s=[{}],(a=!o)?[4,this._headerBasedAuth(w,g)]:[3,4];case 3:a=e.sent(),e.label=4;case 4:return u=[mS.apply(void 0,s.concat([a]))],(c=o)?i?[4,this._headerBasedAuth(w,g)]:[3,6]:[3,8];case 5:return l=e.sent(),[3,7];case 6:l={Authorization:null},e.label=7;case 7:c=l,e.label=8;case 8:return p=[mS.apply(void 0,u.concat([c]))],[4,r({query:v,variables:b})];case 9:if(d=mS.apply(void 0,[mS.apply(void 0,[mS.apply(void 0,p.concat([e.sent()])),g]),!o&&((m={})["x-amz-user-agent"]=A.Constants.userAgent,m)]),m={query:ib(v),variables:b},d=Object.assign({headers:d,body:m,signerServiceInfo:{service:o?"execute-api":"appsync",region:o?i:t}},y),!(m=o||n))throw{data:{},errors:[new tb("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(m,d)];case 11:return f=e.sent(),[3,13];case 12:if(h=e.sent(),this._api.isCancel(h))throw h;return f={data:{},errors:[new tb(h.message,null,null,null,null,h)]},[3,13];case 13:if((h=f.errors)&&h.length)throw f;return[2,f]}})})},vS.prototype.isCancel=function(e){return this._api.isCancel(e)},vS.prototype.cancel=function(e,t){return this._api.cancel(e,t)},vS.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,o=e.authMode,i=e.authToken;void 0===t&&(t={});var s=(c=this._options).aws_appsync_region,a=c.aws_appsync_graphqlEndpoint,u=c.aws_appsync_authenticationType,e=c.aws_appsync_apiKey,c=void 0===(c=c.graphql_headers)?function(){return{}}:c;if(pS&&"function"==typeof pS.subscribe)return pS.subscribe("",{provider:A.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:a,authenticationType:o||u||"AWS_IAM",apiKey:e,query:ib(n),region:s,variables:r,graphql_headers:c,additionalHeaders:t,authToken:i});throw gS.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},vS.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){return!!e&&(e=t.Credentials.shear(e),gS.debug("set credentials for api",e),!0)}).catch(function(e){return gS.warn("ensure credentials error",e),!1})},vS);function vS(e){this._api=null,this.Auth=wh,this.Cache=Ml,this.Credentials=A.Credentials,this._options=e,gS.debug("API Options",this._options)}wg=new yS(null),A.Amplify.register(wg);var bS=function(){return(bS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},wS=new A.ConsoleLogger("API");function SS(e){this.Auth=wh,this.Cache=Ml,this.Credentials=A.Credentials,this._options=e,this._restApi=new Yv(e),this._graphqlApi=new yS(e),wS.debug("API Options",this._options)}var CS=(SS.prototype.getModuleName=function(){return"API"},SS.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),e=this._graphqlApi.configure(this._options);return bS(bS({},t),e)},SS.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},SS.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},SS.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},SS.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},SS.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},SS.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},SS.prototype.isCancel=function(e){return this._restApi.isCancel(e)},SS.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},SS.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._restApi.endpoint(u)]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,o,i,s,a,t},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())});var e,s,a,c},SS.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},SS.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},new SS(null));A.Amplify.register(CS);var _S=function(){return(_S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ES=new A.ConsoleLogger("AbstractInteractionsProvider"),AS=(IS.prototype.configure=function(e){return void 0===e&&(e={}),this._config=_S(_S({},this._config),e),ES.debug("configure "+this.getProviderName(),this._config),this.options},IS.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(IS.prototype,"options",{get:function(){return _S({},this._config)},enumerable:!0,configurable:!0}),IS);function IS(e){this._config=e=void 0===e?{}:e}var kS=function(e,t){return(kS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function TS(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}kS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var PS=function(){return(PS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function OS(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function xS(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function NS(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var RS,MS,US,DS,LS,FS,jS,BS,wg="3.6.1",zS="runtime.lex.{region}.amazonaws.com",VS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),qS=new Set(["cn-north-1","cn-northwest-1"]),KS=new Set(["us-iso-east-1"]),HS=new Set(["us-isob-east-1"]),GS=new Set(["us-gov-east-1","us-gov-west-1"]),$e={apiVersion:"2016-11-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"runtime.lex.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-1":n={hostname:"runtime.lex.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-2":n={hostname:"runtime.lex.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-central-1":n={hostname:"runtime.lex.eu-central-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-2":n={hostname:"runtime.lex.eu-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:VS.has(e)&&(n={hostname:zS.replace("{region}",e),partition:"aws",signingService:"lex"}),qS.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),KS.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),HS.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=GS.has(e)?{hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:zS.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(PS({signingService:"lex"},n))},serviceId:"Lex Runtime Service",urlParser:$e},WS=PS(PS({},$e),{runtime:"node",base64Decoder:bu,base64Encoder:wu,bodyLengthChecker:Su,credentialDefaultProvider:$n,defaultUserAgentProvider:hn({serviceId:$e.serviceId,clientVersion:wg}),maxAttempts:Ca(yt),region:Ca(fn,bn),requestHandler:new Yn,sha256:bt.bind(null,"sha256"),streamCollector:vu,utf8Decoder:dn,utf8Encoder:S}),$S=(TS(YS,RS=Ze),YS.prototype.destroy=function(){RS.prototype.destroy.call(this)},YS);function YS(e){var t=this,e=Cc(la(e=yc(Ti(e=Pi(e=PS(PS({},WS),e))))));return(t=RS.call(this,e)||this).config=e,t.middlewareStack.use(wc(t.config)),t.middlewareStack.use(zs(t.config)),t.middlewareStack.use(Ou(t.config)),t.middlewareStack.use(Ru(t.config)),t.middlewareStack.use(Uu(t.config)),t.middlewareStack.use(Ec(t.config)),t}function JS(e){return Object.entries(e).reduce(function(e,t){var n=NS(t,2),t=n[0];return null===(n=n[1])?e:PS(PS({},e),((e={})[t]=n,e))},{})}function ZS(e){return{attachmentLinkUrl:void 0!==e.attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?(e.buttons||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:{text:void 0!==(t=e).text&&null!==t.text?t.text:void 0,value:void 0!==t.value&&null!==t.value?t.value:void 0};var t}):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}}function XS(e){return{score:void 0!==e.score&&null!==e.score?e.score:void 0}}function QS(e){return Object.entries(e).reduce(function(e,t){var n=NS(t,2),t=n[0];return null===(n=n[1])?e:PS(PS({},e),((e={})[t]=n,e))},{})}function eC(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}(nC=nC||{}).filterSensitiveLog=function(e){return PS({},e)},(oC=oC||{}).filterSensitiveLog=function(e){return PS({},e)},(zC=zC||{}).filterSensitiveLog=function(e){return PS({},e)},(GC=GC||{}).filterSensitiveLog=function(e){return PS({},e)},(nC=j_=j_||{}).FAILED="Failed",nC.FULFILLED="Fulfilled",nC.READY_FOR_FULFILLMENT="ReadyForFulfillment",(oC=rC=rC||{}).COMPOSITE="Composite",oC.CUSTOM_PAYLOAD="CustomPayload",oC.PLAIN_TEXT="PlainText",oC.SSML="SSML",(zC=OC=OC||{}).CLOSE="Close",zC.CONFIRM_INTENT="ConfirmIntent",zC.DELEGATE="Delegate",zC.ELICIT_INTENT="ElicitIntent",zC.ELICIT_SLOT="ElicitSlot",(MS=MS||{}).filterSensitiveLog=function(e){return PS(PS(PS({},e),e.slots&&{slots:qc}),e.message&&{message:qc})},(GC=HC=HC||{}).CONFIRMED="Confirmed",GC.DENIED="Denied",GC.NONE="None",(US=US||{}).filterSensitiveLog=function(e){return PS(PS({},e),e.slots&&{slots:qc})},(g_=g_||{}).filterSensitiveLog=function(e){return PS(PS(PS(PS(PS({},e),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return US.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:qc}),e.dialogAction&&{dialogAction:MS.filterSensitiveLog(e.dialogAction)}),e.activeContexts&&{activeContexts:qc})},(fE=fE||{}).filterSensitiveLog=function(e){return PS({},e)},(M_=M_||{}).filterSensitiveLog=function(e){return PS({},e)},(D_=D_||{}).filterSensitiveLog=function(e){return PS({},e)},(L_=L_||{}).filterSensitiveLog=function(e){return PS({},e)},(DS=DS||{}).filterSensitiveLog=function(e){return PS(PS(PS(PS({},e),e.sessionAttributes&&{sessionAttributes:qc}),e.requestAttributes&&{requestAttributes:qc}),e.activeContexts&&{activeContexts:qc})},(j_=F_=F_||{}).CONFIRM_INTENT="ConfirmIntent",j_.ELICIT_INTENT="ElicitIntent",j_.ELICIT_SLOT="ElicitSlot",j_.FAILED="Failed",j_.FULFILLED="Fulfilled",j_.READY_FOR_FULFILLMENT="ReadyForFulfillment",(LS=LS||{}).filterSensitiveLog=function(e){return PS(PS(PS({},e),e.message&&{message:qc}),e.activeContexts&&{activeContexts:qc})},(B_=B_||{}).filterSensitiveLog=function(e){return PS({},e)},(z_=z_||{}).filterSensitiveLog=function(e){return PS({},e)},(FS=FS||{}).filterSensitiveLog=function(e){return PS(PS(PS(PS(PS({},e),e.sessionAttributes&&{sessionAttributes:qc}),e.requestAttributes&&{requestAttributes:qc}),e.inputText&&{inputText:qc}),e.activeContexts&&{activeContexts:qc})},(V_=V_||{}).filterSensitiveLog=function(e){return PS({},e)},(jS=jS||{}).filterSensitiveLog=function(e){return PS(PS({},e),e.slots&&{slots:qc})},(q_=q_||{}).GENERIC="application/vnd.amazonaws.card.generic",(K_=K_||{}).filterSensitiveLog=function(e){return PS({},e)},(H_=H_||{}).filterSensitiveLog=function(e){return PS({},e)},(G_=G_||{}).filterSensitiveLog=function(e){return PS({},e)},(W_=W_||{}).filterSensitiveLog=function(e){return PS({},e)},(BS=BS||{}).filterSensitiveLog=function(e){return PS(PS(PS(PS(PS(PS({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map(function(e){return jS.filterSensitiveLog(e)})}),e.slots&&{slots:qc}),e.sessionAttributes&&{sessionAttributes:qc}),e.message&&{message:qc}),e.activeContexts&&{activeContexts:qc})},($_=$_||{}).filterSensitiveLog=function(e){return PS(PS(PS(PS(PS({},e),e.sessionAttributes&&{sessionAttributes:qc}),e.dialogAction&&{dialogAction:MS.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return US.filterSensitiveLog(e)})}),e.activeContexts&&{activeContexts:qc})},(Y_=Y_||{}).filterSensitiveLog=function(e){return PS(PS(PS({},e),e.message&&{message:qc}),e.activeContexts&&{activeContexts:qc})};var tC,nC=function(a,u){return OS(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return xS(this,function(e){switch(e.label){case 0:if(t={"content-type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",Rc(i)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",Rc(i)),void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",Rc(i)),r=JSON.stringify(PS(PS(PS(PS({},void 0!==a.activeContexts&&null!==a.activeContexts&&{activeContexts:a.activeContexts.filter(function(e){return null!=e}).map(function(e){return null===e?null:gC(e)})}),void 0!==a.inputText&&null!==a.inputText&&{inputText:a.inputText}),void 0!==a.requestAttributes&&null!==a.requestAttributes&&{requestAttributes:JS(a.requestAttributes)}),void 0!==a.sessionAttributes&&null!==a.sessionAttributes&&{sessionAttributes:JS(a.sessionAttributes)})),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"POST",headers:t,path:n,body:r})]}})})},rC=function(r,o){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,(v=r,b=o,OS(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y;return xS(this,function(e){switch(e.label){case 0:return n=[PS({},v)],y={},[4,SC(v.body,b)];case 1:switch(t=PS.apply(void 0,n.concat([(y.body=e.sent(),y)])),o="UnknownError",o=CC(v,t.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return i=[{}],[4,iC(t)];case 3:return r=PS.apply(void 0,[PS.apply(void 0,i.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 4:return s=[{}],[4,sC(t)];case 5:return r=PS.apply(void 0,[PS.apply(void 0,s.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 6:return a=[{}],[4,aC(t)];case 7:return r=PS.apply(void 0,[PS.apply(void 0,a.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 8:return u=[{}],[4,uC(t)];case 9:return r=PS.apply(void 0,[PS.apply(void 0,u.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 10:return c=[{}],[4,cC(t)];case 11:return r=PS.apply(void 0,[PS.apply(void 0,c.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 12:return l=[{}],[4,lC(t)];case 13:return r=PS.apply(void 0,[PS.apply(void 0,l.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 14:return p=[{}],[4,pC(t)];case 15:return r=PS.apply(void 0,[PS.apply(void 0,p.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 16:return d=[{}],[4,dC(t)];case 17:return r=PS.apply(void 0,[PS.apply(void 0,d.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 18:return f=[{}],[4,fC(t)];case 19:return r=PS.apply(void 0,[PS.apply(void 0,f.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 20:return h=[{}],[4,hC(t)];case 21:return r=PS.apply(void 0,[PS.apply(void 0,h.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 22:return m=[{}],[4,mC(t)];case 23:return r=PS.apply(void 0,[PS.apply(void 0,m.concat([e.sent()])),{name:o,$metadata:wC(v)}]),[3,25];case 24:g=t.body,o=g.code||g.Code||o,r=PS(PS({},g),{name:""+o,message:g.message||g.Message||o,$fault:"client",$metadata:wC(v)}),e.label=25;case 25:return g=r.message||r.Message||o,r.message=g,delete r.Message,[2,Promise.reject(Object.assign(new Error(g),r))]}})}))]:(t={$metadata:wC(r),activeContexts:void 0,alternativeIntents:void 0,audioStream:void 0,botVersion:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-nlu-intent-confidence"]&&(t.nluIntentConfidence=new Lc(Ba.from(r.headers["x-amz-lex-nlu-intent-confidence"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-alternative-intents"]&&(t.alternativeIntents=new Lc(Ba.from(r.headers["x-amz-lex-alternative-intents"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new Lc(Ba.from(r.headers["x-amz-lex-slots"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new Lc(Ba.from(r.headers["x-amz-lex-session-attributes"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-bot-version"]&&(t.botVersion=r.headers["x-amz-lex-bot-version"]),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-active-contexts"]&&(t.activeContexts=new Lc(Ba.from(r.headers["x-amz-lex-active-contexts"],"base64").toString("ascii"))),n=r.body,t.audioStream=n,[2,Promise.resolve(t)]);var v,b})})},oC=function(o,i){return OS(void 0,void 0,void 0,function(){var n,r;return xS(this,function(e){switch(e.label){case 0:return 200!==o.statusCode&&300<=o.statusCode?[2,(m=o,g=i,OS(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h;return xS(this,function(e){switch(e.label){case 0:return n=[PS({},m)],h={},[4,SC(m.body,g)];case 1:switch(t=PS.apply(void 0,n.concat([(h.body=e.sent(),h)])),o="UnknownError",o=CC(m,t.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return i=[{}],[4,iC(t)];case 3:return r=PS.apply(void 0,[PS.apply(void 0,i.concat([e.sent()])),{name:o,$metadata:wC(m)}]),[3,19];case 4:return s=[{}],[4,sC(t)];case 5:return r=PS.apply(void 0,[PS.apply(void 0,s.concat([e.sent()])),{name:o,$metadata:wC(m)}]),[3,19];case 6:return a=[{}],[4,aC(t)];case 7:return r=PS.apply(void 0,[PS.apply(void 0,a.concat([e.sent()])),{name:o,$metadata:wC(m)}]),[3,19];case 8:return u=[{}],[4,uC(t)];case 9:return r=PS.apply(void 0,[PS.apply(void 0,u.concat([e.sent()])),{name:o,$metadata:wC(m)}]),[3,19];case 10:return c=[{}],[4,cC(t)];case 11:return r=PS.apply(void 0,[PS.apply(void 0,c.concat([e.sent()])),{name:o,$metadata:wC(m)}]),[3,19];case 12:return l=[{}],[4,lC(t)];case 13:return r=PS.apply(void 0,[PS.apply(void 0,l.concat([e.sent()])),{name:o,$metadata:wC(m)}]),[3,19];case 14:return p=[{}],[4,pC(t)];case 15:return r=PS.apply(void 0,[PS.apply(void 0,p.concat([e.sent()])),{name:o,$metadata:wC(m)}]),[3,19];case 16:return d=[{}],[4,fC(t)];case 17:return r=PS.apply(void 0,[PS.apply(void 0,d.concat([e.sent()])),{name:o,$metadata:wC(m)}]),[3,19];case 18:f=t.body,o=f.code||f.Code||o,r=PS(PS({},f),{name:""+o,message:f.message||f.Message||o,$fault:"client",$metadata:wC(m)}),e.label=19;case 19:return f=r.message||r.Message||o,r.message=f,delete r.Message,[2,Promise.reject(Object.assign(new Error(f),r))]}})}))]:(n={$metadata:wC(o),activeContexts:void 0,alternativeIntents:void 0,botVersion:void 0,dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,SC(o.body,i)]);case 1:return void 0!==(r=e.sent()).activeContexts&&null!==r.activeContexts&&(n.activeContexts=(r.activeContexts||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:yC(e)})),void 0!==r.alternativeIntents&&null!==r.alternativeIntents&&(n.alternativeIntents=(r.alternativeIntents||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:bC(e)})),void 0!==r.botVersion&&null!==r.botVersion&&(n.botVersion=r.botVersion),void 0!==r.dialogState&&null!==r.dialogState&&(n.dialogState=r.dialogState),void 0!==r.intentName&&null!==r.intentName&&(n.intentName=r.intentName),void 0!==r.message&&null!==r.message&&(n.message=r.message),void 0!==r.messageFormat&&null!==r.messageFormat&&(n.messageFormat=r.messageFormat),void 0!==r.nluIntentConfidence&&null!==r.nluIntentConfidence&&(n.nluIntentConfidence=XS(r.nluIntentConfidence)),void 0!==r.responseCard&&null!==r.responseCard&&(n.responseCard={contentType:void 0!==(t=r.responseCard).contentType&&null!==t.contentType?t.contentType:void 0,genericAttachments:void 0!==t.genericAttachments&&null!==t.genericAttachments?vC(t.genericAttachments):void 0,version:void 0!==t.version&&null!==t.version?t.version:void 0}),void 0!==r.sentimentResponse&&null!==r.sentimentResponse&&(n.sentimentResponse={sentimentLabel:void 0!==(t=r.sentimentResponse).sentimentLabel&&null!==t.sentimentLabel?t.sentimentLabel:void 0,sentimentScore:void 0!==t.sentimentScore&&null!==t.sentimentScore?t.sentimentScore:void 0}),void 0!==r.sessionAttributes&&null!==r.sessionAttributes&&(n.sessionAttributes=QS(r.sessionAttributes)),void 0!==r.sessionId&&null!==r.sessionId&&(n.sessionId=r.sessionId),void 0!==r.slotToElicit&&null!==r.slotToElicit&&(n.slotToElicit=r.slotToElicit),void 0!==r.slots&&null!==r.slots&&(n.slots=QS(r.slots)),[2,Promise.resolve(n)]}var t,m,g})})},iC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:wC(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},sC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:wC(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},aC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:wC(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},uC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:wC(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},cC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:wC(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},lC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:wC(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},pC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:wC(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},dC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:wC(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},fC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:wC(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},hC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:wC(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},mC=function(r,e){return OS(void 0,void 0,void 0,function(){var t,n;return xS(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:wC(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},gC=function(e,t){return PS(PS(PS({},void 0!==e.name&&null!==e.name&&{name:e.name}),void 0!==e.parameters&&null!==e.parameters&&{parameters:(n=e.parameters,Object.entries(n).reduce(function(e,t){var n=NS(t,2),t=n[0];return null===(n=n[1])?e:PS(PS({},e),((e={})[t]=n,e))},{}))}),void 0!==e.timeToLive&&null!==e.timeToLive&&{timeToLive:(e=e.timeToLive,PS(PS({},void 0!==e.timeToLiveInSeconds&&null!==e.timeToLiveInSeconds&&{timeToLiveInSeconds:e.timeToLiveInSeconds}),void 0!==e.turnsToLive&&null!==e.turnsToLive&&{turnsToLive:e.turnsToLive}))});var n},yC=function(e,t){return{name:void 0!==e.name&&null!==e.name?e.name:void 0,parameters:void 0!==e.parameters&&null!==e.parameters?(n=e.parameters,Object.entries(n).reduce(function(e,t){var n=NS(t,2),t=n[0];return null===(n=n[1])?e:PS(PS({},e),((e={})[t]=n,e))},{})):void 0,timeToLive:void 0!==e.timeToLive&&null!==e.timeToLive?{timeToLiveInSeconds:void 0!==(e=e.timeToLive).timeToLiveInSeconds&&null!==e.timeToLiveInSeconds?e.timeToLiveInSeconds:void 0,turnsToLive:void 0!==e.turnsToLive&&null!==e.turnsToLive?e.turnsToLive:void 0}:void 0};var n},vC=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:ZS(e)})},bC=function(e,t){return{intentName:void 0!==e.intentName&&null!==e.intentName?e.intentName:void 0,nluIntentConfidence:void 0!==e.nluIntentConfidence&&null!==e.nluIntentConfidence?XS(e.nluIntentConfidence):void 0,slots:void 0!==e.slots&&null!==e.slots?QS(e.slots):void 0}},wC=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},SC=function(e,t){return o=r=t,((n=void 0===(n=e)?new Uint8Array:n)instanceof Uint8Array?Promise.resolve(n):o.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return r.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o},CC=function(e,t){function n(e){return 0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},_C=(TS(EC,tC=mE),EC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostContentCommand",inputFilterSensitiveLog:DS.filterSensitiveLog,outputFilterSensitiveLog:LS.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},EC.prototype.serialize=function(e,t){return a=e,u=t,OS(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return xS(this,function(e){switch(e.label){case 0:if(t=PS(PS(PS(PS(PS({"content-type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},eC(a.sessionAttributes)&&{"x-amz-lex-session-attributes":Ba.from(Lc.fromObject(a.sessionAttributes)).toString("base64")}),eC(a.requestAttributes)&&{"x-amz-lex-request-attributes":Ba.from(Lc.fromObject(a.requestAttributes)).toString("base64")}),eC(a.contentType)&&{"content-type":a.contentType}),eC(a.accept)&&{accept:a.accept}),eC(a.activeContexts)&&{"x-amz-lex-active-contexts":Ba.from(Lc.fromObject(a.activeContexts)).toString("base64")}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",Rc(i)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",Rc(i)),void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",Rc(i)),void 0!==a.inputStream&&(r=a.inputStream),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new Gs({protocol:i,hostname:o,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},EC.prototype.deserialize=rC,EC);function EC(e){var t=tC.call(this)||this;return t.input=e,t}var AC,IC=(TS(kC,AC=mE),kC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(yl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostTextCommand",inputFilterSensitiveLog:FS.filterSensitiveLog,outputFilterSensitiveLog:BS.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},kC.prototype.serialize=nC,kC.prototype.deserialize=oC,kC);function kC(e){var t=AC.call(this)||this;return t.input=e,t}var TC,PC,OC=(TC=function(e,t){return(TC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}TC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),xC=function(){return(xC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},NC=new A.ConsoleLogger("AWSLexProvider"),RC=(OC(MC,PC=AS),MC.prototype.getProviderName=function(){return"AWSLexProvider"},MC.prototype.reportBotStatus=function(e,t){var n=this;NC.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},MC.prototype.sendMessage=function(m,g){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,e;return u=this,c=function(e){switch(e.label){case 0:return this._config[m]?[4,A.Credentials.get()]:[2,Promise.reject("Bot "+m+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new $S({region:this._config[m].region,credentials:t,customUserAgent:A.getAmplifyUserAgent()}),"string"!=typeof g)return[3,6];n={botAlias:this._config[m].alias,botName:m,inputText:g,userId:t.identityId},NC.debug("postText to lex",g),e.label=2;case 2:return e.trys.push([2,4,,5]),r=new IC(n),[4,this.lexRuntimeServiceClient.send(r)];case 3:return s=e.sent(),this.reportBotStatus(s,m),[2,s];case 4:return o=e.sent(),[2,Promise.reject(o)];case 5:return[3,11];case 6:i=g.content,o=g.options.messageType,n="voice"===o?{botAlias:this._config[m].alias,botName:m,contentType:"audio/x-l16; sample-rate=16000",inputStream:i,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[m].alias,botName:m,contentType:"text/plain; charset=utf-8",inputStream:i,userId:t.identityId,accept:"audio/mpeg"},NC.debug("postContent to lex",g),e.label=7;case 7:return e.trys.push([7,10,,11]),i=new _C(n),[4,this.lexRuntimeServiceClient.send(i)];case 8:return[4,function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)});throw new Error("Readable is not supported.")}((s=e.sent()).audioStream)];case 9:return a=e.sent(),this.reportBotStatus(s,m),[2,xC(xC({},s),{audioStream:a})];case 10:return a=e.sent(),[2,Promise.reject(a)];case 11:return[2]}},f={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]},e={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function h(t){return function(e){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;f;)try{if(l=1,p&&(d=2&t[0]?p.return:t[0]?p.throw||((d=p.return)&&d.call(p),0):p.next)&&!(d=d.call(p,t[1])).done)return d;switch(p=0,(t=d?[2&t[0],d.value]:t)[0]){case 0:case 1:d=t;break;case 4:return f.label++,{value:t[1],done:!1};case 5:f.label++,p=t[1],t=[0];continue;case 7:t=f.ops.pop(),f.trys.pop();continue;default:if(!(d=0<(d=f.trys).length&&d[d.length-1])&&(6===t[0]||2===t[0])){f=0;continue}if(3===t[0]&&(!d||t[1]>d[0]&&t[1]<d[3])){f.label=t[1];break}if(6===t[0]&&f.label<d[1]){f.label=d[1],d=t;break}if(d&&f.label<d[2]){f.label=d[2],f.ops.push(t);break}d[2]&&f.ops.pop(),f.trys.pop();continue}t=c.call(u,f)}catch(e){t=[6,e],p=0}finally{l=d=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},MC.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},MC);function MC(e){return(e=PC.call(this,e=void 0===e?{}:e)||this)._botsCompleteCallback={},e}var UC=function(){return(UC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},DC=new A.ConsoleLogger("Interactions");function LC(e){this._options=e,DC.debug("Interactions Options",this._options),this._pluggables={}}var FC=(LC.prototype.getModuleName=function(){return"Interactions"},LC.prototype.configure=function(e){var t=this,e=e?e.Interactions||e:{};DC.debug("configure Interactions",{opt:e}),this._options=UC(UC({bots:{}},e),e.Interactions);var e=this._options.aws_bots_config,n=this._options.bots;return!Object.keys(n).length&&e&&Array.isArray(e)&&e.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&n&&Object.keys(n).map(function(e){return n[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new RC),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},LC.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");e.configure(this._options.bots),this._pluggables[e.getProviderName()]=e}},LC.prototype.send=function(c,l){return e=this,u=function(){var t,n,r,o,i,s,a,e;return n=this,r=function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[c])throw new Error("Bot "+c+" does not exist");if(t=this._options.bots[c].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(c,l)];case 1:return[2,e.sent()]}},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function u(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},LC.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},new LC(null));A.Amplify.register(FC);var jC=function(){return(jC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},BC=new A.ConsoleLogger("AbstractXRProvider"),zC=(VC.prototype.configure=function(e){return this._config=jC(jC({},e=void 0===e?{}:e),this._config),BC.debug("configure "+this.getProviderName(),this._config),this.options},VC.prototype.getCategory=function(){return"XR"},Object.defineProperty(VC.prototype,"options",{get:function(){return jC({},this._config)},enumerable:!0,configurable:!0}),VC);function VC(e){this._config=e=void 0===e?{}:e}var qC,KC,HC=(qC=function(e,t){return(qC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}qC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),GC=(HC(WC,KC=Error),WC);function WC(){return null!==KC&&KC.apply(this,arguments)||this}var $C,YC=(HC(JC,$C=GC),JC);function JC(){return null!==$C&&$C.apply(this,arguments)||this}var ZC,XC=(HC(QC,ZC=GC),QC);function QC(){return null!==ZC&&ZC.apply(this,arguments)||this}var e_,t_=(HC(n_,e_=GC),n_);function n_(){return null!==e_&&e_.apply(this,arguments)||this}var r_,o_=(HC(i_,r_=GC),i_);function i_(){return null!==r_&&r_.apply(this,arguments)||this}var s_,a_=(HC(u_,s_=GC),u_);function u_(){return null!==s_&&s_.apply(this,arguments)||this}var c_,l_=(HC(p_,c_=GC),p_);function p_(){return null!==c_&&c_.apply(this,arguments)||this}function d_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function f_(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var h_,m_,g_=(h_=function(e,t){return(h_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}h_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y_=function(){return(y_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v_=new A.ConsoleLogger("SumerianProvider"),b_=(g_(w_,m_=zC),w_.prototype.getProviderName=function(){return"SumerianProvider"},w_.prototype.loadScript=function(r){return d_(this,void 0,void 0,function(){return f_(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},w_.prototype.loadScene=function(C,_,E){return d_(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y,v,b,w,S;return f_(this,function(e){switch(e.label){case 0:if(!C)throw s="No scene name passed into loadScene",v_.error(s),new a_(s);if(!_)throw s="No dom element id passed into loadScene",v_.error(s),new o_(s);if(!(t=document.getElementById(_)))throw s="DOM element id, "+_+" not found",v_.error(s),new o_(s);if(!(n=this.getScene(C)).sceneConfig)throw s="No scene config configured for scene: "+C,v_.error(s),new a_(s);if(r=n.sceneConfig.url,o=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))i=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw s="No region configured for scene: "+C,v_.error(s),new a_(s);i=this.options.region}a={region:i,customUserAgent:A.Constants.userAgent+"-SumerianScene"},u={headers:{"X-Amz-User-Agent":A.Constants.userAgent}},c=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,A.Credentials.get()];case 2:return f=e.sent(),a.credentials=f,l={secret_key:f.secretAccessKey,access_key:f.accessKeyId,session_token:f.sessionToken},f={region:i,service:"sumerian"},f=A.Signer.sign({method:"GET",url:r},l,f),u.headers=y_(y_({},u.headers),f.headers),c=f.url,[3,4];case 3:return e.sent(),v_.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(c,u)];case 5:return[4,(p=e.sent()).json()];case 6:if(d=e.sent(),403===p.status)throw d.message?(v_.error("Failure to authenticate user: "+d.message),new a_("Failure to authenticate user: "+d.message)):(v_.error("Failure to authenticate user"),new a_("Failure to authenticate user"));return f=d.bundleData[o],[4,fetch(f.url,{headers:f.headers})];case 7:return[4,e.sent().json()];case 8:h=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(h[o].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw m=e.sent(),v_.error(m),new a_(m);case 12:return m=E.progressCallback||void 0,g=n.publishParamOverrides||void 0,g={element:t,sceneId:o,sceneBundle:h,apiResponse:d,progressCallback:m,publishParamOverrides:g,awsSDKConfigOverride:a},[4,window.SumerianBootstrapper.loadScene(g)];case 13:g=e.sent(),n.sceneController=g,n.isLoaded=!0;try{for(y=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(g.sceneLoadWarnings),v=y.next();!v.done;v=y.next())b=v.value,v_.warn("loadScene warning: "+b)}catch(e){w={error:e}}finally{try{v&&!v.done&&(S=y.return)&&S.call(y)}finally{if(w)throw w.error}}return[2]}})})},w_.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},w_.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw v_.error(t),new YC(t)}if(!e)throw t="No scene name was passed",v_.error(t),new XC(t);if(this.options.scenes[e])return this.options.scenes[e];throw t="Scene '"+e+"' is not configured",v_.error(t),new XC(t)},w_.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw v_.error(t),new YC(t)}var n=this.options.scenes[e];if(!n)throw t="Scene '"+e+"' is not configured",v_.error(t),new XC(t);if(n=n.sceneController)return n;throw t="Scene controller for '"+e+"' has not been loaded",v_.error(t),new t_(t)},w_.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},w_.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},w_.prototype.start=function(e){this.getSceneController(e).start()},w_.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},w_.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},w_.prototype.isMuted=function(e){return this.getSceneController(e).muted},w_.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},w_.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},w_.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},w_);function w_(e){return m_.call(this,e=void 0===e?{}:e)||this}function S_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function C_(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var __=new A.ConsoleLogger("XR");function E_(e){this._options=e,__.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new b_)}var A_=(E_.prototype.configure=function(e){var n=this,r=e?e.XR||e:{};return __.debug("configure XR",{opt:r}),this._options=Object.assign({},this._options,r),Object.entries(this._pluggables).map(function(e){var e=(t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2))[0],t=t[1];e!==n._defaultProvider||r[n._defaultProvider]?t.configure(n._options[e]):t.configure(n._options)}),this._options},E_.prototype.addPluggable=function(t){return S_(this,void 0,void 0,function(){return C_(this,function(e){return t&&"XR"===t.getCategory()?[2,(this._pluggables[t.getProviderName()]=t).configure(this._options)]:[2]})})},E_.prototype.loadScene=function(t,n,r,o){return void 0===r&&(r={}),void 0===o&&(o=this._defaultProvider),S_(this,void 0,void 0,function(){return C_(this,function(e){switch(e.label){case 0:if(!this._pluggables[o])throw new l_("Provider '"+o+"' not configured");return[4,this._pluggables[o].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},E_.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},E_.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},E_.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},E_.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},E_.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},E_.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},E_.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},E_.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},E_.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new l_("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},E_.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new l_("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},E_.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new l_("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},new E_(null));A.Amplify.register(A_);var I_=(k_.prototype.auth=function(){return this._auth||wh},k_.prototype.analytics=function(){return this._analytics||zp},k_.prototype.storage=function(){return this._storage||zv},k_.prototype.api=function(){return this._api||CS},k_.prototype.interactions=function(){return this._interactions||FC},k_.prototype.cache=function(){return this._cache},k_.prototype.pubsub=function(){return this._pubsub||pS},k_.prototype.logger=function(e,t){return new this._logger(e,t)},k_.prototype.xr=function(){return this._xr||A_},k_.prototype.i18n=function(){return this._i18n},k_.prototype.authState=function(){return this._authState},k_.prototype.setAuthState=function(e){this._authState.next(e)},k_.decorators=[{type:f.Injectable}],k_.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:["modules"]},{type:f.Optional}]}]},k_);function k_(e){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y;this.modules=e=void 0===e?{}:e,this._authState=new Te,this.authStateChange$=this._authState.asObservable(),e=e||U,t=this._authState,n=e.Auth,y=t,n.currentAuthenticatedUser().then(function(e){Si.debug("has authenticated user",e),y.next({state:"signedIn",user:e})}).catch(function(e){Si.debug("no authenticated user",e),y.next({state:"signedOut",user:null})}),r=t,o=A.Amplify.configure(null),v.has(o,"Auth.oauth")&&A.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,e=e.payload;"auth"===t&&(t=e.data.username,Si.debug("authentication oauth event",e),r.next({state:e.event,user:{username:t}}))}},"angularAuthListener"),i=t,a=(s=n).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return Si.debug("signIn success"),e.challengeName?(Si.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?i.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?i.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?i.next({state:"confirmSignIn",user:e}):Si.debug("warning: unhandled challengeName "+e.challengeName)):i.next({state:"signedIn",user:e}),e}).catch(function(e){throw Si.debug("signIn error",e),e})},u=t,l=(c=n).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return Si.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw Si.debug("signOut error",e),e})},p=t,f=(d=n).signUp,d.signUp=function(t,e,n,r){return f.call(d,t,e,n,r).then(function(e){return Si.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw Si.debug("signUp error",e),e})},h=t,g=(m=n).confirmSignUp,m.confirmSignUp=function(t,e){return g.call(m,t,e).then(function(e){return Si.debug("confirmSignUp success"),h.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw Si.debug("confirmSignUp error",e),e})},this._auth=e.Auth,this._analytics=e.Analytics,this._storage=e.Storage,this._api=e.API,this._cache=e.Cache,this._pubsub=e.PubSub,this._interactions=e.Interactions,this._xr=e.XR,this._i18n=A.I18n,this._logger=A.Logger}var T_=(P_.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(P_.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(P_.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(P_.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),P_.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},P_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},P_.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],P_.ctorParameters=function(){return[{type:I_}]},P_.propDecorators={hide:[{type:f.Input}],data:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},P_);function P_(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var O_,x_,N_=((fE=(O_=function(e,t){return(O_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}O_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(R_,x_=T_),R_.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],R_.ctorParameters=function(){return[{type:I_}]},R_);function R_(e){var t=x_.call(this,e)||this;return t.amplifyService=e,t}var M_=(U_.prototype.ngOnInit=function(){this.loadComponent()},U_.prototype.ngOnDestroy=function(){},U_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(N_,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new wi(T_,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},U_.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],U_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},U_.propDecorators={framework:[{type:f.Input}],hide:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},U_);function U_(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var D_="sumerian-scene-container",L_="sumerian-scene",F_="sumerian-scene-loading",j_="sumerian-scene-loading-logo",B_="sumerian-scene-loading-scene-name",z_="sumerian-scene-loading-bar",V_="sumerian-scene-error-text",q_="sumerian-scene-bar",K_="sumerian-scene-actions",H_={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},G_={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},W_={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},$_={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},Y_={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},rC={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},nC={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},oC='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+(mE={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"}).section+'">\n    <div class="amplify-form-body" data-test="'+mE.bodySection+'">\n    <div class="amplify-form-header" data-test="'+mE.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+mE.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+mE.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+mE.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',J_=(Object.defineProperty(Z_.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(Z_.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),Z_.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Z_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Z_.prototype.setCode=function(e){this.code=e},Z_.prototype.onConfirm=function(){var t=this,e=this._authState.user,n="SOFTWARE_TOKEN_MFA"===(n=e.challengeName)?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},Z_.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Z_.prototype.onAlertClose=function(){this._setError(null)},Z_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Z_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:oC}]}],Z_.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},Z_.propDecorators={data:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}]},Z_);function Z_(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var X_,Q_,OC=(X_=function(e,t){return(X_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}X_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),AS='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+mE.section+'">\n  <div class="amplify-form-body" data-test="'+mE.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+mE.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+mE.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+mE.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',eE=(OC(tE,Q_=J_),tE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:AS}]}],tE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},tE);function tE(e){var t=Q_.call(this,e)||this;return t.amplifyService=e,t}function nE(e){this.componentFactoryResolver=e,this.hide=[]}function rE(e,t){return 0<e.filter(function(e){return e===t}).length}function oE(e,t){return"+"+e+t.replace(/[-()]/g,"")}nE.prototype.ngOnInit=function(){this.loadComponent()},nE.prototype.ngOnDestroy=function(){},nE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(eE,{authState:this.authState,hide:this.hide}):new wi(J_,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},nE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],nE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},nE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},HC=nE;var iE={email:"Email",phone_number:"Phone Number",username:"Username"},GC='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+rC.section+'">\n  <div class="amplify-form-body" data-test="'+rC.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+rC.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+rC.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+rC.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+rC.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+rC.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+rC.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',sE=(Object.defineProperty(aE.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(aE.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(aE.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),aE.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},aE.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},aE.prototype.setUsername=function(e){this.username=e},aE.prototype.setCode=function(e){this.code=e},aE.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},aE.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},aE.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},aE.prototype.onAlertClose=function(){this._setError(null)},aE.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},aE.prototype.getUsernameLabel=function(){return iE[this._usernameAttributes]||this._usernameAttributes},aE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:GC}]}],aE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},aE.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},aE);function aE(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var uE,cE,g_=(uE=function(e,t){return(uE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}uE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),zC='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+rC.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+rC.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+rC.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+rC.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+rC.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+rC.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+rC.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+rC.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',lE=(g_(pE,cE=sE),pE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:zC}]}],pE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},pE);function pE(e){var t=cE.call(this,e)||this;return t.amplifyService=e,t}var dE,fE=(hE.prototype.ngOnInit=function(){this.loadComponent()},hE.prototype.ngOnDestroy=function(){},hE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(lE,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new wi(sE,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},hE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],hE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},hE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},hE);function hE(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(oC=dE=dE||{}).EMAIL="email",oC.PHONE_NUMBER="phone_number",oC.USERNAME="username";var mE='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+H_.section+'">\n    <div class="amplify-form-body" data-test="'+H_.bodySection+'">\n      <div class="amplify-form-header" data-test="'+H_.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+H_.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+H_.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+H_.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+H_.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+H_.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',gE=(Object.defineProperty(yE.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=rE(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(yE.prototype,"authState",{set:function(e){this._authState=e,this._show=rE(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=(e.user&&e.user.country_code?e.user:this).country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(yE.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),yE.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},yE.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},yE.prototype.setUsername=function(e){this.username=e},yE.prototype.setPassword=function(e){this.password=e},yE.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},yE.prototype.onAlertClose=function(){this._setError(null)},yE.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},yE.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},yE.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},yE.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},yE.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},yE.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case dE.EMAIL:return this.email;case dE.PHONE_NUMBER:return oE(this.country_code,this.local_phone_number);default:return this.username}},yE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-core",template:mE}]}],yE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},yE.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},yE);function yE(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var vE,bE,OC=(vE=function(e,t){return(vE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}vE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),AS='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+H_.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+H_.bodySection+'">\n    <div class="amplify-form-header" data-test="'+H_.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+H_.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+H_.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+H_.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+H_.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',wE=(OC(SE,bE=gE),SE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:AS}]}],SE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},SE);function SE(e){var t=bE.call(this,e)||this;return t.amplifyService=e,t}function CE(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}CE.prototype.ngOnInit=function(){this.loadComponent()},CE.prototype.ngOnDestroy=function(){},CE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new wi(wE,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new wi(gE,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},CE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],CE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},CE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},GC=CE;var _E=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],EE=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],AE=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],rC='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+G_.section+'">\n    <div class="amplify-form-body" data-test="'+G_.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+G_.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+G_.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+G_.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+G_.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',IE=(Object.defineProperty(kE.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===dE.EMAIL?(this.signUpFields=EE,this.defaultSignUpFields=EE):this._usernameAttributes===dE.PHONE_NUMBER&&(this.signUpFields=AE,this.defaultSignUpFields=AE),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(kE.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===dE.EMAIL?(this.signUpFields=EE,this.defaultSignUpFields=EE):this._usernameAttributes===dE.PHONE_NUMBER&&(this.signUpFields=AE,this.defaultSignUpFields=AE)},enumerable:!0,configurable:!0}),Object.defineProperty(kE.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(kE.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),kE.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},kE.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},kE.prototype.onSignUp=function(){var n=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=oE(this.country_code,this.local_phone_number));var r=(e=Object.keys(this.user)).map(function(e){return n.user[e]});e.forEach(function(e,t){"username"!==e&&"password"!==e&&"attributes"!==e&&(e=(n.needPrefix(e)?"custom:":"")+e,n.user.attributes[e]=r[t])});var t=!1;if(this.signUpFields.forEach(function(e){e.label===n.getUsernameLabel()&&(n.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),n.user.username=n.user.attributes[e.key]||n.user.username,t=!0)}),!t&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=n.user.username;n.user={},n.onAlertClose(),n.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return n._setError(e)})},kE.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},kE.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},kE.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},kE.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},kE.prototype.onAlertClose=function(){this._setError(null)},kE.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},kE.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},kE.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},kE.prototype.getUsernameLabel=function(){return iE[this._usernameAttributes]||this._usernameAttributes},kE.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},kE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-core",template:rC}]}],kE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},kE.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],usernameAttributes:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}]},kE);function kE(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=_E,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var TE,PE,g_=(TE=function(e,t){return(TE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}TE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),zC='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+G_.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+G_.bodySection+'">\n    <div class="amplify-form-header" data-test="'+G_.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+G_.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+G_.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+G_.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+G_.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',OE=(g_(xE,PE=IE),xE.prototype.setProp=function(e){return this.user[e.name]=e.value},xE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:zC}]}],xE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},xE);function xE(e){var t=PE.call(this,e)||this;return t.amplifyService=e,t}function NE(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}NE.prototype.ngOnInit=function(){this.loadComponent()},NE.prototype.ngOnDestroy=function(){},NE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(OE,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new wi(IE,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},NE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],NE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},NE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},oC=NE;var mE='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+W_.section+'">\n  <div class="amplify-form-body" data-test="'+W_.bodySection+'">\n  <div class="amplify-form-header" data-test="'+W_.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+W_.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+W_.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+W_.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',RE=(Object.defineProperty(ME.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(ME.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide||this.hide},enumerable:!0,configurable:!0}),ME.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},ME.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},ME.prototype.setPassword=function(e){this.password=e},ME.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},ME.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},ME.prototype.onAlertClose=function(){this._setError(null)},ME.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},ME.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-core",template:mE}]}],ME.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},ME.propDecorators={authState:[{type:f.Input}],hide:[{type:f.Input}],data:[{type:f.Input}]},ME);function ME(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var UE,DE,H_=(UE=function(e,t){return(UE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}UE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),OC='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+W_.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+W_.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+W_.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+W_.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+W_.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+W_.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',LE=(H_(FE,DE=RE),FE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:OC}]}],FE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},FE);function FE(e){var t=DE.call(this,e)||this;return t.amplifyService=e,t}function jE(e){this.componentFactoryResolver=e,this.hide=[]}jE.prototype.ngOnInit=function(){this.loadComponent()},jE.prototype.ngOnDestroy=function(){},jE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(LE,{authState:this.authState,hide:this.hide}):new wi(RE,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},jE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],jE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},jE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},AS=jE;var rC='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+Y_.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",BE=(Object.defineProperty(zE.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),zE.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},zE.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},zE.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===dE.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===dE.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},zE.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},zE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-core",template:rC}]}],zE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},zE.propDecorators={authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},zE);function zE(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var VE,qE,G_=(VE=function(e,t){return(VE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}VE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g_='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+Y_.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",KE=(G_(HE,qE=BE),HE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-ionic",template:g_}]}],HE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},HE);function HE(e){var t=qE.call(this,e)||this;return t.amplifyService=e,t}function GE(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}GE.prototype.ngOnInit=function(){this.loadComponent()},GE.prototype.ngOnDestroy=function(){},GE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(KE,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new wi(BE,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},GE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],GE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},GE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},zC=GE;var mE='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+nC.section+'">\n    <div class="amplify-form-body" data-test="'+nC.bodySection+'">\n    <div class="amplify-form-header" data-test="'+nC.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+nC.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+nC.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+nC.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+nC.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+nC.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+nC.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',WE=(Object.defineProperty($E.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide||this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),$E.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty($E.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),$E.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty($E.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),$E.prototype.setCode=function(e){this.code=e},$E.prototype.setPassword=function(e){this.password=e},$E.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case dE.EMAIL:return this.email;case dE.PHONE_NUMBER:return oE(this.country_code,this.local_phone_number);default:return this.username}},$E.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},$E.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},$E.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},$E.prototype.onAlertClose=function(){this._setError(null)},$E.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},$E.prototype.getUsernameLabel=function(){return iE[this._usernameAttributes]||this._usernameAttributes},$E.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},$E.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-core",template:mE}]}],$E.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},$E.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},$E);function $E(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var YE,JE,W_=(YE=function(e,t){return(YE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}YE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),H_='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+nC.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+nC.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+nC.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+nC.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+nC.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+nC.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+nC.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',ZE=(W_(XE,JE=WE),XE.prototype.onCodeChange=function(e){this.country_code=e},XE.prototype.onNumberChange=function(e){this.local_phone_number=e},XE.prototype.setUsername=function(e){this.username=e},XE.prototype.setEmail=function(e){this.email=e},XE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:H_}]}],XE.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},XE);function XE(e){var t=JE.call(this,e)||this;return t.amplifyService=e,t}function QE(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}QE.prototype.ngOnInit=function(){this.loadComponent()},QE.prototype.ngOnDestroy=function(){},QE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(ZE,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new wi(WE,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},QE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],QE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},QE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},OC=QE;var eA=function(){return(eA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},rC='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+$_.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+$_.usernameInput+'"\n        />\n    </div>\n</div>\n',Y_=(Object.defineProperty(tA.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(tA.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(tA.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),tA.prototype.ngOnInit=function(){var e;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(e=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(e),this.username=e)},tA.prototype.ngOnDestroy=function(){},tA.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},tA.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},tA.prototype.getUsernameLabel=function(){return iE[this._usernameAttributes]||this._usernameAttributes},tA.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},tA.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(eA({},e))},tA.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-core",template:rC}]}],tA.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},tA.propDecorators={data:[{type:f.Input}],usernameAttributes:[{type:f.Input}],placeholder:[{type:f.Input}],usernameFieldChanged:[{type:f.Output}]},tA);function tA(e){this.amplifyService=e,this._usernameAttributes=dE.USERNAME,this._placeholder="",this.usernameFieldChanged=new f.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var nA=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],G_='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+$_.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+$_.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',g_=(Object.defineProperty(rA.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(rA.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(rA.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(rA.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(rA.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),rA.prototype.ngOnInit=function(){},rA.prototype.ngOnDestroy=function(){},rA.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},rA.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},rA.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},rA.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-core",template:G_}]}],rA.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},rA.propDecorators={data:[{type:f.Input}],placeholder:[{type:f.Input}],label:[{type:f.Input}],required:[{type:f.Input}],defaultCountryCode:[{type:f.Input}],phoneFieldChanged:[{type:f.Output}]},rA);function rA(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new f.EventEmitter,this._countries=nA}var oA=(iA.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},iA.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(iA.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(iA.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(iA.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),iA.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},iA.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],iA.ctorParameters=function(){return[{type:I_}]},iA.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},iA);function iA(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var sA,aA,uA=((mE=(sA=function(e,t){return(sA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}sA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(cA,aA=oA),cA.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],cA.ctorParameters=function(){return[{type:I_}]},cA);function cA(e){var t=aA.call(this,e)||this;return t.amplifyService=e,t}function lA(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}lA.prototype.ngOnInit=function(){this.loadComponent()},lA.prototype.ngOnDestroy=function(){},lA.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(uA,{path:this.path,options:this.options}):new wi(oA,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},lA.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],lA.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},lA.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[l]}]},nC=lA;var pA=(Object.defineProperty(dA.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(dA.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(dA.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),dA.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},dA.prototype.onImageClicked=function(){this.selected.emit(this.url)},dA.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},dA.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],dA.ctorParameters=function(){return[{type:I_}]},dA.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},dA);function dA(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var fA,hA,mA=((W_=(fA=function(e,t){return(fA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}fA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(gA,hA=pA),gA.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],gA.ctorParameters=function(){return[{type:I_}]},gA);function gA(e){var t=hA.call(this,e)||this;return t.amplifyService=e,t}function yA(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}yA.prototype.ngOnInit=function(){this.loadComponent()},yA.prototype.ngOnDestroy=function(){},yA.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(mA,{path:this.path,options:this.options}):new wi(pA,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},yA.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],yA.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},yA.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[l]}]},H_=yA;var vA=(Object.defineProperty(bA.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(bA.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(bA.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(bA.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),bA.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},bA.prototype.pick=function(e){var t,n=e.target.files[0];n&&(this._storageOptions.contentType||(this._storageOptions.contentType=n.type),n.name,n.size,n.type,this.picked.emit(n),this.s3ImagePath=this.s3ImagePath+"/"+n.name,this.s3ImageFile=n,t=this,(e=new FileReader).onload=function(e){e=e.target.result,t.photoUrl=e,t.hasPhoto=!0,t.loaded.emit(e)},e.readAsDataURL(n))},bA.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},bA.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},bA.prototype.onPhotoError=function(){this.hasPhoto=!1},bA.prototype.onAlertClose=function(){this._setError(null)},bA.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},bA.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],bA.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},bA.propDecorators={url:[{type:f.Input}],storageOptions:[{type:f.Input}],path:[{type:f.Input}],data:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}]},bA);function bA(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var wA,SA,CA=((rC=(wA=function(e,t){return(wA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}wA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(_A,SA=vA),_A.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],_A.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},_A);function _A(e){var t=SA.call(this,e)||this;return t.amplifyService=e,t}function EA(e){this.componentFactoryResolver=e,this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter}EA.prototype.ngOnInit=function(){this.loadComponent()},EA.prototype.ngOnDestroy=function(){},EA.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(CA,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new wi(vA,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.picked.subscribe(function(e){t.picked.emit(e)}),n.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),n.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},EA.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],EA.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},EA.propDecorators={framework:[{type:f.Input}],url:[{type:f.Input}],path:[{type:f.Input}],storageOptions:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[l]}]},G_=EA;function AA(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function IA(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}require("./aws-lex-audio.js");var kA={INITIAL:{MESSAGE:"Type your message or click  🎤",ICON:"🎤"},LISTENING:{MESSAGE:"Listening... click 🔴 again to cancel",ICON:"🔴"},SENDING:{MESSAGE:"Please wait...",ICON:"🔊"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},TA={silenceDetectionConfig:{time:2e3,amplitude:.2}},PA=(Object.defineProperty(OA.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=void 0!==e.conversationModeOn&&e.conversationModeOn,this.voiceEnabled=void 0!==e.voiceEnabled&&e.voiceEnabled,this.textEnabled=void 0===e.textEnabled||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",kA.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",kA.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(OA.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(OA.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(OA.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),OA.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},OA.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},OA.prototype.onInputChange=function(e){this.inputText=e},OA.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},OA.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=kA.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=kA.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},OA.prototype.onError=function(e){this.logger.error(e)},OA.prototype.lexResponseHandler=function(){return AA(this,void 0,void 0,function(){var t;return IA(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return t=e.sent(),this.lexResponse=t,this.currentVoiceState=kA.SPEAKING.MESSAGE,this.micText=kA.SPEAKING.ICON,this.micButtonDisabled=!0,t={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",t.bot=this.lexResponse.message,t.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(t),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},OA.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=kA.LISTENING.MESSAGE,e.micText=kA.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=kA.INITIAL.MESSAGE,e.micText=kA.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=kA.INITIAL.MESSAGE,this.micText=kA.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},OA.prototype.micButtonHandler=function(){return AA(this,void 0,void 0,function(){return IA(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=kA.LISTENING.MESSAGE,this.micText=kA.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},OA.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],OA.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},OA.propDecorators={complete:[{type:f.Output}],data:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearOnComplete:[{type:f.Input}]},OA);function OA(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=kA.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=kA.INITIAL.ICON,this.voiceConfig=TA,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new f.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=kA.SENDING.MESSAGE,n.audioInput=e,n.micText=kA.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var xA,NA,RA=((mE=(xA=function(e,t){return(xA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}xA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(MA,NA=PA),MA.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],MA.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},MA);function MA(e,t){return(e=NA.call(this,e,t)||this).amplifyService=t,e}function UA(e){this.componentFactoryResolver=e,this.complete=new f.EventEmitter}function DA(){}UA.prototype.ngOnInit=function(){this.loadComponent()},UA.prototype.ngOnDestroy=function(){},UA.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(RA,e):new wi(PA,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component);(e=this.componentHost.viewContainerRef).clear(),(r=e.createComponent(r)).instance.data=n.data,r.instance.complete.subscribe(function(e){t.complete.emit(e)})},UA.decorators=[{type:f.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],UA.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},UA.propDecorators={framework:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearComplete:[{type:f.Input}],conversationModeOn:[{type:f.Input}],voiceConfig:[{type:f.Input}],voiceEnabled:[{type:f.Input}],textEnabled:[{type:f.Input}],complete:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[l]}]},W_=UA,Object.defineProperty(DA.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),DA.decorators=[{type:f.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],DA.propDecorators={title:[{type:f.Input}]},rC=DA;function LA(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function FA(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var mE='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+D_+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+L_+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+F_+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+q_+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+K_+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',jA=(Object.defineProperty(BA.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),BA.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},BA.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},BA.prototype.loadAndStartScene=function(){return LA(this,void 0,void 0,function(){var t,n,r=this;return FA(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,n),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return r.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return r.showEnableAudio=!0}),[2]}})})},BA.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},BA.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},BA.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},BA.prototype.maximize=function(){return LA(this,void 0,void 0,function(){var t;return FA(this,function(e){return((t=document.getElementById("sumerian-scene-container")).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},BA.prototype.minimize=function(){return LA(this,void 0,void 0,function(){var t;return FA(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},BA.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-core",template:mE}]}],BA.ctorParameters=function(){return[{type:I_}]},BA.propDecorators={sceneName:[{type:f.Input}],data:[{type:f.Input}]},BA);function BA(e){var t=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){t.loadPercentage=100*e},this.amplifyUI=M,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var zA,VA,q_='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+D_+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+L_+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+F_+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+q_+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+K_+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',qA=((mE=(zA=function(e,t){return(zA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(KA,VA=jA),KA.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-ionic",template:q_}]}],KA.ctorParameters=function(){return[{type:I_}]},KA);function KA(e){var t=VA.call(this,e)||this;return t.amplifyService=e,t}function HA(e){this.componentFactoryResolver=e}function GA(){this.AmplifyUI=M}function WA(){}HA.prototype.ngOnInit=function(){this.loadComponent()},HA.prototype.ngOnDestroy=function(){},HA.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new wi(qA,{sceneName:this.sceneName}):new wi(jA,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},HA.decorators=[{type:f.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],HA.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},HA.propDecorators={framework:[{type:f.Input}],sceneName:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[l]}]},K_=HA,GA.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-core",template:'\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+j_+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+B_+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+V_+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+z_+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n"}]}],GA.ctorParameters=function(){return[]},GA.propDecorators={loadPercentage:[{type:f.Input}],sceneName:[{type:f.Input}],sceneError:[{type:f.Input}]},q_=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},K_=[M_,T_,HC,J_,fE,sE,GC,gE,oC,IE,AS,RE,zC,BE,OC,WE,Y_,g_,nC,oA,H_,pA,G_,vA,W_,PA,rC,K_,jA,mE=GA],WA.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,c],declarations:q_([l],K_),entryComponents:q_(K_),providers:[],exports:q_(K_)}]}],l=WA;var $A,YA,q_=($A=function(e,t){return($A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}$A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),K_='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+$_.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+$_.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',g_=(q_(JA,YA=g_),JA.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:K_}]}],JA.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},JA);function JA(e){var t=YA.call(this,e)||this;return t.amplifyService=e,t}var ZA,XA,K_=(ZA=function(e,t){return(ZA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ZA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),$_='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+$_.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+$_.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',Y_=(K_(QA,XA=Y_),QA.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-ionic",template:$_}]}],QA.ctorParameters=function(){return[{type:I_,decorators:[{type:f.Inject,args:[I_]}]}]},QA);function QA(e){var t=XA.call(this,e)||this;return t.amplifyService=e,t}var eI,tI,z_='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+j_+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+B_+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+V_+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+z_+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",mE=(($_=(eI=function(e,t){return(eI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}eI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(nI,tI=mE),nI.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-ionic",template:z_}]}],nI.ctorParameters=function(){return[]},nI);function nI(){return tI.call(this)||this}function rI(){}z_=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},mE=[N_,eE,lE,ZE,KE,wE,OE,Y_,g_,LE,CA,uA,mA,RA,qA,mE],rI.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,c],declarations:z_(mE),entryComponents:z_(mE),providers:[I_],schemas:[f.CUSTOM_ELEMENTS_SCHEMA],exports:z_(mE)}]}],mE=rI,e.AmplifyAngularModule=l,e.AmplifyIonicModule=mE,e.AmplifyModules=function(e){return new I_(e)},e.AmplifyService=I_,Object.defineProperty(e,"__esModule",{value:!0})});