!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("url"),require("buffer"),require("http"),require("fs"),require("os"),require("path"),require("child_process"),require("crypto"),require("uuid"),require("https"),require("stream"),require("http2"),require("process"),require("@aws-crypto/crc32"),require("lodash/isEmpty"),require("lodash/isEqual"),require("lodash/get"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("isomorphic-unfetch"),require("js-cookie"),require("fast-xml-parser"),require("axios"),require("events"),require("zen-observable"),require("paho-mqtt"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","url","buffer","http","fs","os","path","child_process","crypto","uuid","https","stream","http2","process","@aws-crypto/crc32","lodash/isEmpty","lodash/isEqual","lodash/get","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","isomorphic-unfetch","js-cookie","fast-xml-parser","axios","events","zen-observable","paho-mqtt","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.url,e.buffer,e.http,e.fs,e.os,e.path,e.child_process,e.crypto$1,e.uuid,e.https,e.stream,e.http2,e.process$1,e.crc32,e.isEmpty,e.isEqual,e.get,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,0,e.Cookies,e.fastXmlParser,e.axios,e.events,e.zenObservable,e.Paho,e.AmplifyUI)}(this,function(e,f,t,A,m,g,v,y,a,o,l,i,n,h,b,s,r,u,c,p,d,S,w,C,_,E,I,k,T,P,O,x,L,N,R){"use strict";var M="default"in A?A.default:A;p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,S=S&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S,w=w&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C,_=_&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_,E=E&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,L=L&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L;var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function U(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function j(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function B(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(o<3?i(s):3<o?i(t,n,s):i(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function z(n,r){return function(e,t){r(e,t,n)}}function V(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function q(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function K(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function H(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function W(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(G(arguments[t]));return e}function $(e){return this instanceof $?(this.v=e,this):new $(e)}function Y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o=[],s={};return r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(r){i[r]&&(s[r]=function(n){return new Promise(function(e,t){1<o.push([r,n,e,t])||a(r,n)})})}function a(e,t){try{(n=i[e](t)).value instanceof $?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function J(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=H(s),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=s[o]&&function(i){return new Promise(function(e,t){var n,r;i=s[o](i),n=e,e=t,r=i.done,t=i.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function Z(e){return"function"==typeof e}var X=!1,Q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,X=e},get useDeprecatedSynchronousErrorHandling(){return X}};function ee(e){setTimeout(function(){throw e},0)}var te={closed:!0,next:function(e){},error:function(e){if(Q.useDeprecatedSynchronousErrorHandling)throw e;ee(e)},complete:function(){}},ne=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function re(e){return null!==e&&"object"==typeof e}var ie=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),oe=function(){function u(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var e;return u.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof u)e.remove(this);else if(null!==e)for(var o=0;o<e.length;++o)e[o].remove(this);if(Z(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){t=e instanceof ie?se(e.errors):[e]}}if(ne(i))for(var o=-1,s=i.length;++o<s;){var a=i[o];if(re(a))try{a.unsubscribe()}catch(e){t=t||[],e instanceof ie?t=t.concat(se(e.errors)):t.push(e)}}if(t)throw new ie(t)}},u.prototype.add=function(e){var t,n=e;if(!e)return u.EMPTY;switch(typeof e){case"function":n=new u(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof u||(t=n,(n=new u)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof u){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},u.prototype.remove=function(e){var t=this._subscriptions;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},u.EMPTY=((e=new u).closed=!0,e),u}();function se(e){return e.reduce(function(e,t){return e.concat(t instanceof ie?t.errors:t)},[])}var ae=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ue=function(i){function o(e,t,n){var r=i.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=te;break;case 1:if(!e){r.destination=te;break}if("object"==typeof e){e instanceof o?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new ce(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new ce(r,e,t,n)}return r}return U(o,i),o.prototype[ae]=function(){return this},o.create=function(e,t,n){n=new o(e,t,n);return n.syncErrorThrowable=!1,n},o.prototype.next=function(e){this.isStopped||this._next(e)},o.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},o.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},o.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},o.prototype._next=function(e){this.destination.next(e)},o.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},o.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},o.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},o}(oe),ce=function(s){function e(e,t,n,r){var i,o=s.call(this)||this;o._parentSubscriber=e;e=o;return Z(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==te&&(Z((e=Object.create(t)).unsubscribe)&&o.add(e.unsubscribe.bind(e)),e.unsubscribe=o.unsubscribe.bind(o))),o._context=e,o._next=i,o._error=n,o._complete=r,o}return U(e,s),e.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,Q.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Q.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):ee(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;ee(e)}}},e.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},Q.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Q.useDeprecatedSynchronousErrorHandling)throw e;ee(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Q.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Q.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(ee(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(ue);var le=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function pe(e){return e}var de=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,n=function(e,t,n){if(e){if(e instanceof ue)return e;if(e[ae])return e[ae]()}return e||t||n?new ue(e,t,n):new ue(te)}(e,t,n);if(r?n.add(r.call(n,this.source)):n.add(this.source||Q.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),Q.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Q.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,t=t.isStopped;if(n||t)return;e=r&&r instanceof ue?r:null}return 1}(t)?console.warn(e):t.error(e)}},n.prototype.forEach=function(r,e){var i=this;return new(e=fe(e))(function(e,t){var n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[le]=function(){return this},n.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?pe:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},n.prototype.toPromise=function(e){var r=this;return new(e=fe(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function fe(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var he=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),ge=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return U(e,r),e.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},e}(oe),ve=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return U(e,n),e}(ue),me=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return U(e,t),e.prototype[ae]=function(){return new ve(this)},e.prototype.lift=function(e){var t=new ye(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new he;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new he;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new he;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new he;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new he;return this.hasError?(e.error(this.thrownError),oe.EMPTY):this.isStopped?(e.complete(),oe.EMPTY):(this.observers.push(e),new ge(this,e))},e.prototype.asObservable=function(){var e=new de;return e.source=this,e},e.create=function(e,t){return new ye(e,t)},e}(de),ye=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return U(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):oe.EMPTY},e}(me);function be(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Se(t,n))}}var Se=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new we(e,this.project,this.thisArg))},e}(),we=function(r){function e(e,t,n){e=r.call(this,e)||this;return e.project=t,e.count=0,e.thisArg=n||e,e}return U(e,r),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(ue);function Ce(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}function _e(e){return e&&"number"==typeof e.length&&"function"!=typeof e}var Ee=Ce();function Ae(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Ie=function(e){if(e&&"function"==typeof e[le])return o=e,function(e){var t=o[le]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(_e(e))return i=e,function(e){for(var t=0,n=i.length;t<n&&!e.closed;t++)e.next(i[t]);e.complete()};if(Ae(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,ee),t};if(e&&"function"==typeof e[Ee])return r=e,function(t){for(var e=r[Ee]();;){var n=void 0;try{n=e.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var r,n,i,o,e=re(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function ke(e,t){if(null!=e){if((n=e)&&"function"==typeof n[le])return a=e,u=t,new de(function(t){var n=new oe;return n.add(u.schedule(function(){var e=a[le]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(Ae(e))return o=e,s=t,new de(function(t){var n=new oe;return n.add(s.schedule(function(){return o.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(_e(e))return r=e,i=t,new de(function(e){var t=new oe,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[Ee]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new de(function(r){var i,e=new oe;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(n.schedule(function(){i=t[Ee](),e.add(n.schedule(function(){if(!r.closed){try{var e=i.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,i,o,s,a,u,n;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Te(e,t){return t?ke(e,t):e instanceof de?e:new de(Ie(e))}function Pe(u,c){return new de(function(r){var i=u.length;if(0!==i)for(var o=new Array(i),s=0,a=0,e=0;e<i;e++)!function(t){var e=Te(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),o[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==i&&n||(a===i&&r.next(c?c.reduce(function(e,t,n){return e[t]=o[n],e},{}):o),r.complete())}}))}(e);else r.complete()})}var Oe=null;var xe=(Object.defineProperty(Le.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),Le);function Le(){this.resourceLoaderType=null}var Ne,Re=(U(Me,Ne=xe),Me.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Me.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Me.prototype.supportsDOMEvents=function(){return!0},Me.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Me.prototype.getAnimationPrefix=function(){return this._animationPrefix||""},Me.prototype.getTransitionEnd=function(){return this._transitionEnd||""},Me.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Me);function Me(){var t=Ne.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=i[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var De,Ue={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Fe={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},je={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"};f["ɵglobal"].Node&&(De=f["ɵglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var Be,ze=(U(Ve,Be=Re),Ve.prototype.parse=function(e){throw new Error("parse not implemented")},Ve.makeCurrent=function(){var e;e=new Ve,Oe=Oe||e},Ve.prototype.hasProperty=function(e,t){return t in e},Ve.prototype.setProperty=function(e,t,n){e[t]=n},Ve.prototype.getProperty=function(e,t){return e[t]},Ve.prototype.invoke=function(e,t,n){e[t].apply(e,n)},Ve.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},Ve.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},Ve.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},Ve.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(Ve.prototype,"attrToPropMap",{get:function(){return Ue},enumerable:!0,configurable:!0}),Ve.prototype.contains=function(e,t){return De.call(e,t)},Ve.prototype.querySelector=function(e,t){return e.querySelector(t)},Ve.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},Ve.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},Ve.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},Ve.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},Ve.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},Ve.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},Ve.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},Ve.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},Ve.prototype.getInnerHTML=function(e){return e.innerHTML},Ve.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},Ve.prototype.getOuterHTML=function(e){return e.outerHTML},Ve.prototype.nodeName=function(e){return e.nodeName},Ve.prototype.nodeValue=function(e){return e.nodeValue},Ve.prototype.type=function(e){return e.type},Ve.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},Ve.prototype.firstChild=function(e){return e.firstChild},Ve.prototype.nextSibling=function(e){return e.nextSibling},Ve.prototype.parentElement=function(e){return e.parentNode},Ve.prototype.childNodes=function(e){return e.childNodes},Ve.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},Ve.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},Ve.prototype.appendChild=function(e,t){e.appendChild(t)},Ve.prototype.removeChild=function(e,t){e.removeChild(t)},Ve.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},Ve.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},Ve.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},Ve.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},Ve.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},Ve.prototype.setInnerHTML=function(e,t){e.innerHTML=t},Ve.prototype.getText=function(e){return e.textContent},Ve.prototype.setText=function(e,t){e.textContent=t},Ve.prototype.getValue=function(e){return e.value},Ve.prototype.setValue=function(e,t){e.value=t},Ve.prototype.getChecked=function(e){return e.checked},Ve.prototype.setChecked=function(e,t){e.checked=t},Ve.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},Ve.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},Ve.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},Ve.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},Ve.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},Ve.prototype.createScriptTag=function(e,t,n){n=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return n.setAttribute(e,t),n},Ve.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},Ve.prototype.createShadowRoot=function(e){return e.createShadowRoot()},Ve.prototype.getShadowRoot=function(e){return e.shadowRoot},Ve.prototype.getHost=function(e){return e.host},Ve.prototype.clone=function(e){return e.cloneNode(!0)},Ve.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},Ve.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},Ve.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},Ve.prototype.addClass=function(e,t){e.classList.add(t)},Ve.prototype.removeClass=function(e,t){e.classList.remove(t)},Ve.prototype.hasClass=function(e,t){return e.classList.contains(t)},Ve.prototype.setStyle=function(e,t,n){e.style[t]=n},Ve.prototype.removeStyle=function(e,t){e.style[t]=""},Ve.prototype.getStyle=function(e,t){return e.style[t]},Ve.prototype.hasStyle=function(e,t,n){t=this.getStyle(e,t)||"";return n?t==n:0<t.length},Ve.prototype.tagName=function(e){return e.tagName},Ve.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t},Ve.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},Ve.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},Ve.prototype.getAttribute=function(e,t){return e.getAttribute(t)},Ve.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},Ve.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},Ve.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},Ve.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},Ve.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},Ve.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},Ve.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},Ve.prototype.getDefaultDocument=function(){return document},Ve.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},Ve.prototype.getTitle=function(e){return e.title},Ve.prototype.setTitle=function(e,t){e.title=t||""},Ve.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},Ve.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},Ve.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},Ve.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},Ve.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},Ve.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},Ve.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},Ve.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},Ve.prototype.adoptNode=function(e){return document.adoptNode(e)},Ve.prototype.getHref=function(e){return e.getAttribute("href")},Ve.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&je.hasOwnProperty(t)&&(t=je[t]))}return Fe[t]||t},Ve.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},Ve.prototype.getHistory=function(){return window.history},Ve.prototype.getLocation=function(){return window.location},Ve.prototype.getBaseHref=function(e){var t=function(){if(!Ke&&!(Ke=document.querySelector("base")))return null;return Ke.getAttribute("href")}();return null==t?null:function(e){qe=qe||document.createElement("a");return qe.setAttribute("href",e),"/"===qe.pathname.charAt(0)?qe.pathname:"/"+qe.pathname}(t)},Ve.prototype.resetBaseElement=function(){Ke=null},Ve.prototype.getUserAgent=function(){return window.navigator.userAgent},Ve.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},Ve.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},Ve.prototype.getComputedStyle=function(e){return getComputedStyle(e)},Ve.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},Ve.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},Ve.prototype.supportsCookies=function(){return!0},Ve.prototype.getCookie=function(e){return t["ɵparseCookieValue"](document.cookie,e)},Ve.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},Ve);function Ve(){return null!==Be&&Be.apply(this,arguments)||this}var qe,Ke=null;var He=t.DOCUMENT;function Ge(){return window.history.pushState}var We,$e=(U(Ye,We=t.PlatformLocation),Ye.prototype._init=function(){this.location=Oe.getLocation(),this._history=Oe.getHistory()},Ye.prototype.getBaseHrefFromDOM=function(){return Oe.getBaseHref(this._doc)},Ye.prototype.onPopState=function(e){Oe.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},Ye.prototype.onHashChange=function(e){Oe.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(Ye.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),Ye.prototype.pushState=function(e,t,n){Ge()?this._history.pushState(e,t,n):this.location.hash=n},Ye.prototype.replaceState=function(e,t,n){Ge()?this._history.replaceState(e,t,n):this.location.hash=n},Ye.prototype.forward=function(){this._history.forward()},Ye.prototype.back=function(){this._history.back()},Ye.decorators=[{type:f.Injectable}],Ye.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[He]}]}]},Ye);function Ye(e){var t=We.call(this)||this;return t._doc=e,t._init(),t}Je.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},Je.prototype.addTags=function(e,n){var r=this;return void 0===n&&(n=!1),e?e.reduce(function(e,t){return t&&e.push(r._getOrCreateElement(t,n)),e},[]):[]},Je.prototype.getTag=function(e){return e&&this._dom.querySelector(this._doc,"meta["+e+"]")||null},Je.prototype.getTags=function(e){if(!e)return[];e=this._dom.querySelectorAll(this._doc,"meta["+e+"]");return e?[].slice.call(e):[]},Je.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);t=this.getTag(t);return t?this._setMetaElementAttributes(e,t):this._getOrCreateElement(e,!0)},Je.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},Je.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},Je.prototype._getOrCreateElement=function(e,t){if(!(t=void 0===t?!1:t)){var n=this._parseSelector(e),n=this.getTag(n);if(n&&this._containsAttributes(e,n))return n}n=this._dom.createElement("meta");this._setMetaElementAttributes(e,n);e=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(e,n),n},Je.prototype._setMetaElementAttributes=function(t,n){var r=this;return Object.keys(t).forEach(function(e){return r._dom.setAttribute(n,e,t[e])}),n},Je.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},Je.prototype._containsAttributes=function(t,n){var r=this;return Object.keys(t).every(function(e){return r._dom.getAttribute(n,e)===t[e]})},Je.decorators=[{type:f.Injectable}],Je.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[He]}]}]};function Je(e){this._doc=e,this._dom=Oe}new f.InjectionToken("TRANSITION_ID");var Ze=(Xe.init=function(){f.setTestabilityGetter(new Xe)},Xe.prototype.addToWindow=function(n){f["ɵglobal"].getAngularTestability=function(e,t){t=n.findTestabilityInTree(e,t=void 0===t?!0:t);if(null==t)throw new Error("Could not find testability for element.");return t},f["ɵglobal"].getAllAngularTestabilities=function(){return n.getAllTestabilities()},f["ɵglobal"].getAllAngularRootElements=function(){return n.getAllRootElements()};f["ɵglobal"].frameworkStabilizers||(f["ɵglobal"].frameworkStabilizers=[]),f["ɵglobal"].frameworkStabilizers.push(function(t){function n(e){i=i||e,0==--r&&t(i)}var e=f["ɵglobal"].getAllAngularTestabilities(),r=e.length,i=!1;e.forEach(function(e){e.whenStable(n)})})},Xe.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Oe.isShadowRoot(t)?this.findTestabilityInTree(e,Oe.getHost(t),!0):this.findTestabilityInTree(e,Oe.parentElement(t),!0):null},Xe);function Xe(){}Qe.prototype.getTitle=function(){return Oe.getTitle(this._doc)},Qe.prototype.setTitle=function(e){Oe.setTitle(this._doc,e)},Qe.decorators=[{type:f.Injectable}],Qe.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[He]}]}]};function Qe(e){this._doc=e}function et(e,t){"undefined"!=typeof COMPILED&&COMPILED||((f["ɵglobal"].ng=f["ɵglobal"].ng||{})[e]=t)}var tt={ApplicationRef:f.ApplicationRef,NgZone:f.NgZone};function nt(e){return f.getDebugNode(e)}f.APP_INITIALIZER,f.NgProbeToken,new f.Optional;var rt=new f.InjectionToken("EventManagerPlugins"),it=(ot.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},ot.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},ot.prototype.getZone=function(){return this._zone},ot.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},ot.decorators=[{type:f.Injectable}],ot.ctorParameters=function(){return[{type:Array,decorators:[{type:f.Inject,args:[rt]}]},{type:f.NgZone}]},ot);function ot(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var st=(at.prototype.addGlobalEventListener=function(e,t,n){e=Oe.getGlobalEventTarget(this._doc,e);if(!e)throw new Error("Unsupported event target "+e+" for event "+t);return this.addEventListener(e,t,n)},at);function at(e){this._doc=e}var ut=(ct.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},ct.prototype.onStylesAdded=function(e){},ct.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},ct.decorators=[{type:f.Injectable}],ct.ctorParameters=function(){return[]},ct);function ct(){this._stylesSet=new Set}var lt,pt=(U(dt,lt=ut),dt.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},dt.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},dt.prototype.removeHost=function(e){this._hostNodes.delete(e)},dt.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},dt.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return Oe.remove(e)})},dt.decorators=[{type:f.Injectable}],dt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[He]}]}]},dt);function dt(e){var t=lt.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ht=/%COMP%/g,gt="_nghost-%COMP%",vt="_ngcontent-%COMP%";function mt(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?mt(e,i,n):(i=i.replace(ht,e),n.push(i))}return n}function yt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}bt.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case f.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new At(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case f.ViewEncapsulation.Native:return new Tt(this.eventManager,this.sharedStylesHost,e,t);default:return this.rendererByCompId.has(t.id)||(n=mt(t.id,t.styles,[]),this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(t.id,this.defaultRenderer)),this.defaultRenderer}},bt.prototype.begin=function(){},bt.prototype.end=function(){},bt.decorators=[{type:f.Injectable}],bt.ctorParameters=function(){return[{type:it},{type:pt}]};function bt(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new St(e)}var St=(wt.prototype.destroy=function(){},wt.prototype.createElement=function(e,t){return t?document.createElementNS(ft[t],e):document.createElement(e)},wt.prototype.createComment=function(e){return document.createComment(e)},wt.prototype.createText=function(e){return document.createTextNode(e)},wt.prototype.appendChild=function(e,t){e.appendChild(t)},wt.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},wt.prototype.removeChild=function(e,t){e&&e.removeChild(t)},wt.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},wt.prototype.parentNode=function(e){return e.parentNode},wt.prototype.nextSibling=function(e){return e.nextSibling},wt.prototype.setAttribute=function(e,t,n,r){r?(t=r+":"+t,(r=ft[r])?e.setAttributeNS(r,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},wt.prototype.removeAttribute=function(e,t,n){var r;n?(r=ft[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},wt.prototype.addClass=function(e,t){e.classList.add(t)},wt.prototype.removeClass=function(e,t){e.classList.remove(t)},wt.prototype.setStyle=function(e,t,n,r){r&f.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&f.RendererStyleFlags2.Important?"important":""):e.style[t]=n},wt.prototype.removeStyle=function(e,t,n){n&f.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},wt.prototype.setProperty=function(e,t,n){_t(t,"property"),e[t]=n},wt.prototype.setValue=function(e,t){e.nodeValue=t},wt.prototype.listen=function(e,t,n){return _t(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yt(n)):this.eventManager.addEventListener(e,t,yt(n))},wt);function wt(e){this.eventManager=e,this.data=Object.create(null)}var Ct="@".charCodeAt(0);function _t(e,t){if(e.charCodeAt(0)===Ct)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Et,At=(U(It,Et=St),It.prototype.applyToHost=function(e){Et.prototype.setAttribute.call(this,e,this.hostAttr,"")},It.prototype.createElement=function(e,t){t=Et.prototype.createElement.call(this,e,t);return Et.prototype.setAttribute.call(this,t,this.contentAttr,""),t},It);function It(e,t,n){var r=Et.call(this,e)||this,e=mt((r.component=n).id,n.styles,[]);return t.addStyles(e),r.contentAttr=(e=n.id,vt.replace(ht,e)),r.hostAttr=(n=n.id,gt.replace(ht,n)),r}var kt,Tt=(U(Pt,kt=St),Pt.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Pt.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Pt.prototype.appendChild=function(e,t){return kt.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Pt.prototype.insertBefore=function(e,t,n){return kt.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Pt.prototype.removeChild=function(e,t){return kt.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Pt.prototype.parentNode=function(e){return this.nodeOrShadowRoot(kt.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},Pt);function Pt(e,t,n,r){var i=kt.call(this,e)||this;i.sharedStylesHost=t,i.hostEl=n,i.component=r,i.shadowRoot=n.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var o=mt(r.id,r.styles,[]),s=0;s<o.length;s++){var a=document.createElement("style");a.textContent=o[s],i.shadowRoot.appendChild(a)}return i}var Ot,xt="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Lt=xt("addEventListener"),Nt=xt("removeEventListener"),Rt={},Mt="removeEventListener",Dt="__zone_symbol__propagationStopped",Ut="__zone_symbol__stopImmediatePropagation",Ft="undefined"!=typeof Zone&&Zone[xt("BLACK_LISTED_EVENTS")];Ft&&(Ot={},Ft.forEach(function(e){Ot[e]=e}));function jt(e){return!!Ot&&Ot.hasOwnProperty(e)}function Bt(e){var t=Rt[e.type];if(t){t=this[t];if(t){var n=[e];if(1===t.length)return(r=t[0]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n);for(var r,i=t.slice(),o=0;o<i.length&&!0!==e[Dt];o++)(r=i[o]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n)}}}var zt;U(Vt,zt=st),Vt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[Ut]||(e=Event.prototype[Ut]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[Dt]=!0),e&&e.apply(this,arguments)}))},Vt.prototype.supports=function(e){return!0},Vt.prototype.addEventListener=function(e,t,n){var r=this,i=e[Lt],o=n;if(!i||f.NgZone.isInAngularZone()&&!jt(t))e.addEventListener(t,o,!1);else{var n=(n=Rt[t])||(Rt[t]=xt("ANGULAR"+t+"FALSE")),i=(s=e[n])&&0<s.length,s=s||(e[n]=[]),n=jt(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:n,handler:o});else{for(var a=!1,u=0;u<s.length;u++)if(s[u].handler===o){a=!0;break}a||s.push({zone:n,handler:o})}i||e[Lt](t,Bt,!1)}return function(){return r.removeEventListener(e,t,o)}},Vt.prototype.removeEventListener=function(e,t,n){var r=e[Nt];if(!r)return e[Mt].apply(e,[t,n,!1]);var i=Rt[t],o=i&&e[i];if(!o)return e[Mt].apply(e,[t,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,Bt,!1]):e[Mt].apply(e,[t,n,!1])},Vt.decorators=[{type:f.Injectable}],Vt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[He]}]},{type:f.NgZone}]};function Vt(e,t){e=zt.call(this,e)||this;return e.ngZone=t,e.patchEvent(),e}var qt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Kt=new f.InjectionToken("HammerGestureConfig"),Ht=(Gt.prototype.buildHammer=function(e){var t,n=new Hammer(e);for(t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},Gt.decorators=[{type:f.Injectable}],Gt.ctorParameters=function(){return[]},Gt);function Gt(){this.events=[],this.overrides={}}var Wt;U($t,Wt=st),$t.prototype.supports=function(e){if(!qt.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},$t.prototype.addEventListener=function(n,r,i){var o=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){i(e)})}var t=o._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},$t.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},$t.decorators=[{type:f.Injectable}],$t.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[He]}]},{type:Ht,decorators:[{type:f.Inject,args:[Kt]}]}]};function $t(e,t){e=Wt.call(this,e)||this;return e._config=t,e}var Yt,Jt=["alt","control","meta","shift"],Zt={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};U(Xt,Yt=st),Xt.prototype.supports=function(e){return null!=Xt.parseEventName(e)},Xt.prototype.addEventListener=function(e,t,n){var r=Xt.parseEventName(t),i=Xt.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Oe.onAndCancel(e,r.domEventName,i)})},Xt.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var e=Xt._normalizeKey(n.pop()),r="";if(Jt.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r+=e+".")}),r+=e,0!=n.length||0===e.length)return null;e={};return e.domEventName=t,e.fullKey=r,e},Xt.getEventFullKey=function(t){var n="",r=Oe.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),Jt.forEach(function(e){e!=r&&(0,Zt[e])(t)&&(n+=e+".")}),n+=r},Xt.eventCallback=function(t,n,r){return function(e){Xt.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},Xt._normalizeKey=function(e){return"esc"!==e?e:"escape"},Xt.decorators=[{type:f.Injectable}],Xt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[He]}]}]};function Xt(e){return Yt.call(this,e)||this}var Qt=(en.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);t=t.response.body;return t.removeChild(t.firstChild),t},en.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},en.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},en.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var i=t[e];this.DOM.isElementNode(i)&&this.stripCustomNsAttrs(i)}},en);function en(e,t){this.defaultDoc=e,this.DOM=t;e=this.DOM.createHtmlDocument();this.inertBodyElement=e.body,null==this.inertBodyElement&&(t=this.DOM.createElement("html",e),this.inertBodyElement=this.DOM.createElement("body",e),this.DOM.appendChild(t,this.inertBodyElement),this.DOM.appendChild(e,t)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var tn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,nn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function rn(e){return(e=String(e)).match(tn)||e.match(nn)?e:(f.isDevMode()&&Oe.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function on(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function sn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++){var o,s=i[r];for(o in s)s.hasOwnProperty(o)&&(n[o]=!0)}return n}var an=on("area,br,col,hr,img,wbr"),un=on("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cn=on("rp,rt"),ln=sn(cn,un),pn=sn(un,on("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dn=sn(cn,on("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fn=sn(an,pn,dn,ln),hn=on("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gn=on("srcset"),vn=on("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),mn=sn(hn,gn,vn),yn=(bn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},bn.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();fn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();mn.hasOwnProperty(n)?(hn[n]&&(e=rn(e)),gn[n]&&(e=String(e).split(",").map(function(e){return rn(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(_n(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},bn.prototype.endElement=function(e){e=this.DOM.nodeName(e).toLowerCase();fn.hasOwnProperty(e)&&!an.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},bn.prototype.chars=function(e){this.buf.push(_n(e))},bn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},bn);function bn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=Oe}var Sn,wn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cn=/([^\#-~ |!])/g;function _n(e){return e.replace(/&/g,"&amp;").replace(wn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Cn,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var En=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),An=/^url\(([^)]+)\)$/;function In(e){if(!(e=String(e).trim()))return"";var t=e.match(An);return t&&rn(t[1])===t[1]||e.match(En)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(f.isDevMode()&&Oe.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}var kn;U(Tn,kn=function(){}),Tn.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case f.SecurityContext.NONE:return t;case f.SecurityContext.HTML:return t instanceof Ln?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=Oe,r=null;try{Sn=Sn||new Qt(e,n);var i=t?String(t):"",r=Sn.getInertBodyElement(i),o=5,s=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable")}while(o--,i=s,s=n.getInnerHTML(r),r=Sn.getInertBodyElement(i),i!==s);var a=new yn,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return f.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case f.SecurityContext.STYLE:return t instanceof Mn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),In(t));case f.SecurityContext.SCRIPT:if(t instanceof Fn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case f.SecurityContext.URL:return t instanceof Kn||t instanceof zn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),rn(String(t)));case f.SecurityContext.RESOURCE_URL:if(t instanceof Kn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},Tn.prototype.checkNotSafeValue=function(e,t){if(e instanceof Pn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},Tn.prototype.bypassSecurityTrustHtml=function(e){return new Ln(e)},Tn.prototype.bypassSecurityTrustStyle=function(e){return new Mn(e)},Tn.prototype.bypassSecurityTrustScript=function(e){return new Fn(e)},Tn.prototype.bypassSecurityTrustUrl=function(e){return new zn(e)},Tn.prototype.bypassSecurityTrustResourceUrl=function(e){return new Kn(e)},Tn.decorators=[{type:f.Injectable}],Tn.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[He]}]}]};function Tn(e){var t=kn.call(this)||this;return t._doc=e,t}var Pn=(On.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},On);function On(e){this.changingThisBreaksApplicationSecurity=e}var xn,Ln=(U(Nn,xn=Pn),Nn.prototype.getTypeName=function(){return"HTML"},Nn);function Nn(){return null!==xn&&xn.apply(this,arguments)||this}var Rn,Mn=(U(Dn,Rn=Pn),Dn.prototype.getTypeName=function(){return"Style"},Dn);function Dn(){return null!==Rn&&Rn.apply(this,arguments)||this}var Un,Fn=(U(jn,Un=Pn),jn.prototype.getTypeName=function(){return"Script"},jn);function jn(){return null!==Un&&Un.apply(this,arguments)||this}var Bn,zn=(U(Vn,Bn=Pn),Vn.prototype.getTypeName=function(){return"URL"},Vn);function Vn(){return null!==Bn&&Bn.apply(this,arguments)||this}var qn,Kn=(U(Hn,qn=Pn),Hn.prototype.getTypeName=function(){return"ResourceURL"},Hn);function Hn(){return null!==qn&&qn.apply(this,arguments)||this}var Gn=[{provide:f.PLATFORM_ID,useValue:t["ɵPLATFORM_BROWSER_ID"]},{provide:f.PLATFORM_INITIALIZER,useValue:function(){ze.makeCurrent(),Ze.init()},multi:!0},{provide:t.PlatformLocation,useClass:$e,deps:[He]},{provide:He,useFactory:function(){return document},deps:[]}];f.createPlatformFactory(f.platformCore,"browser",Gn);Wn.init=function(e){var t=new Wn;return t.store=e,t},Wn.prototype.get=function(e,t){return void 0!==this.store[e]?this.store[e]:t},Wn.prototype.set=function(e,t){this.store[e]=t},Wn.prototype.remove=function(e){delete this.store[e]},Wn.prototype.hasKey=function(e){return this.store.hasOwnProperty(e)},Wn.prototype.onSerialize=function(e,t){this.onSerializeCallbacks[e]=t},Wn.prototype.toJson=function(){for(var e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)},Wn.decorators=[{type:f.Injectable}],Wn.ctorParameters=function(){return[]};function Wn(){this.store={},this.onSerializeCallbacks={}}new f.Version("5.2.11");var $n=(Object.defineProperty(Yn.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Yn.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},Yn.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},Yn.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},Yn);function Yn(){}var Jn,Zn=(U(Xn,Jn=$n),Object.defineProperty(Xn.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Xn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Xn);function Xn(){return null!==Jn&&Jn.apply(this,arguments)||this}function Qn(e){return null==e||0===e.length}var er=new f.InjectionToken("NgValidators"),p=new f.InjectionToken("NgAsyncValidators"),tr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,nr=(rr.min=function(n){return function(e){if(Qn(e.value)||Qn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},rr.max=function(n){return function(e){if(Qn(e.value)||Qn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},rr.required=function(e){return Qn(e.value)?{required:!0}:null},rr.requiredTrue=function(e){return!0===e.value?null:{required:!0}},rr.email=function(e){return Qn(e.value)||tr.test(e.value)?null:{email:!0}},rr.minLength=function(t){return function(e){if(Qn(e.value))return null;e=e.value?e.value.length:0;return e<t?{minlength:{requiredLength:t,actualLength:e}}:null}},rr.maxLength=function(t){return function(e){e=e.value?e.value.length:0;return t<e?{maxlength:{requiredLength:t,actualLength:e}}:null}},rr.pattern=function(e){if(!e)return rr.nullValidator;var t,n="string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),new RegExp(t)):(t=e.toString(),e);return function(e){if(Qn(e.value))return null;e=e.value;return n.test(e)?null:{pattern:{requiredPattern:t,actualValue:e}}}},rr.nullValidator=function(e){return null},rr.compose=function(e){if(!e)return null;var n=e.filter(ir);return 0==n.length?null:function(e){return sr((t=e,n.map(function(e){return e(t)})));var t}},rr.composeAsync=function(e){if(!e)return null;var n=e.filter(ir);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(ne(n))return Pe(n,null);if(re(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Pe(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return Pe(e,null);var i=e.pop();return Pe(e=1===e.length&&ne(e[0])?e[0]:e,null).pipe(be(function(e){return i.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(or))).pipe(be(sr))}},rr);function rr(){}function ir(e){return null!=e}function or(e){e=f["ɵisPromise"](e)?Te(e):e;if(!f["ɵisObservable"](e))throw new Error("Expected validator to return Promise or Observable.");return e}function sr(e){e=e.reduce(function(e,t){return null!=t?F({},e,t):e},{});return 0===Object.keys(e).length?null:e}var d=new f.InjectionToken("NgValueAccessor"),S={provide:d,useExisting:f.forwardRef(function(){return ar}),multi:!0},ar=(ur.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},ur.prototype.registerOnChange=function(e){this.onChange=e},ur.prototype.registerOnTouched=function(e){this.onTouched=e},ur.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([f.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[S]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],ur));function ur(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}C={provide:d,useExisting:f.forwardRef(function(){return cr}),multi:!0};var xe=new f.InjectionToken("CompositionEventMode"),cr=(lr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},lr.prototype.registerOnChange=function(e){this.onChange=e},lr.prototype.registerOnTouched=function(e){this.onTouched=e},lr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},lr.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},lr.prototype._compositionStart=function(){this._composing=!0},lr.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},B([f.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[C]}),z(2,f.Optional()),z(2,f.Inject(xe)),V("design:paramtypes",[f.Renderer2,f.ElementRef,Boolean])],lr));function lr(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=Oe?Oe.getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}function pr(t){return t.validate?function(e){return t.validate(e)}:t}function dr(t){return t.validate?function(e){return t.validate(e)}:t}var Re={provide:d,useExisting:f.forwardRef(function(){return fr}),multi:!0},fr=(hr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},hr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},hr.prototype.registerOnTouched=function(e){this.onTouched=e},hr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([f.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Re]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],hr));function hr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function gr(){throw new Error("unimplemented")}var vr,mr=(U(yr,vr=$n),Object.defineProperty(yr.prototype,"validator",{get:gr,enumerable:!0,configurable:!0}),Object.defineProperty(yr.prototype,"asyncValidator",{get:gr,enumerable:!0,configurable:!0}),yr);function yr(){var e=null!==vr&&vr.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}ut={provide:d,useExisting:f.forwardRef(function(){return Sr}),multi:!0},br.prototype.add=function(e,t){this._accessors.push([e,t])},br.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},br.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},br.prototype._isSameGroup=function(e,t){return!!e[0].control&&(e[0]._parent===t._control._parent&&e[1].name===t.name)},Ft=B([f.Injectable()],br);function br(){this._accessors=[]}var Sr=(wr.prototype.ngOnInit=function(){this._control=this._injector.get(mr),this._checkName(),this._registry.add(this._control,this)},wr.prototype.ngOnDestroy=function(){this._registry.remove(this)},wr.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},wr.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},wr.prototype.fireUncheck=function(e){this.writeValue(e)},wr.prototype.registerOnTouched=function(e){this.onTouched=e},wr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},wr.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},wr.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},B([f.Input(),V("design:type",String)],wr.prototype,"name",void 0),B([f.Input(),V("design:type",String)],wr.prototype,"formControlName",void 0),B([f.Input(),V("design:type",Object)],wr.prototype,"value",void 0),B([f.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[ut]}),V("design:paramtypes",[f.Renderer2,f.ElementRef,Ft,f.Injector])],wr));function wr(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var st={provide:d,useExisting:f.forwardRef(function(){return Cr}),multi:!0},Cr=(_r.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},_r.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},_r.prototype.registerOnTouched=function(e){this.onTouched=e},_r.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},B([f.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[st]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],_r));function _r(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Er='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Ar='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Ir='\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',kr='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Tr='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ',Pr=(Or.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Er)},Or.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Ar+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+kr)},Or.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Er)},Or.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ar)},Or.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+Ir)},Or.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Or.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Or);function Or(){}un={provide:d,useExisting:f.forwardRef(function(){return Lr}),multi:!0};function xr(e,t){return null==e?""+t:(e+": "+(t=t&&"object"==typeof t?"Object":t)).slice(0,50)}var Lr=(Object.defineProperty(Nr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Nr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);e=xr(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},Nr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},Nr.prototype.registerOnTouched=function(e){this.onTouched=e},Nr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Nr.prototype._registerOption=function(){return(this._idCounter++).toString()},Nr.prototype._getOptionId=function(e){var t,n;try{for(var r=H(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o),e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Nr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},B([f.Input(),V("design:type",Function),V("design:paramtypes",[Function])],Nr.prototype,"compareWith",null),B([f.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[un]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],Nr));function Nr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ɵlooseIdentical"]}Object.defineProperty(Rr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(xr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Rr.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),Rr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Rr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},B([f.Input("ngValue"),V("design:type",Object),V("design:paramtypes",[Object])],Rr.prototype,"ngValue",null),B([f.Input("value"),V("design:type",Object),V("design:paramtypes",[Object])],Rr.prototype,"value",null),cn=B([f.Directive({selector:"option"}),z(2,f.Optional()),z(2,f.Host()),V("design:paramtypes",[f.ElementRef,f.Renderer2,Lr])],Rr);function Rr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}pn={provide:d,useExisting:f.forwardRef(function(){return Dr}),multi:!0};function Mr(e,t){return null==e?""+t:(e+": "+(t=(t="string"==typeof t?"'"+t+"'":t)&&"object"==typeof t?"Object":t)).slice(0,50)}var Dr=(Object.defineProperty(Ur.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Ur.prototype.writeValue=function(e){var n,t=this;this.value=e,e=Array.isArray(e)?(n=e.map(function(e){return t._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(e)},Ur.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var i=n.item(r),o=a._getOptionValue(i.value);t.push(o)}else for(n=e.options,r=0;r<n.length;r++)(i=n.item(r)).selected&&(o=a._getOptionValue(i.value),t.push(o));a.value=t,s(t)}},Ur.prototype.registerOnTouched=function(e){this.onTouched=e},Ur.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Ur.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},Ur.prototype._getOptionId=function(e){var t,n;try{for(var r=H(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o)._value,e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Ur.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},B([f.Input(),V("design:type",Function),V("design:paramtypes",[Function])],Ur.prototype,"compareWith",null),B([f.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[pn]}),V("design:paramtypes",[f.Renderer2,f.ElementRef])],Ur));function Ur(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ɵlooseIdentical"]}Object.defineProperty(Fr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Mr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Fr.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Mr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),Fr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Fr.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},Fr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},B([f.Input("ngValue"),V("design:type",Object),V("design:paramtypes",[Object])],Fr.prototype,"ngValue",null),B([f.Input("value"),V("design:type",Object),V("design:paramtypes",[Object])],Fr.prototype,"value",null),dn=B([f.Directive({selector:"option"}),z(2,f.Optional()),z(2,f.Host()),V("design:paramtypes",[f.ElementRef,f.Renderer2,Dr])],Fr);function Fr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function jr(e,t){return W(t.path,[e])}function Br(t,n){var r,i,o,e,s;t||Kr(n,"Cannot find control with"),n.valueAccessor||Kr(n,"No value accessor for form control with"),t.validator=nr.compose([t.validator,n.validator]),t.asyncValidator=nr.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(i=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&zr(r,i)}),o=n,t.registerOnChange(function(e,t){o.valueAccessor.writeValue(e),t&&o.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&zr(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function zr(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Vr(e,t){null==e&&Kr(t,"Cannot find control with"),e.validator=nr.compose([e.validator,t.validator]),e.asyncValidator=nr.composeAsync([e.asyncValidator,t.asyncValidator])}function qr(e){return Kr(e,"There is no FormControl instance attached to form control element with")}function Kr(e,t){e=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute";throw new Error(t+" "+e)}function Hr(e){return null!=e?nr.compose(e.map(pr)):null}function Gr(e){return null!=e?nr.composeAsync(e.map(dr)):null}function Wr(e,t){if(e.hasOwnProperty("model")){e=e.model;return e.isFirstChange()||!f["ɵlooseIdentical"](t,e.currentValue)}}var $r=[ar,Cr,fr,Lr,Dr,Sr];function Yr(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Jr(n,e){if(!e)return null;Array.isArray(e)||Kr(n,"Value accessor was not provided as an array for form control with");var r=void 0,i=void 0,o=void 0;return e.forEach(function(e){var t;e.constructor===cr?r=e:(t=e,$r.some(function(e){return t.constructor===e})?(i&&Kr(n,"More than one built-in value accessor matches form control with"),i=e):(o&&Kr(n,"More than one custom value accessor matches form control with"),o=e))}),o||i||r||(Kr(n,"No valid value accessor for form control with"),null)}function Zr(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function Xr(e,t,n,r){f.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Pr.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var Qr,ei=(U(ti,Qr=Zn),ti.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},ti.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(ti.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ti.prototype,"path",{get:function(){return jr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(ti.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(ti.prototype,"validator",{get:function(){return Hr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(ti.prototype,"asyncValidator",{get:function(){return Gr(this._asyncValidators)},enumerable:!0,configurable:!0}),ti.prototype._checkParentType=function(){},ti);function ti(){return null!==Qr&&Qr.apply(this,arguments)||this}Object.defineProperty(ni.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(ni.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),ln=ni;function ni(e){this._cd=e}var ri,vn={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},$e=(U(ii,ri=ln),B([f.Directive({selector:"[formControlName],[ngModel],[formControl]",host:vn}),z(0,f.Self()),V("design:paramtypes",[mr])],ii));function ii(e){return ri.call(this,e)||this}var oi,Gn=(U(si,oi=ln),B([f.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:vn}),z(0,f.Self()),V("design:paramtypes",[Zn])],si));function si(e){return oi.call(this,e)||this}var ai="VALID",ui="INVALID",ci="PENDING",li="DISABLED";function pi(e){e=fi(e)?e.validators:e;return Array.isArray(e)?Hr(e):e||null}function di(e,t){e=fi(t)?t.asyncValidators:e;return Array.isArray(e)?Gr(e):e||null}function fi(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}Object.defineProperty(hi.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(hi.prototype,"valid",{get:function(){return this.status===ai},enumerable:!0,configurable:!0}),Object.defineProperty(hi.prototype,"invalid",{get:function(){return this.status===ui},enumerable:!0,configurable:!0}),Object.defineProperty(hi.prototype,"pending",{get:function(){return this.status==ci},enumerable:!0,configurable:!0}),Object.defineProperty(hi.prototype,"disabled",{get:function(){return this.status===li},enumerable:!0,configurable:!0}),Object.defineProperty(hi.prototype,"enabled",{get:function(){return this.status!==li},enumerable:!0,configurable:!0}),Object.defineProperty(hi.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(hi.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(hi.prototype,"updateOn",{get:function(){return this._updateOn||(this.parent?this.parent.updateOn:"change")},enumerable:!0,configurable:!0}),hi.prototype.setValidators=function(e){this.validator=pi(e)},hi.prototype.setAsyncValidators=function(e){this.asyncValidator=di(e)},hi.prototype.clearValidators=function(){this.validator=null},hi.prototype.clearAsyncValidators=function(){this.asyncValidator=null},hi.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},hi.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},hi.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},hi.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},hi.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=ci)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},hi.prototype.disable=function(t){void 0===t&&(t={}),this.status=li,this.errors=null,this._forEachChild(function(e){e.disable(F({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},hi.prototype.enable=function(t){void 0===t&&(t={}),this.status=ai,this._forEachChild(function(e){e.enable(F({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},hi.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},hi.prototype.setParent=function(e){this._parent=e},hi.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ai&&this.status!==ci||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},hi.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},hi.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?li:ai},hi.prototype._runValidator=function(){return this.validator?this.validator(this):null},hi.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=ci,e=or(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},hi.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},hi.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},hi.prototype.get=function(e){return t=this,n=".",null==(e=e)||(e=!(e instanceof Array)?e.split(n):e)instanceof Array&&0===e.length?null:e.reduce(function(e,t){return e instanceof bi?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Ci&&e.at(t)||null},t);var t,n},hi.prototype.getError=function(e,t){t=t?this.get(t):this;return t&&t.errors?t.errors[e]:null},hi.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(hi.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),hi.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},hi.prototype._initObservables=function(){this.valueChanges=new f.EventEmitter,this.statusChanges=new f.EventEmitter},hi.prototype._calculateStatus=function(){return this._allControlsDisabled()?li:this.errors?ui:this._anyControlsHaveStatus(ci)?ci:this._anyControlsHaveStatus(ui)?ui:ai},hi.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},hi.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},hi.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},hi.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},hi.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},hi.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},hi.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},hi.prototype._setUpdateStrategy=function(e){fi(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},S=hi;function hi(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}var gi,vi=(U(mi,gi=S),mi.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},mi.prototype.patchValue=function(e,t){this.setValue(e,t=void 0===t?{}:t)},mi.prototype.reset=function(e,t){void 0===t&&(t={}),this._applyFormState(e=void 0===e?null:e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},mi.prototype._updateValue=function(){},mi.prototype._anyControls=function(e){return!1},mi.prototype._allControlsDisabled=function(){return this.disabled},mi.prototype.registerOnChange=function(e){this._onChange.push(e)},mi.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},mi.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},mi.prototype._forEachChild=function(e){},mi.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)},mi.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},mi);function mi(e,t,n){void 0===e&&(e=null);n=gi.call(this,pi(t),di(n,t))||this;return n._onChange=[],n._applyFormState(e),n._setUpdateStrategy(t),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n._initObservables(),n}var yi,bi=(U(Si,yi=S),Si.prototype.registerControl=function(e,t){return this.controls[e]||((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},Si.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Si.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},Si.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Si.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},Si.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Si.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Si.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Si.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof vi?t.value:t.getRawValue(),e})},Si.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},Si.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},Si.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},Si.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},Si.prototype._updateValue=function(){this.value=this._reduceValue()},Si.prototype._anyControls=function(n){var r=this,i=!1;return this._forEachChild(function(e,t){i=i||r.contains(t)&&n(e)}),i},Si.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},Si.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},Si.prototype._allControlsDisabled=function(){var t,e;try{for(var n=H(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var i=r.value;if(this.controls[i].enabled)return!1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<Object.keys(this.controls).length||this.disabled},Si.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},Si);function Si(e,t,n){n=yi.call(this,pi(t),di(n,t))||this;return n.controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var wi,Ci=(U(_i,wi=S),_i.prototype.at=function(e){return this.controls[e]},_i.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},_i.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},_i.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},_i.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(_i.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),_i.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},_i.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},_i.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},_i.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof vi?e.value:e.getRawValue()})},_i.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},_i.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},_i.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},_i.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},_i.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},_i.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},_i.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},_i.prototype._allControlsDisabled=function(){var t,e;try{for(var n=H(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<this.controls.length||this.disabled},_i.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},_i);function _i(e,t,n){n=wi.call(this,pi(t),di(n,t))||this;return n.controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var Ei,C={provide:Zn,useExisting:f.forwardRef(function(){return Ii})},Ai=Promise.resolve(null),Ii=(U(ki,Ei=Zn),ki.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(ki.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(ki.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(ki.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(ki.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),ki.prototype.addControl=function(t){var n=this;Ai.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Br(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},ki.prototype.getControl=function(e){return this.form.get(e.path)},ki.prototype.removeControl=function(t){var n=this;Ai.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),Zr(n._directives,t)})},ki.prototype.addFormGroup=function(n){var r=this;Ai.then(function(){var e=r._findContainer(n.path),t=new bi({});Vr(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},ki.prototype.removeFormGroup=function(t){var n=this;Ai.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},ki.prototype.getFormGroup=function(e){return this.form.get(e.path)},ki.prototype.updateModel=function(e,t){var n=this;Ai.then(function(){n.form.get(e.path).setValue(t)})},ki.prototype.setValue=function(e){this.control.setValue(e)},ki.prototype.onSubmit=function(e){return this.submitted=!0,Yr(this.form,this._directives),this.ngSubmit.emit(e),!1},ki.prototype.onReset=function(){this.resetForm()},ki.prototype.resetForm=function(e){this.form.reset(e=void 0===e?void 0:e),this.submitted=!1},ki.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},ki.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},B([f.Input("ngFormOptions"),V("design:type",Object)],ki.prototype,"options",void 0),B([f.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[C],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(er)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(p)),V("design:paramtypes",[Array,Array])],ki));function ki(e,t){var n=Ei.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new f.EventEmitter,n.form=new bi({},Hr(e),Gr(t)),n}var Ti=(Pi.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Er+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+Tr)},Pi.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Ar+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+kr)},Pi.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},Pi.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Ar+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+kr)},Pi);function Pi(){}var Oi,xi,xe={provide:Zn,useExisting:f.forwardRef(function(){return Li})},Li=(U(Ni,Oi=ei),(xi=Ni).prototype._checkParentType=function(){this._parent instanceof xi||this._parent instanceof Ii||Ti.modelGroupParentException()},B([f.Input("ngModelGroup"),V("design:type",String)],Ni.prototype,"name",void 0),xi=B([f.Directive({selector:"[ngModelGroup]",providers:[xe],exportAs:"ngModelGroup"}),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(er)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(p)),V("design:paramtypes",[Zn,Array,Array])],Ni));function Ni(e,t,n){var r=Oi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Ri,Re={provide:mr,useExisting:f.forwardRef(function(){return Di})},Mi=Promise.resolve(null),Di=(U(Ui,Ri=mr),Ui.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Wr(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},Ui.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(Ui.prototype,"path",{get:function(){return this._parent?jr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(Ui.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Ui.prototype,"validator",{get:function(){return Hr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Ui.prototype,"asyncValidator",{get:function(){return Gr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Ui.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Ui.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},Ui.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},Ui.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},Ui.prototype._setUpStandalone=function(){Br(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},Ui.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},Ui.prototype._checkParentType=function(){!(this._parent instanceof Li)&&this._parent instanceof ei?Ti.formGroupNameException():this._parent instanceof Li||this._parent instanceof Ii||Ti.modelParentException()},Ui.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ti.missingNameException()},Ui.prototype._updateValue=function(e){var t=this;Mi.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},Ui.prototype._updateDisabled=function(e){var t=this,e=e.isDisabled.currentValue,n=""===e||e&&"false"!==e;Mi.then(function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()})},B([f.Input(),V("design:type",String)],Ui.prototype,"name",void 0),B([f.Input("disabled"),V("design:type",Boolean)],Ui.prototype,"isDisabled",void 0),B([f.Input("ngModel"),V("design:type",Object)],Ui.prototype,"model",void 0),B([f.Input("ngModelOptions"),V("design:type",Object)],Ui.prototype,"options",void 0),B([f.Output("ngModelChange"),V("design:type",Object)],Ui.prototype,"update",void 0),B([f.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[Re],exportAs:"ngModel"}),z(0,f.Optional()),z(0,f.Host()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(er)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(p)),z(3,f.Optional()),z(3,f.Self()),z(3,f.Inject(d)),V("design:paramtypes",[Zn,Array,Array,Array])],Ui));function Ui(e,t,n,r){var i=Ri.call(this)||this;return i.control=new vi,i._registered=!1,i.update=new f.EventEmitter,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=Jr(i,r),i}var Fi,ji,Bi=new f.InjectionToken("NgModelWithFormControlWarning"),$n={provide:mr,useExisting:f.forwardRef(function(){return zi})},zi=(U(Vi,Fi=mr),ji=Vi,Object.defineProperty(Vi.prototype,"isDisabled",{set:function(e){Pr.disabledAttrWarning()},enumerable:!0,configurable:!0}),Vi.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Br(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Wr(e,this.viewModel)&&(Xr("formControl",ji,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(Vi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Vi.prototype,"validator",{get:function(){return Hr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Vi.prototype,"asyncValidator",{get:function(){return Gr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Vi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Vi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Vi.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},Vi._ngModelWarningSentOnce=!1,B([f.Input("formControl"),V("design:type",vi)],Vi.prototype,"form",void 0),B([f.Input("disabled"),V("design:type",Boolean),V("design:paramtypes",[Boolean])],Vi.prototype,"isDisabled",null),B([f.Input("ngModel"),V("design:type",Object)],Vi.prototype,"model",void 0),B([f.Output("ngModelChange"),V("design:type",Object)],Vi.prototype,"update",void 0),ji=B([f.Directive({selector:"[formControl]",providers:[$n],exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(er)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(p)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(d)),z(3,f.Optional()),z(3,f.Inject(Bi)),V("design:paramtypes",[Array,Array,Array,Object])],Vi));function Vi(e,t,n,r){var i=Fi.call(this)||this;return i._ngModelWarningConfig=r,i.update=new f.EventEmitter,i._ngModelWarningSent=!1,i._rawValidators=e||[],i._rawAsyncValidators=t||[],i.valueAccessor=Jr(i,n),i}var qi,ut={provide:Zn,useExisting:f.forwardRef(function(){return Ki})},Ki=(U(Hi,qi=Zn),Hi.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(Hi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Hi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Hi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Hi.prototype.addControl=function(e){var t=this.form.get(e.path);return Br(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},Hi.prototype.getControl=function(e){return this.form.get(e.path)},Hi.prototype.removeControl=function(e){Zr(this.directives,e)},Hi.prototype.addFormGroup=function(e){var t=this.form.get(e.path);Vr(t,e),t.updateValueAndValidity({emitEvent:!1})},Hi.prototype.removeFormGroup=function(e){},Hi.prototype.getFormGroup=function(e){return this.form.get(e.path)},Hi.prototype.addFormArray=function(e){var t=this.form.get(e.path);Vr(t,e),t.updateValueAndValidity({emitEvent:!1})},Hi.prototype.removeFormArray=function(e){},Hi.prototype.getFormArray=function(e){return this.form.get(e.path)},Hi.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},Hi.prototype.onSubmit=function(e){return this.submitted=!0,Yr(this.form,this.directives),this.ngSubmit.emit(e),!1},Hi.prototype.onReset=function(){this.resetForm()},Hi.prototype.resetForm=function(e){this.form.reset(e=void 0===e?void 0:e),this.submitted=!1},Hi.prototype._updateDomValue=function(){var i=this;this.directives.forEach(function(e){var t,n,r=i.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return qr(n)}),n.valueAccessor.registerOnTouched(function(){return qr(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&Br(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},Hi.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},Hi.prototype._updateValidators=function(){var e=Hr(this._validators);this.form.validator=nr.compose([this.form.validator,e]);e=Gr(this._asyncValidators);this.form.asyncValidator=nr.composeAsync([this.form.asyncValidator,e])},Hi.prototype._checkFormPresent=function(){this.form||Pr.missingFormException()},B([f.Input("formGroup"),V("design:type",bi)],Hi.prototype,"form",void 0),B([f.Output(),V("design:type",Object)],Hi.prototype,"ngSubmit",void 0),B([f.Directive({selector:"[formGroup]",providers:[ut],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(er)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(p)),V("design:paramtypes",[Array,Array])],Hi));function Hi(e,t){var n=qi.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new f.EventEmitter,n}var Gi,st={provide:Zn,useExisting:f.forwardRef(function(){return Wi})},Wi=(U($i,Gi=ei),$i.prototype._checkParentType=function(){Xi(this._parent)&&Pr.groupParentException()},B([f.Input("formGroupName"),V("design:type",String)],$i.prototype,"name",void 0),B([f.Directive({selector:"[formGroupName]",providers:[st]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(er)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(p)),V("design:paramtypes",[Zn,Array,Array])],$i));function $i(e,t,n){var r=Gi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Yi,un={provide:Zn,useExisting:f.forwardRef(function(){return Ji})},Ji=(U(Zi,Yi=Zn),Zi.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Zi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Zi.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Zi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zi.prototype,"path",{get:function(){return jr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Zi.prototype,"validator",{get:function(){return Hr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Zi.prototype,"asyncValidator",{get:function(){return Gr(this._asyncValidators)},enumerable:!0,configurable:!0}),Zi.prototype._checkParentType=function(){Xi(this._parent)&&Pr.arrayParentException()},B([f.Input("formArrayName"),V("design:type",String)],Zi.prototype,"name",void 0),B([f.Directive({selector:"[formArrayName]",providers:[un]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(er)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(p)),V("design:paramtypes",[Zn,Array,Array])],Zi));function Zi(e,t,n){var r=Yi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function Xi(e){return!(e instanceof Wi||e instanceof Ki||e instanceof Ji)}var Qi,eo,pn={provide:mr,useExisting:f.forwardRef(function(){return to})},to=(U(no,Qi=mr),eo=no,Object.defineProperty(no.prototype,"isDisabled",{set:function(e){Pr.disabledAttrWarning()},enumerable:!0,configurable:!0}),no.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),Wr(e,this.viewModel)&&(Xr("formControlName",eo,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},no.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},no.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(no.prototype,"path",{get:function(){return jr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(no.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(no.prototype,"validator",{get:function(){return Hr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(no.prototype,"asyncValidator",{get:function(){return Gr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),no.prototype._checkParentType=function(){!(this._parent instanceof Wi)&&this._parent instanceof ei?Pr.ngModelGroupException():this._parent instanceof Wi||this._parent instanceof Ki||this._parent instanceof Ji||Pr.controlParentException()},no.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},no._ngModelWarningSentOnce=!1,B([f.Input("formControlName"),V("design:type",String)],no.prototype,"name",void 0),B([f.Input("disabled"),V("design:type",Boolean),V("design:paramtypes",[Boolean])],no.prototype,"isDisabled",null),B([f.Input("ngModel"),V("design:type",Object)],no.prototype,"model",void 0),B([f.Output("ngModelChange"),V("design:type",Object)],no.prototype,"update",void 0),eo=B([f.Directive({selector:"[formControlName]",providers:[pn]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(er)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(p)),z(3,f.Optional()),z(3,f.Self()),z(3,f.Inject(d)),z(4,f.Optional()),z(4,f.Inject(Bi)),V("design:paramtypes",[Zn,Array,Array,Array,Object])],no));function no(e,t,n,r,i){var o=Qi.call(this)||this;return o._ngModelWarningConfig=i,o._added=!1,o.update=new f.EventEmitter,o._ngModelWarningSent=!1,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=Jr(o,r),o}var ln={provide:er,useExisting:f.forwardRef(function(){return ro}),multi:!0},vn={provide:er,useExisting:f.forwardRef(function(){return so}),multi:!0},ro=(Object.defineProperty(io.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),io.prototype.validate=function(e){return this.required?nr.required(e):null},io.prototype.registerOnValidatorChange=function(e){this._onChange=e},B([f.Input(),V("design:type",Object),V("design:paramtypes",[Object])],io.prototype,"required",null),B([f.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[ln],host:{"[attr.required]":'required ? "" : null'}})],io));function io(){}var oo,so=(U(ao,oo=ro),ao.prototype.validate=function(e){return this.required?nr.requiredTrue(e):null},B([f.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[vn],host:{"[attr.required]":'required ? "" : null'}})],ao));function ao(){return null!==oo&&oo.apply(this,arguments)||this}var S={provide:er,useExisting:f.forwardRef(function(){return uo}),multi:!0},uo=(Object.defineProperty(co.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),co.prototype.validate=function(e){return this._enabled?nr.email(e):null},co.prototype.registerOnValidatorChange=function(e){this._onChange=e},B([f.Input(),V("design:type",Object),V("design:paramtypes",[Object])],co.prototype,"email",null),B([f.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[S]})],co));function co(){}var C={provide:er,useExisting:f.forwardRef(function(){return lo}),multi:!0},lo=(po.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},po.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},po.prototype.registerOnValidatorChange=function(e){this._onChange=e},po.prototype._createValidator=function(){this._validator=nr.minLength(parseInt(this.minlength,10))},B([f.Input(),V("design:type",String)],po.prototype,"minlength",void 0),B([f.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[C],host:{"[attr.minlength]":"minlength ? minlength : null"}})],po));function po(){}var xe={provide:er,useExisting:f.forwardRef(function(){return fo}),multi:!0},fo=(ho.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},ho.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},ho.prototype.registerOnValidatorChange=function(e){this._onChange=e},ho.prototype._createValidator=function(){this._validator=nr.maxLength(parseInt(this.maxlength,10))},B([f.Input(),V("design:type",String)],ho.prototype,"maxlength",void 0),B([f.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[xe],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],ho));function ho(){}var Re={provide:er,useExisting:f.forwardRef(function(){return go}),multi:!0},go=(vo.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},vo.prototype.validate=function(e){return this._validator(e)},vo.prototype.registerOnValidatorChange=function(e){this._onChange=e},vo.prototype._createValidator=function(){this._validator=nr.pattern(this.pattern)},B([f.Input(),V("design:type",Object)],vo.prototype,"pattern",void 0),B([f.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Re],host:{"[attr.pattern]":"pattern ? pattern : null"}})],vo));function vo(){}mo.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),e=null!=t?t.validator:null,t=null!=t?t.asyncValidator:null;return new bi(n,e,t)},mo.prototype.control=function(e,t,n){return new vi(e,t,n)},mo.prototype.array=function(e,t,n){var r=this,e=e.map(function(e){return r._createControl(e)});return new Ci(e,t,n)},mo.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},mo.prototype._createControl=function(e){if(e instanceof vi||e instanceof bi||e instanceof Ci)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},$n=B([f.Injectable()],mo);function mo(){}new f.Version("6.1.10");function yo(){}ut=[B([f.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],yo),cn,dn,cr,fr,Cr,ar,Lr,Dr,Sr,$e,Gn,ro,lo,fo,go,so,uo],st=[Di,Li,Ii],un=[zi,Ki,to,Wi,Ji],pn=B([f.NgModule({declarations:ut,exports:ut})],bo);function bo(){}p=B([f.NgModule({declarations:st,providers:[Ft],exports:[pn,st]})],So);function So(){}var wo;(wo=Co).withConfig=function(e){return{ngModule:wo,providers:[{provide:Bi,useValue:e.warnOnNgModelWithFormControl}]}},wo=B([f.NgModule({declarations:[un],providers:[$n,Ft],exports:[pn,un]})],Co);function Co(){}_o.decorators=[{type:f.Directive,args:[{selector:"[component-host]"}]}],_o.ctorParameters=function(){return[{type:f.ViewContainerRef}]},d=_o;function _o(e){this.viewContainerRef=e}var Eo=function(e,t){this.component=e,this.data=t},Ao=new A.Logger("AuthDecorator");function Io(e,t){var n,r,i,o,s,a,u,c,l,p,d,f,h,g,v;n=e,t.currentAuthenticatedUser().then(function(e){Ao.debug("has authenticated user",e),n.next({state:"signedIn",user:e})}).catch(function(e){Ao.debug("no authenticated user",e),n.next({state:"signedOut",user:null})}),r=e,i=A.Amplify.configure(null),m.has(i,"Auth.oauth")&&A.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,e=e.payload;"auth"===t&&(t=e.data.username,Ao.debug("authentication oauth event",e),r.next({state:e.event,user:{username:t}}))}},"angularAuthListener"),o=e,a=(s=t).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return Ao.debug("signIn success"),e.challengeName?(Ao.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?o.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?o.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?o.next({state:"confirmSignIn",user:e}):Ao.debug("warning: unhandled challengeName "+e.challengeName)):o.next({state:"signedIn",user:e}),e}).catch(function(e){throw Ao.debug("signIn error",e),e})},u=e,l=(c=t).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return Ao.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw Ao.debug("signOut error",e),e})},p=e,f=(d=t).signUp,d.signUp=function(t,e,n,r){return f.call(d,t,e,n,r).then(function(e){return Ao.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw Ao.debug("signUp error",e),e})},h=e,v=(g=t).confirmSignUp,g.confirmSignUp=function(t,e){return v.call(g,t,e).then(function(e){return Ao.debug("confirmSignUp success"),h.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw Ao.debug("confirmSignUp error",e),e})}}var ko=function(e,t){return(ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function To(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ko(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Po=function(){return(Po=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Oo(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function xo(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Lo(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function No(e){var t;return F(F({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Mo(e):function(){return Do(e)},isCustomEndpoint:!!e.endpoint})}function Ro(e){if(!e.region)throw new Error("Region is missing");return F(F({},e),{region:Uo(e.region)})}var Zn="3.6.1",Mo=function(e){var t=e.endpoint,e=e.urlParser;if("string"==typeof t){var n=Promise.resolve(e(t));return function(){return n}}if("object"!=typeof t)return t;var r=Promise.resolve(t);return function(){return r}},Do=function(r){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return t=r.tls,t=void 0===t||t,[4,r.region()];case 1:if(n=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(!(n=(null!==(n=e.sent())&&void 0!==n?n:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+n)]}})})},ln={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},vn={preferredFile:"credentials"},Uo=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},S="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Fo(){throw new Error("setTimeout has not been defined")}function jo(){throw new Error("clearTimeout has not been defined")}var Bo=Fo,zo=jo;function Vo(t){if(Bo===setTimeout)return setTimeout(t,0);if((Bo===Fo||!Bo)&&setTimeout)return Bo=setTimeout,setTimeout(t,0);try{return Bo(t,0)}catch(e){try{return Bo.call(null,t,0)}catch(e){return Bo.call(this,t,0)}}}"function"==typeof S.setTimeout&&(Bo=setTimeout),"function"==typeof S.clearTimeout&&(zo=clearTimeout);var qo,Ko=[],Ho=!1,Go=-1;function Wo(){Ho&&qo&&(Ho=!1,qo.length?Ko=qo.concat(Ko):Go=-1,Ko.length&&$o())}function $o(){if(!Ho){var e=Vo(Wo);Ho=!0;for(var t=Ko.length;t;){for(qo=Ko,Ko=[];++Go<t;)qo&&qo[Go].run();Go=-1,t=Ko.length}qo=null,Ho=!1,function(t){if(zo===clearTimeout)return clearTimeout(t);if((zo===jo||!zo)&&clearTimeout)return zo=clearTimeout,clearTimeout(t);try{zo(t)}catch(e){try{return zo.call(null,t)}catch(e){return zo.call(this,t)}}}(e)}}function Yo(e,t){this.fun=e,this.array=t}Yo.prototype.run=function(){this.fun.apply(null,this.array)};function Jo(){}C=Jo,xe=Jo,er=Jo,Re=Jo,cn=Jo,dn=Jo,$e=Jo;var Zo=S.performance||{},Xo=Zo.now||Zo.mozNow||Zo.msNow||Zo.oNow||Zo.webkitNow||function(){return(new Date).getTime()};var Qo=new Date;var es,ts={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ko.push(new Yo(e,t)),1!==Ko.length||Ho||Vo($o)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:C,addListener:xe,once:er,off:Re,removeListener:cn,removeAllListeners:dn,emit:$e,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Xo.call(Zo),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Qo)/1e3}},ns=(U(rs,es=Error),rs);function rs(e,t){void 0===t&&(t=!0);e=es.call(this,e)||this;return e.tryNextLink=t,e}function is(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(){var t,e,n=Promise.reject(new ns("No providers in chain"));try{for(var r=H(o),i=r.next();!i.done;i=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(i.value)}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n}}var os="AWS_ACCESS_KEY_ID",ss="AWS_SECRET_ACCESS_KEY",as="AWS_SESSION_TOKEN",us="AWS_CREDENTIAL_EXPIRATION";function cs(t){return new Promise(function(r,i){var e=y.request(F({method:"GET"},t));e.on("error",function(e){i(Object.assign(new ns("Unable to connect to instance metadata service"),e))}),e.on("timeout",function(){i(new Error("TimeoutError"))}),e.on("response",function(e){var t=e.statusCode,t=void 0===t?400:t;(t<200||300<=t)&&i(Object.assign(new ns("Error response received from instance metadata service"),{statusCode:t}));var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){r(v.Buffer.concat(n))})}),e.end()})}function ls(e){var t=e.maxRetries,e=e.timeout;return{maxRetries:void 0===t?gs:t,timeout:void 0===e?hs:e}}function ps(e,t){for(var n=e(),r=0;r<t;r++)n=n.catch(e);return n}var ds=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},fs=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},hs=1e3,gs=0,vs="AWS_CONTAINER_CREDENTIALS_FULL_URI",ms="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",ys="AWS_CONTAINER_AUTHORIZATION_TOKEN";function bs(e){var t=this,e=ls(e=void 0===e?{}:e),o=e.timeout,n=e.maxRetries;return function(){return function(){if(ts.env[ms])return Promise.resolve({hostname:Ss,path:ts.env[ms]});if(ts.env[vs]){var e=g.parse(ts.env[vs]);return e.hostname&&e.hostname in ws?e.protocol&&e.protocol in Cs?Promise.resolve(F(F({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new ns(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new ns(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new ns("The container metadata credential provider cannot be used unless the "+ms+" or "+vs+" environment variable is set",!1))}().then(function(i){return ps(function(){return q(t,void 0,void 0,function(){var t,n,r;return K(this,function(e){switch(e.label){case 0:return r=(n=JSON).parse,[4,function(e,t){{var n;ts.env[ys]&&(n=t.headers,(n=void 0===n?{}:n).Authorization=ts.env[ys],t.headers=n)}return cs(F(F({},t),{timeout:e})).then(function(e){return e.toString()})}(o,i)];case 1:if(t=r.apply(n,[e.sent()]),!ds(t))throw new ns("Invalid response received from instance metadata service.");return[2,fs(t)]}})})},n)})}}var Ss="169.254.170.2",ws={localhost:!0,"127.0.0.1":!0},Cs={"http:":!0,"https:":!0};function _s(e){var t=void 0===(t=(e=void 0===e?{}:e).filepath)?ts.env[xs]||l.join(js(),".aws","credentials"):t,e=void 0===(e=e.configFilepath)?ts.env[Ls]||l.join(js(),".aws","config"):e;return Promise.all([Fs(e).then(Us).then(Ms).catch(Ns),Fs(t).then(Us).catch(Ns)]).then(function(e){e=G(e,2);return{configFile:e[0],credentialsFile:e[1]}})}function Es(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&-1<["undefined","string"].indexOf(typeof e.aws_session_token)}function As(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}var Is,ks="169.254.169.254",Ts="/latest/meta-data/iam/security-credentials/",Ps="/latest/api/token",Os=function(e){function i(t,s){return q(void 0,void 0,void 0,function(){var r;return K(this,function(e){switch(e.label){case 0:return[4,ps(function(){return q(void 0,void 0,void 0,function(){var n,r;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(t=s,q(void 0,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,cs(F(F({},t),{host:ks,path:Ts}))];case 1:return[2,e.sent().toString()]}})}))];case 1:return n=e.sent(),[3,3];case 2:throw 401===(r=e.sent()).statusCode&&(a=!1),r;case 3:return[2,n]}var t})})},t)];case 1:return r=e.sent().trim(),[2,ps(function(){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(i=r,o=s,q(void 0,void 0,void 0,function(){var t,n,r;return K(this,function(e){switch(e.label){case 0:return r=(n=JSON).parse,[4,cs(F(F({},o),{host:ks,path:Ts+i}))];case 1:if(t=r.apply(n,[e.sent().toString()]),!ds(t))throw new ns("Invalid response received from instance metadata service.");return[2,fs(t)]}})}))];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(a=!1),n;case 3:return[2,t]}var i,o})})},t)]}})})}var a=!1,e=ls(e=void 0===e?{}:e),o=e.timeout,s=e.maxRetries;return function(){return q(void 0,void 0,void 0,function(){var n,r;return K(this,function(e){switch(e.label){case 0:return a?[2,i(s,{timeout:o})]:[3,1];case 1:n=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,(t={timeout:o},q(void 0,void 0,void 0,function(){return K(this,function(e){return[2,cs(F(F({},t),{host:ks,path:Ps,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]})}))];case 3:return n=e.sent().toString(),[3,5];case 4:if(400===(null==(r=e.sent())?void 0:r.statusCode))throw Object.assign(r,{message:"EC2 Metadata token request returned error"});return"TimeoutError"!==r.message&&![403,404,405].includes(r.statusCode)||(a=!0),[2,i(s,{timeout:o})];case 5:return[2,i(s,{timeout:o,headers:{"x-aws-ec2-metadata-token":n}})]}var t})})}},xs="AWS_SHARED_CREDENTIALS_FILE",Ls="AWS_CONFIG_FILE",Ns=function(){return{}},Rs=/^profile\s(["'])?([^\1]+)\1$/,Ms=function(e){var t,n,r={};try{for(var i=H(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s,a,u,c=o.value;"default"===c?r.default=e.default:(s=Rs.exec(c))&&((a=G(s,3))[0],a[1],(u=a[2])&&(r[u]=e[c]))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},Ds=["__proto__","profile __proto__"],Us=function(e){var t,n,r,i={};try{for(var o=H(e.split(/\r?\n/)),s=o.next();!s.done;s=o.next()){var a,u=s.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(r=c[1],Ds.includes(r))throw new Error('Found invalid profile name "'+r+'"')}else!r||(a=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(i[r]=i[r]||{},i[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},Fs=function(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})},js=function(){var e=ts.env,t=e.HOME,n=e.USERPROFILE,r=e.HOMEPATH,e=e.HOMEDRIVE,e=void 0===e?"C:"+l.sep:e;return t||n||(r?""+e+r:o.homedir())},Bs="AWS_PROFILE",zs=function(n){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return t=n.loadedConfig,[4,void 0===t?_s(n):t];case 1:return t=e.sent(),[2,F(F({},t.configFile),t.credentialsFile)]}})})},Vs=function(e){return e.profile||ts.env[Bs]||"default"},qs=function(p,d,f,h){return void 0===h&&(h={}),q(void 0,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l;return K(this,function(e){switch(e.label){case 0:if(n=d[p],0<Object.keys(h).length&&Es(n))return[2,As(n)];if(t=n,!(Boolean(t)&&"object"==typeof t&&"string"==typeof t.role_arn&&"string"==typeof t.source_profile&&-1<["undefined","string"].indexOf(typeof t.role_session_name)&&-1<["undefined","string"].indexOf(typeof t.external_id)&&-1<["undefined","string"].indexOf(typeof t.mfa_serial)))return[3,4];if(a=n.external_id,r=n.mfa_serial,i=n.role_arn,l=n.role_session_name,s=void 0===l?"aws-sdk-js-"+Date.now():l,o=n.source_profile,!f.roleAssumer)throw new ns("Profile "+p+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(o in h)throw new ns("Detected a cycle attempting to resolve credentials for profile "+Vs(f)+". Profiles visited: "+Object.keys(h).join(", "),!1);if(l=qs(o,d,f,F(F({},h),((l={})[o]=!0,l))),s={RoleArn:i,RoleSessionName:s,ExternalId:a},!r)return[3,2];if(!f.mfaCodeProvider)throw new ns("Profile "+p+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return s.SerialNumber=r,a=s,[4,f.mfaCodeProvider(r)];case 1:a.TokenCode=e.sent(),e.label=2;case 2:return c=(u=f).roleAssumer,[4,l];case 3:return[2,c.apply(u,[e.sent(),s])];case 4:if(Es(n))return[2,As(n)];throw new ns("Profile "+p+" could not be found or parsed in shared credentials file.")}var t})})},Ks=(U(Hs,Is=Error),Hs);function Hs(e,t){void 0===t&&(t=!0);e=Is.call(this,e)||this;return e.tryNextLink=t,e}function Gs(){return{}}function Ws(e){var t,n,r={};try{for(var i=H(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s,a,u,c=o.value;"default"===c?r.default=e.default:(s=Zs.exec(c))&&((a=G(s,3))[0],a[1],(u=a[2])&&(r[u]=e[c]))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function $s(e){var t,n,r,i={};try{for(var o=H(e.split(/\r?\n/)),s=o.next();!s.done;s=o.next()){var a,u=s.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(r=c[1],Xs.includes(r))throw new Error('Found invalid profile name "'+r+'"')}else!r||(a=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(i[r]=i[r]||{},i[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function Ys(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function Js(){var e=(r=ts.env).HOME,t=r.USERPROFILE,n=r.HOMEPATH,r=void 0===(r=r.HOMEDRIVE)?"C:"+l.sep:r;return e||t||(n?""+r+n:o.homedir())}var Zs=/^profile\s(["'])?([^\1]+)\1$/,Xs=["__proto__","profile __proto__"],Qs=function(i){return q(void 0,void 0,void 0,function(){var r;return K(this,function(e){switch(e.label){case 0:return r=i.loadedConfig,[4,void 0===r?(n=void 0===(n=(t=void 0===(t=i)?{}:t).filepath)?ts.env.AWS_SHARED_CREDENTIALS_FILE||l.join(Js(),".aws","credentials"):n,t=void 0===(t=t.configFilepath)?ts.env.AWS_CONFIG_FILE||l.join(Js(),".aws","config"):t,Promise.all([Ys(t).then($s).then(Ws).catch(Gs),Ys(n).then($s).catch(Gs)]).then(function(e){e=G(e,2);return{configFile:e[0],credentialsFile:e[1]}})):r];case 1:return r=e.sent(),[2,F(F({},r.configFile),r.credentialsFile)]}var t,n})})},ea=function(e){return e.profile||ts.env.AWS_PROFILE||"default"},ta=function(s,r){return q(void 0,void 0,void 0,function(){var n;return K(this,function(e){switch(e.label){case 0:return(n=r[s],r[s])?void 0===(n=n.credential_process)?[3,2]:[4,(t=n,new Promise(function(n,r){i.exec(t,function(e,t){e?r(e):n(t.trim())})}).then(function(e){try{i=JSON.parse(e)}catch(e){throw Error("Profile "+s+" credential_process returned invalid JSON.")}var t=i.Version,n=i.AccessKeyId,r=i.SecretAccessKey,e=i.SessionToken,i=i.Expiration;if(1!==t)throw Error("Profile "+s+" credential_process did not return Version 1.");if(void 0===n||void 0===r)throw Error("Profile "+s+" credential_process returned invalid credentials.");if(i){var o=new Date;if(new Date(i)<o)throw Error("Profile "+s+" credential_process returned expired credentials.");o=Math.floor(new Date(i).valueOf()/1e3)}return{accessKeyId:n,secretAccessKey:r,sessionToken:e,expirationUnix:o}}).catch(function(e){throw new Ks(e.message)}))]:[3,4];case 1:return[2,e.sent()];case 2:throw new Ks("Profile "+s+" did not contain credential_process.");case 3:return[3,5];case 4:throw new Ks("Profile "+s+" could not be found in shared credentials file.");case 5:return[2]}var t})})},na="AWS_EC2_METADATA_DISABLED",Gn=function(e){var t=F({profile:ts.env[Bs]},e=void 0===e?{}:e);t.loadedConfig||(t.loadedConfig=_s(e));var n,r,e=[(void 0===(r=t)&&(r={}),function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,zs(r)];case 1:return t=e.sent(),[2,qs(Vs(r),t,r)]}})})}),(void 0===(n=t)&&(n={}),function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,Qs(n)];case 1:return t=e.sent(),[2,ta(ea(n),t)]}})})}),function(e){if(ts.env[ms]||ts.env[vs])return bs(e);if(ts.env[na])return function(){return Promise.reject(new ns("EC2 Instance Metadata Service access disabled"))};return Os(e)}(t)];return t.profile||e.unshift(function(){var e=ts.env[os],t=ts.env[ss],n=ts.env[us];return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:ts.env[as],expiration:n?new Date(n):void 0}):Promise.reject(new ns("Unable to find environment variable credentials."))}),function(n,r,i){var o,s;if(void 0===r)return function(){return s||(o=n(),s=!0),o};var a=!1;return function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return s||(o=n(),s=!0),a?[2,o]:[4,o];case 1:return t=e.sent(),i&&!i(t)?(a=!0,[2,t]):r(t)?[2,o=n()]:[2,t]}})})}}(is.apply(void 0,W(e)),function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5},function(e){return void 0!==e.expiration})},ra=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),r=e,!("function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");var r;return v.Buffer.from(e,t,n)},ia=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?v.Buffer.from(e,t):v.Buffer.from(e)},ut=(oa.prototype.update=function(e,t){this.hash.update(sa(e,t))},oa.prototype.digest=function(){return Promise.resolve(this.hash.digest())},oa);function oa(e,t){this.hash=t?n.createHmac(e,sa(t)):n.createHash(e)}function sa(e,t){return v.Buffer.isBuffer(e)?e:"string"==typeof e?ia(e,t):ArrayBuffer.isView(e)?ra(e.buffer,e.byteOffset,e.byteLength):ra(e)}function aa(t){return{applyToStack:function(e){e.add(ua(t),ca)}}}var ua=function(o){return function(r,i){return function(n){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){return null!==(t=null==o?void 0:o.retryStrategy)&&void 0!==t&&t.mode&&(i.userAgent=W(i.userAgent||[],[["cfg/retry-mode",o.retryStrategy.mode]])),[2,o.retryStrategy.retry(r,n)]})})}}},ca={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},la=(pa.isInstance=function(e){return!!e&&("number"==typeof e.statusCode&&"object"==typeof e.headers)},pa);function pa(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}var da=(fa.isInstance=function(e){if(!e)return!1;return"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers},fa.prototype.clone=function(){var r,e=new fa(F(F({},this),{headers:F({},this.headers)}));return e.query&&(e.query=(r=e.query,Object.keys(r).reduce(function(e,t){var n=r[t];return F(F({},e),((e={})[t]=Array.isArray(n)?W(n):n,e))},{}))),e},fa);function fa(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}function ha(e){function t(e){return"TimeoutError"===e.name?ba:ya}function n(e){return t(e)<=i}var r=e,i=e;return Object.freeze({hasRetryTokens:n,retrieveRetryTokens:function(e){if(!n(e))throw new Error("No retry token available");e=t(e);return i-=e,e},releaseRetryTokens:function(e){i+=null!=e?e:Sa,i=Math.min(i,r)}})}function ga(e,t){return Math.floor(Math.min(ma,Math.random()*Math.pow(2,t)*e))}function va(e){return!!e&&(Aa(e)||Ia(e)||ka(e)||Ta(e))}var ma=2e4,ya=5,ba=10,Sa=1,wa=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Ca=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],_a=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Ea=[500,502,503,504],Aa=function(e){return void 0!==e.$retryable},Ia=function(e){return wa.includes(e.name)},ka=function(e){var t;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||Ca.includes(e.name)||1==(null===(e=e.$retryable)||void 0===e?void 0:e.throttling)},Ta=function(e){return _a.includes(e.name)||Ea.includes((null===(e=e.$metadata)||void 0===e?void 0:e.httpStatusCode)||0)},Pa=(Oa.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},Oa.prototype.getMaxAttempts=function(){return q(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),[t=3,3];case 3:return[2,t]}})})},Oa.prototype.retry=function(p,d){return q(this,void 0,void 0,function(){var o,s,a,u,c,t,l,n;return K(this,function(e){switch(e.label){case 0:return a=s=0,[4,this.getMaxAttempts()];case 1:u=e.sent(),c=d.request,da.isInstance(c)&&(c.headers["amz-sdk-invocation-id"]=h.v4()),t=function(){var t,n,r,i;return K(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),da.isInstance(c)&&(c.headers["amz-sdk-request"]="attempt="+(s+1)+"; max="+u),[4,p(d)];case 1:return n=e.sent(),t=n.response,n=n.output,l.retryQuota.releaseRetryTokens(o),n.$metadata.attempts=s+1,n.$metadata.totalRetryDelay=a,[2,{value:{response:t,output:n}}];case 2:return(r=e.sent(),s++,l.shouldRetry(r,s,u))?(o=l.retryQuota.retrieveRetryTokens(r),i=l.delayDecider(ka(r)?500:100,s),a+=i,[4,new Promise(function(e){return setTimeout(e,i)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw r.$metadata||(r.$metadata={}),r.$metadata.attempts=s,r.$metadata.totalRetryDelay=a,r;case 5:return[2]}})},l=this,e.label=2;case 2:return[5,t()];case 3:return"object"==typeof(n=e.sent())?[2,n.value]:[3,2];case 4:return[2]}})})},Oa);function Oa(e,t){this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(e=null==t?void 0:t.retryDecider)&&void 0!==e?e:va,this.delayDecider=null!==(e=null==t?void 0:t.delayDecider)&&void 0!==e?e:ga,this.retryQuota=null!==(t=null==t?void 0:t.retryQuota)&&void 0!==t?t:ha(500)}function xa(e){var t=Ma(e.maxAttempts);return F(F({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new Pa(t)})}var La,Na="AWS_MAX_ATTEMPTS",Ra="max_attempts",st={environmentVariableSelector:function(e){var t=e[Na];if(t){e=parseInt(t);if(Number.isNaN(e))throw new Error("Environment variable "+Na+' mast be a number, got "'+t+'"');return e}},configFileSelector:function(e){var t=e[Ra];if(t){e=parseInt(t);if(Number.isNaN(e))throw new Error("Shared config file entry "+Ra+' mast be a number, got "'+t+'"');return e}},default:3},Ma=function(e){if("number"!=typeof(e=void 0===e?3:e))return e;var t=Promise.resolve(e);return function(){return t}},Da=(U(Ua,La=Error),Ua);function Ua(e,t){void 0===t&&(t=!0);e=La.call(this,e)||this;return e.tryNextLink=t,e}function Fa(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(){var t,e,n=Promise.reject(new Da("No providers in chain"));try{for(var r=H(o),i=r.next();!i.done;i=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(i.value)}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n}}function ja(){return{}}function Ba(e){var t,n,r={};try{for(var i=H(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s,a,u,c=o.value;"default"===c?r.default=e.default:(s=$a.exec(c))&&((a=G(s,3))[0],a[1],(u=a[2])&&(r[u]=e[c]))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function za(e){var t,n,r,i={};try{for(var o=H(e.split(/\r?\n/)),s=o.next();!s.done;s=o.next()){var a,u=s.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(r=c[1],Ya.includes(r))throw new Error('Found invalid profile name "'+r+'"')}else!r||(a=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(i[r]=i[r]||{},i[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function Va(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function qa(){var e=(r=ts.env).HOME,t=r.USERPROFILE,n=r.HOMEPATH,r=void 0===(r=r.HOMEDRIVE)?"C:"+l.sep:r;return e||t||(n?""+r+n:o.homedir())}function Ka(e,t){var n=e.environmentVariableSelector,r=e.configFileSelector,e=e.default;return void 0===t&&(t={}),Ga(Fa(Wa(n),Ja(r,t),Za(e)))}function Ha(e){return encodeURIComponent(e).replace(/[!'()*]/g,Xa)}var Ga=function(n,r,i){var o,s;if(void 0===r)return function(){return s||(o=n(),s=!0),o};var a=!1;return function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return s||(o=n(),s=!0),a?[2,o]:[4,o];case 1:return t=e.sent(),i&&!i(t)?(a=!0,[2,t]):r(t)?[2,o=n()]:[2,t]}})})}},Wa=function(n){return function(){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){try{if(void 0===(t=n(ts.env)))throw new Error;return[2,t]}catch(e){throw new Da(e.message||"Cannot load config from environment variables with getter: "+n)}return[2]})})}},$a=/^profile\s(["'])?([^\1]+)\1$/,Ya=["__proto__","profile __proto__"],Ja=function(a,e){var t=(e=void 0===e?{}:e).preferredFile,u=void 0===t?"config":t,c=j(e,["preferredFile"]);return function(){return q(void 0,void 0,void 0,function(){var r,i,o,s;return K(this,function(e){switch(e.label){case 0:return r=c.loadedConfig,i=void 0===r?(n=void 0===(n=(t=void 0===(t=c)?{}:t).filepath)?ts.env.AWS_SHARED_CREDENTIALS_FILE||l.join(qa(),".aws","credentials"):n,t=void 0===(t=t.configFilepath)?ts.env.AWS_CONFIG_FILE||l.join(qa(),".aws","config"):t,Promise.all([Va(t).then(za).then(Ba).catch(ja),Va(n).then(za).catch(ja)]).then(function(e){e=G(e,2);return{configFile:e[0],credentialsFile:e[1]}})):r,o=c.profile,r=void 0===o?ts.env.AWS_PROFILE||"default":o,[4,i];case 1:o=e.sent(),i=o.configFile,o=o.credentialsFile,o=o[r]||{},i=i[r]||{},o="config"===u?F(F({},o),i):F(F({},i),o);try{if(void 0===(s=a(o)))throw new Error;return[2,s]}catch(e){throw new Da(e.message||"Cannot load config for profile "+r+" in SDK configuration files with getter: "+a)}return[2]}var t,n})})}},Za=function(t){return"function"==typeof t?function(){return q(void 0,void 0,void 0,function(){return K(this,function(e){return[2,t()]})})}:(e=t,function(){return Promise.resolve(e)});var e},Xa=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};var Qa=["ECONNRESET","EPIPE","ETIMEDOUT"],eu=[],tu=[],nu="undefined"!=typeof Uint8Array?Uint8Array:Array,ru=!1;function iu(){ru=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)eu[t]=e[t],tu[e.charCodeAt(t)]=t;tu["-".charCodeAt(0)]=62,tu["_".charCodeAt(0)]=63}function ou(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(eu[r>>18&63]+eu[r>>12&63]+eu[r>>6&63]+eu[63&r]);return i.join("")}function su(e){var t;ru||iu();for(var n=e.length,r=n%3,i="",o=[],s=0,a=n-r;s<a;s+=16383)o.push(ou(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],i+=eu[t>>2],i+=eu[t<<4&63],i+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],i+=eu[t>>10],i+=eu[t>>4&63],i+=eu[t<<2&63],i+="="),o.push(i),o.join("")}function au(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?i-1:0,d=n?-1:1,n=e[t+p];for(p+=d,o=n&(1<<-l)-1,n>>=-l,l+=a;0<l;o=256*o+e[t+p],p+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=c}return(n?-1:1)*s*Math.pow(2,o-r)}function uu(e,t,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?p/r:p*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;e[n+d]=255&a,d+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+d]=255&s,d+=f,s/=256,u-=8);e[n+d-f]|=128*o}var cu={}.toString,lu=Array.isArray||function(e){return"[object Array]"==cu.call(e)};function pu(){return fu.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function du(e,t){if(pu()<t)throw new RangeError("Invalid typed array length");return fu.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=fu.prototype:(e=null===e?new fu(t):e).length=t,e}function fu(e,t,n){if(!(fu.TYPED_ARRAY_SUPPORT||this instanceof fu))return new fu(e,t,n);if("number"!=typeof e)return hu(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return vu(this,e)}function hu(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);fu.TYPED_ARRAY_SUPPORT?(e=t).__proto__=fu.prototype:e=mu(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!fu.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Su(t,n),n=(e=du(e,r)).write(t,n);n!==r&&(e=e.slice(0,n));return e}(e,t,n):function(e,t){if(bu(t)){var n=0|yu(t.length);return 0===(e=du(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?du(e,0):mu(e,t);if("Buffer"===t.type&&lu(t.data))return mu(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function gu(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function vu(e,t){if(gu(t),e=du(e,t<0?0:0|yu(t)),!fu.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function mu(e,t){var n=t.length<0?0:0|yu(t.length);e=du(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function yu(e){if(e>=pu())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pu().toString(16)+" bytes");return 0|e}function bu(e){return null!=e&&e._isBuffer}function Su(e,t){if(bu(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Uu(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Fu(e).length;default:if(r)return Uu(e).length;t=(""+t).toLowerCase(),r=!0}}function wu(e,t,n){var r,i,o,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,n);case"utf8":case"utf-8":return ku(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,o=n,0===(i=t)&&o===r.length?su(r):su(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function Cu(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _u(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if(bu(t="string"==typeof t?fu.from(t,r):t))return 0===t.length?-1:Eu(e,t,n,r,i);if("number"==typeof t)return t&=255,fu.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):Eu(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Eu(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var p=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){p=!1;break}if(p)return l}return-1}function Au(e,t,n,r){return ju(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Iu(e,t,n,r){return ju(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,r=r%256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function ku(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,p=239<c?4:223<c?3:191<c?2:1;if(i+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=p}return function(e){var t=e.length;if(t<=Tu)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Tu));return n}(r)}fu.TYPED_ARRAY_SUPPORT=void 0===S.TYPED_ARRAY_SUPPORT||S.TYPED_ARRAY_SUPPORT,fu.poolSize=8192,fu._augment=function(e){return e.__proto__=fu.prototype,e},fu.from=function(e,t,n){return hu(null,e,t,n)},fu.TYPED_ARRAY_SUPPORT&&(fu.prototype.__proto__=Uint8Array.prototype,fu.__proto__=Uint8Array),fu.alloc=function(e,t,n){return r=null,t=t,n=n,gu(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?du(r,e).fill(t,n):du(r,e).fill(t):du(r,e);var r},fu.allocUnsafe=function(e){return vu(null,e)},fu.allocUnsafeSlow=function(e){return vu(null,e)},fu.isBuffer=function(e){return null!=e&&(!!e._isBuffer||Bu(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Bu(e.slice(0,0))}(e))},fu.compare=function(e,t){if(!bu(e)||!bu(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},fu.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},fu.concat=function(e,t){if(!lu(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return fu.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=fu.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(!bu(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},fu.byteLength=Su,fu.prototype._isBuffer=!0,fu.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Cu(this,t,t+1);return this},fu.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Cu(this,t,t+3),Cu(this,t+1,t+2);return this},fu.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Cu(this,t,t+7),Cu(this,t+1,t+6),Cu(this,t+2,t+5),Cu(this,t+3,t+4);return this},fu.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?ku(this,0,e):wu.apply(this,arguments)},fu.prototype.equals=function(e){if(!bu(e))throw new TypeError("Argument must be a Buffer");return this===e||0===fu.compare(this,e)},fu.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},fu.prototype.compare=function(e,t,n,r,i){if(!bu(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},fu.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},fu.prototype.indexOf=function(e,t,n){return _u(this,e,t,n,!0)},fu.prototype.lastIndexOf=function(e,t,n){return _u(this,e,t,n,!1)},fu.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;if((!r||i<(r=Number(r)))&&(r=i),(i=t.length)%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return s=t,a=n,ju(Uu(e,(o=this).length-s),o,s,a);case"ascii":return Au(this,e,t,n);case"latin1":case"binary":return Au(this,e,t,n);case"base64":return o=this,s=t,a=n,ju(Fu(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Iu(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},fu.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Tu=4096;function Pu(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function Ou(e,t,n,r,i,o){if(!bu(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function xu(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Lu(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Nu(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ru(e,t,n,r,i){return i||Nu(e,0,n,4),uu(e,t,n,r,23,4),n+4}function Mu(e,t,n,r,i){return i||Nu(e,0,n,8),uu(e,t,n,r,52,8),n+8}fu.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),fu.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=fu.prototype;else for(var r=t-e,i=new fu(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},fu.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Pu(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},fu.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Pu(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},fu.prototype.readUInt8=function(e,t){return t||Pu(e,1,this.length),this[e]},fu.prototype.readUInt16LE=function(e,t){return t||Pu(e,2,this.length),this[e]|this[e+1]<<8},fu.prototype.readUInt16BE=function(e,t){return t||Pu(e,2,this.length),this[e]<<8|this[e+1]},fu.prototype.readUInt32LE=function(e,t){return t||Pu(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},fu.prototype.readUInt32BE=function(e,t){return t||Pu(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},fu.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Pu(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},fu.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Pu(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},fu.prototype.readInt8=function(e,t){return t||Pu(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},fu.prototype.readInt16LE=function(e,t){t||Pu(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},fu.prototype.readInt16BE=function(e,t){t||Pu(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},fu.prototype.readInt32LE=function(e,t){return t||Pu(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},fu.prototype.readInt32BE=function(e,t){return t||Pu(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},fu.prototype.readFloatLE=function(e,t){return t||Pu(e,4,this.length),au(this,e,!0,23,4)},fu.prototype.readFloatBE=function(e,t){return t||Pu(e,4,this.length),au(this,e,!1,23,4)},fu.prototype.readDoubleLE=function(e,t){return t||Pu(e,8,this.length),au(this,e,!0,52,8)},fu.prototype.readDoubleBE=function(e,t){return t||Pu(e,8,this.length),au(this,e,!1,52,8)},fu.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ou(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},fu.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ou(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},fu.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,1,255,0),fu.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},fu.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,2,65535,0),fu.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):xu(this,e,t,!0),t+2},fu.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,2,65535,0),fu.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):xu(this,e,t,!1),t+2},fu.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,4,4294967295,0),fu.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Lu(this,e,t,!0),t+4},fu.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,4,4294967295,0),fu.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Lu(this,e,t,!1),t+4},fu.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||Ou(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},fu.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||Ou(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},fu.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,1,127,-128),fu.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},fu.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,2,32767,-32768),fu.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):xu(this,e,t,!0),t+2},fu.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,2,32767,-32768),fu.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):xu(this,e,t,!1),t+2},fu.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,4,2147483647,-2147483648),fu.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Lu(this,e,t,!0),t+4},fu.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Ou(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),fu.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Lu(this,e,t,!1),t+4},fu.prototype.writeFloatLE=function(e,t,n){return Ru(this,e,t,!0,n)},fu.prototype.writeFloatBE=function(e,t,n){return Ru(this,e,t,!1,n)},fu.prototype.writeDoubleLE=function(e,t,n){return Mu(this,e,t,!0,n)},fu.prototype.writeDoubleBE=function(e,t,n){return Mu(this,e,t,!1,n)},fu.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i,o=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!fu.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},fu.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!fu.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var o=bu(e)?e:Uu(new fu(e,r).toString()),s=o.length,a=0;a<n-t;++a)this[a+t]=o[a%s];return this};var Du=/[^+\/0-9A-Za-z-_]/g;function Uu(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Fu(e){return function(e){var t;ru||iu();var n=e.length;if(0<n%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var r="="===e[n-2]?2:"="===e[n-1]?1:0,i=new nu(3*n/4-r),o=0<r?n-4:n,s=0,a=0;a<o;a+=4,0)t=tu[e.charCodeAt(a)]<<18|tu[e.charCodeAt(a+1)]<<12|tu[e.charCodeAt(a+2)]<<6|tu[e.charCodeAt(a+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=255&t;return 2==r?(t=tu[e.charCodeAt(a)]<<2|tu[e.charCodeAt(a+1)]>>4,i[s++]=255&t):1==r&&(t=tu[e.charCodeAt(a)]<<10|tu[e.charCodeAt(a+1)]<<4|tu[e.charCodeAt(a+2)]>>2,i[s++]=t>>8&255,i[s++]=255&t),i}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(Du,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function ju(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Bu(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function zu(e,t){t instanceof s.Readable?t.pipe(e):t?e.end(fu.from(t)):e.end()}Vu.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},Vu.prototype.handle=function(f,e){var h=this,g=(void 0===e?{}:e).abortSignal;return new Promise(function(t,n){if(null!=g&&g.aborted){var e=new Error("Request aborted");return e.name="AbortError",void n(e)}var r,i,o,s,a,u,c,l,p="https:"===f.protocol,e=function(e){var t,n,r=[];try{for(var i=H(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=e[a=o.value],a=Ha(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+Ha(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+Ha(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(f.query||{}),e={headers:f.headers,host:f.hostname,method:f.method,path:e?f.path+"?"+e:f.path,port:f.port,agent:p?h.httpsAgent:h.httpAgent},d=(0,(p?b:y).request)(e,function(e){e=new la({statusCode:e.statusCode||-1,headers:function(e){var t,n,r={};try{for(var i=H(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];r[s]=Array.isArray(a)?a.join(","):a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.headers),body:e});t({response:e})});d.on("error",function(e){Qa.includes(e.code)?n(Object.assign(e,{name:"TimeoutError"})):n(e)}),r=d,i=n,(o=void 0===(o=h.connectionTimeout)?0:o)&&r.on("socket",function(e){var t;e.connecting&&(t=setTimeout(function(){r.destroy(),i(Object.assign(new Error("Socket timed out without establishing a connection within "+o+" ms"),{name:"TimeoutError"}))},o),e.on("connect",function(){clearTimeout(t)}))}),s=d,a=n,void 0===(u=h.socketTimeout)&&(u=0),s.setTimeout(u,function(){s.destroy(),a(Object.assign(new Error("Connection timed out after "+u+" ms"),{name:"TimeoutError"}))}),g&&(g.onabort=function(){d.abort();var e=new Error("Request aborted");e.name="AbortError",n(e)}),c=d,"100-continue"===((l=f).headers.Expect||l.headers.expect)?c.on("continue",function(){zu(c,l.body)}):zu(c,l.body)})},$n=Vu;function Vu(e){var t=void 0===e?{}:e,n=t.connectionTimeout,r=t.socketTimeout,e=t.httpAgent,t=t.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=n,this.socketTimeout=r;this.httpAgent=e||new y.Agent({keepAlive:!0,maxSockets:50}),this.httpsAgent=t||new b.Agent({keepAlive:!0,maxSockets:50})}var qu,Ku=(U(Hu,qu=s.Writable),Hu.prototype._write=function(e,t,n){this.bufferedBytes.push(e),n()},Hu);function Hu(){var e=null!==qu&&qu.apply(this,arguments)||this;return e.bufferedBytes=[],e}var Ft=function(e){return new Promise(function(t,n){var r=new Ku;e.pipe(r),e.on("error",function(e){r.end(),n(e)}),r.on("error",n),r.on("finish",function(){var e=new Uint8Array(fu.concat(this.bufferedBytes));t(e)})})},Gu=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)};function Wu(e){e=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?v.Buffer.from(e,t):v.Buffer.from(e)}(e,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function $u(e){return function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!Gu(e))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return v.Buffer.from(e,t,n)}(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function Yu(e){return e?"string"==typeof e?fu.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?a.lstatSync(e.path).size:void 0:0}var pn=function(e){var r=e.serviceId,i=e.clientVersion;return function(){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return t=[["aws-sdk-js",i],["os/"+o.platform(),o.release()],["lang/js"],["md/nodejs",""+u.versions.node]],r&&t.push(["api/"+r,i]),u.env.AWS_EXECUTION_ENV&&t.push(["exec-env/"+u.env.AWS_EXECUTION_ENV]),[4,Ka({environmentVariableSelector:function(e){return e.AWS_SDK_UA_APP_ID},configFileSelector:function(e){return e["sdk-ua-app-id"]},default:void 0})()];case 1:return(n=e.sent())&&t.push(["app/"+n]),[2,t]}})})}},Ju=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},un=function(e){e=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?v.Buffer.from(e,t):v.Buffer.from(e)}(e,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},C=function(e){return function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!Ju(e))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return v.Buffer.from(e,t,n)}(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},Zu="pinpoint.{region}.amazonaws.com",Xu=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Qu=new Set(["cn-north-1","cn-northwest-1"]),ec=new Set(["us-iso-east-1"]),tc=new Set(["us-isob-east-1"]),nc=new Set(["us-gov-east-1","us-gov-west-1"]);var xe=function(e){var t,n=new URL(e),r=n.hostname,i=n.pathname,o=n.port,e=n.protocol,n=n.search;return n&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=H(e.split("&")),o=i.next();!o.done;o=i.next()){var s=G(o.value.split("="),2),a=s[0],u=s[1],c=void 0===u?null:u,a=decodeURIComponent(a),c=c&&decodeURIComponent(c);a in r?Array.isArray(r[a])?r[a].push(c):r[a]=[r[a],c]:r[a]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(n)),{hostname:r,port:o?parseInt(o):void 0,protocol:e,path:i,query:t}},er={apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"pinpoint.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-northeast-2":n={hostname:"pinpoint.ap-northeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-1":n={hostname:"pinpoint.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ca-central-1":n={hostname:"pinpoint.ca-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-2":n={hostname:"pinpoint.eu-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"fips-us-east-1":n={hostname:"pinpoint-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-gov-west-1":n={hostname:"pinpoint-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"pinpoint-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-gov-west-1":n={hostname:"pinpoint.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:Xu.has(e)&&(n={hostname:Zu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),Qu.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),ec.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),tc.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=nc.has(e)?{hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov",signingService:"mobiletargeting"}:n)&&(n={hostname:Zu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(Po({signingService:"mobiletargeting"},n))},serviceId:"Pinpoint",urlParser:xe},rc=Po(Po({},er),{runtime:"node",base64Decoder:Wu,base64Encoder:$u,bodyLengthChecker:Yu,credentialDefaultProvider:Gn,defaultUserAgentProvider:pn({serviceId:er.serviceId,clientVersion:Zn}),maxAttempts:Ka(st),region:Ka(ln,vn),requestHandler:new $n,sha256:ut.bind(null,"sha256"),streamCollector:Ft,utf8Decoder:un,utf8Encoder:C}),ic="content-length";function oc(t){return{applyToStack:function(e){e.add(function(a){var e=this;return function(s){return function(o){return q(e,void 0,void 0,function(){var t,n,r,i;return K(this,function(e){return t=o.request,da.isInstance(t)&&(i=t.body,n=t.headers,i&&-1===Object.keys(n).map(function(e){return e.toLowerCase()}).indexOf(ic)&&void 0!==(r=a(i))&&(t.headers=F(F({},t.headers),((i={})[ic]=String(r),i)))),[2,s(F(F({},o),{request:t}))]})})}}}(t.bodyLengthChecker),sc)}}}var sc={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};for(var ac=function(o){return function(i){return function(r){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){return da.isInstance(r.request)&&(t=r.request,n=(o.requestHandler.metadata||{}).handlerProtocol,0<=(void 0===n?"":n).indexOf("h2")&&!t.headers[":authority"]?(delete t.headers.host,t.headers[":authority"]=""):t.headers.host||(t.headers.host=t.hostname)),[2,i(r)]})})}}},uc={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},cc=function(t){return{applyToStack:function(e){e.add(ac(t),uc)}}},lc=function(){return function(l,p){return function(c){return q(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return K(this,function(e){switch(e.label){case 0:return t=p.clientName,n=p.commandName,r=p.inputFilterSensitiveLog,i=p.logger,o=p.outputFilterSensitiveLog,[4,l(c)];case 1:return(s=e.sent(),i)?("function"==typeof i.info&&(u=s.output,a=u.$metadata,u=j(u,["$metadata"]),i.info({clientName:t,commandName:n,input:r(c.input),output:o(u),metadata:a})),[2,s]):[2,s]}})})}}},pc={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},dc=function(e){return{applyToStack:function(e){e.add(lc(),pc)}}},fc={},hc=0;hc<256;hc++){var gc=hc.toString(16).toLowerCase();1===gc.length&&(gc="0"+gc),fc[hc]=gc}function vc(e){for(var t="",n=0;n<e.byteLength;n++)t+=fc[e[n]];return t}var mc="X-Amz-Date",yc="X-Amz-Signature",bc="X-Amz-Security-Token",Sc="authorization",wc=mc.toLowerCase(),Cc=[Sc,wc,"date"],_c=yc.toLowerCase(),Ec="x-amz-content-sha256",Ac=bc.toLowerCase(),Ic={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},kc=/^proxy-/,Tc=/^sec-/,Pc="AWS4-HMAC-SHA256",Oc="AWS4-HMAC-SHA256-PAYLOAD",xc="aws4_request",Lc={},Nc=[];function Rc(e,t,n){return e+"/"+t+"/"+n+"/"+xc}function Mc(e,t,n){t=new e(t);return t.update(n),t.digest()}function Dc(e,t,n){var r,i,o=e.headers,s={};try{for(var a=H(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(!(l in Ic||null!=t&&t.has(l)||kc.test(l)||Tc.test(l))||n&&n.has(l))&&(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function Uc(e){return encodeURIComponent(e).replace(/[!'()*]/g,Fc)}var Fc=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function jc(e){var t,n,e=e.query,r=void 0===e?{}:e,i=[],o={};try{for(var s=H(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){if(n.toLowerCase()===_c)return;i.push(n);var e=r[n];"string"==typeof e?o[n]=Uc(n)+"="+Uc(e):Array.isArray(e)&&(o[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([Uc(n)+"="+Uc(t)])},[]).join("&"))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.map(function(e){return o[e]}).filter(function(e){return e}).join("&")}function Bc(e,c){var l=e.headers,p=e.body;return q(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return K(this,function(e){switch(e.label){case 0:try{for(n=H(Object.keys(l)),r=n.next();!r.done;r=n.next())if((i=r.value).toLowerCase()===Ec)return[2,l[i]]}catch(e){a={error:e}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}}return null!=p?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof p||ArrayBuffer.isView(p)||(t=p,"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t))?((o=new c).update(p),s=vc,[4,o.digest()]):[3,3];case 2:return[2,s.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var t})})}function zc(e){var r,t=e.headers,n=e.query,e=j(e,["headers","query"]);return F(F({},e),{headers:F({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return F(F({},e),((e={})[t]=Array.isArray(n)?W(n):n,e))},{})):void 0})}function Vc(e){var t,n;e="function"==typeof e.clone?e.clone():zc(e);try{for(var r=H(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;-1<Cc.indexOf(o.toLowerCase())&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function qc(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"!=typeof e)return e;if(Number(e))return new Date(1e3*Number(e));return new Date(e)}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var Kc=(Hc.prototype.presign=function(S,w){return void 0===w&&(w={}),q(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v,m,y,b;return K(this,function(e){switch(e.label){case 0:return d=w.signingDate,t=void 0===d?new Date:d,p=w.expiresIn,n=void 0===p?3600:p,r=w.unsignableHeaders,i=w.unhoistableHeaders,o=w.signableHeaders,s=w.signingRegion,a=w.signingService,[4,this.credentialProvider()];case 1:return(u=e.sent(),null==s)?[3,2]:(l=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:l=e.sent(),e.label=4;case 4:return(c=l,d=Gc(t),p=d.longDate,d=d.shortDate,604800<n)?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(y=Rc(d,c,null!=a?a:this.service),f=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():zc(e),s=o.headers,a=void 0===(o=o.query)?{}:o;try{for(var u=H(Object.keys(s)),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.toLowerCase();"x-amz-"!==p.substr(0,6)||null!==(i=t.unhoistableHeaders)&&void 0!==i&&i.has(p)||(a[l]=s[l],delete s[l])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return F(F({},e),{headers:s,query:a})}(Vc(S),{unhoistableHeaders:i}),u.sessionToken&&(f.query[bc]=u.sessionToken),f.query["X-Amz-Algorithm"]=Pc,f.query["X-Amz-Credential"]=u.accessKeyId+"/"+y,f.query[mc]=p,f.query["X-Amz-Expires"]=n.toString(10),b=Dc(f,r,o),f.query["X-Amz-SignedHeaders"]=Wc(b),h=f.query,g=yc,v=this.getSignature,m=[p,y,this.getSigningKey(u,c,d,a)],y=this.createCanonicalRequest,b=[f,b],[4,Bc(S,this.sha256)]);case 5:return[4,v.apply(this,m.concat([y.apply(this,b.concat([e.sent()]))]))];case 6:return h[g]=e.sent(),[2,f]}})})},Hc.prototype.sign=function(t,n){return q(this,void 0,void 0,function(){return K(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},Hc.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,e=t.signingDate,l=void 0===e?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,r=Gc(l),i=r.shortDate,r=r.longDate,i=Rc(i,t,null!=f?f:this.service),[4,Bc({headers:{},body:c},this.sha256)];case 4:return o=e.sent(),(a=new this.sha256).update(u),s=vc,[4,a.digest()];case 5:return a=s.apply(void 0,[e.sent()]),a=[Oc,r,i,p,a,o].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:f})]}})})},Hc.prototype.signString=function(u,e){var t=void 0===e?{}:e,e=t.signingDate,c=void 0===e?new Date:e,l=t.signingRegion,p=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==l)?[3,2]:(r=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=Gc(c).shortDate,s=(o=this.sha256).bind,[4,this.getSigningKey(t,n,i,p)];case 5:return(i=new(s.apply(o,[void 0,e.sent()]))).update(u),a=vc,[4,i.digest()];case 6:return[2,a.apply(void 0,[e.sent()])]}})})},Hc.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,e=t.signingDate,p=void 0===e?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==h)?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=Vc(l),a=Gc(p),o=a.longDate,s=a.shortDate,a=Rc(s,n,null!=g?g:this.service),i.headers[wc]=o,t.sessionToken&&(i.headers[Ac]=t.sessionToken),[4,Bc(i,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=H(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(Ec,i.headers)&&this.applyChecksum&&(i.headers[Ec]=c),u=Dc(i,f,d),[4,this.getSignature(o,a,this.getSigningKey(t,n,s,g),this.createCanonicalRequest(i,u,c))];case 6:return c=e.sent(),i.headers[Sc]=Pc+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+Wc(u)+", Signature="+c,[2,i]}})})},Hc.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+jc(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},Hc.prototype.createStringToSign=function(n,r,i){return q(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(i),[4,t.digest()];case 1:return t=e.sent(),[2,Pc+"\n"+n+"\n"+r+"\n"+vc(t)]}})})},Hc.prototype.getCanonicalPath=function(e){e=e.path;return this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},Hc.prototype.getSignature=function(s,a,u,c){return q(this,void 0,void 0,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(s,a,c)];case 1:return t=e.sent(),i=(r=this.sha256).bind,[4,u];case 2:return(n=new(i.apply(r,[void 0,e.sent()]))).update(t),o=vc,[4,n.digest()];case 3:return[2,o.apply(void 0,[e.sent()])]}})})},Hc.prototype.getSigningKey=function(e,t,n,r){return u=this.sha256,c=e,l=n,p=t,d=r||this.service,q(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:return[4,Mc(u,c.secretAccessKey,c.accessKeyId)];case 1:if(o=e.sent(),(t=l+":"+p+":"+d+":"+vc(o)+":"+c.sessionToken)in Lc)return[2,Lc[t]];for(Nc.push(t);50<Nc.length;)delete Lc[Nc.shift()];n="AWS4"+c.secretAccessKey,e.label=2;case 2:e.trys.push([2,7,8,9]),r=H([l,p,d,xc]),i=r.next(),e.label=3;case 3:return i.done?[3,6]:(o=i.value,[4,Mc(u,n,o)]);case 4:n=e.sent(),e.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return s=e.sent(),s={error:s},[3,9];case 8:try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 9:return[2,Lc[t]=n]}})});var u,c,l,p,d},Hc);function Hc(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,e=e.uriEscapePath,e=void 0===e||e;this.service=i,this.sha256=o,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=$c(r),this.credentialProvider=Yc(n)}var Gc=function(e){e=qc(e).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.substr(0,8)}},Wc=function(e){return Object.keys(e).sort().join(";")},$c=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},Yc=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}};function Jc(r){var e=this,i=Zc(r.credentials||r.credentialDefaultProvider(r)),t=r.signingEscapePath,o=void 0===t||t,n=r.systemClockOffset,t=void 0===n?r.systemClockOffset||0:n,s=r.sha256,n=r.signer?Zc(r.signer):function(){return Zc(r.region)().then(function(t){return q(e,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,r.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}})})}).then(function(e){var t=G(e,2),n=t[0],e=t[1],t=n.signingRegion,n=n.signingService;return r.signingRegion=r.signingRegion||t||e,r.signingName=r.signingName||n||r.serviceId,new Kc({credentials:i,region:r.signingRegion,service:r.signingName,sha256:s,uriEscapePath:o})})};return F(F({},r),{systemClockOffset:t,signingEscapePath:o,credentials:i,signer:n})}function Zc(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}}function Xc(e,t){return 3e5<=Math.abs(Qc(t).getTime()-e)}var Qc=function(e){return new Date(Date.now()+e)};function el(t){return{applyToStack:function(e){var l;e.addRelativeTo((l=t,function(u,c){return function(a){return q(this,void 0,void 0,function(){var t,n,r,i,o,s;return K(this,function(e){switch(e.label){case 0:return da.isInstance(a.request)?"function"!=typeof l.signer?[3,2]:[4,l.signer()]:[2,u(a)];case 1:return t=e.sent(),[3,3];case 2:t=l.signer,e.label=3;case 3:return o=t,r=u,i=[F({},a)],s={},[4,o.sign(a.request,{signingDate:new Date(Date.now()+l.systemClockOffset),signingRegion:c.signing_region,signingService:c.signing_service})];case 4:return[4,r.apply(void 0,[F.apply(void 0,i.concat([(s.request=e.sent(),s)]))])];case 5:return n=e.sent(),o=n.response.headers,(o=o&&(o.date||o.Date))&&(o=Date.parse(o),Xc(o,l.systemClockOffset)&&(l.systemClockOffset=o-Date.now())),[2,n]}})})}}),tl)}}}var tl={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};function nl(e){return F(F({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}function rl(e){var t=(r=G(e,2))[0],n=r[1],e=t.indexOf("/"),r=t.substring(0,e),e=t.substring(e+1);return[r,e="api"===r?e.toLowerCase():e,n].filter(function(e){return e&&0<e.length}).map(function(e){return null==e?void 0:e.replace(sl,"_")}).join("/")}function il(t){return{applyToStack:function(e){e.add(al(t),ul)}}}var ol="user-agent",sl=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,al=function(c){return function(a,u){return function(s){return q(void 0,void 0,void 0,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:return(t=s.request,da.isInstance(t))?(n=t.headers,r=(null===(o=null==u?void 0:u.userAgent)||void 0===o?void 0:o.map(rl))||[],[4,c.defaultUserAgentProvider()]):[2,a(s)];case 1:return i=e.sent().map(rl),o=(null===(o=null==c?void 0:c.customUserAgent)||void 0===o?void 0:o.map(rl))||[],n["x-amz-user-agent"]=W(i,r,o).join(" "),o=W(i.filter(function(e){return e.startsWith("aws-sdk-")}),o).join(" "),"browser"!==c.runtime&&o&&(n[ol]=n[ol]?n[ol]+" "+o:o),[2,a(F(F({},s),{request:t}))]}})})}}},ul={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},cl=function(){function t(t){function e(e){return!e.name||e.name!==t||(n=!0,a.delete(t),!1)}var n=!1;return i=i.filter(e),o=o.filter(e),n}function n(t){function e(e){return e.middleware!==t||(n=!0,e.name&&a.delete(e.name),!1)}var n=!1;return i=i.filter(e),o=o.filter(e),n}function r(t){return i.forEach(function(e){t.add(e.middleware,F({},e))}),o.forEach(function(e){t.addRelativeTo(e.middleware,F({},e))}),t}function s(){var t=[],n=[],r={};return i.forEach(function(e){e=F(F({},e),{before:[],after:[]});e.name&&(r[e.name]=e),t.push(e)}),o.forEach(function(e){e=F(F({},e),{before:[],after:[]});e.name&&(r[e.name]=e),n.push(e)}),n.forEach(function(e){if(e.toMiddleware){var t=r[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),t.sort(function(e,t){return ll[t.step]-ll[e.step]||pl[t.priority||"normal"]-pl[e.priority||"normal"]}).map(u).reduce(function(e,t){return e.push.apply(e,W(t)),e},[]).map(function(e){return e.middleware})}var i=[],o=[],a=new Set,u=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,W(u(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,W(u(e)))}),t},c={add:function(e,t){var n=(t=void 0===t?{}:t).name,r=t.override,e=F({step:"initialize",priority:"normal",middleware:e},t);if(n){if(a.has(n)){if(!r)throw new Error("Duplicate middleware name '"+n+"'");t=i.findIndex(function(e){return e.name===n}),r=i[t];if(r.step!==e.step||r.priority!==e.priority)throw new Error('"'+n+'" middleware with '+r.priority+" priority in "+r.step+" step cannot be overridden by same-name middleware with "+e.priority+" priority in "+e.step+" step.");i.splice(t,1)}a.add(n)}i.push(e)},addRelativeTo:function(e,t){var n=t.name,r=t.override,e=F({middleware:e},t);if(n){if(a.has(n)){if(!r)throw new Error("Duplicate middleware name '"+n+"'");t=o.findIndex(function(e){return e.name===n}),r=o[t];if(r.toMiddleware!==e.toMiddleware||r.relation!==e.relation)throw new Error('"'+n+'" middleware '+r.relation+' "'+r.toMiddleware+'" middleware cannot be overridden by same-name middleware '+e.relation+' "'+e.toMiddleware+'" middleware.');o.splice(t,1)}a.add(n)}o.push(e)},clone:function(){return r(cl())},use:function(e){e.applyToStack(c)},remove:function(e){return("string"==typeof e?t:n)(e)},removeByTag:function(n){function e(e){var t=e.tags,e=e.name;return!t||!t.includes(n)||(e&&a.delete(e),!(r=!0))}var r=!1;return i=i.filter(e),o=o.filter(e),r},concat:function(e){var t=r(cl());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var i=H(s().reverse()),o=i.next();!o.done;o=i.next())e=(0,o.value)(e,t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return c},ll={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},pl={high:3,normal:2,low:1},Re=(dl.prototype.send=function(e,t,n){var r="function"==typeof t?t:n,t=e.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!r)return t(e).then(function(e){return e.output});t(e).then(function(e){return r(null,e.output)},function(e){return r(e)}).catch(function(){})},dl.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},dl);function dl(e){this.middlewareStack=cl(),this.config=e}cn=function(){this.middlewareStack=cl()};function fl(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function hl(e){return Array.isArray(e)?e:[e]}var gl=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=gl(e[t]));return e},dn=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,W([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t};dn.prototype=Object.create(String.prototype,{constructor:{value:dn,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(dn,String);var vl,ml=(U(yl,vl=dn),yl.prototype.deserializeJSON=function(){return JSON.parse(vl.prototype.toString.call(this))},yl.prototype.toJSON=function(){return vl.prototype.toString.call(this)},yl.fromObject=function(e){return e instanceof yl?e:e instanceof String||"string"==typeof e?new yl(e):new yl(JSON.stringify(e))},yl);function yl(){return null!==vl&&vl.apply(this,arguments)||this}var bl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Sl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function wl(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),e=e.getUTCSeconds();return bl[r]+", "+(i<10?"0"+i:""+i)+" "+Sl[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(e<10?"0"+e:""+e)+" GMT"}var Cl,_l="***SensitiveInformation***",El=(To(Al,Cl=Re),Al.prototype.destroy=function(){Cl.prototype.destroy.call(this)},Al);function Al(e){var t=this,e=Po(Po({},rc),e),e=Ro(e),e=Jc(No(e)),e=nl(xa(e));return(t=Cl.call(this,e)||this).config=e,t.middlewareStack.use(el(t.config)),t.middlewareStack.use(aa(t.config)),t.middlewareStack.use(oc(t.config)),t.middlewareStack.use(cc(t.config)),t.middlewareStack.use(dc(t.config)),t.middlewareStack.use(il(t.config)),t}function Il(e,t){return Po(Po({},void 0!==e.Endpoint&&null!==e.Endpoint&&{Endpoint:(n=e.Endpoint,Po(Po(Po(Po(Po(Po(Po(Po(Po(Po(Po({},void 0!==n.Address&&null!==n.Address&&{Address:n.Address}),void 0!==n.Attributes&&null!==n.Attributes&&{Attributes:df(n.Attributes)}),void 0!==n.ChannelType&&null!==n.ChannelType&&{ChannelType:n.ChannelType}),void 0!==n.Demographic&&null!==n.Demographic&&{Demographic:of(n.Demographic)}),void 0!==n.EffectiveDate&&null!==n.EffectiveDate&&{EffectiveDate:n.EffectiveDate}),void 0!==n.EndpointStatus&&null!==n.EndpointStatus&&{EndpointStatus:n.EndpointStatus}),void 0!==n.Location&&null!==n.Location&&{Location:sf(n.Location)}),void 0!==n.Metrics&&null!==n.Metrics&&{Metrics:lf(n.Metrics)}),void 0!==n.OptOut&&null!==n.OptOut&&{OptOut:n.OptOut}),void 0!==n.RequestId&&null!==n.RequestId&&{RequestId:n.RequestId}),void 0!==n.User&&null!==n.User&&{User:af(n.User)}))}),void 0!==e.Events&&null!==e.Events&&{Events:(e=e.Events,Object.entries(e).reduce(function(e,t){var n=Lo(t,2),t=n[0],n=n[1];return null===n?e:Po(Po({},e),((e={})[t]=uf(n),e))},{}))});var n}function kl(e,t){return{EndpointItemResponse:void 0!==e.EndpointItemResponse&&null!==e.EndpointItemResponse?{Message:void 0!==(n=e.EndpointItemResponse).Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==e.EventsItemResponse&&null!==e.EventsItemResponse?(e=e.EventsItemResponse,Object.entries(e).reduce(function(e,t){var n=Lo(t,2),t=n[0],n=n[1];return null===n?e:Po(Po({},e),((e={})[t]=ff(n),e))},{})):void 0};var n}var Tl,Pl,Ol,xl,Ll,Nl,Rl,Ml,Dl,Ul,Fl,jl,Bl,zl,Vl,ql,Kl,Hl,Gl,Wl,$l,Yl,Jl,Zl,Xl,Ql,ep,tp,np,rp,ip,op,sp,ap,up,cp,lp,pp,dp,fp,hp,gp,vp,mp,yp,bp,Sp,wp,Cp,_p,Ep,Ap,Ip,kp,Tp,Pp,Op,xp,Lp,Np,Rp,Mp,Dp,Up,Fp,jp,Bp,zp,Vp,qp,Kp,Hp,Gp,Wp,$p,Yp,Jp,Zp,Xp,Qp,ed,td,nd,rd,id,od,sd,ad,ud,cd,ld,pd,dd,fd,hd,gd,vd,md,yd,bd,Sd,wd,Cd,_d,Ed,Ad,Id,kd,Td,Pd,Od,xd,Ld,Nd,Rd,Md,Dd,Ud,Fd,jd,Bd,zd,Vd,qd,Kd,Hd,Gd,Wd,$d,Yd,Jd,$e=function(u,c){return Oo(void 0,void 0,void 0,function(){var n,r,i,o,s,a;return xo(this,function(e){switch(e.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",fl(s)),void 0!==u.EventsRequest&&(t=u.EventsRequest,i=Po({},void 0!==t.BatchItem&&null!==t.BatchItem&&{BatchItem:pf(t.BatchItem)})),void 0===i&&(i={}),i=JSON.stringify(i),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new da({protocol:s,hostname:o,port:a,method:"POST",headers:n,path:r,body:i})]}var t})})},er=function(u,c){return Oo(void 0,void 0,void 0,function(){var n,r,i,o,s,a;return xo(this,function(e){switch(e.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",fl(s)),void 0===u.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((s=u.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",fl(s)),void 0!==u.EndpointRequest&&(t=u.EndpointRequest,i=Po(Po(Po(Po(Po(Po(Po(Po(Po(Po(Po({},void 0!==t.Address&&null!==t.Address&&{Address:t.Address}),void 0!==t.Attributes&&null!==t.Attributes&&{Attributes:df(t.Attributes)}),void 0!==t.ChannelType&&null!==t.ChannelType&&{ChannelType:t.ChannelType}),void 0!==t.Demographic&&null!==t.Demographic&&{Demographic:of(t.Demographic)}),void 0!==t.EffectiveDate&&null!==t.EffectiveDate&&{EffectiveDate:t.EffectiveDate}),void 0!==t.EndpointStatus&&null!==t.EndpointStatus&&{EndpointStatus:t.EndpointStatus}),void 0!==t.Location&&null!==t.Location&&{Location:sf(t.Location)}),void 0!==t.Metrics&&null!==t.Metrics&&{Metrics:lf(t.Metrics)}),void 0!==t.OptOut&&null!==t.OptOut&&{OptOut:t.OptOut}),void 0!==t.RequestId&&null!==t.RequestId&&{RequestId:t.RequestId}),void 0!==t.User&&null!==t.User&&{User:af(t.User)})),void 0===i&&(i={}),i=JSON.stringify(i),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new da({protocol:s,hostname:o,port:a,method:"PUT",headers:n,path:r,body:i})]}var t})})},Zn=function(i,o){return Oo(void 0,void 0,void 0,function(){var n,r;return xo(this,function(e){switch(e.label){case 0:return 202!==i.statusCode&&300<=i.statusCode?[2,(h=i,g=o,Oo(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f;return xo(this,function(e){switch(e.label){case 0:return n=[Po({},h)],f={},[4,mf(h.body,g)];case 1:switch(t=Po.apply(void 0,n.concat([(f.body=e.sent(),f)])),i="UnknownError",i=yf(h,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return o=[{}],[4,Zd(t)];case 3:return r=Po.apply(void 0,[Po.apply(void 0,o.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 4:return s=[{}],[4,Xd(t)];case 5:return r=Po.apply(void 0,[Po.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 6:return a=[{}],[4,Qd(t)];case 7:return r=Po.apply(void 0,[Po.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 8:return u=[{}],[4,ef(t)];case 9:return r=Po.apply(void 0,[Po.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 10:return c=[{}],[4,tf(t)];case 11:return r=Po.apply(void 0,[Po.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 12:return l=[{}],[4,nf(t)];case 13:return r=Po.apply(void 0,[Po.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 14:return p=[{}],[4,rf(t)];case 15:return r=Po.apply(void 0,[Po.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 16:d=t.body,i=d.code||d.Code||i,r=Po(Po({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:gf(h)}),e.label=17;case 17:return d=r.message||r.Message||i,r.message=d,delete r.Message,[2,Promise.reject(Object.assign(new Error(d),r))]}})}))]:(n={$metadata:gf(i),EventsResponse:void 0},[4,mf(i.body,o)]);case 1:return r=e.sent(),n.EventsResponse={Results:void 0!==(t=r).Results&&null!==t.Results?hf(t.Results):void 0},[2,Promise.resolve(n)]}var t,h,g})})},dn=function(i,o){return Oo(void 0,void 0,void 0,function(){var n,r;return xo(this,function(e){switch(e.label){case 0:return 202!==i.statusCode&&300<=i.statusCode?[2,(h=i,g=o,Oo(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f;return xo(this,function(e){switch(e.label){case 0:return n=[Po({},h)],f={},[4,mf(h.body,g)];case 1:switch(t=Po.apply(void 0,n.concat([(f.body=e.sent(),f)])),i="UnknownError",i=yf(h,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return o=[{}],[4,Zd(t)];case 3:return r=Po.apply(void 0,[Po.apply(void 0,o.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 4:return s=[{}],[4,Xd(t)];case 5:return r=Po.apply(void 0,[Po.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 6:return a=[{}],[4,Qd(t)];case 7:return r=Po.apply(void 0,[Po.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 8:return u=[{}],[4,ef(t)];case 9:return r=Po.apply(void 0,[Po.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 10:return c=[{}],[4,tf(t)];case 11:return r=Po.apply(void 0,[Po.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 12:return l=[{}],[4,nf(t)];case 13:return r=Po.apply(void 0,[Po.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 14:return p=[{}],[4,rf(t)];case 15:return r=Po.apply(void 0,[Po.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:gf(h)}]),[3,17];case 16:d=t.body,i=d.code||d.Code||i,r=Po(Po({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:gf(h)}),e.label=17;case 17:return d=r.message||r.Message||i,r.message=d,delete r.Message,[2,Promise.reject(Object.assign(new Error(d),r))]}})}))]:(n={$metadata:gf(i),MessageBody:void 0},[4,mf(i.body,o)]);case 1:return r=e.sent(),n.MessageBody={Message:void 0!==(t=r).Message&&null!==t.Message?t.Message:void 0,RequestID:void 0!==t.RequestID&&null!==t.RequestID?t.RequestID:void 0},[2,Promise.resolve(n)]}var t,h,g})})},Zd=function(r,e){return Oo(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:gf(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Xd=function(r,e){return Oo(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:gf(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Qd=function(r,e){return Oo(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:gf(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},ef=function(r,e){return Oo(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:gf(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},tf=function(r,e){return Oo(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:gf(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},nf=function(r,e){return Oo(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:gf(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},rf=function(r,e){return Oo(void 0,void 0,void 0,function(){var t,n;return xo(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:gf(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},of=function(e,t){return Po(Po(Po(Po(Po(Po(Po(Po({},void 0!==e.AppVersion&&null!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&null!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&null!==e.Make&&{Make:e.Make}),void 0!==e.Model&&null!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&null!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&null!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&null!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&null!==e.Timezone&&{Timezone:e.Timezone})},sf=function(e,t){return Po(Po(Po(Po(Po(Po({},void 0!==e.City&&null!==e.City&&{City:e.City}),void 0!==e.Country&&null!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&null!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&null!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&null!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&null!==e.Region&&{Region:e.Region})},af=function(e,t){return Po(Po({},void 0!==e.UserAttributes&&null!==e.UserAttributes&&{UserAttributes:df(e.UserAttributes)}),void 0!==e.UserId&&null!==e.UserId&&{UserId:e.UserId})},uf=function(e,t){return Po(Po(Po(Po(Po(Po(Po(Po(Po(Po({},void 0!==e.AppPackageName&&null!==e.AppPackageName&&{AppPackageName:e.AppPackageName}),void 0!==e.AppTitle&&null!==e.AppTitle&&{AppTitle:e.AppTitle}),void 0!==e.AppVersionCode&&null!==e.AppVersionCode&&{AppVersionCode:e.AppVersionCode}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:(n=e.Attributes,Object.entries(n).reduce(function(e,t){var n=Lo(t,2),t=n[0],n=n[1];return null===n?e:Po(Po({},e),((e={})[t]=n,e))},{}))}),void 0!==e.ClientSdkVersion&&null!==e.ClientSdkVersion&&{ClientSdkVersion:e.ClientSdkVersion}),void 0!==e.EventType&&null!==e.EventType&&{EventType:e.EventType}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:lf(e.Metrics)}),void 0!==e.SdkName&&null!==e.SdkName&&{SdkName:e.SdkName}),void 0!==e.Session&&null!==e.Session&&{Session:(n=e.Session,Po(Po(Po(Po({},void 0!==n.Duration&&null!==n.Duration&&{Duration:n.Duration}),void 0!==n.Id&&null!==n.Id&&{Id:n.Id}),void 0!==n.StartTimestamp&&null!==n.StartTimestamp&&{StartTimestamp:n.StartTimestamp}),void 0!==n.StopTimestamp&&null!==n.StopTimestamp&&{StopTimestamp:n.StopTimestamp}))}),void 0!==e.Timestamp&&null!==e.Timestamp&&{Timestamp:e.Timestamp});var n},cf=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},lf=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Lo(t,2),t=n[0],n=n[1];return null===n?e:Po(Po({},e),((e={})[t]=n,e))},{})},pf=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Lo(t,2),t=n[0],n=n[1];return null===n?e:Po(Po({},e),((e={})[t]=Il(n),e))},{})},df=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Lo(t,2),t=n[0],n=n[1];return null===n?e:Po(Po({},e),((e={})[t]=cf(n),e))},{})},ff=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}},hf=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Lo(t,2),t=n[0],n=n[1];return null===n?e:Po(Po({},e),((e={})[t]=kl(n),e))},{})},gf=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},vf=function(e,t){return n=t,((e=void 0===(e=e)?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n},mf=function(e,t){return vf(e,t).then(function(e){return e.length?JSON.parse(e):{}})},yf=function(e,t){function n(e){return e=0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,i,o=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===i.toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},bf={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Sf={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function wf(t,n,r){return{applyToStack:function(e){var o,s,i,a;e.add((o=t,s=r,function(i,e){return function(r){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return[4,i(r)];case 1:return t=e.sent().response,[4,s(t,o)];case 2:return n=e.sent(),[2,{response:t,output:n}]}})})}}),bf),e.add((i=t,a=n,function(r,e){return function(n){return q(void 0,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return[4,a(n.input,i)];case 1:return t=e.sent(),[2,r(F(F({},n),{request:t}))]}})})}}),Sf)}}}(Tl||(Tl={})).filterSensitiveLog=function(e){return Po({},e)},(Pl||(Pl={})).filterSensitiveLog=function(e){return Po({},e)},(Ol||(Ol={})).filterSensitiveLog=function(e){return Po({},e)},(xl||(xl={})).filterSensitiveLog=function(e){return Po({},e)},(Ll||(Ll={})).filterSensitiveLog=function(e){return Po({},e)},(Nl||(Nl={})).filterSensitiveLog=function(e){return Po({},e)},(Rl||(Rl={})).filterSensitiveLog=function(e){return Po({},e)},(Ml||(Ml={})).filterSensitiveLog=function(e){return Po({},e)},(Dl||(Dl={})).filterSensitiveLog=function(e){return Po({},e)},(Ul||(Ul={})).filterSensitiveLog=function(e){return Po({},e)},(Fl||(Fl={})).filterSensitiveLog=function(e){return Po({},e)},(jl||(jl={})).filterSensitiveLog=function(e){return Po({},e)},(Bl||(Bl={})).filterSensitiveLog=function(e){return Po({},e)},(zl||(zl={})).filterSensitiveLog=function(e){return Po({},e)},(Vl||(Vl={})).filterSensitiveLog=function(e){return Po({},e)},(ql||(ql={})).filterSensitiveLog=function(e){return Po({},e)},(Kl||(Kl={})).filterSensitiveLog=function(e){return Po({},e)},(Hl||(Hl={})).filterSensitiveLog=function(e){return Po({},e)},(Gl||(Gl={})).filterSensitiveLog=function(e){return Po({},e)},(Wl||(Wl={})).filterSensitiveLog=function(e){return Po({},e)},($l||($l={})).filterSensitiveLog=function(e){return Po({},e)},(Yl||(Yl={})).filterSensitiveLog=function(e){return Po({},e)},(Jl||(Jl={})).filterSensitiveLog=function(e){return Po({},e)},(Zl||(Zl={})).filterSensitiveLog=function(e){return Po({},e)},(Xl||(Xl={})).filterSensitiveLog=function(e){return Po({},e)},(Ql||(Ql={})).filterSensitiveLog=function(e){return Po({},e)},(ep||(ep={})).filterSensitiveLog=function(e){return Po({},e)},(tp||(tp={})).filterSensitiveLog=function(e){return Po({},e)},(np||(np={})).filterSensitiveLog=function(e){return Po({},e)},(rp||(rp={})).filterSensitiveLog=function(e){return Po({},e)},(ip||(ip={})).filterSensitiveLog=function(e){return Po({},e)},(op||(op={})).filterSensitiveLog=function(e){return Po({},e)},(sp||(sp={})).filterSensitiveLog=function(e){return Po({},e)},(ap||(ap={})).filterSensitiveLog=function(e){return Po({},e)},(up||(up={})).filterSensitiveLog=function(e){return Po({},e)},(cp||(cp={})).filterSensitiveLog=function(e){return Po({},e)},(lp||(lp={})).filterSensitiveLog=function(e){return Po({},e)},(pp||(pp={})).filterSensitiveLog=function(e){return Po({},e)},(dp||(dp={})).filterSensitiveLog=function(e){return Po({},e)},(fp||(fp={})).filterSensitiveLog=function(e){return Po({},e)},(hp||(hp={})).filterSensitiveLog=function(e){return Po({},e)},(gp||(gp={})).filterSensitiveLog=function(e){return Po({},e)},(vp||(vp={})).filterSensitiveLog=function(e){return Po({},e)},(mp||(mp={})).filterSensitiveLog=function(e){return Po({},e)},(yp||(yp={})).filterSensitiveLog=function(e){return Po({},e)},(bp||(bp={})).filterSensitiveLog=function(e){return Po({},e)},(Sp||(Sp={})).filterSensitiveLog=function(e){return Po({},e)},(wp||(wp={})).filterSensitiveLog=function(e){return Po({},e)},(Cp||(Cp={})).filterSensitiveLog=function(e){return Po({},e)},(_p||(_p={})).filterSensitiveLog=function(e){return Po({},e)},(Ep||(Ep={})).filterSensitiveLog=function(e){return Po({},e)},(Ap||(Ap={})).filterSensitiveLog=function(e){return Po({},e)},(Ip||(Ip={})).filterSensitiveLog=function(e){return Po({},e)},(kp||(kp={})).filterSensitiveLog=function(e){return Po({},e)},(Tp||(Tp={})).filterSensitiveLog=function(e){return Po({},e)},(Pp||(Pp={})).filterSensitiveLog=function(e){return Po({},e)},(Op||(Op={})).filterSensitiveLog=function(e){return Po({},e)},(xp||(xp={})).filterSensitiveLog=function(e){return Po({},e)},(Lp||(Lp={})).filterSensitiveLog=function(e){return Po({},e)},(Np||(Np={})).filterSensitiveLog=function(e){return Po({},e)},(Rp||(Rp={})).filterSensitiveLog=function(e){return Po({},e)},(Mp||(Mp={})).filterSensitiveLog=function(e){return Po({},e)},(Dp||(Dp={})).filterSensitiveLog=function(e){return Po({},e)},(Up||(Up={})).filterSensitiveLog=function(e){return Po({},e)},(Fp||(Fp={})).filterSensitiveLog=function(e){return Po({},e)},(jp||(jp={})).filterSensitiveLog=function(e){return Po({},e)},(Bp||(Bp={})).filterSensitiveLog=function(e){return Po({},e)},(zp||(zp={})).filterSensitiveLog=function(e){return Po({},e)},(Vp||(Vp={})).filterSensitiveLog=function(e){return Po({},e)},(qp||(qp={})).filterSensitiveLog=function(e){return Po({},e)},(Kp||(Kp={})).filterSensitiveLog=function(e){return Po({},e)},(Hp||(Hp={})).filterSensitiveLog=function(e){return Po({},e)},(Gp||(Gp={})).filterSensitiveLog=function(e){return Po({},e)},(Wp||(Wp={})).filterSensitiveLog=function(e){return Po({},e)},($p||($p={})).filterSensitiveLog=function(e){return Po({},e)},(Yp||(Yp={})).filterSensitiveLog=function(e){return Po({},e)},(Jp||(Jp={})).filterSensitiveLog=function(e){return Po({},e)},(Zp||(Zp={})).filterSensitiveLog=function(e){return Po({},e)},(Xp||(Xp={})).filterSensitiveLog=function(e){return Po({},e)},(Qp||(Qp={})).filterSensitiveLog=function(e){return Po({},e)},(ed||(ed={})).filterSensitiveLog=function(e){return Po({},e)},(td||(td={})).filterSensitiveLog=function(e){return Po({},e)},(nd||(nd={})).filterSensitiveLog=function(e){return Po({},e)},(rd||(rd={})).filterSensitiveLog=function(e){return Po({},e)},(id||(id={})).filterSensitiveLog=function(e){return Po({},e)},(od||(od={})).filterSensitiveLog=function(e){return Po({},e)},(sd||(sd={})).filterSensitiveLog=function(e){return Po({},e)},(ad||(ad={})).filterSensitiveLog=function(e){return Po({},e)},(ud||(ud={})).filterSensitiveLog=function(e){return Po({},e)},(cd||(cd={})).filterSensitiveLog=function(e){return Po({},e)},(ld||(ld={})).filterSensitiveLog=function(e){return Po({},e)},(pd||(pd={})).filterSensitiveLog=function(e){return Po({},e)},(dd||(dd={})).filterSensitiveLog=function(e){return Po({},e)},(fd||(fd={})).filterSensitiveLog=function(e){return Po({},e)},(hd||(hd={})).filterSensitiveLog=function(e){return Po({},e)},(gd||(gd={})).filterSensitiveLog=function(e){return Po({},e)},(vd||(vd={})).filterSensitiveLog=function(e){return Po({},e)},(md||(md={})).filterSensitiveLog=function(e){return Po({},e)},(yd||(yd={})).filterSensitiveLog=function(e){return Po({},e)},(bd||(bd={})).filterSensitiveLog=function(e){return Po({},e)},(Sd||(Sd={})).filterSensitiveLog=function(e){return Po({},e)},(wd||(wd={})).filterSensitiveLog=function(e){return Po({},e)},(Cd||(Cd={})).filterSensitiveLog=function(e){return Po({},e)},(_d||(_d={})).filterSensitiveLog=function(e){return Po({},e)},(Ed||(Ed={})).filterSensitiveLog=function(e){return Po({},e)},(Ad||(Ad={})).filterSensitiveLog=function(e){return Po({},e)},(Id||(Id={})).filterSensitiveLog=function(e){return Po({},e)},(kd||(kd={})).filterSensitiveLog=function(e){return Po({},e)},(Td||(Td={})).filterSensitiveLog=function(e){return Po({},e)},(Pd||(Pd={})).filterSensitiveLog=function(e){return Po({},e)},(Od||(Od={})).filterSensitiveLog=function(e){return Po({},e)},(xd||(xd={})).filterSensitiveLog=function(e){return Po({},e)},(Ld||(Ld={})).filterSensitiveLog=function(e){return Po({},e)},(Nd||(Nd={})).filterSensitiveLog=function(e){return Po({},e)},(Rd||(Rd={})).filterSensitiveLog=function(e){return Po({},e)},(Md||(Md={})).filterSensitiveLog=function(e){return Po({},e)},(Dd||(Dd={})).filterSensitiveLog=function(e){return Po({},e)},(Ud||(Ud={})).filterSensitiveLog=function(e){return Po({},e)},(Fd||(Fd={})).filterSensitiveLog=function(e){return Po({},e)},(jd||(jd={})).filterSensitiveLog=function(e){return Po({},e)},(Bd||(Bd={})).filterSensitiveLog=function(e){return Po({},e)},(zd||(zd={})).filterSensitiveLog=function(e){return Po({},e)},(Vd||(Vd={})).filterSensitiveLog=function(e){return Po({},e)},(qd||(qd={})).filterSensitiveLog=function(e){return Po({},e)},(Kd||(Kd={})).filterSensitiveLog=function(e){return Po({},e)},(Hd||(Hd={})).filterSensitiveLog=function(e){return Po({},e)},(Gd||(Gd={})).filterSensitiveLog=function(e){return Po({},e)},(Wd||(Wd={})).filterSensitiveLog=function(e){return Po({},e)},($d||($d={})).filterSensitiveLog=function(e){return Po({},e)},(Yd||(Yd={})).filterSensitiveLog=function(e){return Po({},e)},(Jd||(Jd={})).filterSensitiveLog=function(e){return Po({},e)};var Cf,_f=(To(Ef,Cf=cn),Ef.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"PinpointClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:Fp.filterSensitiveLog,outputFilterSensitiveLog:jp.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Ef.prototype.serialize=$e,Ef.prototype.deserialize=Zn,Ef);function Ef(e){var t=Cf.call(this)||this;return t.input=e,t}var Af,If=(To(kf,Af=cn),kf.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"PinpointClient",commandName:"UpdateEndpointCommand",inputFilterSensitiveLog:wd.filterSensitiveLog,outputFilterSensitiveLog:Cd.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},kf.prototype.serialize=er,kf.prototype.deserialize=dn,kf);function kf(e){var t=Af.call(this)||this;return t.input=e,t}var Tf={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new A.StorageHelper).getStorage()};function Pf(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function Of(){return(new Date).getTime()}function xf(e){return Number.isInteger?Number.isInteger(e):"number"==typeof(e=e)&&isFinite(e)&&Math.floor(e)===e}var Lf=new A.ConsoleLogger("StorageCache"),Zn=(Nf.prototype.getModuleName=function(){return"Cache"},Nf.prototype.checkConfig=function(){xf(this.config.capacityInBytes)||(Lf.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=Tf.capacityInBytes),xf(this.config.itemMaxSize)||(Lf.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=Tf.itemMaxSize),xf(this.config.defaultTTL)||(Lf.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=Tf.defaultTTL),xf(this.config.defaultPriority)||(Lf.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=Tf.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(Lf.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Tf.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(Lf.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Tf.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(Lf.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Tf.warningThreshold);5242880<this.config.capacityInBytes&&(Lf.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Tf.capacityInBytes)},Nf.prototype.fillCacheItem=function(e,t,n){t={key:e,data:t,timestamp:Of(),visitedTime:Of(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return t.byteSize=Pf(JSON.stringify(t)),t.byteSize=Pf(JSON.stringify(t)),t},Nf.prototype.configure=function(e){return e&&(e.keyPrefix&&Lf.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},Nf);function Nf(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var Rf,Mf,er=(Rf=function(e,t){return(Rf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Rf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Df=new A.ConsoleLogger("Cache");function Uf(e){var t=this,e=e?Object.assign({},Tf,e):Tf;return(t=Mf.call(this,e)||this).config.storage=e.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var Ff=new(er(Uf,Mf=Zn),Uf.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},Uf.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},Uf.prototype._refreshItem=function(e,t){return e.visitedTime=Of(),this.config.storage.setItem(t,JSON.stringify(e)),e},Uf.prototype._isExpired=function(e){e=this.config.storage.getItem(e),e=JSON.parse(e);return Of()>=e.expires},Uf.prototype._removeItem=function(e,t){t=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(t),this.config.storage.removeItem(e)},Uf.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),Df.error("Failed to set item "+e)}},Uf.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,e=(1-this.config.warningThreshold)*this.config.capacityInBytes;return e<t?t:e},Uf.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},Uf.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},Uf.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);null!=o&&(o=JSON.parse(o),n.push(o))}n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1});for(i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},Uf.prototype.setItem=function(e,t,n){Df.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){n={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+Of()};if(n.priority<1||5<n.priority)Df.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{n=this.fillCacheItem(r,t,n);if(n.byteSize>this.config.itemMaxSize)Df.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var i,o,s=this.config.storage.getItem(r);s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(n.byteSize)&&(i=this._findValidKeys(),this._isCacheFull(n.byteSize)&&(o=this._sizeToPop(n.byteSize),this._popOutItems(i,o))),this._setItem(r,n)}catch(e){Df.warn("setItem failed! "+e)}}}else Df.warn("The value of item should not be undefined!");else Df.warn("Invalid key: should not be empty or 'CurSize'")},Uf.prototype.getItem=function(e,t){Df.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return Df.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(e){return Df.warn("getItem failed! "+e),null}},Uf.prototype.removeItem=function(e){Df.log("Remove item: key is "+e);e=this.config.keyPrefix+e;if(e!==this.config.keyPrefix&&e!==this.cacheCurSizeKey)try{var t=this.config.storage.getItem(e);t&&this._removeItem(e,JSON.parse(t).byteSize)}catch(e){Df.warn("removeItem failed! "+e)}},Uf.prototype.clear=function(){Df.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){Df.warn("clear failed! "+e)}},Uf.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},Uf.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},Uf.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==Tf.keyPrefix||(Df.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=Of.toString()),new Uf(e)},Uf);A.Amplify.register(Ff);var jf=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Bf=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},zf=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Vf=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zf(arguments[t]));return e},qf=new A.ConsoleLogger("EventsBuffer"),Kf=[429,500],Hf=[202],Gf=(Wf.prototype.push=function(e){if(this._buffer>this._config.bufferSize)return qf.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var t=((t={})[e.params.event.eventId]=e,t);this._buffer.push(t)},Wf.prototype.pause=function(){this._pause=!0},Wf.prototype.resume=function(){this._pause=!1},Wf.prototype.updateClient=function(e){this._client=e},Wf.prototype.flush=function(){this._flush=!0},Wf.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},Wf.prototype._sendBatch=function(){var e,t=this._buffer.length;this._flush&&!t&&clearInterval(this._interval),!this._pause&&t&&(e=this._config.flushSize,t=Math.min(e,t),t=this._buffer.splice(0,t),this._putEvents(t))},Wf.prototype._putEvents=function(o){return jf(this,void 0,void 0,function(){var t,n,r,i;return Bf(this,function(e){switch(e.label){case 0:t=this._bufferToMap(o),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),r=new _f(n),[4,this._client.send(r)];case 2:return i=e.sent(),this._processPutEventsSuccessResponse(i,t),[3,4];case 3:return i=e.sent(),[2,this._handlePutEventsFailure(i,t)];case 4:return[2]}})})},Wf.prototype._generateBatchEventParams=function(e){var c={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=e.params,n=t.event,r=t.timestamp,i=t.config,o=n.name,s=n.attributes,a=n.metrics,u=n.eventId,e=n.session,t=i.appId,n=i.endpointId,i=c.EventsRequest.BatchItem;c.ApplicationId=c.ApplicationId||t,i[n]||(i[n]={Endpoint:{},Events:{}}),i[n].Events[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:e}}),c},Wf.prototype._handlePutEventsFailure=function(e,t){qf.debug("_putEvents Failed: ",e);e=e.$metadata&&e.$metadata.httpStatusCode;Kf.includes(e)&&(t=Object.values(t),this._retry(t))},Wf.prototype._processPutEventsSuccessResponse=function(e,a){var e=e.EventsResponse.Results,u=[];Object.entries(e).forEach(function(e){var e=zf(e,2),s=e[0],e=e[1].EventsItemResponse;Object.entries(e).forEach(function(e){var t=zf(e,2),n=t[0],r=t[1],i=r.StatusCode,o=r.Message,e=a[n],t={EventsResponse:{Results:((t={})[s]={EventsItemResponse:((r={})[n]={StatusCode:i,Message:o},r)},t)}};if(Hf.includes(i))e.handlers.resolve(t);else{if(!Kf.includes(i)){i=e.params.event.name;return qf.error("event "+n+" : "+i+" failed with error: "+o),e.handlers.reject(t)}u.push(e)}})}),u.length&&this._retry(u)},Wf.prototype._retry=function(e){var i=[];e.forEach(function(e){var t=e.params,n=t.event,r=n.eventId,n=n.name;if(0<t.resendLimit--)return qf.debug("resending event "+r+" : "+n+" with "+t.resendLimit+" retry attempts remaining"),void i.push(((t={})[r]=e,t));qf.debug("no retry attempts remaining for event "+r+" : "+n)}),(e=this._buffer).unshift.apply(e,Vf(i))},Wf.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=zf(Object.entries(t),1),t=zf(n[0],2),n=t[0],t=t[1];return e[n]=t,e},{})},Wf);function Wf(e,t){this._pause=!1,this._flush=!1,qf.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function $f(e,t){A.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Qf)}var Yf=function(){return(Yf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Jf=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Zf=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Xf=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},Qf="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",eh=new A.ConsoleLogger("AWSPinpointProvider"),th=[429,500],nh=[202],rh="_update_endpoint",ih="_session.stop",oh="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,sh=(ah.prototype.getCategory=function(){return ah.category},ah.prototype.getProviderName=function(){return ah.providerName},ah.prototype.configure=function(e){var t=this;return eh.debug("configure Analytics",e),this._config=Object.assign({},this._config,e||{}),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled?this._config.endpointId?$f("pinpointProvider_configured",null):(e=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(e).then(function(e){eh.debug("setting endpoint id from the cache",e),t._config.endpointId=e,$f("pinpointProvider_configured",null)}).catch(function(e){eh.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},ah.prototype.record=function(n,r){return Jf(this,void 0,void 0,function(){var t;return Zf(this,function(e){switch(e.label){case 0:return eh.debug("_public record",n),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),t=(new Date).getTime(),this._generateSession(n),n.event.eventId=h.v1(),Object.assign(n,{timestamp:t,config:this._config}),n.event.immediate?[2,this._send(n,r)]:(this._putToBuffer(n,r),[2])):(eh.debug("cannot send events without credentials, applicationId or region"),[2,r.reject(new Error("No credentials, applicationId or region"))])}})})},ah.prototype._sendEndpointUpdate=function(n){return Jf(this,void 0,void 0,function(){var t;return Zf(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},ah.prototype._putToBuffer=function(e,t){e.event.name!==rh?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},ah.prototype._generateSession=function(e){this._sessionId=this._sessionId||h.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=h.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case ih:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||h.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||h.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},ah.prototype._send=function(t,n){return Jf(this,void 0,void 0,function(){return Zf(this,function(e){switch(t.event.name){case rh:return[2,this._updateEndpoint({params:t,handlers:n})];case ih:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},ah.prototype._generateBatchItemContext=function(e){var t=e.event,n=e.timestamp,r=e.config,i=t.name,o=t.attributes,s=t.metrics,a=t.eventId,u=t.session,c=r.appId,e=r.endpointId,t={ApplicationId:c,EventsRequest:{BatchItem:{}}},r={Endpoint:{}};return r.Events=((c={})[a]={EventType:i,Timestamp:new Date(n).toISOString(),Attributes:o,Metrics:s,Session:u},c),t.EventsRequest.BatchItem[e]=r,t},ah.prototype._pinpointPutEvents=function(a,u){return Jf(this,void 0,void 0,function(){var t,n,r,i,o,s;return Zf(this,function(e){switch(e.label){case 0:t=a.event.eventId,n=a.config.endpointId,i=this._generateBatchItemContext(a),r=new _f(i),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(r)];case 2:return(s=e.sent(),o=n,i=t,o=s.EventsResponse.Results[o].EventsItemResponse[i],i=o.StatusCode,o=o.Message,nh.includes(i))?(eh.debug("record event success. ",s),[2,u.resolve(s)]):th.includes(i)?(this._retry(a,u),[3,4]):(eh.error("Event "+t+" is not accepted, the error is "+o),[2,u.reject(s)]);case 3:return s=e.sent(),this._eventError(s),[2,u.reject(s)];case 4:return[2]}})})},ah.prototype._pinpointSendStopSession=function(e,t){if(oh){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,n={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},i="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",o=JSON.stringify(o),r=A.Signer.signUrl({url:i,body:o,method:"POST"},n,{region:r,service:"mobiletargeting"},null);return navigator.sendBeacon(r,o)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},ah.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(eh.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):eh.debug("retry times used up for event "+e.eventName)},ah.prototype._updateEndpoint=function(a){return Jf(this,void 0,void 0,function(){var t,n,r,i,o,s;return Zf(this,function(e){switch(e.label){case 0:i=a.params,t=a.handlers,n=i.config,o=i.event,r=n.appId,i=n.endpointId,o=this._endpointRequest(n,A.JS.transferKeyToLowerCase(o,[],["attributes","userAttributes","Attributes","UserAttributes"])),i={ApplicationId:r,EndpointId:i,EndpointRequest:o},e.label=1;case 1:return e.trys.push([1,3,,4]),o=new If(i),[4,this.pinpointClient.send(o)];case 2:return s=e.sent(),eh.debug("updateEndpoint success",s),this._endpointGenerating=!1,this._resumeBuffer(),t.resolve(s),[2];case 3:return s=e.sent(),s={err:s,update_params:i,endpointObject:a},[2,this._handleEndpointUpdateFailure(s)];case 4:return[2]}})})},ah.prototype._handleEndpointUpdateFailure=function(i){return Jf(this,void 0,void 0,function(){var t,n,r;return Zf(this,function(e){return t=i.err,n=i.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,eh.debug("updateEndpoint error",t),403===r?[2,this._handleEndpointUpdateForbidden(i)]:th.includes(r)?[2,this._retryEndpointUpdate(n,!0)]:(eh.error("updateEndpoint failed",t),n.handlers.reject(t),[2])})})},ah.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,e=t.retryable;if("ExpiredTokenException"!==r&&!e)return n.handlers.reject(t);this._retryEndpointUpdate(n)},ah.prototype._retryEndpointUpdate=function(e,t){eh.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return eh.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));eh.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&eh.error("Initial endpoint update failed. ")},ah.prototype._initClients=function(r){return Jf(this,void 0,void 0,function(){var t,n;return Zf(this,function(e){return eh.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?eh.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,eh.debug("init clients with credentials",r),this.pinpointClient=new El({region:n,credentials:r,customUserAgent:A.getAmplifyUserAgent()}),this.pinpointClient.middlewareStack.addRelativeTo(function(t){return function(e){return delete e.request.headers["amz-sdk-invocation-id"],delete e.request.headers["amz-sdk-request"],t(e)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},ah.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof Gf},ah.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new Gf(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},ah.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},ah.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},ah.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},ah.prototype._customizePinpointClientReq=function(){},ah.prototype._getEndpointId=function(r){return Jf(this,void 0,void 0,function(){var t,n;return Zf(this,function(e){switch(e.label){case 0:return[4,Ff.getItem(r)];case 1:return t=e.sent(),eh.debug("endpointId from cache",t,"type",typeof t),t||(t=h.v1(),n=(new Date).getTime()+31536e8,Ff.setItem(r,t,{expires:n,priority:1})),[2,t]}})})},ah.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},e={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},i=(i.clientId,i.appTitle,i.appVersionName,i.appVersionCode,i.appPackageName,Xf(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),r=t.address?"android"===r.platform?"GCM":"APNS":void 0,t=Yf(Yf(Yf({channelType:r,requestId:h.v1(),effectiveDate:(new Date).toISOString()},o),t),{attributes:Yf(Yf({},o.attributes),t.attributes),demographic:Yf(Yf(Yf(Yf({},e),i),o.demographic),t.demographic),location:Yf(Yf({},o.location),t.location),metrics:Yf(Yf({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:Yf(Yf({},o.userAttributes),t.userAttributes)}}),t=(t.userId,t.userAttributes,t.name,t.session,t.eventId,t.immediate,Xf(t,["userId","userAttributes","name","session","eventId","immediate"]));return A.JS.transferKeyToUpperCase(t,[],["metrics","userAttributes","attributes"])},ah.prototype._eventError=function(e){eh.error("record event failed.",e),eh.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},ah.prototype._getCredentials=function(){return Jf(this,void 0,void 0,function(){var t;return Zf(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,A.Credentials.get()];case 1:return(t=e.sent())?(eh.debug("set credentials for analytics",t),[2,A.Credentials.shear(t)]):[2,null];case 2:return t=e.sent(),eh.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},ah.category="Analytics",ah.providerName="AWSPinpoint",ah);function ah(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=A.ClientDevice.clientInfo()}var uh=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ch=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(uh(arguments[t]));return e},lh=[],ph=(dh.add=function(e,t,n){fh(e,t).set(n)},dh.remove=function(e,t){fh(e,t).remove()},dh.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,ch(e)))}},dh.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},dh);function dh(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function fh(t,n){var e=lh.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new ph(t,n),lh.push(e)),e}var hh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},gh=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},vh=new A.ConsoleLogger("PageViewTracker"),mh="aws-amplify-analytics-prevUrl",yh={enable:!1,provider:"AWSPinpoint",getUrl:function(){return A.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},dn=(bh.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},bh.prototype._isSameUrl=function(){return sessionStorage.getItem(mh)===this._config.getUrl()&&(vh.debug("the url is same"),!0)},bh.prototype._pageViewTrackDefault=function(){return hh(this,void 0,void 0,function(){var t,n,r;return gh(this,function(e){switch(e.label){case 0:return A.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(vh.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=n,r=Object.assign({url:t},r),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){vh.debug("Failed to record the page view event",e)}),sessionStorage.setItem(mh,t)),[2]}})})},bh.prototype._trackFunc=function(){return hh(this,void 0,void 0,function(){var t,n,r;return gh(this,function(e){switch(e.label){case 0:return A.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(vh.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=n,r=Object.assign({url:t},r),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){vh.debug("Failed to record the page view event",e)}),sessionStorage.setItem(mh,t)),[2]}})})},bh.prototype._pageViewTrackSPA=function(){A.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(ph.add(history,"pushState",this._trackFunc),ph.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(ph.remove(history,"pushState"),ph.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):vh.debug("not in the supported web enviroment")},bh);function bh(e,t){vh.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},yh,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var er=A.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,Sh=er?er.matches||er.matchesSelector||er.webkitMatchesSelector||er.mozMatchesSelector||er.msMatchesSelector||er.oMatchesSelector:null;function wh(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||Ch(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||Ch(e,n))return 1}}function Ch(e,t){if("string"!=typeof t)return!1;if(Sh)return Sh.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),i=0;n=r[i];i++)if(n===e)return!0;return!1}function _h(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),o=0;r=i[o];o++)if(wh(r,t))return r}function Eh(e,t,o,s,a){void 0===a&&(a={});function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),i=0;n=r[i];i++)1===n.nodeType&&wh(n,o)&&(t=n);else t=_h(e.target,o,!0);t&&s.call(t,e,t)}return e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var Ah=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Ih=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},kh=new A.ConsoleLogger("EventTracker"),Th={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},Zn=(Ph.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=Eh(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},Ph.prototype._trackFunc=function(s,a){return Ah(this,void 0,void 0,function(){var t,n,r,i,o;return Ih(this,function(e){switch(e.label){case 0:return t={},n=a.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=a.getAttribute(this._config.selectorPrefix+"name"),(o=a.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach(function(e){e=e.trim().split(/\s*:\s*/);t[e[0]]=e[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return i=e.sent(),[3,3];case 2:i=this._config.attributes,e.label=3;case 3:return(o=i,o=Object.assign({type:s.type,target:s.target.localName+" with id "+s.target.id},o,t),kh.debug("events needed to be recorded",n),kh.debug("attributes needed to be attached",t),n.indexOf(s.type)<0)?(kh.debug("event "+s.type+" is not selected to be recorded"),[2]):(this._tracker({name:r||"event",attributes:o},this._config.provider).catch(function(e){kh.debug("Failed to record the "+s.type+" event', "+e)}),[2])}})})},Ph);function Ph(e,t){A.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},Th,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),kh.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):kh.debug("not in the supported web environment")}var Oh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},xh=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Lh=new A.ConsoleLogger("SessionTracker"),Nh={enable:!1,provider:"AWSPinpoint"},Rh=!1,er=(Mh.prototype._envCheck=function(){if(!A.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return Lh.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return Lh.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},Mh.prototype._trackFunc=function(){return Oh(this,void 0,void 0,function(){var t,n;return xh(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=t,n=Object.assign({},n),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch(function(e){Lh.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){Lh.debug("record session start event failed.",e)}),[2]}})})},Mh.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){e=Object.assign({},e);t._tracker({name:"_session.stop",attributes:e,immediate:!0},t._config.provider).catch(function(e){Lh.debug("record session stop event failed.",e)})})},Mh.prototype._sendInitialEvent=function(){return Oh(this,void 0,void 0,function(){var t,n;return xh(this,function(e){switch(e.label){case 0:return Rh?(Lh.debug("the start session has been sent when the page is loaded"),[2]):(Rh=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=t,n=Object.assign({},n),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){Lh.debug("record session start event failed.",e)}),[2]}})})},Mh.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},Mh);function Mh(e,t){this._config=Object.assign({},Nh,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}var Dh=function(){return(Dh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Uh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Fh=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},jh=new A.ConsoleLogger("AnalyticsClass"),Bh="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",zh={pageView:dn,event:Zn,session:er},Vh=null,er=(qh.prototype.getModuleName=function(){return"Analytics"},qh.prototype.configure=function(e){var n=this;if(!e)return this._config;jh.debug("configure Analytics",e);var t=A.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(Dh({disabled:n._config.disabled,autoSessionRecord:n._config.autoSessionRecord},t))}),0===this._pluggables.length&&this.addPluggable(new sh),A.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",Bh),jh.debug("current configuration",this._config),this._config},qh.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,t=Dh({disabled:this._config.disabled},t);return e.configure(t),t}},qh.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return jh.debug("No plugin found with providerName",e),null},qh.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;t===this._pluggables.length?jh.debug("No plugin found with providerName",e):this._pluggables.splice(t,t+1)},qh.prototype.disable=function(){this._disabled=!0},qh.prototype.enable=function(){this._disabled=!1},qh.prototype.startSession=function(n){return Uh(this,void 0,void 0,function(){var t;return Fh(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},qh.prototype.stopSession=function(n){return Uh(this,void 0,void 0,function(){var t;return Fh(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},qh.prototype.record=function(n,r,i){return Uh(this,void 0,void 0,function(){var t;return Fh(this,function(e){return t=null,t="string"==typeof n?{event:{name:n,attributes:r,metrics:i},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},qh.prototype.updateEndpoint=function(n,r){return Uh(this,void 0,void 0,function(){var t;return Fh(this,function(e){return t=Dh(Dh({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},qh.prototype._sendEvent=function(r){var e=this;if(this._disabled)return jh.debug("Analytics has been disabled"),Promise.resolve();var i=r.provider||"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===i&&e.record(r,{resolve:t,reject:n})})})},qh.prototype.autoTrack=function(e,t){var n;zh[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new zh[e](this.record,t)):jh.debug("invalid tracker type")},qh);function qh(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(Vh=this).record=this.record.bind(this),A.Hub.listen("auth",Wh),A.Hub.listen("storage",Wh),A.Hub.listen("analytics",Wh)}var Kh=!1,Hh=!1,Gh=!1,Wh=function(e){var t=e.channel,n=e.payload;switch(jh.debug("on hub capsule "+t,n),t){case"auth":Yh(n);break;case"storage":$h(n);break;case"analytics":Jh(n)}},$h=function(e){var t=e.data,e=t.attrs,t=t.metrics;e&&Gh&&Vh.record({name:"Storage",attributes:e,metrics:t}).catch(function(e){jh.debug("Failed to send the storage event automatically",e)})},Yh=function(e){e=e.event;if(e){var t=function(n){return Uh(void 0,void 0,void 0,function(){var t;return Fh(this,function(e){switch(e.label){case 0:if(!Hh||!Gh)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Vh.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),jh.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(e){case"signIn":return t("sign_in");case"signUp":return t("sign_up");case"signOut":return t("sign_out");case"signIn_failure":return t("auth_fail");case"configured":(Hh=!0)&&Gh&&Zh()}}},Jh=function(e){e=e.event;e&&"pinpointProvider_configured"===e&&(Gh=!0,Hh&&Gh&&Zh())},Zh=function(){var e=Vh.configure();!Kh&&e.autoSessionRecord&&(Vh.updateEndpoint({immediate:!0}).catch(function(e){jh.debug("Failed to update the endpoint",e)}),Kh=!0),Vh.autoTrack("session",{enable:e.autoSessionRecord})},Xh=new er;A.Amplify.register(Xh);for(var Qh={},eg={},tg=0;tg<256;tg++){var ng=tg.toString(16).toLowerCase();1===ng.length&&(ng="0"+ng),Qh[tg]=ng,eg[ng]=tg}function rg(e){for(var t="",n=0;n<e.byteLength;n++)t+=Qh[e[n]];return t}var ig=(og.fromNumber=function(e){if(0x8000000000000000<e||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));-1<n&&0<r;n--,r/=256)t[n]=r;return e<0&&sg(t),new og(t)},og.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&sg(e),parseInt(rg(e),16)*(t?-1:1)},og.prototype.toString=function(){return String(this.valueOf())},og);function og(e){if(8!==(this.bytes=e).byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}function sg(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;-1<t&&(e[t]++,0===e[t]);t--);}var ag=(ug.prototype.format=function(e){var t,n,r,i,o=[];try{for(var s=H(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(o.reduce(function(e,t){return e+t.byteLength},0)),p=0;try{for(var d=H(o),f=d.next();!f.done;f=d.next()){var h=f.value;l.set(h,p),p+=h.byteLength}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return l},ug.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":var r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);var i=new Uint8Array(r.buffer);return i.set(e.value,3),i;case"string":r=this.fromUtf8(e.value),i=new DataView(new ArrayBuffer(3+r.byteLength));i.setUint8(0,7),i.setUint16(1,r.byteLength,!1);i=new Uint8Array(i.buffer);return i.set(r,3),i;case"timestamp":var o=new Uint8Array(9);return o[0]=8,o.set(ig.fromNumber(e.value.valueOf()).bytes,1),o;case"uuid":if(!yg.test(e.value))throw new Error("Invalid UUID received: "+e.value);o=new Uint8Array(17);return o[0]=9,o.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in eg))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=eg[r]}return t}(e.value.replace(/\-/g,"")),1),o}},ug.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:cg,value:!0};break;case 1:t[i]={type:cg,value:!1};break;case 2:t[i]={type:lg,value:e.getInt8(n++)};break;case 3:t[i]={type:pg,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:dg,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:fg,value:new ig(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var o=e.getUint16(n,!1);n+=2,t[i]={type:hg,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:var s=e.getUint16(n,!1);n+=2,t[i]={type:gg,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[i]={type:vg,value:new Date(new ig(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:s=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:mg,value:rg(s.subarray(0,4))+"-"+rg(s.subarray(4,6))+"-"+rg(s.subarray(6,8))+"-"+rg(s.subarray(8,10))+"-"+rg(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},ug);function ug(e,t){this.toUtf8=e,this.fromUtf8=t}(Mg=Mg=Mg||{})[Mg.boolTrue=0]="boolTrue",Mg[Mg.boolFalse=1]="boolFalse",Mg[Mg.byte=2]="byte",Mg[Mg.short=3]="short",Mg[Mg.integer=4]="integer",Mg[Mg.long=5]="long",Mg[Mg.byteArray=6]="byteArray",Mg[Mg.string=7]="string",Mg[Mg.timestamp=8]="timestamp",Mg[Mg.uuid=9]="uuid";var cg="boolean",lg="byte",pg="short",dg="integer",fg="long",hg="binary",gg="string",vg="timestamp",mg="uuid",yg=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var bg=(Sg.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),e=new DataView(o.buffer,o.byteOffset,o.byteLength),t=new c.Crc32;return e.setUint32(0,i,!1),e.setUint32(4,r.byteLength,!1),e.setUint32(8,t.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),e.setUint32(i-4,t.update(o.subarray(8,i-4)).digest(),!1),o},Sg.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=(a=new DataView(r,n,t)).getUint32(0,!1);if(t!==i)throw new Error("Reported message length does not match received message length");var o=a.getUint32(4,!1),s=a.getUint32(8,!1),e=a.getUint32(t-4,!1),a=(new c.Crc32).update(new Uint8Array(r,n,8));if(s!==a.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+a.digest()+")");if(a.update(new Uint8Array(r,n+8,t-12)),e!==a.digest())throw new Error("The message checksum ("+a.digest()+") did not match the expected value of "+e);return{headers:new DataView(r,n+8+4,o),body:new Uint8Array(r,n+8+4+o,i-o-16)}}(e),e=t.headers,t=t.body;return{headers:this.headerMarshaller.parse(e),body:t}},Sg.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},Sg);function Sg(e,t){this.headerMarshaller=new ag(e,t)}function wg(a){var u=0,c=0,l=null,p=null,e={};return e[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o,s;return K(this,function(e){switch(e.label){case 0:t=a[Symbol.asyncIterator](),e.label=1;case 1:return[4,$(t.next())];case 2:return n=e.sent(),r=n.value,n.done?u?[3,4]:[4,$(void 0)]:[3,10];case 3:return[2,e.sent()];case 4:return u!==c?[3,7]:[4,$(l)];case 5:return[4,e.sent()];case 6:return e.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,$(void 0)];case 9:return[2,e.sent()];case 10:i=r.length,o=0,e.label=11;case 11:if(!(o<i))return[3,15];if(!l){if(s=i-o,p=p||new Uint8Array(4),s=Math.min(4-c,s),p.set(r.slice(o,o+s),c),o+=s,(c+=s)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);u=e,c=4,l=new Uint8Array(e),new DataView(l.buffer).setUint32(0,e,!1)}(new DataView(p.buffer).getUint32(0,!1)),p=null}return s=Math.min(u-c,i-o),l.set(r.slice(o,o+s),c),c+=s,o+=s,u&&u===c?[4,$(l)]:[3,14];case 12:return[4,e.sent()];case 13:e.sent(),l=null,c=u=0,e.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},e}var Cg=(_g.prototype.deserialize=function(e,t){var d,f,e=wg(e);return d=e,f={eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder},(t={})[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o,s,a,u,c,l,p;return K(this,function(e){switch(e.label){case 0:e.trys.push([0,12,13,18]),t=J(d),e.label=1;case 1:return[4,$(t.next())];case 2:if((n=e.sent()).done)return[3,11];if(o=n.value,r=f.eventMarshaller.unmarshall(o),"error"!==(i=r.headers[":message-type"].value))return[3,3];throw(o=new Error(r.headers[":error-message"].value||"UnknownError")).name=r.headers[":error-code"].value,o;case 3:return"exception"!==i?[3,5]:(s=r.headers[":exception-type"].value,(u={})[s]=r,a=u,[4,$(f.deserializer(a))]);case 4:if((u=e.sent()).$unknown)throw(a=new Error(f.toUtf8(r.body))).name=s,a;throw u[s];case 5:return"event"!==i?[3,9]:((c={})[r.headers[":event-type"].value]=r,c=c,[4,$(f.deserializer(c))]);case 6:return(c=e.sent()).$unknown?[3,10]:[4,$(c)];case 7:return[4,e.sent()];case 8:return e.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+r.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return l=e.sent(),l={error:l},[3,18];case 13:return e.trys.push([13,,16,17]),n&&!n.done&&(p=t.return)?[4,$(p.call(t))]:[3,15];case 14:e.sent(),e.label=15;case 15:return[3,17];case 16:if(l)throw l.error;return[7];case 17:return[7];case 18:return[2]}})})},t},_g.prototype.serialize=function(s,a){var u=this,e={};return e[Symbol.asyncIterator]=function(){return Y(this,arguments,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:e.trys.push([0,7,8,13]),t=J(s),e.label=1;case 1:return[4,$(t.next())];case 2:return(n=e.sent()).done?[3,6]:(r=n.value,[4,$(u.eventMarshaller.marshall(a(r)))]);case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return i=e.sent(),i={error:i},[3,13];case 8:return e.trys.push([8,,11,12]),n&&!n.done&&(o=t.return)?[4,$(o.call(t))]:[3,10];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(i)throw i.error;return[7];case 12:return[7];case 13:return[4,$(new Uint8Array(0))];case 14:return[4,e.sent()];case 15:return e.sent(),[2]}})})},e},_g);function _g(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new bg(t,e),this.utfEncoder=t}var Eg=(Ag.prototype.deserialize=function(e,t){e="function"==typeof e[Symbol.asyncIterator]?e:function(o){return Y(this,arguments,function(){var t,n,r,i;return K(this,function(e){switch(e.label){case 0:n=t=!1,r=new Array,o.on("error",function(e){if(t=t||!0,e)throw e}),o.on("data",function(e){r.push(e)}),o.on("end",function(){t=!0}),e.label=1;case 1:return n?[3,6]:[4,$(new Promise(function(e){return setTimeout(function(){return e(r.shift())},0)}))];case 2:return(i=e.sent())?[4,$(i)]:[3,5];case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return n=t&&0===r.length,[3,1];case 6:return[2]}})})}(e);return this.universalMarshaller.deserialize(e,t)},Ag.prototype.serialize=function(e,t){t=this.universalMarshaller.serialize(e,t);if("function"==typeof s.Readable.from)return s.Readable.from(t);var r=t[Symbol.asyncIterator](),n=new s.Readable({autoDestroy:!0,objectMode:!0,read:function(){return q(this,void 0,void 0,function(){var n=this;return K(this,function(e){return r.next().then(function(e){var t=e.done,e=e.value;t?n.push(null):n.push(e)}).catch(function(e){n.destroy(e)}),[2]})})}});return n.on("error",function(){n.destroy()}),n.on("end",function(){n.destroy()}),n},Ag);function Ag(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new bg(t,e),this.universalMarshaller=new Cg({utf8Decoder:e,utf8Encoder:t})}var Ig,kg;function Tg(t){return t&&["provider"].find(function(e){return t.hasOwnProperty(e)})}function Pg(e){return void 0!==e.redirectSignIn}(Mg=Ig=Ig||{}).Cognito="COGNITO",Mg.Google="Google",Mg.Facebook="Facebook",Mg.Amazon="LoginWithAmazon",Mg.Apple="SignInWithApple",(Mg=kg=kg||{}).NoConfig="noConfig",Mg.MissingAuthConfig="missingAuthConfig",Mg.EmptyUsername="emptyUsername",Mg.InvalidUsername="invalidUsername",Mg.EmptyPassword="emptyPassword",Mg.EmptyCode="emptyCode",Mg.SignUpError="signUpError",Mg.NoMFA="noMFA",Mg.InvalidMFA="invalidMFA",Mg.EmptyChallengeResponse="emptyChallengeResponse",Mg.NoUserSession="noUserSession",Mg.Default="default",Mg.DeviceConfig="deviceConfig",Mg.NetworkError="networkError";var Og,xg=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,e=t.AuthParameters,t=t.ClientMetadata;this.validationData=n||{},this.authParameters=e||{},this.clientMetadata=t||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}();if(!(Og=!(Og=!(Og="undefined"!=typeof window&&window.crypto?window.crypto:Og)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:Og)&&void 0!==S&&S.crypto?S.crypto:Og)&&"function"==typeof require)try{Og=require("crypto")}catch(e){}var Lg=function(){function r(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var e=r.prototype;return e.random=function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(Og){if("function"==typeof Og.getRandomValues)try{return Og.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof Og.randomBytes)try{return Og.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new r(t,e)},e.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},r}();function Ng(e,t){null!=e&&this.fromString(e,t)}function Rg(){return new Ng(null)}var Mg="undefined"!=typeof navigator,S=Mg&&"Microsoft Internet Explorer"==navigator.appName?(Ng.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;0<=--o;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},30):Mg&&"Netscape"!=navigator.appName?(Ng.prototype.am=function(e,t,n,r,i,o){for(;0<=--o;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},26):(Ng.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;0<=--o;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},28);Ng.prototype.DB=S,Ng.prototype.DM=(1<<S)-1,Ng.prototype.DV=1<<S;Ng.prototype.FV=Math.pow(2,52),Ng.prototype.F1=52-S,Ng.prototype.F2=2*S-52;for(var Dg="0123456789abcdefghijklmnopqrstuvwxyz",Ug=new Array,Fg="0".charCodeAt(0),jg=0;jg<=9;++jg)Ug[Fg++]=jg;for(Fg="a".charCodeAt(0),jg=10;jg<36;++jg)Ug[Fg++]=jg;for(Fg="A".charCodeAt(0),jg=10;jg<36;++jg)Ug[Fg++]=jg;function Bg(e){return Dg.charAt(e)}function zg(e){var t=Rg();return t.fromInt(e),t}function Vg(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function qg(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Kg(e){return v.Buffer.from((new Lg).random(e).toString(),"hex")}qg.prototype.convert=function(e){var t=Rg();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(Ng.ZERO)&&this.m.subTo(t,t),t},qg.prototype.revert=function(e){var t=Rg();return e.copyTo(t),this.reduce(t),t},qg.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},qg.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},qg.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Ng.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Ng.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Ng.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;0<=--r;){var s=(s=r,null==(s=Ug[e.charCodeAt(s)])?-1:s);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&Ng.ZERO.subTo(this,this)},Ng.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},Ng.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},Ng.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},Ng.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;0<=a;--a)t[a]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},Ng.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},Ng.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},Ng.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;0<=--i;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Ng.ZERO.subTo(t,t)},Ng.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},Ng.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Rg());var o=Rg(),s=this.s,a=e.s,e=this.DB-Vg(r[r.t-1]);0<e?(r.lShiftTo(e,o),i.lShiftTo(e,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,c=o[u-1];if(0!=c){var i=c*(1<<this.F1)+(1<u?o[u-2]>>this.F2:0),l=this.FV/i,p=(1<<this.F1)/i,d=1<<this.F2,f=n.t,h=f-u,g=null==t?Rg():t;for(o.dlShiftTo(h,g),0<=n.compareTo(g)&&(n[n.t++]=1,n.subTo(g,n)),Ng.ONE.dlShiftTo(u,g),g.subTo(o,o);o.t<u;)o[o.t++]=0;for(;0<=--h;){var v=n[--f]==c?this.DM:Math.floor(n[f]*l+(n[f-1]+d)*p);if((n[f]+=o.am(0,v,n,h,0,u))<v)for(o.dlShiftTo(h,g),n.subTo(g,n);n[f]<--v;)n.subTo(g,n)}null!=t&&(n.drShiftTo(u,t),s!=a&&Ng.ZERO.subTo(t,t)),n.t=u,n.clamp(),0<e&&n.rShiftTo(e,n),s<0&&Ng.ZERO.subTo(n,n)}}},Ng.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},Ng.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},Ng.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(i=!0,o=Bg(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),(i=0<n?!0:i)&&(o+=Bg(n));return i?o:"0"},Ng.prototype.negate=function(){var e=Rg();return Ng.ZERO.subTo(this,e),e},Ng.prototype.abs=function(){return this.s<0?this.negate():this},Ng.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},Ng.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Vg(this[this.t-1]^this.s&this.DM)},Ng.prototype.mod=function(e){var t=Rg();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(Ng.ZERO)&&e.subTo(t,t),t},Ng.prototype.equals=function(e){return 0==this.compareTo(e)},Ng.prototype.add=function(e){var t=Rg();return this.addTo(e,t),t},Ng.prototype.subtract=function(e){var t=Rg();return this.subTo(e,t),t},Ng.prototype.multiply=function(e){var t=Rg();return this.multiplyTo(e,t),t},Ng.prototype.divide=function(e){var t=Rg();return this.divRemTo(e,t,null),t},Ng.prototype.modPow=function(e,t,n){var r=e.bitLength(),i=zg(1),o=new qg(t);if(r<=0)return i;var s=r<18?1:r<48?3:r<144?4:r<768?5:6,a=new Array,u=3,c=s-1,l=(1<<s)-1;if(a[1]=o.convert(this),1<s){var p=Rg();for(o.sqrTo(a[1],p);u<=l;)a[u]=Rg(),o.mulTo(p,a[u-2],a[u]),u+=2}for(var d,f,h=e.t-1,g=!0,v=Rg(),r=Vg(e[h])-1;0<=h;){for(c<=r?d=e[h]>>r-c&l:(d=(e[h]&(1<<r+1)-1)<<c-r,0<h&&(d|=e[h-1]>>this.DB+r-c)),u=s;0==(1&d);)d>>=1,--u;if((r-=u)<0&&(r+=this.DB,--h),g)a[d].copyTo(i),g=!1;else{for(;1<u;)o.sqrTo(i,v),o.sqrTo(v,i),u-=2;0<u?o.sqrTo(i,v):(f=i,i=v,v=f),o.mulTo(v,a[d],i)}for(;0<=h&&0==(e[h]&1<<r);)o.sqrTo(i,v),f=i,i=v,v=f,--r<0&&(r=this.DB-1,--h)}return t=o.revert(i),n(null,t),t},Ng.ZERO=zg(0),Ng.ONE=zg(1);var Hg=/^[89a-f]/i,Gg=function(){function e(e){this.N=new Ng("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Ng("2",16),this.k=new Ng(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=v.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},t.generateRandomSmallA=function(){return new Ng(Kg(128).toString("hex"),16)},t.generateRandomString=function(){return Kg(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();e=""+e+t+":"+this.randomPassword,t=this.hash(e),e=Kg(16).toString("hex");this.SaltToHashDevices=this.padHex(new Ng(e,16)),this.g.modPow(new Ng(this.hexHash(this.SaltToHashDevices+t),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},t.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(Ng.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new Ng(this.UHexHash,16)},t.hash=function(e){e=e instanceof v.Buffer?w.lib.WordArray.create(e):e,e=_(e).toString();return new Array(64-e.length).join("0")+e},t.hexHash=function(e){return this.hash(v.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=w.lib.WordArray.create(v.Buffer.concat([this.infoBits,v.Buffer.from(String.fromCharCode(1),"utf8")])),e=e instanceof v.Buffer?w.lib.WordArray.create(e):e,t=t instanceof v.Buffer?w.lib.WordArray.create(t):t,t=E(e,t),t=E(n,t);return v.Buffer.from(t.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(Ng.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(Ng.ZERO))throw new Error("U cannot be zero.");t=""+this.poolName+e+":"+t,t=this.hash(t),t=new Ng(this.hexHash(this.padHex(r)+t),16);this.calculateS(t,n,function(e,t){e&&i(e,null);t=o.computehkdf(v.Buffer.from(o.padHex(t),"hex"),v.Buffer.from(o.padHex(o.UValue),"hex"));i(null,t)})},t.calculateS=function(n,r,i){var o=this;this.g.modPow(n,this.N,function(e,t){e&&i(e,null),r.subtract(o.k.multiply(t)).modPow(o.smallAValue.add(o.UValue.multiply(n)),o.N,function(e,t){e&&i(e,null),i(null,t.mod(o.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){if(!(e instanceof Ng))throw new Error("Not a BigInteger");var t=e.compareTo(Ng.ZERO)<0,e=e.abs().toString(16);return e=e.length%2!=0?"0"+e:e,e=Hg.test(e)?"00"+e:e,e=t&&(e=new Ng(e.split("").map(function(e){e=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(e)}).join(""),16).add(Ng.ONE).toString(16)).toUpperCase().startsWith("FF8")?e.substring(2):e},e}(),Mg=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(v.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();function Wg(e,t){return(Wg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $g=function(t){var e,n;function r(e){e=(void 0===e?{}:e).AccessToken;return t.call(this,e||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),Wg(e.prototype.constructor=e,n),r}(Mg);function Yg(e,t){return(Yg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jg=function(t){var e,n;function r(e){e=(void 0===e?{}:e).IdToken;return t.call(this,e||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),Yg(e.prototype.constructor=e,n),r}(Mg),Zg=function(){function e(e){e=(void 0===e?{}:e).RefreshToken;this.token=e||""}return e.prototype.getToken=function(){return this.token},e}(),Xg=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,e=t.AccessToken,t=t.ClockDrift;if(null==e||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=e,this.clockDrift=void 0===t?this.calculateClockDrift():t}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),Qg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ev=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],tv=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=ev[e.getUTCDay()],n=Qg[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return t+" "+n+" "+r+" "+i+":"+o+":"+(s=s<10?"0"+s:s)+" UTC "+e.getUTCFullYear()},e}(),nv=function(){function e(e){var t=void 0===e?{}:e,e=t.Name,t=t.Value;this.Name=e||"",this.Value=t||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),rv={},iv=function(){function e(){}return e.setItem=function(e,t){return rv[e]=t,rv[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(rv,e)?rv[e]:void 0},e.removeItem=function(e){return delete rv[e]},e.clear=function(){return rv={}},e}(),ov=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=iv}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),sv="undefined"!=typeof navigator?navigator.userAgent:"nodejs",av=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new ov).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData",this.uploadProgressKey="__uploadInProgress"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,r){var i=this,t=e.getAuthParameters();t.USERNAME=this.username;e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return r.onFailure(e);var n=t.ChallengeName,e=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(i.Session=t.Session,r.customChallenge(e)):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),r.onSuccess(i.signInUserSession))})},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(n,a){var o,u,c=this,l=new Gg(this.pool.getUserPoolId().split("_")[1]),p=new tv,r={};null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey),r.USERNAME=this.username,l.getLargeAValue(function(e,t){e&&a.onFailure(e),r.SRP_A=t.toString(16),"CUSTOM_AUTH"===c.authenticationFlowType&&(r.CHALLENGE_NAME="SRP_A");var s=0!==Object.keys(n.getValidationData()).length?n.getValidationData():n.getClientMetadata(),t={AuthFlow:c.authenticationFlowType,ClientId:c.pool.getClientId(),AuthParameters:r,ClientMetadata:s};c.getUserContextData(c.username)&&(t.UserContextData=c.getUserContextData(c.username)),c.client.request("InitiateAuth",t,function(e,r){if(e)return a.onFailure(e);var i=r.ChallengeParameters;c.username=i.USER_ID_FOR_SRP,c.userDataKey=c.keyPrefix+"."+c.username+".userData",o=new Ng(i.SRP_B,16),u=new Ng(i.SALT,16),c.getCachedDeviceKeyAndPassword(),l.getPasswordAuthenticationKey(c.username,n.getPassword(),o,u,function(e,t){e&&a.onFailure(e);var n=p.getNowString(),e=w.lib.WordArray.create(v.Buffer.concat([v.Buffer.from(c.pool.getUserPoolId().split("_")[1],"utf8"),v.Buffer.from(c.username,"utf8"),v.Buffer.from(i.SECRET_BLOCK,"base64"),v.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),t=I.stringify(E(e,t)),o={};o.USERNAME=c.username,o.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,o.TIMESTAMP=n,o.PASSWORD_CLAIM_SIGNATURE=t,null!=c.deviceKey&&(o.DEVICE_KEY=c.deviceKey);n=function n(r,i){return c.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(o.DEVICE_KEY=null,c.deviceKey=null,c.randomPassword=null,c.deviceGroupKey=null,c.clearCachedDeviceKeyAndPassword(),n(r,i)):i(e,t)})},t={ChallengeName:"PASSWORD_VERIFIER",ClientId:c.pool.getClientId(),ChallengeResponses:o,Session:r.Session,ClientMetadata:s};c.getUserContextData()&&(t.UserContextData=c.getUserContextData()),n(t,function(e,t){return e?a.onFailure(e):c.authenticateUserInternal(t,l,a)})})})})},t.authenticateUserPlainUsernamePassword=function(e,n){var r,i=this,t={};t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD?(r=new Gg(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey),e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData(this.username)&&(e.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",e,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(n,t,r){var i=this,e=n.ChallengeName,o=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,r.mfaRequired(e,o);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,r.selectMFAType(e,o);if("MFA_SETUP"===e)return this.Session=n.Session,r.mfaSetup(e,o);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,r.totpRequired(e,o);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,r.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return r.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"===e)return this.Session=n.Session,void this.getDeviceResponse(r);this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return r.onSuccess(this.signInUserSession);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return r.onFailure(e);e={Salt:v.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:v.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:sv},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))})})},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new Gg(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;r={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)})},t.getDeviceResponse=function(o,n){var s=this,a=new Gg(this.deviceGroupKey),u=new tv,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(e,t){e&&o.onFailure(e),r.SRP_A=t.toString(16);t={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:r,ClientMetadata:n,Session:s.Session};s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,r){if(e)return o.onFailure(e);var i=r.ChallengeParameters,t=new Ng(i.SRP_B,16),e=new Ng(i.SALT,16);a.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,t,e,function(e,t){if(e)return o.onFailure(e);var n=u.getNowString(),e=w.lib.WordArray.create(v.Buffer.concat([v.Buffer.from(s.deviceGroupKey,"utf8"),v.Buffer.from(s.deviceKey,"utf8"),v.Buffer.from(i.SECRET_BLOCK,"base64"),v.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),e=I.stringify(E(e,t)),t={};t.USERNAME=s.username,t.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,t.TIMESTAMP=n,t.PASSWORD_CLAIM_SIGNATURE=e,t.DEVICE_KEY=s.deviceKey;t={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:t,Session:r.Session};s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,t){return e?o.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),o.onSuccess(s.signInUserSession))})})})})},t.confirmRegistration=function(e,t,n,r){r={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",r,function(e){return e?n(e,null):n(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,n,t){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new Gg(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);t={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,o,n)})},t.sendMFACode=function(e,r,t,n){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;t=t||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===t&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);n={ChallengeName:t,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",n,function(e,n){if(e)return r.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return r.onSuccess(i.signInUserSession);var t=new Gg(i.pool.getUserPoolId().split("_")[1]);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return r.onFailure(e);e={Salt:v.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:v.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:sv},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))})})}else i.getDeviceResponse(r)})},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.getUserAttributes=function(o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return o(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var i={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},i=new nv(i);n.push(i)}return o(null,n)})},t.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(n){var r=this;return void 0===n&&(n={}),new Promise(function(e){var t=r.signInUserSession.getRefreshToken();t&&t.getToken()?r.refreshSession(t,e,n.clientMetadata):e()})},t.getUserData=function(t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var e=this.getUserDataFromCache();if(e)if(this.isFetchUserDataAndTokenRequired(n))this.fetchUserData().then(function(e){return r.refreshSessionIfPossible(n).then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(e))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){e=(e||{}).bypassCache;return void 0!==e&&e},t.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},t.deleteAttributes=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):n.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.resendConfirmationCode=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",e,function(e,t){return e?n(e,null):n(null,t)})},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken",i=n+".accessToken",o=n+".refreshToken",n=n+".clockDrift";if(this.storage.getItem(r)){r=new Jg({IdToken:this.storage.getItem(r)}),i=new $g({AccessToken:this.storage.getItem(i)}),o=new Zg({RefreshToken:this.storage.getItem(o)}),n=parseInt(this.storage.getItem(n),0)||0,n=new Xg({IdToken:r,AccessToken:i,RefreshToken:o,ClockDrift:n});if(n.isValid())return this.signInUserSession=n,e(null,this.signInUserSession);if(!o.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(o,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(n,e,t){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(e):e,o={};o.REFRESH_TOKEN=n.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=s+".LastAuthUser";this.storage.getItem(e)&&(this.username=this.storage.getItem(e),s=s+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(s),o.DEVICE_KEY=this.deviceKey);t={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:t};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",t,function(e,t){if(e)return"NotAuthorizedException"===e.code&&r.clearCachedUser(),i(e,null);if(t){t=t.AuthenticationResult;return Object.prototype.hasOwnProperty.call(t,"RefreshToken")||(t.RefreshToken=n.getToken()),r.signInUserSession=r.getCognitoUserSession(t),r.cacheTokens(),i(null,r.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",e=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(e,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey),this.storage.removeItem(this.uploadProgressKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.setItem(e+".deviceKey",this.deviceKey),this.storage.setItem(t,this.randomPassword),this.storage.setItem(n,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",e=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(e))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.removeItem(e+".deviceKey"),this.storage.removeItem(t),this.storage.removeItem(n)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",e=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(e)},t.getCognitoUserSession=function(e){var t=new Jg(e),n=new $g(e),e=new Zg(e);return new Xg({IdToken:t,AccessToken:n,RefreshToken:e})},t.forgotPassword=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",e,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},t.confirmPassword=function(e,t,n,r){r={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",r,function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess("SUCCESS")})},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},t.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));e={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(e.PaginationToken=t),this.client.request("ListDevices",e,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},t.signOut=function(n){var r=this;n&&"function"==typeof n?this.getSession(function(e,t){return e?n(e):void r.revokeTokens(function(e){r.cleanClientData(),n(e)})}):this.cleanClientData()},t.revokeTokens=function(e){if("function"!=typeof(e=void 0===e?function(){}:e))throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return e(new Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return e(new Error("No Access token available"));var t=this.signInUserSession.getRefreshToken().getToken(),n=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(n)&&t)return this.revokeToken({token:t,callback:e});e()},t.isSessionRevocable=function(e){if(e&&"function"==typeof e.decodePayload)try{return!!e.decodePayload().origin_jti}catch(e){}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(e){var t=e.token,n=e.callback;this.client.requestWithRetry("RevokeToken",{Token:t,ClientId:this.pool.getClientId()},function(e){return e?n(e):void n()})},t.sendMFASelectionAnswer=function(n,r){var i=this,e={};e.USERNAME=this.username,e.ANSWER=n;e={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",e,function(e,t){return e?r.onFailure(e):(i.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.ChallengeName,t.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.ChallengeName,t.ChallengeParameters):void 0)})},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;t={};t.USERNAME=r.username;t={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:t,Session:r.Session};r.getUserContextData()&&(t.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))})})},e}(),S="aws-amplify/5.0.4",uv={userAgent:S+" js",product:"",navigator:null,isReactNative:!1};"undefined"!=typeof navigator&&navigator.product&&(uv.product=navigator.product||"",uv.navigator=navigator||null,"ReactNative"===navigator.product?(uv.userAgent=S+" react-native",uv.isReactNative=!0):(uv.userAgent=S+" js",uv.isReactNative=!1));function cv(){}function lv(e){var n="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return pv(e,arguments,fv(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),dv(t,e)}(e)}function pv(e,t,n){return(pv=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&dv(r,n.prototype),r}).apply(null,arguments)}function dv(e,t){return(dv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fv(e){return(fv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}cv.prototype.userAgent=uv.userAgent;var hv=function(i){var e,t;function n(e,t,n,r){e=i.call(this,e)||this;return e.code=t,e.name=n,e.statusCode=r,e}return t=i,(e=n).prototype=Object.create(t.prototype),dv(e.prototype.constructor=e,t),n}(lv(Error)),gv=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";n=(n||{}).credentials;this.fetchOptions=n?{credentials:n}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var i=this;return new Promise(function(n,r){i.request(e,t,function(e,t){e?r(new hv(e.message,e.code,e.name,e.statusCode)):n(t)})})},t.requestWithRetry=function(t,e,n){var i=this;!function(e,t,n){void 0===n&&(n=yv);return function n(r,i,o,s){void 0===s&&(s=1);if("function"!=typeof r)throw Error("functionToRetry must be a function");vv.debug(r.name+" attempt #"+s+" with args: "+JSON.stringify(i));return r.apply(void 0,i).catch(function(e){if(vv.debug("error on "+r.name,e),mv(e))throw vv.debug(r.name+" non retryable error",e),e;var t=o(s,i,e);if(vv.debug(r.name+" retrying in "+t+" ms"),!1!==t)return new Promise(function(e){return setTimeout(e,t)}).then(function(){return n(r,i,o,s+1)});throw e})}(e,t,function(t){return function(e){e=100*Math.pow(2,e)+100*Math.random();return!(t<e)&&e}}(n))}(function(e){return new Promise(function(n,r){i.request(t,e,function(e,t){e?r(e):n(t)})})},[e],5e3).then(function(e){return n(null,e)}).catch(function(e){return n(e)})},t.request=function(e,t,r){var i,t=Object.assign({},this.fetchOptions,{headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":cv.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,t).then(function(e){return i=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(i.ok)return r(null,e);var t=(e.__type||e.code).split("#").pop(),e=new Error(e.message||e.Message||null);return e.name=t,e.code=t,r(e)}).catch(function(t){if(i&&i.headers&&i.headers.get("x-amzn-errortype"))try{var e=i.headers.get("x-amzn-errortype").split(":")[0],n=new Error(i.status?i.status.toString():null);return n.code=e,n.name=e,n.statusCode=i.status,r(n)}catch(e){return r(t)}else t instanceof Error&&"Network error"===t.message&&(t.code="NetworkError");return r(t)})},e}(),vv={debug:function(){}},mv=function(e){return e&&e.nonRetryable};var yv=3e5;function bv(e){return(e=window.open(e,_v))?Promise.resolve(e):Promise.reject()}function Sv(e,t,n){A.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Tv)}var wv=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(55<r.length||!/^[\w-]+_[0-9a-zA-Z]+$/.test(r))throw new Error("Invalid UserPoolId format.");n=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new gv(n,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new ov).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(n,e,t,r,i,o){var s=this,o={ClientId:this.clientId,Username:n,Password:e,UserAttributes:t,ValidationData:r,ClientMetadata:o};this.getUserContextData(n)&&(o.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",o,function(e,t){if(e)return i(e,null);e={Username:n,Pool:s,Storage:s.storage},t={user:new av(e),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails};return i(null,t)})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",e=this.storage.getItem(e);if(e){e={Username:e,Pool:this,Storage:this.storage};return new av(e)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){e=t.getData(e,this.userPoolId,this.clientId);if(e)return{EncodedData:e}}return{}}},e}(),Cv=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),T.set(e,t,n),T.get(e)},t.getItem=function(e){return T.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),T.remove(e,t)},t.clear=function(){for(var e=T.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},e}(),_v="_self",Ev=function(){return(Ev=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Av=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Iv=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},kv=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Tv="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Pv=new A.ConsoleLogger("OAuth"),Ov=(xv.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},xv.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=Ig.Cognito);var s=this._generateState(32),a=o?s+"-"+A.urlSafeEncode(o):s;window.sessionStorage.setItem("oauth_state",a);o=this._generateRandom(128);window.sessionStorage.setItem("ouath_pkce_key",o);s=this._generateChallenge(o),o=this._scopes.join(" "),e="https://"+t+"/oauth2/authorize?"+Object.entries(Ev(Ev({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:o,state:a},"code"===e?{code_challenge:s}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=kv(e,2),e=t[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&");Pv.debug("Redirecting to "+e),this._urlOpener(e,n)},xv.prototype._handleCodeFlow=function(c){return Av(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Iv(this,function(e){switch(e.label){case 0:return(n=(g.parse(c).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=kv(t,2),t=n[0],n=n[1];return Ev(Ev({},e),((e={})[t]=n,e))},{code:void 0}).code,r=g.parse(c).pathname||"/",i=g.parse(this._config.redirectSignIn).pathname||"/",n&&r===i)?(s="https://"+this._config.domain+"/oauth2/token",Sv("codeFlow",{},"Retrieving tokens from "+s),o=Pg(this._config)?this._cognitoClientId:this._config.clientID,a=Pg(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),o=Ev({grant_type:"authorization_code",code:n,client_id:o,redirect_uri:a},(u=t)?{code_verifier:u}:{}),Pv.debug("Calling token endpoint: "+s+" with",o),a=Object.entries(o).map(function(e){var t=kv(e,2),e=t[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),[4,fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a})]):[2];case 1:return[4,e.sent().json()];case 2:if(u=e.sent(),o=u.access_token,s=u.refresh_token,a=u.id_token,u=u.error)throw new Error(u);return[2,{accessToken:o,refreshToken:s,idToken:a}]}var t})})},xv.prototype._handleImplicitFlow=function(r){return Av(this,void 0,void 0,function(){var t,n;return Iv(this,function(e){return n=(g.parse(r).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=kv(t,2),t=n[0],n=n[1];return Ev(Ev({},e),((e={})[t]=n,e))},{id_token:void 0,access_token:void 0}),t=n.id_token,n=n.access_token,Sv("implicitFlow",{},"Got tokens from "+r),Pv.debug("Retrieving implicit tokens from "+r+" with"),[2,{accessToken:n,idToken:t,refreshToken:null}]})})},xv.prototype.handleAuthResponse=function(s){return Av(this,void 0,void 0,function(){var t,n,r,i,o;return Iv(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),o=s?Ev(Ev({},(g.parse(s).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=kv(t,2),t=n[0],n=n[1];return e[t]=n,e},{})),(g.parse(s).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=kv(t,2),t=n[0],n=n[1];return e[t]=n,e},{})):{},t=o.error,n=o.error_description,t)throw new Error(n);return(n=this._validateState(o),Pv.debug("Starting "+this._config.responseType+" flow with "+s),"code"!==this._config.responseType)?[3,2]:(r=[{}],[4,this._handleCodeFlow(s)]);case 1:return[2,Ev.apply(void 0,[Ev.apply(void 0,r.concat([e.sent()])),{state:n}])];case 2:return i=[{}],[4,this._handleImplicitFlow(s)];case 3:return[2,Ev.apply(void 0,[Ev.apply(void 0,i.concat([e.sent()])),{state:n}])];case 4:return[3,6];case 5:throw o=e.sent(),Pv.error("Error handling auth response.",o),o;case 6:return[2]}})})},xv.prototype._validateState=function(e){if(e){var t,t=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),e=e.state;if(t&&t!==e)throw new Error("Invalid state in OAuth flow");return e}},xv.prototype.signOut=function(){return Av(this,void 0,void 0,function(){var t,n,r;return Iv(this,function(e){return t="https://"+this._config.domain+"/logout?",n=Pg(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=Pg(this._config)?this._config.redirectSignOut:this._config.returnTo,t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){e=kv(e,2);return e[0]+"="+e[1]}).join("&"),Sv("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+t),Pv.debug("Signing out from "+t),[2,this._urlOpener(t,r)]})})},xv.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},xv.prototype._generateChallenge=function(e){return this._base64URL(_(e))},xv.prototype._base64URL=function(e){return e.toString(I).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},xv.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},xv.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},xv);function xv(e){var t=e.config,n=e.cognitoClientId,e=e.scopes,e=void 0===e?[]:e;if(this._urlOpener=t.urlOpener||bv,this._config=t,this._cognitoClientId=n,!this.isValidScopes(e))throw Error("scopes must be a String Array");this._scopes=e}(Mg=qm=qm||{}).DEFAULT_MSG="Authentication Error",Mg.EMPTY_EMAIL="Email cannot be empty",Mg.EMPTY_PHONE="Phone number cannot be empty",Mg.EMPTY_USERNAME="Username cannot be empty",Mg.INVALID_USERNAME="The username should either be a string or one of the sign in types",Mg.EMPTY_PASSWORD="Password cannot be empty",Mg.EMPTY_CODE="Confirmation code cannot be empty",Mg.SIGN_UP_ERROR="Error creating account",Mg.NO_MFA="No valid MFA method provided",Mg.INVALID_MFA="Invalid MFA type",Mg.EMPTY_CHALLENGE="Challenge response cannot be empty",Mg.NO_USER_SESSION="Failed to get the session because the user is empty",Mg.NETWORK_ERROR="Network Error",Mg.DEVICE_CONFIG="Device tracking has not been configured in this User Pool";var Lv,Nv,S=(Lv=function(e,t){return(Lv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Lv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Rv=new A.ConsoleLogger("AuthError"),Mv=(Nv=Error,S(Dv,Nv),Dv);function Dv(e){var t=this,n=zv[e],e=n.message,n=n.log;return(t=Nv.call(this,e)||this).constructor=Dv,Object.setPrototypeOf(t,Dv.prototype),t.name="AuthError",t.log=n||e,Rv.error(t.log),t}var Uv,Fv=(S(jv,Uv=Mv),jv);function jv(e){e=Uv.call(this,e)||this;return e.constructor=jv,Object.setPrototypeOf(e,jv.prototype),e.name="NoUserPoolError",e}function Bv(e,t,n){A.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",$v)}var zv={noConfig:{message:qm.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:qm.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:qm.EMPTY_USERNAME},invalidUsername:{message:qm.INVALID_USERNAME},emptyPassword:{message:qm.EMPTY_PASSWORD},emptyCode:{message:qm.EMPTY_CODE},signUpError:{message:qm.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:qm.NO_MFA},invalidMFA:{message:qm.INVALID_MFA},emptyChallengeResponse:{message:qm.EMPTY_CHALLENGE},noUserSession:{message:qm.NO_USER_SESSION},deviceConfig:{message:qm.DEVICE_CONFIG},networkError:{message:qm.NETWORK_ERROR},default:{message:qm.DEFAULT_MSG}},Vv=function(){return(Vv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},qv=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Kv=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Hv=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Gv=new A.ConsoleLogger("AuthClass"),Wv="aws.cognito.signin.user.admin",$v="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function Yv(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=A.Credentials,this.wrapRefreshSessionCallback=function(n){return function(e,t){return t?Bv("tokenRefresh",void 0,"New token retrieved"):Bv("tokenRefresh_failure",e,"Failed to retrieve new token"),n(e,t)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),A.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}var Jv=new(Yv.prototype.getModuleName=function(){return"Auth"},Yv.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Gv.debug("configure Auth");var n=Object.assign({},this._config,A.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,u=r.region,c=r.identityPoolId,l=r.mandatorySignIn,p=r.refreshHandlers,d=r.identityPoolRegion,n=r.clientMetadata,r=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Gv.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new Cv(s):e.ssr?new A.UniversalStorage:(new A.StorageHelper).getStorage();this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i&&((r={UserPoolId:i,ClientId:o,endpoint:r}).Storage=this._storage,this.userPool=new wv(r,this.wrapRefreshSessionCallback)),this.Credentials.configure({mandatorySignIn:l,region:d||u,userPoolId:i,identityPoolId:c,refreshHandlers:p,storage:this._storage});var f,a=a?Pg(this._config.oauth)?a:a.awsCognito:void 0;return a&&(a=Object.assign({cognitoClientId:o,UserPoolId:i,domain:a.domain,scopes:a.scope,redirectSignIn:a.redirectSignIn,redirectSignOut:a.redirectSignOut,responseType:a.responseType,Storage:this._storage,urlOpener:a.urlOpener,clientMetadata:n},a.options),this._oAuthHandler=new Ov({scopes:a.scopes,config:a,cognitoClientId:a.cognitoClientId}),f={},function(e){if(A.JS.browserOrNode().isBrowser&&window.location)e({url:window.location.href});else if(!A.JS.browserOrNode().isNode)throw new Error("Not supported")}(function(e){e=e.url;f[e]||(f[e]=!0,t._handleAuthResponse(e))})),Bv("configured",null,"The Auth category has been configured successfully"),this._config},Yv.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var i,o=null,s=null,a=[],u=null;if(e&&"string"==typeof e){var o=e,s=n?n[0]:null,c=n?n[1]:null,l=n?n[2]:null;c&&a.push(new nv({Name:"email",Value:c})),l&&a.push(new nv({Name:"phone_number",Value:l}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(kg.SignUpError);o=e.username,s=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){a.push(new nv({Name:e,Value:p[e]}))});var d=e.validationData;d&&(u=[],Object.keys(d).map(function(e){u.push(new nv({Name:e,Value:d[e]}))}))}return o?s?(Gv.debug("signUp attrs:",a),Gv.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(o,s,a,u,function(e,t){e?(Bv("signUp_failure",e,o+" failed to signup"),r(e)):(Bv("signUp",t,o+" has signed up successfully"),n(t))},i)})):this.rejectAuthError(kg.EmptyPassword):this.rejectAuthError(kg.EmptyUsername)},Yv.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(kg.EmptyUsername);if(!t)return this.rejectAuthError(kg.EmptyCode);var i,o=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?i=n.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata),new Promise(function(n,r){o.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},i)})},Yv.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(kg.EmptyUsername);var i=this.createCognitoUser(e);return new Promise(function(n,r){i.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},Yv.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(kg.InvalidUsername);void 0!==t&&Gv.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(kg.EmptyUsername);n=new xg({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(n):this.signInWithoutPassword(n)},Yv.prototype.authCallbacks=function(i,o,s){var e=this,a=this;return{onSuccess:function(r){return qv(e,void 0,void 0,function(){var t,n;return Kv(this,function(e){switch(e.label){case 0:Gv.debug(r),delete i.challengeName,delete i.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(r,"session")];case 3:return t=e.sent(),Gv.debug("succeed to get cognito credentials",t),[3,9];case 4:return t=e.sent(),Gv.debug("cannot get cognito credentials",t),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return n=e.sent(),a.user=n,Bv("signIn",n,"A user "+i.getUsername()+" has been signed in"),o(n),[3,8];case 7:return n=e.sent(),Gv.error("Failed to get the signed in user",n),s(n),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){Gv.debug("signIn failure",e),Bv("signIn_failure",e,i.getUsername()+" failed to signin"),s(e)},customChallenge:function(e){Gv.debug("signIn custom challenge answer required"),i.challengeName="CUSTOM_CHALLENGE",i.challengeParam=e,o(i)},mfaRequired:function(e,t){Gv.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,o(i)},mfaSetup:function(e,t){Gv.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,o(i)},newPasswordRequired:function(e,t){Gv.debug("signIn new password"),i.challengeName="NEW_PASSWORD_REQUIRED",i.challengeParam={userAttributes:e,requiredAttributes:t},o(i)},totpRequired:function(e,t){Gv.debug("signIn totpRequired"),i.challengeName=e,i.challengeParam=t,o(i)},selectMFAType:function(e,t){Gv.debug("signIn selectMFAType",e),i.challengeName=e,i.challengeParam=t,o(i)}}},Yv.prototype.signInWithPassword=function(e){var r=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var i=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(t,n){i.authenticateUser(e,r.authCallbacks(i,function(e){r.pendingSignIn=null,t(e)},function(e){r.pendingSignIn=null,n(e)}))}),this.pendingSignIn},Yv.prototype.signInWithoutPassword=function(n){var r=this,i=this.createCognitoUser(n.getUsername());return i.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){i.initiateAuth(n,r.authCallbacks(i,e,t))})},Yv.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(Gv.debug("get MFA Options failed",e),void r(e)):(Gv.debug("get MFA options success",t),void n(t))})})},Yv.prototype.getPreferredMFA=function(i,o){var s=this,a=this;return new Promise(function(n,r){var e=s._config.clientMetadata,t=!!o&&o.bypassCache;i.getUserData(function(e,t){if(e)return Gv.debug("getting preferred mfa failed",e),void r(e);t=a._getMfaTypeFromUserData(t);t?n(t):r("invalid MFA Type")},{bypassCache:t,clientMetadata:e})})},Yv.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;return n?t=n:(n=e.UserMFASettingList)?0===n.length?t="NOMFA":Gv.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA",t},Yv.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){e?(Gv.debug("getting user data failed",e),r(e)):n(t)},t)})},Yv.prototype.setPreferredMFA=function(a,u){return qv(this,void 0,void 0,function(){var t,n,o,s,r,i;return Kv(this,function(e){switch(e.label){case 0:return t=this._config.clientMetadata,[4,this._getUserData(a,{bypassCache:!0,clientMetadata:t})];case 1:switch(n=e.sent(),s=o=null,u){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=n.UserMFASettingList,[4,this._getMfaTypeFromUserData(n)];case 5:if("NOMFA"===(i=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===i)o={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==i)return[2,this.rejectAuthError(kg.InvalidMFA)];s={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?o={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(s={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return Gv.debug("no validmfa method provided"),[2,this.rejectAuthError(kg.NoMFA)];case 7:return[2,new Promise(function(r,i){a.setUserMfaPreference(o,s,function(e,n){return e?(Gv.debug("Set user mfa preference error",e),i(e)):(Gv.debug("Set user mfa success",n),Gv.debug("Caching the latest user data into local"),void a.getUserData(function(e,t){return e?(Gv.debug("getting user data failed",e),i(e)):r(n)},{bypassCache:!0,clientMetadata:t}))})})]}})})},Yv.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(Gv.debug("disable mfa failed",e),void r(e)):(Gv.debug("disable mfa succeed",t),void n(t))})})},Yv.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(Gv.debug("enable mfa failed",e),void r(e)):(Gv.debug("enable mfa succeed",t),void n(t))})})},Yv.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){Gv.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Gv.debug("associateSoftwareToken sucess",e),t(e)}})})},Yv.prototype.verifyTotpToken=function(r,e){return Gv.debug("verification totp token",r,e),new Promise(function(t,n){r.verifySoftwareToken(e,"My TOTP device",{onFailure:function(e){Gv.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){Bv("signIn",r,"A user "+r.getUsername()+" has been signed in"),Gv.debug("verifyTotpToken success",e),t(e)}})})},Yv.prototype.confirmSignIn=function(i,e,n,o){var s=this;if(void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(kg.EmptyCode);var a=this;return new Promise(function(r,t){i.sendMFACode(e,{onSuccess:function(n){return qv(s,void 0,void 0,function(){var t;return Kv(this,function(e){switch(e.label){case 0:Gv.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Gv.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Gv.debug("cannot get cognito credentials",t),[3,6];case 5:return a.user=i,Bv("signIn",i,"A user "+i.getUsername()+" has been signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){Gv.debug("confirm signIn failure",e),t(e)}},n,o)})},Yv.prototype.completeNewPassword=function(i,e,n,o){var s=this;if(void 0===n&&(n={}),void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(kg.EmptyPassword);var a=this;return new Promise(function(r,t){i.completeNewPasswordChallenge(e,n,{onSuccess:function(n){return qv(s,void 0,void 0,function(){var t;return Kv(this,function(e){switch(e.label){case 0:Gv.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Gv.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Gv.debug("cannot get cognito credentials",t),[3,6];case 5:return a.user=i,Bv("signIn",i,"A user "+i.getUsername()+" has been signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){Gv.debug("completeNewPassword failure",e),Bv("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){Gv.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,r(i)},mfaSetup:function(e,t){Gv.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)},totpRequired:function(e,t){Gv.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)}},o)})},Yv.prototype.sendCustomChallengeAnswer=function(n,r,i){var o=this;return void 0===i&&(i=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,o.authCallbacks(n,e,t),i)}):this.rejectAuthError(kg.EmptyChallengeResponse):this.rejectNoUserPool()},Yv.prototype.deleteUserAttributes=function(t,i){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.deleteAttributes(i,function(e,t){return e?r(e):n(t)})})})},Yv.prototype.updateUserAttributes=function(i,o,s){void 0===s&&(s=this._config.clientMetadata);var a=[],e=this;return new Promise(function(n,r){e.userSession(i).then(function(e){for(var t in o)"sub"!==t&&t.indexOf("_verified")<0&&(t={Name:t,Value:o[t]},a.push(t));i.updateAttributes(a,function(e,t){return e?r(e):n(t)},s)})})},Yv.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},Yv.prototype.verifiedContact=function(e){var r=this;return this.userAttributes(e).then(function(e){var t=r.attributesToObject(e),n={},e={};return t.email&&(t.email_verified?e.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?e.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:e,unverified:n}})},Yv.prototype.currentUserPoolUser=function(l){var e=this;return this.userPool?new Promise(function(u,c){e._storageSync.then(function(){return qv(e,void 0,void 0,function(){var a,t,n=this;return Kv(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(Gv.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(t){var n=setTimeout(function(){Gv.debug("OAuth signIn in progress timeout"),A.Hub.remove("auth",r),t()},1e4);function r(e){e=e.payload.event;"cognitoHostedUI"!==e&&"cognitoHostedUI_failure"!==e||(Gv.debug("OAuth signIn resolved: "+e),clearTimeout(n),A.Hub.remove("auth",r),t())}A.Hub.listen("auth",r)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(a=this.userPool.getCurrentUser())?(t=this._config.clientMetadata,a.getSession(function(i,o){return qv(n,void 0,void 0,function(){var t,n,r,s=this;return Kv(this,function(e){switch(e.label){case 0:return i?(Gv.debug("Failed to get the user session",i),c(i),[2]):(t=!!l&&l.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return(n=this._config.clientMetadata,r=o.getAccessToken().decodePayload().scope,(void 0===r?"":r).split(" ").includes(Wv))?(a.getUserData(function(e,t){if(e)return Gv.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?c(e):u(a));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],i=0;i<t.UserAttributes.length;i++){var o={Name:t.UserAttributes[i].Name,Value:t.UserAttributes[i].Value},o=new nv(o);r.push(o)}e=s.attributesToObject(r);return Object.assign(a,{attributes:e,preferredMFA:n}),u(a)},{bypassCache:t,clientMetadata:n}),[2]):(Gv.debug("Unable to get the user data because the "+Wv+" is not in the scopes of the access token"),[2,u(a)])}})})},{clientMetadata:t}),[2]):(Gv.debug("Failed to get user from user pool"),c("No current user"),[2])}})})}).catch(function(e){return Gv.debug("Failed to sync cache info into memory",e),c(e)})}):this.rejectNoUserPool()},Yv.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},Yv.prototype.currentAuthenticatedUser=function(o){return qv(this,void 0,void 0,function(){var t,n,r,i;return Kv(this,function(e){switch(e.label){case 0:Gv.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw i=e.sent(),Gv.debug("Failed to sync cache info into memory",i),i;case 4:try{(n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Vv(Vv({},n.user),{token:n.token}))}catch(e){Gv.debug("cannot load federated user from auth storage")}return t?(this.user=t,Gv.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Gv.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(o)];case 7:return r=e.sent(),[3,9];case 8:return"No userPool"===(i=e.sent())&&Gv.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Gv.debug("The user is not authenticated by the error",i),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=r,[2,this.user]}})})},Yv.prototype.currentSession=function(){var r=this;return Gv.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){Gv.debug("Failed to get the current session",e),n(e)})}).catch(function(e){Gv.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},Yv.prototype.userSession=function(i){if(!i)return Gv.debug("the user is null"),this.rejectAuthError(kg.NoUserSession);var e=this._config.clientMetadata;return new Promise(function(n,r){Gv.debug("Getting the session from this user:",i),i.getSession(function(e,t){e?(Gv.debug("Failed to get the session from user",i),r(e)):(Gv.debug("Succeed to get the user session",t),n(t))},{clientMetadata:e})})},Yv.prototype.currentUserCredentials=function(){return qv(this,void 0,void 0,function(){var t,n=this;return Kv(this,function(e){switch(e.label){case 0:Gv.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Gv.debug("Failed to sync cache info into memory",t),t;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Gv.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(e){return Gv.debug("getting session success",e),n.Credentials.set(e,"session")}).catch(function(e){return Gv.debug("getting session failed",e),n.Credentials.set(null,"guest")})]}})})},Yv.prototype.currentCredentials=function(){return Gv.debug("getting current credentials"),this.Credentials.get()},Yv.prototype.verifyUserAttribute=function(e,r,i){return void 0===i&&(i=this._config.clientMetadata),new Promise(function(t,n){e.getAttributeVerificationCode(r,{onSuccess:function(e){return t(e)},onFailure:function(e){return n(e)}},i)})},Yv.prototype.verifyUserAttributeSubmit=function(e,r,i){return i?new Promise(function(t,n){e.verifyAttribute(r,i,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(kg.EmptyCode)},Yv.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},Yv.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},Yv.prototype.cognitoIdentitySignOut=function(s,a){return qv(this,void 0,void 0,function(){var t,i,o=this;return Kv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),Gv.debug("Failed to sync cache info into memory",t),t;case 3:return i=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){var e;s&&s.global?(Gv.debug("user global sign out",a),e=o._config.clientMetadata,a.getSession(function(e,t){return e?(Gv.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){if(Gv.debug("global sign out success"),!i)return n();o.oAuthSignOutRedirect(n,r)},onFailure:function(e){return Gv.debug("global sign out failed",e),r(e)}})},{clientMetadata:e})):(Gv.debug("user sign out",a),a.signOut(function(){return i?void o.oAuthSignOutRedirect(n,r):n()}))})]}})})},Yv.prototype.oAuthSignOutRedirect=function(e,t){A.JS.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},Yv.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},Yv.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e("Signout timeout fail")},3e3)},Yv.prototype.signOut=function(n){return qv(this,void 0,void 0,function(){var t;return Kv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),Gv.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:Gv.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:Gv.debug("no Congito User pool"),e.label=8;case 8:return Bv("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},Yv.prototype.cleanCachedItems=function(){return qv(this,void 0,void 0,function(){return Kv(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},Yv.prototype.changePassword=function(t,i,o,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(i,o,function(e,t){return e?(Gv.debug("change password failure",e),r(e)):n(t)},s)})})},Yv.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(kg.EmptyUsername);var i=this.createCognitoUser(r);return new Promise(function(t,n){i.forgotPassword({onSuccess:function(){t()},onFailure:function(e){Gv.debug("forgot password failure",e),Bv("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){Bv("forgotPassword",i,r+" has initiated forgot password flow"),t(e)}},e)})},Yv.prototype.forgotPasswordSubmit=function(r,e,i,o){if(void 0===o&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(kg.EmptyUsername);if(!e)return this.rejectAuthError(kg.EmptyCode);if(!i)return this.rejectAuthError(kg.EmptyPassword);var s=this.createCognitoUser(r);return new Promise(function(t,n){s.confirmPassword(e,i,{onSuccess:function(e){Bv("forgotPasswordSubmit",s,r+" forgotPasswordSubmit successful"),t(e)},onFailure:function(e){Bv("forgotPasswordSubmit_failure",e,r+" forgotPasswordSubmit failed"),n(e)}},o)})},Yv.prototype.currentUserInfo=function(){return qv(this,void 0,void 0,function(){var t,n,r,i,o;return Kv(this,function(e){switch(e.label){case 0:return(t=this.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return Gv.error(e)})];case 1:if(!(o=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(o)];case 3:r=e.sent(),n=this.attributesToObject(r),r=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=e.sent(),[3,7];case 6:return i=e.sent(),Gv.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:o.getUsername(),attributes:n}];case 8:return i=e.sent(),Gv.error("currentUserInfo error",i),[2,{}];case 9:return"federated"===t?[2,(o=this.user)||{}]:[2]}})})},Yv.prototype.federatedSignIn=function(l,p,d){return qv(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return Kv(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===l&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Tg(l)||(n=l)&&["customProvider"].find(function(e){return n.hasOwnProperty(e)})||(t=l)&&["customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===l?(r=l||{provider:Ig.Cognito},i=Tg(r)?r.provider:r.customProvider,Tg(r),a=r.customState,this._config.userPoolId&&(s=Pg(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,r=Pg(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,r,s,i,a)),[3,4]):[3,1];case 1:i=l;try{(o=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Gv.warn("There is already a signed in user: "+o+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return s=p.token,a=p.identity_id,c=p.expires_at,[4,this.Credentials.set({provider:i,token:s,identity_id:a,user:d,expires_at:c},"federation")];case 2:return u=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return c=e.sent(),Bv("signIn",c,"A user "+c.username+" has been signed in"),Gv.debug("federated sign in credentials",u),[2,u];case 4:return[2]}var t,n})})},Yv.prototype._handleAuthResponse=function(c){return qv(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return Kv(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return Gv.debug("Skipping URL "+c+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Bv("parsingCallbackUrl",{url:c},"The callback url is being parsed"),t=c||(A.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(g.parse(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){e=Hv(e,1)[0];return"code"===e||"error"===e}),r=!!(g.parse(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){e=Hv(e,1)[0];return"access_token"===e||"error"===e}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=e.sent(),a=i.accessToken,o=i.idToken,s=i.refreshToken,i=i.state,o=new Xg({IdToken:new Jg({IdToken:o}),RefreshToken:new Zg({RefreshToken:s}),AccessToken:new $g({AccessToken:a})}),s=void 0,this._config.identityPoolId?[4,this.Credentials.set(o,"session")]:[3,5];case 4:s=e.sent(),Gv.debug("AWS credentials",s),e.label=5;case 5:return a=/-/.test(i),(u=this.createCognitoUser(o.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(o),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Bv("signIn",u,"A user "+u.getUsername()+" has been signed in"),Bv("cognitoHostedUI",u,"A user "+u.getUsername()+" has been signed in via Cognito Hosted UI"),a&&(a=i.split("-").splice(1).join("-"),Bv("customOAuthState",A.urlSafeDecode(a),"State for user "+u.getUsername())),[2,s];case 6:return u=e.sent(),Gv.debug("Error in cognito hosted auth response",u),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Bv("signIn_failure",u,"The OAuth response flow failed"),Bv("cognitoHostedUI_failure",u,"A failure occurred when returning to the Cognito Hosted UI"),Bv("customState_failure",u,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},Yv.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},Yv.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value}),n},Yv.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},Yv.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;e=this._config.authenticationFlowType,t=new av(t);return e&&t.setAuthenticationFlowType(e),t},Yv.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},Yv.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?kg.NoConfig:kg.MissingAuthConfig},Yv.prototype.rejectAuthError=function(e){return Promise.reject(new Mv(e))},Yv.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Fv(e))},Yv.prototype.rememberDevice=function(){return qv(this,void 0,void 0,function(){var r,t;return Kv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return r=e.sent(),[3,3];case 2:return t=e.sent(),Gv.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return r.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){r.setDeviceStatusRemembered({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new Mv(kg.DeviceConfig)):"NetworkError"===e.code?n(new Mv(kg.NetworkError)):n(e)}})})]}})})},Yv.prototype.forgetDevice=function(){return qv(this,void 0,void 0,function(){var r,t;return Kv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return r=e.sent(),[3,3];case 2:return t=e.sent(),Gv.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return r.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){r.forgetDevice({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new Mv(kg.DeviceConfig)):"NetworkError"===e.code?n(new Mv(kg.NetworkError)):n(e)}})})]}})})},Yv.prototype.fetchDevices=function(){return qv(this,void 0,void 0,function(){var r,t;return Kv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return r=e.sent(),[3,3];case 2:throw t=e.sent(),Gv.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return r.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){var e={onSuccess:function(e){e=e.Devices.map(function(e){var t=e.DeviceAttributes.find(function(e){return"device_name"===e.Name})||{};return{id:e.DeviceKey,name:t.Value}});t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new Mv(kg.DeviceConfig)):"NetworkError"===e.code?n(new Mv(kg.NetworkError)):n(e)}};r.listDevices(60,null,e)})]}})})},Yv)(null);A.Amplify.register(Jv);var Zv=function(e,t){return(Zv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Xv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Zv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Qv=function(){return(Qv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function em(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function tm(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var nm,Mg="3.6.1",rm=(U(im,nm=s.Writable),im.prototype._write=function(e,t,n){try{this.hash.update(e)}catch(e){return n(e)}n()},im);function im(e,t){t=nm.call(this,t)||this;return t.hash=e,t}function om(e){var t=e.match(gm);return[t[2],e.replace(new RegExp("^"+t[0]),"")]}function sm(e){return e.startsWith("fips-")||e.endsWith("-fips")}function am(e,t){return e===t||ym(e)===t||e===ym(t)}function um(t){return{applyToStack:function(e){var m;e.addRelativeTo((m=t,function(g,v){return function(h){return q(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f;return K(this,function(e){switch(e.label){case 0:return(t=h.input.Bucket,n=m.bucketEndpoint,r=h.request,da.isInstance(r))?m.bucketEndpoint?(r.hostname=t,[3,7]):[3,1]:[3,8];case 1:return cm(t)?(i=lm(t),o=ym,[4,m.region()]):[3,5];case 2:return c=o.apply(void 0,[e.sent()]),[4,m.regionInfoProvider(c)];case 3:return a=e.sent()||{},s=a.partition,u=a.signingRegion,a=void 0===u?c:u,[4,m.useArnRegion()];case 4:return u=e.sent(),p=Nm({bucketName:i,baseHostname:r.hostname,accelerateEndpoint:m.useAccelerateEndpoint,dualstackEndpoint:m.useDualstackEndpoint,pathStyleEndpoint:m.forcePathStyle,tlsCompatible:"https:"===r.protocol,useArnRegion:u,clientPartition:s,clientSigningRegion:a,clientRegion:c,isCustomEndpoint:m.isCustomEndpoint}),d=p.hostname,f=p.bucketEndpoint,u=p.signingRegion,p=p.signingService,u&&u!==a&&(v.signing_region=u),p&&"s3"!==p&&(v.signing_service=p),r.hostname=d,n=f,[3,7];case 5:return l=ym,[4,m.region()];case 6:c=l.apply(void 0,[e.sent()]),p=Nm({bucketName:t,clientRegion:c,baseHostname:r.hostname,accelerateEndpoint:m.useAccelerateEndpoint,dualstackEndpoint:m.useDualstackEndpoint,pathStyleEndpoint:m.forcePathStyle,tlsCompatible:"https:"===r.protocol,isCustomEndpoint:m.isCustomEndpoint}),d=p.hostname,f=p.bucketEndpoint,r.hostname=d,n=f,e.label=7;case 7:n&&(r.path=r.path.replace(/^(\/)?[^\/]+/,""),""===r.path&&(r.path="/")),e.label=8;case 8:return[2,g(F(F({},h),{request:r}))]}})})}}),Rm)}}}var cm=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&6<=e.split(":").length},lm=function(e){e=e.split(":");if(e.length<6||"arn"!==e[0])throw new Error("Malformed ARN");e=G(e);return{partition:e[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}},pm=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,dm=/(\d+\.){3}\d+/,fm=/\.\./,hm=/\./,gm=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,vm=/^s3(-external-1)?\.amazonaws\.com$/,mm="amazonaws.com",ym=function(e){return sm(e)?e.replace(/fips-|-fips/,""):e},bm=function(e){return pm.test(e)&&!dm.test(e)&&!fm.test(e)},Sm=function(e){return vm.test(e)?["us-east-1",mm]:om(e)},wm=function(e){return vm.test(e)?[e.replace("."+mm,""),mm]:om(e)},Cm=function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")},_m=function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")},Em=function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")},Am=function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")},Im=function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')},km=function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!am(e,t.clientRegion)&&!am(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&sm(e))throw new Error("Endpoint does not support FIPS region")},Tm=function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")},Pm=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),64<=e.length||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||null!=t&&t.tlsCompatible&&hm.test(e))throw new Error("Invalid DNS label "+e)},Om=function(e){var t=e.includes(":")?":":"/",n=G(e.split(t)),e=n[0],n=n.slice(1);if("accesspoint"===e){if(1!==n.length||""===n[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:n[0]}}if("outpost"!==e)throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'");if(!n[0]||"accesspoint"!==n[1]||!n[2]||3!==n.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");t=G(n,3),n=t[0],t[1];return{outpostId:n,accesspointName:t[2]}},xm=function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")},Lm=function(e){if(sm(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)},Nm=function(e){var t=e.isCustomEndpoint,n=(e.baseHostname,e.dualstackEndpoint),r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return("string"==typeof e.bucketName?function(e){var t=e.accelerateEndpoint,n=t===void 0?false:t,r=e.clientRegion,i=e.baseHostname,o=e.bucketName,s=e.dualstackEndpoint,a=s===void 0?false:s,u=e.pathStyleEndpoint,c=u===void 0?false:u,l=e.tlsCompatible,p=l===void 0?true:l,d=e.isCustomEndpoint,f,h=G((d===void 0?false:d)?[r,i]:Sm(i),2),g=h[0],v=h[1];if(c||!bm(o)||p&&hm.test(o))return{bucketEndpoint:false,hostname:a?"s3.dualstack."+g+"."+v:i};if(n)i="s3-accelerate"+(a?".dualstack":"")+"."+v;else if(a)i="s3.dualstack."+g+"."+v;return{bucketEndpoint:true,hostname:o+"."+i}}:function(e){var t=e.isCustomEndpoint,n=e.baseHostname,r=G(t?[e.clientRegion,n]:wm(n),2),i=r[0],o=r[1],s=e.pathStyleEndpoint,a=e.dualstackEndpoint,u=a===void 0?false:a,c=e.accelerateEndpoint,l,p=e.tlsCompatible,d=p===void 0?true:p,f=e.useArnRegion,h=e.bucketName,g=e.clientPartition,v=g===void 0?"aws":g,m=e.clientSigningRegion,y=m===void 0?i:m;Cm({pathStyleEndpoint:s,accelerateEndpoint:c===void 0?false:c,tlsCompatible:d});var b=h.service,S=h.partition,w=h.accountId,C=h.region,_=h.resource;_m(b),Im(S,{clientPartition:v}),Tm(w),km(C,{useArnRegion:f,clientRegion:i,clientSigningRegion:y});var E=Om(_),A=E.accesspointName,I=E.outpostId;Pm(A+"-"+w,{tlsCompatible:d});var k=f?C:i,T=f?C:y,P;if(I){Am(b);Pm(I,{tlsCompatible:d});xm(u);Lm(k);var O=A+"-"+w+"."+I;return{bucketEndpoint:true,hostname:""+O+(t?"":".s3-outposts."+k)+"."+o,signingRegion:T,signingService:"s3-outposts"}}return Em(b),{bucketEndpoint:true,hostname:""+(A+"-"+w)+(t?"":".s3-accesspoint"+(u?".dualstack":"")+"."+k)+"."+o,signingRegion:T}})(F(F({},e),{isCustomEndpoint:t}))},Rm={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0};var Mm="AWS_S3_USE_ARN_REGION",Dm="s3_use_arn_region",S={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Mm)){if("true"===e[Mm])return!0;if("false"===e[Mm])return!1;throw new Error("Cannot load env "+Mm+'. Expected "true" or "false", got '+e[Mm]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Dm)){if("true"===e[Dm])return!0;if("false"===e[Dm])return!1;throw new Error("Cannot load shared config entry "+Dm+'. Expected "true" or "false", got '+e[Dm]+".")}},default:!1},Um="s3.{region}.amazonaws.com",Fm=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),jm=new Set(["cn-north-1","cn-northwest-1"]),Bm=new Set(["us-iso-east-1"]),zm=new Set(["us-isob-east-1"]),Vm=new Set(["us-gov-east-1","us-gov-west-1"]),qm={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Fm.has(e)&&(n={hostname:Um.replace("{region}",e),partition:"aws"}),jm.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Bm.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),zm.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=Vm.has(e)?{hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:Um.replace("{region}",e),partition:"aws"})}return Promise.resolve(Qv({signingService:"s3"},n))},serviceId:"S3",signingEscapePath:!1,urlParser:xe,useArnRegion:!1},Km=Qv(Qv({},qm),{runtime:"node",base64Decoder:Wu,base64Encoder:$u,bodyLengthChecker:Yu,credentialDefaultProvider:Gn,defaultUserAgentProvider:pn({serviceId:qm.serviceId,clientVersion:Mg}),eventStreamSerdeProvider:function(e){return new Eg(e)},maxAttempts:Ka(st),md5:ut.bind(null,"md5"),region:Ka(ln,vn),requestHandler:new $n,sha256:ut.bind(null,"sha256"),streamCollector:Ft,streamHasher:function(o,s){return new Promise(function(e,t){var n,r,i;"string"==typeof s.path?(n=a.createReadStream(s.path,{start:s.start,end:s.end}),r=new o,i=new rm(r),n.pipe(i),n.on("error",function(e){i.end(),t(e)}),i.on("error",t),i.on("finish",function(){r.digest().then(e).catch(t)})):t(new Error("Unable to calculate hash for non-file streams."))})},useArnRegion:Ka(S),utf8Decoder:un,utf8Encoder:C});function Hm(t){return{applyToStack:function(e){e.add(function(i){var e=this;return function(r){return function(n){return q(e,void 0,void 0,function(){var t;return K(this,function(e){return t=n.request,da.isInstance(t)&&t.body&&"node"===i.runtime&&(t.headers=F(F({},t.headers),{Expect:"100-continue"})),[2,r(F(F({},n),{request:t}))]})})}}}(t),Wm)}}}function Gm(e){return"string"==typeof e&&0===e.indexOf("arn:")&&6<=e.split(":").length}var Wm={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};function $m(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(r){return function(n){return q(e,void 0,void 0,function(){var t;return K(this,function(e){if("string"==typeof(t=n.input.Bucket)&&!Gm(t)&&0<=t.indexOf("/"))throw(t=new Error("Bucket name shouldn't contain '/', received '"+t+"'")).name="InvalidBucketName",t;return[2,r(F({},n))]})})}}}(),wS)}}}function Ym(t){return{applyToStack:function(e){var u;e.addRelativeTo((u=t,function(a){return function(s){return q(void 0,void 0,void 0,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:return[4,a(s)];case 1:return(t=e.sent(),n=t.response,la.isInstance(n))?(i=n.statusCode,o=n.body,i<200&&300<=i?[2,t]:[4,ES(o,u)]):[2,t];case 2:return r=e.sent(),[4,AS(r,u)];case 3:if(i=e.sent(),0===r.length)throw(o=new Error("S3 aborted request")).name="InternalError",o;return i&&i.match("<Error>")&&(n.statusCode=400),n.body=r,[2,t]}})})}}),IS)}}}var Jm,Zm,Xm,Qm,ey,ty,ny,ry,iy,oy,sy,ay,uy,cy,ly,py,dy,fy,hy,gy,vy,my,yy,by,Sy,wy,Cy,_y,Ey,Ay,Iy,ky,Ty,Py,Oy,xy,Ly,Ny,Ry,My,Dy,Uy,Fy,jy,By,zy,Vy,qy,Ky,Hy,Gy,Wy,$y,Yy,Jy,Zy,Xy,Qy,e0,t0,n0,r0,i0,o0,s0,a0,u0,c0,l0,p0,d0,f0,h0,g0,v0,m0,y0,b0,S0,w0,C0,_0,E0,A0,I0,k0,T0,P0,O0,x0,L0,N0,R0,M0,D0,U0,F0,j0,B0,z0,V0,q0,K0,H0,G0,W0,$0,Y0,J0,Z0,X0,Q0,eb,tb,nb,rb,ib,ob,sb,ab,ub,cb,lb,pb,db,fb,hb,gb,vb,mb,yb,bb,Sb,wb,Cb,_b,Eb,Ab,Ib,kb,Tb,Pb,Ob,xb,Lb,Nb,Rb,Mb,Db,Ub,Fb,jb,Bb,zb,Vb,qb,Kb,Hb,Gb,Wb,$b,Yb,Jb,Zb,Xb,Qb,e1,t1,n1,r1,i1,o1,s1,a1,u1,c1,l1,p1,d1,f1,h1,g1,v1,m1,y1,b1,S1,w1,C1,_1,E1,A1,I1,k1,T1,P1,O1,x1,L1,N1,R1,M1,D1,U1,F1,j1,B1,z1,V1,q1,K1,H1,G1,W1,$1,Y1,J1,Z1,X1,Q1,eS,tS,nS,rS,iS,oS,sS,aS,uS,cS,lS,pS,dS,fS,hS,gS,vS,mS,yS,bS,SS,wS={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},CS=function(o){return function(i){return function(r){return q(void 0,void 0,void 0,function(){var t,n;return K(this,function(e){switch(e.label){case 0:return(t=r.request,!da.isInstance(t)||o.isCustomEndpoint)?[2,i(F({},r))]:"s3.amazonaws.com"!==t.hostname?[3,1]:(t.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return n="aws-global",[4,o.region()];case 2:n===e.sent()&&(t.hostname="s3.amazonaws.com"),e.label=3;case 3:return[2,i(F({},r))]}})})}}},_S={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},ES=function(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},AS=function(e,t){return ES(e,t).then(function(e){return t.utf8Encoder(e)})},IS={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},kS=(Xv(TS,Jm=Re),TS.prototype.destroy=function(){Jm.prototype.destroy.call(this)},TS);function TS(e){var t,n,r,i=this,o=Qv(Qv({},Km),e),s=Ro(o),a=Jc(No(s)),u=xa(a),a=nl((e=void 0!==(t=u.bucketEndpoint)&&t,o=u.forcePathStyle,s=void 0!==o&&o,t=void 0!==(a=u.useAccelerateEndpoint)&&a,a=void 0!==(o=u.useDualstackEndpoint)&&o,n=void 0!==(o=u.useArnRegion)&&o,F(F({},u),{bucketEndpoint:e,forcePathStyle:s,useAccelerateEndpoint:t,useDualstackEndpoint:a,useArnRegion:"function"==typeof n?n:function(){return Promise.resolve(n)}}))),a=F(F({},a=a),{eventStreamMarshaller:a.eventStreamSerdeProvider(a)});return(i=Jm.call(this,a)||this).config=a,i.middlewareStack.use(el(i.config)),i.middlewareStack.use(aa(i.config)),i.middlewareStack.use(oc(i.config)),i.middlewareStack.use(cc(i.config)),i.middlewareStack.use(dc(i.config)),i.middlewareStack.use($m(i.config)),i.middlewareStack.use((r=i.config,{applyToStack:function(e){e.add(CS(r),_S)}})),i.middlewareStack.use(Hm(i.config)),i.middlewareStack.use(il(i.config)),i}(Zm||(Zm={})).filterSensitiveLog=function(e){return Qv({},e)},(Xm||(Xm={})).filterSensitiveLog=function(e){return Qv({},e)},(Qm||(Qm={})).filterSensitiveLog=function(e){return Qv({},e)},(ey||(ey={})).filterSensitiveLog=function(e){return Qv({},e)},(ty||(ty={})).filterSensitiveLog=function(e){return Qv({},e)},(ny||(ny={})).filterSensitiveLog=function(e){return Qv({},e)},(ry||(ry={})).filterSensitiveLog=function(e){return Qv({},e)},(iy||(iy={})).filterSensitiveLog=function(e){return Qv({},e)},(oy||(oy={})).filterSensitiveLog=function(e){return Qv({},e)},(sy||(sy={})).filterSensitiveLog=function(e){return Qv({},e)},(ay||(ay={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:_l})},(uy||(uy={})).filterSensitiveLog=function(e){return Qv({},e)},(cy||(cy={})).filterSensitiveLog=function(e){return Qv({},e)},(ly||(ly={})).filterSensitiveLog=function(e){return Qv({},e)},(py||(py={})).filterSensitiveLog=function(e){return Qv({},e)},(dy||(dy={})).filterSensitiveLog=function(e){return Qv(Qv(Qv({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:_l}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:_l})},(fy||(fy={})).filterSensitiveLog=function(e){return Qv(Qv(Qv(Qv(Qv({},e),e.SSECustomerKey&&{SSECustomerKey:_l}),e.SSEKMSKeyId&&{SSEKMSKeyId:_l}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:_l}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:_l})},(hy||(hy={})).filterSensitiveLog=function(e){return Qv({},e)},(gy||(gy={})).filterSensitiveLog=function(e){return Qv({},e)},(vy||(vy={})).filterSensitiveLog=function(e){return Qv({},e)},(my||(my={})).filterSensitiveLog=function(e){return Qv({},e)},(yy||(yy={})).filterSensitiveLog=function(e){return Qv({},e)},(by||(by={})).filterSensitiveLog=function(e){return Qv({},e)},(Sy||(Sy={})).filterSensitiveLog=function(e){return Qv(Qv(Qv({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:_l}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:_l})},(wy||(wy={})).filterSensitiveLog=function(e){return Qv(Qv(Qv(Qv({},e),e.SSECustomerKey&&{SSECustomerKey:_l}),e.SSEKMSKeyId&&{SSEKMSKeyId:_l}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:_l})},(Cy||(Cy={})).filterSensitiveLog=function(e){return Qv({},e)},(_y||(_y={})).filterSensitiveLog=function(e){return Qv({},e)},(Ey||(Ey={})).filterSensitiveLog=function(e){return Qv({},e)},(Ay||(Ay={})).filterSensitiveLog=function(e){return Qv({},e)},(Iy||(Iy={})).filterSensitiveLog=function(e){return Qv({},e)},(ky||(ky={})).filterSensitiveLog=function(e){return Qv({},e)},(Ty||(Ty={})).filterSensitiveLog=function(e){return Qv({},e)},(Py||(Py={})).filterSensitiveLog=function(e){return Qv({},e)},(Oy||(Oy={})).filterSensitiveLog=function(e){return Qv({},e)},(xy||(xy={})).filterSensitiveLog=function(e){return Qv({},e)},(Ly||(Ly={})).filterSensitiveLog=function(e){return Qv({},e)},(Ny||(Ny={})).filterSensitiveLog=function(e){return Qv({},e)},(Ry||(Ry={})).filterSensitiveLog=function(e){return Qv({},e)},(My||(My={})).filterSensitiveLog=function(e){return Qv({},e)},(Dy||(Dy={})).filterSensitiveLog=function(e){return Qv({},e)},(Uy||(Uy={})).filterSensitiveLog=function(e){return Qv({},e)},(Fy||(Fy={})).filterSensitiveLog=function(e){return Qv({},e)},(jy||(jy={})).filterSensitiveLog=function(e){return Qv({},e)},(By||(By={})).filterSensitiveLog=function(e){return Qv({},e)},(zy||(zy={})).filterSensitiveLog=function(e){return Qv({},e)},(Vy||(Vy={})).filterSensitiveLog=function(e){return Qv({},e)},(qy||(qy={})).filterSensitiveLog=function(e){return Qv({},e)},(Ky||(Ky={})).filterSensitiveLog=function(e){return Qv({},e)},(Hy||(Hy={})).filterSensitiveLog=function(e){return Qv({},e)},(Gy||(Gy={})).filterSensitiveLog=function(e){return Qv({},e)},(Wy||(Wy={})).filterSensitiveLog=function(e){return Qv({},e)},($y||($y={})).filterSensitiveLog=function(e){return Qv({},e)},(Xy||(Xy={})).filterSensitiveLog=function(e){return Qv({},e)},(Yy||(Yy={})).filterSensitiveLog=function(e){return Qv({},e)},(Jy||(Jy={})).filterSensitiveLog=function(e){return Qv({},e)},(Xy=Zy=Zy||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},Xy.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Yy.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Jy.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Qy||(Qy={})).filterSensitiveLog=function(e){return Qv({},e)},(e0||(e0={})).filterSensitiveLog=function(e){return Qv({},e)},(t0||(t0={})).filterSensitiveLog=function(e){return Qv({},e)},(n0||(n0={})).filterSensitiveLog=function(e){return Qv({},e)},(r0||(r0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Filter&&{Filter:Zy.filterSensitiveLog(e.Filter)})},(i0||(i0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:r0.filterSensitiveLog(e.AnalyticsConfiguration)})},(o0||(o0={})).filterSensitiveLog=function(e){return Qv({},e)},(s0||(s0={})).filterSensitiveLog=function(e){return Qv({},e)},(a0||(a0={})).filterSensitiveLog=function(e){return Qv({},e)},(u0||(u0={})).filterSensitiveLog=function(e){return Qv({},e)},(c0||(c0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:_l})},(l0||(l0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:c0.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(p0||(p0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Rules&&{Rules:e.Rules.map(function(e){return l0.filterSensitiveLog(e)})})},(d0||(d0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:p0.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(f0||(f0={})).filterSensitiveLog=function(e){return Qv({},e)},(h0||(h0={})).filterSensitiveLog=function(e){return Qv({},e)},(g0||(g0={})).filterSensitiveLog=function(e){return Qv({},e)},(v0||(v0={})).filterSensitiveLog=function(e){return Qv({},e)},(m0||(m0={})).filterSensitiveLog=function(e){return Qv({},e)},(y0||(y0={})).filterSensitiveLog=function(e){return Qv({},e)},(b0||(b0={})).filterSensitiveLog=function(e){return Qv({},e)},(S0||(S0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.KeyId&&{KeyId:_l})},(w0||(w0={})).filterSensitiveLog=function(e){return Qv({},e)},(C0||(C0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSEKMS&&{SSEKMS:S0.filterSensitiveLog(e.SSEKMS)})},(_0||(_0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Encryption&&{Encryption:C0.filterSensitiveLog(e.Encryption)})},(E0||(E0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.S3BucketDestination&&{S3BucketDestination:_0.filterSensitiveLog(e.S3BucketDestination)})},(A0||(A0={})).filterSensitiveLog=function(e){return Qv({},e)},(I0||(I0={})).filterSensitiveLog=function(e){return Qv({},e)},(k0||(k0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Destination&&{Destination:E0.filterSensitiveLog(e.Destination)})},(T0||(T0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.InventoryConfiguration&&{InventoryConfiguration:k0.filterSensitiveLog(e.InventoryConfiguration)})},(P0||(P0={})).filterSensitiveLog=function(e){return Qv({},e)},(L0||(L0={})).filterSensitiveLog=function(e){return Qv({},e)},(O0||(O0={})).filterSensitiveLog=function(e){return Qv({},e)},(L0=x0=x0||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},L0.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Yy.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:O0.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(N0||(N0={})).filterSensitiveLog=function(e){return Qv({},e)},(R0||(R0={})).filterSensitiveLog=function(e){return Qv({},e)},(M0||(M0={})).filterSensitiveLog=function(e){return Qv({},e)},(D0||(D0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Filter&&{Filter:x0.filterSensitiveLog(e.Filter)})},(U0||(U0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Rules&&{Rules:e.Rules.map(function(e){return D0.filterSensitiveLog(e)})})},(F0||(F0={})).filterSensitiveLog=function(e){return Qv({},e)},(j0||(j0={})).filterSensitiveLog=function(e){return Qv({},e)},(B0||(B0={})).filterSensitiveLog=function(e){return Qv({},e)},(z0||(z0={})).filterSensitiveLog=function(e){return Qv({},e)},(V0||(V0={})).filterSensitiveLog=function(e){return Qv({},e)},(q0||(q0={})).filterSensitiveLog=function(e){return Qv({},e)},(G0||(G0={})).filterSensitiveLog=function(e){return Qv({},e)},(K0||(K0={})).filterSensitiveLog=function(e){return Qv({},e)},(G0=H0=H0||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},G0.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Yy.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:K0.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(W0||(W0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Filter&&{Filter:H0.filterSensitiveLog(e.Filter)})},($0||($0={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.MetricsConfiguration&&{MetricsConfiguration:W0.filterSensitiveLog(e.MetricsConfiguration)})},(Y0||(Y0={})).filterSensitiveLog=function(e){return Qv({},e)},(J0||(J0={})).filterSensitiveLog=function(e){return Qv({},e)},(Z0||(Z0={})).filterSensitiveLog=function(e){return Qv({},e)},(X0||(X0={})).filterSensitiveLog=function(e){return Qv({},e)},(Q0||(Q0={})).filterSensitiveLog=function(e){return Qv({},e)},(eb||(eb={})).filterSensitiveLog=function(e){return Qv({},e)},(tb||(tb={})).filterSensitiveLog=function(e){return Qv({},e)},(nb||(nb={})).filterSensitiveLog=function(e){return Qv({},e)},(rb||(rb={})).filterSensitiveLog=function(e){return Qv({},e)},(ib||(ib={})).filterSensitiveLog=function(e){return Qv({},e)},(ob||(ob={})).filterSensitiveLog=function(e){return Qv({},e)},(sb||(sb={})).filterSensitiveLog=function(e){return Qv({},e)},(ab||(ab={})).filterSensitiveLog=function(e){return Qv({},e)},(ub||(ub={})).filterSensitiveLog=function(e){return Qv({},e)},(cb||(cb={})).filterSensitiveLog=function(e){return Qv({},e)},(lb||(lb={})).filterSensitiveLog=function(e){return Qv({},e)},(pb||(pb={})).filterSensitiveLog=function(e){return Qv({},e)},(db||(db={})).filterSensitiveLog=function(e){return Qv({},e)},(fb||(fb={})).filterSensitiveLog=function(e){return Qv({},e)},(hb||(hb={})).filterSensitiveLog=function(e){return Qv({},e)},(gb||(gb={})).filterSensitiveLog=function(e){return Qv({},e)},(vb||(vb={})).filterSensitiveLog=function(e){return Qv({},e)},(mb||(mb={})).filterSensitiveLog=function(e){return Qv({},e)},(yb||(yb={})).filterSensitiveLog=function(e){return Qv({},e)},(wb||(wb={})).filterSensitiveLog=function(e){return Qv({},e)},(bb||(bb={})).filterSensitiveLog=function(e){return Qv({},e)},(wb=Sb=Sb||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},wb.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Yy.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:bb.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Cb||(Cb={})).filterSensitiveLog=function(e){return Qv({},e)},(_b||(_b={})).filterSensitiveLog=function(e){return Qv({},e)},(Eb||(Eb={})).filterSensitiveLog=function(e){return Qv({},e)},(Ab||(Ab={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Filter&&{Filter:Sb.filterSensitiveLog(e.Filter)})},(Ib||(Ib={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Rules&&{Rules:e.Rules.map(function(e){return Ab.filterSensitiveLog(e)})})},(kb||(kb={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:Ib.filterSensitiveLog(e.ReplicationConfiguration)})},(Tb||(Tb={})).filterSensitiveLog=function(e){return Qv({},e)},(Pb||(Pb={})).filterSensitiveLog=function(e){return Qv({},e)},(Ob||(Ob={})).filterSensitiveLog=function(e){return Qv({},e)},(xb||(xb={})).filterSensitiveLog=function(e){return Qv({},e)},(Lb||(Lb={})).filterSensitiveLog=function(e){return Qv({},e)},(Nb||(Nb={})).filterSensitiveLog=function(e){return Qv({},e)},(Rb||(Rb={})).filterSensitiveLog=function(e){return Qv({},e)},(Mb||(Mb={})).filterSensitiveLog=function(e){return Qv({},e)},(Db||(Db={})).filterSensitiveLog=function(e){return Qv({},e)},(Ub||(Ub={})).filterSensitiveLog=function(e){return Qv({},e)},(Fb||(Fb={})).filterSensitiveLog=function(e){return Qv({},e)},(jb||(jb={})).filterSensitiveLog=function(e){return Qv({},e)},(Bb||(Bb={})).filterSensitiveLog=function(e){return Qv({},e)},(zb||(zb={})).filterSensitiveLog=function(e){return Qv({},e)},(Vb||(Vb={})).filterSensitiveLog=function(e){return Qv({},e)},(qb||(qb={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:_l})},(Kb||(Kb={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSECustomerKey&&{SSECustomerKey:_l})},(Hb||(Hb={})).filterSensitiveLog=function(e){return Qv({},e)},(Gb||(Gb={})).filterSensitiveLog=function(e){return Qv({},e)},(Wb||(Wb={})).filterSensitiveLog=function(e){return Qv({},e)},($b||($b={})).filterSensitiveLog=function(e){return Qv({},e)},(Yb||(Yb={})).filterSensitiveLog=function(e){return Qv({},e)},(Jb||(Jb={})).filterSensitiveLog=function(e){return Qv({},e)},(Zb||(Zb={})).filterSensitiveLog=function(e){return Qv({},e)},(Xb||(Xb={})).filterSensitiveLog=function(e){return Qv({},e)},(Qb||(Qb={})).filterSensitiveLog=function(e){return Qv({},e)},(e1||(e1={})).filterSensitiveLog=function(e){return Qv({},e)},(t1||(t1={})).filterSensitiveLog=function(e){return Qv({},e)},(n1||(n1={})).filterSensitiveLog=function(e){return Qv({},e)},(r1||(r1={})).filterSensitiveLog=function(e){return Qv({},e)},(i1||(i1={})).filterSensitiveLog=function(e){return Qv({},e)},(o1||(o1={})).filterSensitiveLog=function(e){return Qv({},e)},(s1||(s1={})).filterSensitiveLog=function(e){return Qv({},e)},(a1||(a1={})).filterSensitiveLog=function(e){return Qv({},e)},(u1||(u1={})).filterSensitiveLog=function(e){return Qv({},e)},(c1||(c1={})).filterSensitiveLog=function(e){return Qv({},e)},(l1||(l1={})).filterSensitiveLog=function(e){return Qv({},e)},(p1||(p1={})).filterSensitiveLog=function(e){return Qv({},e)},(d1||(d1={})).filterSensitiveLog=function(e){return Qv({},e)},(f1||(f1={})).filterSensitiveLog=function(e){return Qv({},e)},(h1||(h1={})).filterSensitiveLog=function(e){return Qv({},e)},(g1||(g1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:_l})},(v1||(v1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSECustomerKey&&{SSECustomerKey:_l})},(m1||(m1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map(function(e){return r0.filterSensitiveLog(e)})})},(y1||(y1={})).filterSensitiveLog=function(e){return Qv({},e)},(b1||(b1={})).filterSensitiveLog=function(e){return Qv({},e)},(S1||(S1={})).filterSensitiveLog=function(e){return Qv({},e)},(w1||(w1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map(function(e){return k0.filterSensitiveLog(e)})})},(C1||(C1={})).filterSensitiveLog=function(e){return Qv({},e)},(_1||(_1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map(function(e){return W0.filterSensitiveLog(e)})})},(E1||(E1={})).filterSensitiveLog=function(e){return Qv({},e)},(A1||(A1={})).filterSensitiveLog=function(e){return Qv({},e)},(I1||(I1={})).filterSensitiveLog=function(e){return Qv({},e)},(k1||(k1={})).filterSensitiveLog=function(e){return Qv({},e)},(T1||(T1={})).filterSensitiveLog=function(e){return Qv({},e)},(P1||(P1={})).filterSensitiveLog=function(e){return Qv({},e)},(O1||(O1={})).filterSensitiveLog=function(e){return Qv({},e)},(x1||(x1={})).filterSensitiveLog=function(e){return Qv({},e)},(L1||(L1={})).filterSensitiveLog=function(e){return Qv({},e)},(N1||(N1={})).filterSensitiveLog=function(e){return Qv({},e)},(R1||(R1={})).filterSensitiveLog=function(e){return Qv({},e)},(M1||(M1={})).filterSensitiveLog=function(e){return Qv({},e)},(D1||(D1={})).filterSensitiveLog=function(e){return Qv({},e)},(U1||(U1={})).filterSensitiveLog=function(e){return Qv({},e)},(F1||(F1={})).filterSensitiveLog=function(e){return Qv({},e)},(j1||(j1={})).filterSensitiveLog=function(e){return Qv({},e)},(B1||(B1={})).filterSensitiveLog=function(e){return Qv({},e)},(z1||(z1={})).filterSensitiveLog=function(e){return Qv({},e)},(V1||(V1={})).filterSensitiveLog=function(e){return Qv({},e)},(q1||(q1={})).filterSensitiveLog=function(e){return Qv({},e)},(K1||(K1={})).filterSensitiveLog=function(e){return Qv({},e)},(H1||(H1={})).filterSensitiveLog=function(e){return Qv({},e)},(G1||(G1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:r0.filterSensitiveLog(e.AnalyticsConfiguration)})},(W1||(W1={})).filterSensitiveLog=function(e){return Qv({},e)},($1||($1={})).filterSensitiveLog=function(e){return Qv({},e)},(Y1||(Y1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:p0.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(J1||(J1={})).filterSensitiveLog=function(e){return Qv({},e)},(Z1||(Z1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.InventoryConfiguration&&{InventoryConfiguration:k0.filterSensitiveLog(e.InventoryConfiguration)})},(X1||(X1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Rules&&{Rules:e.Rules.map(function(e){return D0.filterSensitiveLog(e)})})},(Q1||(Q1={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.LifecycleConfiguration&&{LifecycleConfiguration:X1.filterSensitiveLog(e.LifecycleConfiguration)})},(eS||(eS={})).filterSensitiveLog=function(e){return Qv({},e)},(tS||(tS={})).filterSensitiveLog=function(e){return Qv({},e)},(nS||(nS={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.MetricsConfiguration&&{MetricsConfiguration:W0.filterSensitiveLog(e.MetricsConfiguration)})},(rS||(rS={})).filterSensitiveLog=function(e){return Qv({},e)},(iS||(iS={})).filterSensitiveLog=function(e){return Qv({},e)},(oS||(oS={})).filterSensitiveLog=function(e){return Qv({},e)},(sS||(sS={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:Ib.filterSensitiveLog(e.ReplicationConfiguration)})},(aS||(aS={})).filterSensitiveLog=function(e){return Qv({},e)},(uS||(uS={})).filterSensitiveLog=function(e){return Qv({},e)},(cS||(cS={})).filterSensitiveLog=function(e){return Qv({},e)},(lS||(lS={})).filterSensitiveLog=function(e){return Qv({},e)},(pS||(pS={})).filterSensitiveLog=function(e){return Qv({},e)},(dS||(dS={})).filterSensitiveLog=function(e){return Qv({},e)},(fS||(fS={})).filterSensitiveLog=function(e){return Qv({},e)},(hS||(hS={})).filterSensitiveLog=function(e){return Qv({},e)},(gS||(gS={})).filterSensitiveLog=function(e){return Qv(Qv(Qv({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:_l}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:_l})},(vS||(vS={})).filterSensitiveLog=function(e){return Qv(Qv(Qv(Qv({},e),e.SSECustomerKey&&{SSECustomerKey:_l}),e.SSEKMSKeyId&&{SSEKMSKeyId:_l}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:_l})},(mS||(mS={})).filterSensitiveLog=function(e){return Qv({},e)},(yS||(yS={})).filterSensitiveLog=function(e){return Qv({},e)},(bS||(bS={})).filterSensitiveLog=function(e){return Qv({},e)},(US||(US={})).filterSensitiveLog=function(e){return Qv({},e)},(FS||(FS={})).filterSensitiveLog=function(e){return Qv({},e)},(jS||(jS={})).filterSensitiveLog=function(e){return Qv({},e)},(BS||(BS={})).filterSensitiveLog=function(e){return Qv({},e)},(zS||(zS={})).filterSensitiveLog=function(e){return Qv({},e)},(VS||(VS={})).filterSensitiveLog=function(e){return Qv({},e)},(qS||(qS={})).filterSensitiveLog=function(e){return Qv({},e)},(KS||(KS={})).filterSensitiveLog=function(e){return Qv({},e)},(HS||(HS={})).filterSensitiveLog=function(e){return Qv({},e)},(GS||(GS={})).filterSensitiveLog=function(e){return Qv({},e)},(WS||(WS={})).filterSensitiveLog=function(e){return Qv({},e)},(SS||(SS={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.KMSKeyId&&{KMSKeyId:_l})};var PS=(OS.prototype.withName=function(e){return this.name=e,this},OS.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},OS.prototype.addChildNode=function(e){return this.children.push(e),this},OS.prototype.removeAttribute=function(e){return delete this.attributes[e],this},OS.prototype.toString=function(){var t,e,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=H(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},OS);function OS(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}var xS=(LS.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},LS);function LS(e){this.value=e}function NS(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n}function RS(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}function MS(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var DS,US=function(u,c){return em(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv({"content-type":"application/xml"},MS(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),MS(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r=Qv({},void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.MultipartUpload&&(s=function(e){var t=new PS("CompletedMultipartUpload");if(e.Parts!==undefined&&e.Parts!==null){var n=QS(e.Parts);n.map(function(e){e=e.withName("Part");t.addChildNode(e)})}return t}(u.MultipartUpload),i='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=s.toString()),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new da({protocol:s,hostname:o,port:a,method:"POST",headers:t,path:n,query:r,body:i})]}})})},FS=function(n,r){return em(void 0,void 0,void 0,function(){var t;return tm(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,(u=n,c=r,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return tm(this,function(e){switch(e.label){case 0:return n=[Qv({},u)],a={},[4,sw(u.body,c)];case 1:switch(t=Qv.apply(void 0,n.concat([(a.body=e.sent(),a)])),i="UnknownError",i=aw(u,t.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return o=[{}],[4,ZS(t)];case 3:return r=Qv.apply(void 0,[Qv.apply(void 0,o.concat([e.sent()])),{name:i,$metadata:rw(u)}]),[3,5];case 4:s=t.body,i=s.code||s.Code||i,r=Qv(Qv({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:rw(u)}),e.label=5;case 5:return s=r.message||r.Message||i,r.message=s,delete r.Message,[2,Promise.reject(Object.assign(new Error(s),r))]}})}))]:(t={$metadata:rw(n),RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,RS(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var u,c})})},jS=function(r,i){return em(void 0,void 0,void 0,function(){var t,n;return tm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(o=r,s=i,em(void 0,void 0,void 0,function(){var t,n,r,i;return tm(this,function(e){switch(e.label){case 0:return t=[Qv({},o)],i={},[4,sw(o.body,s)];case 1:return n=Qv.apply(void 0,t.concat([(i.body=e.sent(),i)])),r="UnknownError",r=aw(o,n.body),n=n.body,r=n.code||n.Code||r,n=Qv(Qv({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:rw(o)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:rw(r),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,sw(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}var o,s})})},BS=function(r,i){return em(void 0,void 0,void 0,function(){var t,n;return tm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(u=r,c=i,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return tm(this,function(e){switch(e.label){case 0:return n=[Qv({},u)],a={},[4,sw(u.body,c)];case 1:switch(t=Qv.apply(void 0,n.concat([(a.body=e.sent(),a)])),i="UnknownError",i=aw(u,t.body)){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return o=[{}],[4,XS(t)];case 3:return r=Qv.apply(void 0,[Qv.apply(void 0,o.concat([e.sent()])),{name:i,$metadata:rw(u)}]),[3,5];case 4:s=t.body,i=s.code||s.Code||i,r=Qv(Qv({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:rw(u)}),e.label=5;case 5:return s=r.message||r.Message||i,r.message=s,delete r.Message,[2,Promise.reject(Object.assign(new Error(s),r))]}})}))]:(t={$metadata:rw(r),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-copy-source-version-id"]&&(t.CopySourceVersionId=r.headers["x-amz-copy-source-version-id"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,sw(r.body,i)]);case 1:return n=e.sent(),t.CopyObjectResult=function(e){var t={ETag:undefined,LastModified:undefined};if(e["ETag"]!==undefined)t.ETag=e["ETag"];if(e["LastModified"]!==undefined)t.LastModified=new Date(e["LastModified"]);return t}(n),[2,Promise.resolve(t)]}var u,c})})},zS=function(r,i){return em(void 0,void 0,void 0,function(){var t,n;return tm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(o=r,s=i,em(void 0,void 0,void 0,function(){var t,n,r,i;return tm(this,function(e){switch(e.label){case 0:return t=[Qv({},o)],i={},[4,sw(o.body,s)];case 1:return n=Qv.apply(void 0,t.concat([(i.body=e.sent(),i)])),r="UnknownError",r=aw(o,n.body),n=n.body,r=n.code||n.Code||r,n=Qv(Qv({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:rw(o)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:rw(r),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,sw(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}var o,s})})},VS=function(n,r){return em(void 0,void 0,void 0,function(){var t;return tm(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,(o=n,s=r,em(void 0,void 0,void 0,function(){var t,n,r,i;return tm(this,function(e){switch(e.label){case 0:return t=[Qv({},o)],i={},[4,sw(o.body,s)];case 1:return n=Qv.apply(void 0,t.concat([(i.body=e.sent(),i)])),r="UnknownError",r=aw(o,n.body),n=n.body,r=n.code||n.Code||r,n=Qv(Qv({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:rw(o)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:rw(n),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,RS(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var o,s})})},qS=function(r,i){return em(void 0,void 0,void 0,function(){var t,n;return tm(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,(c=r,l=i,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return tm(this,function(e){switch(e.label){case 0:return n=[Qv({},c)],u={},[4,sw(c.body,l)];case 1:switch(t=Qv.apply(void 0,n.concat([(u.body=e.sent(),u)])),i="UnknownError",i=aw(c,t.body)){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return o=[{}],[4,$S(t)];case 3:return r=Qv.apply(void 0,[Qv.apply(void 0,o.concat([e.sent()])),{name:i,$metadata:rw(c)}]),[3,7];case 4:return s=[{}],[4,JS(t)];case 5:return r=Qv.apply(void 0,[Qv.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:rw(c)}]),[3,7];case 6:a=t.body,i=a.code||a.Code||i,r=Qv(Qv({},a),{name:""+i,message:a.message||a.Message||i,$fault:"client",$metadata:rw(c)}),e.label=7;case 7:return a=r.message||r.Message||i,r.message=a,delete r.Message,[2,Promise.reject(Object.assign(new Error(a),r))]}})}))]:(t={$metadata:rw(r),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)]);var c,l})})},KS=function(r,i){return em(void 0,void 0,void 0,function(){var t,n;return tm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(u=r,c=i,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return tm(this,function(e){switch(e.label){case 0:return n=[Qv({},u)],a={},[4,sw(u.body,c)];case 1:switch(t=Qv.apply(void 0,n.concat([(a.body=e.sent(),a)])),i="UnknownError",i=aw(u,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return o=[{}],[4,YS(t)];case 3:return r=Qv.apply(void 0,[Qv.apply(void 0,o.concat([e.sent()])),{name:i,$metadata:rw(u)}]),[3,5];case 4:s=t.body,i=s.code||s.Code||i,r=Qv(Qv({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:rw(u)}),e.label=5;case 5:return s=r.message||r.Message||i,r.message=s,delete r.Message,[2,Promise.reject(Object.assign(new Error(s),r))]}})}))]:(t={$metadata:rw(r),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,sw(r.body,i)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=(hl(n.CommonPrefixes)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:ew(e)})),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=(hl(n.Contents)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:tw(e)})),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}var u,c})})},HS=function(r,i){return em(void 0,void 0,void 0,function(){var t,n;return tm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(o=r,s=i,em(void 0,void 0,void 0,function(){var t,n,r,i;return tm(this,function(e){switch(e.label){case 0:return t=[Qv({},o)],i={},[4,sw(o.body,s)];case 1:return n=Qv.apply(void 0,t.concat([(i.body=e.sent(),i)])),r="UnknownError",r=aw(o,n.body),n=n.body,r=n.code||n.Code||r,n=Qv(Qv({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:rw(o)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:rw(r),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,sw(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Initiator&&(t.Initiator=function(e){var t={ID:undefined,DisplayName:undefined};if(e["ID"]!==undefined)t.ID=e["ID"];if(e["DisplayName"]!==undefined)t.DisplayName=e["DisplayName"];return t}(n.Initiator)),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.MaxParts&&(t.MaxParts=parseInt(n.MaxParts)),void 0!==n.NextPartNumberMarker&&(t.NextPartNumberMarker=n.NextPartNumberMarker),void 0!==n.Owner&&(t.Owner=NS(n.Owner)),void 0!==n.PartNumberMarker&&(t.PartNumberMarker=n.PartNumberMarker),""===n.Part&&(t.Parts=[]),void 0!==n.Part&&(t.Parts=(hl(n.Part)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:nw(e)})),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}var o,s})})},GS=function(n,r){return em(void 0,void 0,void 0,function(){var t;return tm(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,(o=n,s=r,em(void 0,void 0,void 0,function(){var t,n,r,i;return tm(this,function(e){switch(e.label){case 0:return t=[Qv({},o)],i={},[4,sw(o.body,s)];case 1:return n=Qv.apply(void 0,t.concat([(i.body=e.sent(),i)])),r="UnknownError",r=aw(o,n.body),n=n.body,r=n.code||n.Code||r,n=Qv(Qv({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:rw(o)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:rw(n),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===n.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,RS(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var o,s})})},WS=function(n,r){return em(void 0,void 0,void 0,function(){var t;return tm(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,(o=n,s=r,em(void 0,void 0,void 0,function(){var t,n,r,i;return tm(this,function(e){switch(e.label){case 0:return t=[Qv({},o)],i={},[4,sw(o.body,s)];case 1:return n=Qv.apply(void 0,t.concat([(i.body=e.sent(),i)])),r="UnknownError",r=aw(o,n.body),n=n.body,r=n.code||n.Code||r,n=Qv(Qv({},n),{name:""+r,message:n.message||n.Message||r,$fault:"client",$metadata:rw(o)}),r=n.message||n.Message||r,n.message=r,delete n.Message,[2,Promise.reject(Object.assign(new Error(r),n))]}})}))]:(t={$metadata:rw(n),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===n.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,RS(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var o,s})})},$S=function(r,e){return em(void 0,void 0,void 0,function(){var t,n;return tm(this,function(e){return t={name:"InvalidObjectState",$fault:"client",$metadata:rw(r),AccessTier:void 0,StorageClass:void 0},void 0!==(n=r.body).AccessTier&&(t.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),[2,t]})})},YS=function(n,e){return em(void 0,void 0,void 0,function(){var t;return tm(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:rw(n)},n.body,[2,t]})})},JS=function(n,e){return em(void 0,void 0,void 0,function(){var t;return tm(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:rw(n)},n.body,[2,t]})})},ZS=function(n,e){return em(void 0,void 0,void 0,function(){var t;return tm(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:rw(n)},n.body,[2,t]})})},XS=function(n,e){return em(void 0,void 0,void 0,function(){var t;return tm(this,function(e){return t={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:rw(n)},n.body,[2,t]})})},QS=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:(t=e,e=new PS("CompletedPart"),void 0!==t.ETag&&null!==t.ETag&&(n=new PS("ETag").addChildNode(new xS(t.ETag)).withName("ETag"),e.addChildNode(n)),void 0!==t.PartNumber&&null!==t.PartNumber&&(n=new PS("PartNumber").addChildNode(new xS(String(t.PartNumber))).withName("PartNumber"),e.addChildNode(n)),e).withName("member");var t,n})},ew=function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n},tw=function(e,t){var n={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Owner&&(n.Owner=NS(e.Owner)),n},nw=function(e,t){var n={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(n.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),n},rw=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},iw=function(e,t){return RS(e,t).then(function(e){return t.utf8Encoder(e)})},ow=function(e){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")},sw=function(e,t){return iw(e,t).then(function(e){if(e.length){var t=P.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return ow(e)}}),e=Object.keys(t)[0],t=t[e];return t["#text"]&&(t[e]=t["#text"],delete t["#text"]),gl(t)}return{}})},aw=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},uw=(Xv(cw,DS=cn),cw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:Qm.filterSensitiveLog,outputFilterSensitiveLog:Xm.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},cw.prototype.serialize=function(e,t){return a=e,u=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv({},MS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),MS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r=Qv({"x-id":"AbortMultipartUpload"},void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},cw.prototype.deserialize=FS,cw);function cw(e){var t=DS.call(this)||this;return t.input=e,t}var lw,pw=(Xv(dw,lw=cn),dw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ym(t)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:ly.filterSensitiveLog,outputFilterSensitiveLog:ay.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},dw.prototype.serialize=US,dw.prototype.deserialize=jS,dw);function dw(e){var t=lw.call(this)||this;return t.input=e,t}function fw(t){return{applyToStack:function(e){e.add(function(v){var e=this;return function(g){return function(h){return q(e,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f;return K(this,function(e){switch(e.label){case 0:t=F({},h.input),n=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],e.label=1;case 1:e.trys.push([1,6,7,8]),r=H(n),i=r.next(),e.label=2;case 2:return i.done?[3,5]:(o=i.value,(s=t[o.target])?(c=ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):"string"==typeof s?v.utf8Decoder(s):new Uint8Array(s),l=v.base64Encoder(c),(s=new v.md5).update(c),a=[F({},t)],(f={})[o.target]=l,u=o.hash,l=(c=v).base64Encoder,[4,s.digest()]):[3,4]);case 3:t=F.apply(void 0,a.concat([(f[u]=l.apply(c,[e.sent()]),f)])),e.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return p=e.sent(),p={error:p},[3,8];case 7:try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(p)throw p.error}return[7];case 8:return[2,g(F(F({},h),{input:t}))]}})})}}}(t),gw)}}}var hw,gw={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},vw=(Xv(mw,hw=cn),mw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(Ym(t)),this.middlewareStack.use(fw(t)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:fy.filterSensitiveLog,outputFilterSensitiveLog:dy.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},mw.prototype.serialize=function(e,t){return a=e,u=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv({},MS(a.ACL)&&{"x-amz-acl":a.ACL}),MS(a.CacheControl)&&{"cache-control":a.CacheControl}),MS(a.ContentDisposition)&&{"content-disposition":a.ContentDisposition}),MS(a.ContentEncoding)&&{"content-encoding":a.ContentEncoding}),MS(a.ContentLanguage)&&{"content-language":a.ContentLanguage}),MS(a.ContentType)&&{"content-type":a.ContentType}),MS(a.CopySource)&&{"x-amz-copy-source":a.CopySource}),MS(a.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":a.CopySourceIfMatch}),MS(a.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":wl(a.CopySourceIfModifiedSince).toString()}),MS(a.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":a.CopySourceIfNoneMatch}),MS(a.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":wl(a.CopySourceIfUnmodifiedSince).toString()}),MS(a.Expires)&&{expires:wl(a.Expires).toString()}),MS(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),MS(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),MS(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),MS(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),MS(a.MetadataDirective)&&{"x-amz-metadata-directive":a.MetadataDirective}),MS(a.TaggingDirective)&&{"x-amz-tagging-directive":a.TaggingDirective}),MS(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),MS(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),MS(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),MS(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),MS(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),MS(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":a.SSECustomerKeyMD5}),MS(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),MS(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),MS(a.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":a.BucketKeyEnabled.toString()}),MS(a.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":a.CopySourceSSECustomerAlgorithm}),MS(a.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":a.CopySourceSSECustomerKey}),MS(a.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":a.CopySourceSSECustomerKeyMD5}),MS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),MS(a.Tagging)&&{"x-amz-tagging":a.Tagging}),MS(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),MS(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),MS(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),MS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),MS(a.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":a.ExpectedSourceBucketOwner}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return Qv(Qv({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=a.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r={"x-id":"CopyObject"},[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"PUT",headers:t,path:n,query:r,body:void 0})]}})});var a,u},mw.prototype.deserialize=BS,mw);function mw(e){var t=hw.call(this)||this;return t.input=e,t}var yw,bw=(Xv(Sw,yw=cn),Sw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(fw(t)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:wy.filterSensitiveLog,outputFilterSensitiveLog:Sy.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Sw.prototype.serialize=function(e,t){return a=e,u=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv({},MS(a.ACL)&&{"x-amz-acl":a.ACL}),MS(a.CacheControl)&&{"cache-control":a.CacheControl}),MS(a.ContentDisposition)&&{"content-disposition":a.ContentDisposition}),MS(a.ContentEncoding)&&{"content-encoding":a.ContentEncoding}),MS(a.ContentLanguage)&&{"content-language":a.ContentLanguage}),MS(a.ContentType)&&{"content-type":a.ContentType}),MS(a.Expires)&&{expires:wl(a.Expires).toString()}),MS(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),MS(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),MS(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),MS(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),MS(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),MS(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),MS(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),MS(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),MS(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),MS(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":a.SSECustomerKeyMD5}),MS(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),MS(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),MS(a.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":a.BucketKeyEnabled.toString()}),MS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),MS(a.Tagging)&&{"x-amz-tagging":a.Tagging}),MS(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),MS(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),MS(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),MS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return Qv(Qv({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=a.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r={uploads:""},[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Sw.prototype.deserialize=zS,Sw);function Sw(e){var t=yw.call(this)||this;return t.input=e,t}var ww,Cw=(Xv(_w,ww=cn),_w.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:Dy.filterSensitiveLog,outputFilterSensitiveLog:My.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},_w.prototype.serialize=function(e,t){return a=e,u=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv(Qv(Qv({},MS(a.MFA)&&{"x-amz-mfa":a.MFA}),MS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),MS(a.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":a.BypassGovernanceRetention.toString()}),MS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r=Qv({"x-id":"DeleteObject"},void 0!==a.VersionId&&{versionId:a.VersionId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},_w.prototype.deserialize=VS,_w);function _w(e){var t=ww.call(this)||this;return t.input=e,t}var Ew,Aw=(Xv(Iw,Ew=cn),Iw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(fw(t)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:Kb.filterSensitiveLog,outputFilterSensitiveLog:qb.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Iw.prototype.serialize=function(e,t){return a=e,u=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv({},MS(a.IfMatch)&&{"if-match":a.IfMatch}),MS(a.IfModifiedSince)&&{"if-modified-since":wl(a.IfModifiedSince).toString()}),MS(a.IfNoneMatch)&&{"if-none-match":a.IfNoneMatch}),MS(a.IfUnmodifiedSince)&&{"if-unmodified-since":wl(a.IfUnmodifiedSince).toString()}),MS(a.Range)&&{range:a.Range}),MS(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),MS(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),MS(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":a.SSECustomerKeyMD5}),MS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),MS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r=Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv({"x-id":"GetObject"},void 0!==a.ResponseCacheControl&&{"response-cache-control":a.ResponseCacheControl}),void 0!==a.ResponseContentDisposition&&{"response-content-disposition":a.ResponseContentDisposition}),void 0!==a.ResponseContentEncoding&&{"response-content-encoding":a.ResponseContentEncoding}),void 0!==a.ResponseContentLanguage&&{"response-content-language":a.ResponseContentLanguage}),void 0!==a.ResponseContentType&&{"response-content-type":a.ResponseContentType}),void 0!==a.ResponseExpires&&{"response-expires":(a.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==a.VersionId&&{versionId:a.VersionId}),void 0!==a.PartNumber&&{partNumber:a.PartNumber.toString()}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Iw.prototype.deserialize=qS,Iw);function Iw(e){var t=Ew.call(this)||this;return t.input=e,t}var kw,Tw=(Xv(Pw,kw=cn),Pw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:R1.filterSensitiveLog,outputFilterSensitiveLog:N1.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Pw.prototype.serialize=function(e,t){return a=e,u=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv({},MS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),MS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",fl(o)),r=Qv(Qv(Qv(Qv(Qv({},void 0!==a.Delimiter&&{delimiter:a.Delimiter}),void 0!==a.EncodingType&&{"encoding-type":a.EncodingType}),void 0!==a.Marker&&{marker:a.Marker}),void 0!==a.MaxKeys&&{"max-keys":a.MaxKeys.toString()}),void 0!==a.Prefix&&{prefix:a.Prefix}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Pw.prototype.deserialize=KS,Pw);function Pw(e){var t=kw.call(this)||this;return t.input=e,t}var Ow,xw=(Xv(Lw,Ow=cn),Lw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:q1.filterSensitiveLog,outputFilterSensitiveLog:V1.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Lw.prototype.serialize=function(e,t){return a=e,u=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv({},MS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),MS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r=Qv(Qv(Qv({"x-id":"ListParts"},void 0!==a.MaxParts&&{"max-parts":a.MaxParts.toString()}),void 0!==a.PartNumberMarker&&{"part-number-marker":a.PartNumberMarker}),void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Lw.prototype.deserialize=HS,Lw);function Lw(e){var t=Ow.call(this)||this;return t.input=e,t}var Nw,Rw,Mw,Dw,Uw,Fw,jw,Bw,zw,Vw,qw,Kw,Hw,Gw,Ww,$w,Yw,Jw,Zw,Xw,Qw,eC,tC,nC,rC,iC,oC,sC,aC,uC,cC,lC,pC,dC,fC=(Xv(hC,Nw=cn),hC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(fw(t)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:vS.filterSensitiveLog,outputFilterSensitiveLog:gS.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},hC.prototype.serialize=function(e,t){return u=e,c=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv(Qv({"content-type":"application/octet-stream"},MS(u.ACL)&&{"x-amz-acl":u.ACL}),MS(u.CacheControl)&&{"cache-control":u.CacheControl}),MS(u.ContentDisposition)&&{"content-disposition":u.ContentDisposition}),MS(u.ContentEncoding)&&{"content-encoding":u.ContentEncoding}),MS(u.ContentLanguage)&&{"content-language":u.ContentLanguage}),MS(u.ContentLength)&&{"content-length":u.ContentLength.toString()}),MS(u.ContentMD5)&&{"content-md5":u.ContentMD5}),MS(u.ContentType)&&{"content-type":u.ContentType}),MS(u.Expires)&&{expires:wl(u.Expires).toString()}),MS(u.GrantFullControl)&&{"x-amz-grant-full-control":u.GrantFullControl}),MS(u.GrantRead)&&{"x-amz-grant-read":u.GrantRead}),MS(u.GrantReadACP)&&{"x-amz-grant-read-acp":u.GrantReadACP}),MS(u.GrantWriteACP)&&{"x-amz-grant-write-acp":u.GrantWriteACP}),MS(u.ServerSideEncryption)&&{"x-amz-server-side-encryption":u.ServerSideEncryption}),MS(u.StorageClass)&&{"x-amz-storage-class":u.StorageClass}),MS(u.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":u.WebsiteRedirectLocation}),MS(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),MS(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),MS(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":u.SSECustomerKeyMD5}),MS(u.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":u.SSEKMSKeyId}),MS(u.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":u.SSEKMSEncryptionContext}),MS(u.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":u.BucketKeyEnabled.toString()}),MS(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),MS(u.Tagging)&&{"x-amz-tagging":u.Tagging}),MS(u.ObjectLockMode)&&{"x-amz-object-lock-mode":u.ObjectLockMode}),MS(u.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(u.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),MS(u.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":u.ObjectLockLegalHoldStatus}),MS(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),void 0!==u.Metadata&&Object.keys(u.Metadata).reduce(function(e,t){return Qv(Qv({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=u.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r={"x-id":"PutObject"},void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new da({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},hC.prototype.deserialize=GS,hC);function hC(e){var t=Nw.call(this)||this;return t.input=e,t}(Rw||(Rw={})).filterSensitiveLog=function(e){return Qv({},e)},(Mw||(Mw={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Encryption&&{Encryption:SS.filterSensitiveLog(e.Encryption)})},(Dw||(Dw={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.S3&&{S3:Mw.filterSensitiveLog(e.S3)})},(Uw=Uw=Uw||{}).IGNORE="IGNORE",Uw.NONE="NONE",Uw.USE="USE",(Fw||(Fw={})).filterSensitiveLog=function(e){return Qv({},e)},(jw=jw=jw||{}).DOCUMENT="DOCUMENT",jw.LINES="LINES",(Bw||(Bw={})).filterSensitiveLog=function(e){return Qv({},e)},(zw||(zw={})).filterSensitiveLog=function(e){return Qv({},e)},(Vw||(Vw={})).filterSensitiveLog=function(e){return Qv({},e)},(qw=qw=qw||{}).ALWAYS="ALWAYS",qw.ASNEEDED="ASNEEDED",(Kw||(Kw={})).filterSensitiveLog=function(e){return Qv({},e)},(Hw||(Hw={})).filterSensitiveLog=function(e){return Qv({},e)},(Gw||(Gw={})).filterSensitiveLog=function(e){return Qv({},e)},(Ww||(Ww={})).filterSensitiveLog=function(e){return Qv({},e)},($w||($w={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.OutputLocation&&{OutputLocation:Dw.filterSensitiveLog(e.OutputLocation)})},(Yw||(Yw={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.RestoreRequest&&{RestoreRequest:$w.filterSensitiveLog(e.RestoreRequest)})},(Jw||(Jw={})).filterSensitiveLog=function(e){return Qv({},e)},(Zw||(Zw={})).filterSensitiveLog=function(e){return Qv({},e)},(Xw||(Xw={})).filterSensitiveLog=function(e){return Qv({},e)},(Qw||(Qw={})).filterSensitiveLog=function(e){return Qv({},e)},(eC||(eC={})).filterSensitiveLog=function(e){return Qv({},e)},(tC||(tC={})).filterSensitiveLog=function(e){return Qv({},e)},(nC||(nC={})).filterSensitiveLog=function(e){return Qv({},e)},(rC=rC=rC||{}).visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},rC.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:eC.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:nC.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:Qw.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:Jw.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:Zw.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(iC||(iC={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})},(oC||(oC={})).filterSensitiveLog=function(e){return Qv({},e)},(sC||(sC={})).filterSensitiveLog=function(e){return Qv({},e)},(aC||(aC={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSECustomerKey&&{SSECustomerKey:_l})},(uC||(uC={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:_l})},(cC||(cC={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSECustomerKey&&{SSECustomerKey:_l})},(lC||(lC={})).filterSensitiveLog=function(e){return Qv({},e)},(pC||(pC={})).filterSensitiveLog=function(e){return Qv(Qv({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:_l})},(dC||(dC={})).filterSensitiveLog=function(e){return Qv(Qv(Qv({},e),e.SSECustomerKey&&{SSECustomerKey:_l}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:_l})};var gC,vC=(Xv(mC,gC=cn),mC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize)),this.middlewareStack.use(fw(t)),this.middlewareStack.use(um(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:cC.filterSensitiveLog,outputFilterSensitiveLog:uC.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},mC.prototype.serialize=function(e,t){return u=e,c=t,em(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return tm(this,function(e){switch(e.label){case 0:if(t=Qv(Qv(Qv(Qv(Qv(Qv(Qv({"content-type":"application/octet-stream"},MS(u.ContentLength)&&{"content-length":u.ContentLength.toString()}),MS(u.ContentMD5)&&{"content-md5":u.ContentMD5}),MS(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),MS(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),MS(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":u.SSECustomerKeyMD5}),MS(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),MS(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",fl(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(fl).join("/")),r=Qv(Qv({"x-id":"UploadPart"},void 0!==u.PartNumber&&{partNumber:u.PartNumber.toString()}),void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new da({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},mC.prototype.deserialize=WS,mC);function mC(e){var t=gC.call(this)||this;return t.input=e,t}function yC(e){return encodeURIComponent(e).replace(/[!'()*]/g,bC)}var bC=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function SC(e){var t,n,r=[];try{for(var i=H(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=e[a=o.value],a=yC(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+yC(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+yC(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}function wC(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,e=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(e+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);n=n?SC(n):"";return r+"//"+e+i+(n=n&&"?"!==n[0]?"?"+n:n)}for(var CC={},_C=0;_C<256;_C++){var EC=_C.toString(16).toLowerCase();1===EC.length&&(EC="0"+EC),CC[_C]=EC}function AC(e){for(var t="",n=0;n<e.byteLength;n++)t+=CC[e[n]];return t}var IC="X-Amz-Date",kC="X-Amz-Signature",TC="X-Amz-Security-Token",PC="authorization",OC=IC.toLowerCase(),xC=[PC,OC,"date"],LC=kC.toLowerCase(),NC="x-amz-content-sha256",RC=TC.toLowerCase(),MC={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},DC=/^proxy-/,UC=/^sec-/,FC="AWS4-HMAC-SHA256",jC="AWS4-HMAC-SHA256-PAYLOAD",BC="aws4_request",zC={},VC=[];function qC(e,t,n){return e+"/"+t+"/"+n+"/"+BC}function KC(e,t,n){t=new e(t);return t.update(n),t.digest()}function HC(e,t,n){var r,i,o=e.headers,s={};try{for(var a=H(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(!(l in MC||null!=t&&t.has(l)||DC.test(l)||UC.test(l))||n&&n.has(l))&&(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function GC(e){return encodeURIComponent(e).replace(/[!'()*]/g,WC)}var WC=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function $C(e){var t,n,e=e.query,r=void 0===e?{}:e,i=[],o={};try{for(var s=H(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){if(n.toLowerCase()===LC)return;i.push(n);var e=r[n];"string"==typeof e?o[n]=GC(n)+"="+GC(e):Array.isArray(e)&&(o[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([GC(n)+"="+GC(t)])},[]).join("&"))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.map(function(e){return o[e]}).filter(function(e){return e}).join("&")}function YC(e,c){var l=e.headers,p=e.body;return q(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return K(this,function(e){switch(e.label){case 0:try{for(n=H(Object.keys(l)),r=n.next();!r.done;r=n.next())if((i=r.value).toLowerCase()===NC)return[2,l[i]]}catch(e){a={error:e}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}}return null!=p?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof p||ArrayBuffer.isView(p)||(t=p,"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t))?((o=new c).update(p),s=AC,[4,o.digest()]):[3,3];case 2:return[2,s.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var t})})}function JC(e){var r,t=e.headers,n=e.query,e=j(e,["headers","query"]);return F(F({},e),{headers:F({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return F(F({},e),((e={})[t]=Array.isArray(n)?W(n):n,e))},{})):void 0})}function ZC(e){var t,n;e="function"==typeof e.clone?e.clone():JC(e);try{for(var r=H(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;-1<xC.indexOf(o.toLowerCase())&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function XC(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"!=typeof e)return e;if(Number(e))return new Date(1e3*Number(e));return new Date(e)}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var QC=(e_.prototype.presign=function(S,w){return void 0===w&&(w={}),q(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v,m,y,b;return K(this,function(e){switch(e.label){case 0:return d=w.signingDate,t=void 0===d?new Date:d,p=w.expiresIn,n=void 0===p?3600:p,r=w.unsignableHeaders,i=w.unhoistableHeaders,o=w.signableHeaders,s=w.signingRegion,a=w.signingService,[4,this.credentialProvider()];case 1:return(u=e.sent(),null==s)?[3,2]:(l=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:l=e.sent(),e.label=4;case 4:return(c=l,d=t_(t),p=d.longDate,d=d.shortDate,604800<n)?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(y=qC(d,c,null!=a?a:this.service),f=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():JC(e),s=o.headers,a=void 0===(o=o.query)?{}:o;try{for(var u=H(Object.keys(s)),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.toLowerCase();"x-amz-"!==p.substr(0,6)||null!==(i=t.unhoistableHeaders)&&void 0!==i&&i.has(p)||(a[l]=s[l],delete s[l])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return F(F({},e),{headers:s,query:a})}(ZC(S),{unhoistableHeaders:i}),u.sessionToken&&(f.query[TC]=u.sessionToken),f.query["X-Amz-Algorithm"]=FC,f.query["X-Amz-Credential"]=u.accessKeyId+"/"+y,f.query[IC]=p,f.query["X-Amz-Expires"]=n.toString(10),b=HC(f,r,o),f.query["X-Amz-SignedHeaders"]=n_(b),h=f.query,g=kC,v=this.getSignature,m=[p,y,this.getSigningKey(u,c,d,a)],y=this.createCanonicalRequest,b=[f,b],[4,YC(S,this.sha256)]);case 5:return[4,v.apply(this,m.concat([y.apply(this,b.concat([e.sent()]))]))];case 6:return h[g]=e.sent(),[2,f]}})})},e_.prototype.sign=function(t,n){return q(this,void 0,void 0,function(){return K(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},e_.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,e=t.signingDate,l=void 0===e?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,r=t_(l),i=r.shortDate,r=r.longDate,i=qC(i,t,null!=f?f:this.service),[4,YC({headers:{},body:c},this.sha256)];case 4:return o=e.sent(),(a=new this.sha256).update(u),s=AC,[4,a.digest()];case 5:return a=s.apply(void 0,[e.sent()]),a=[jC,r,i,p,a,o].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:f})]}})})},e_.prototype.signString=function(u,e){var t=void 0===e?{}:e,e=t.signingDate,c=void 0===e?new Date:e,l=t.signingRegion,p=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==l)?[3,2]:(r=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=t_(c).shortDate,s=(o=this.sha256).bind,[4,this.getSigningKey(t,n,i,p)];case 5:return(i=new(s.apply(o,[void 0,e.sent()]))).update(u),a=AC,[4,i.digest()];case 6:return[2,a.apply(void 0,[e.sent()])]}})})},e_.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,e=t.signingDate,p=void 0===e?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return q(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return K(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==h)?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=ZC(l),a=t_(p),o=a.longDate,s=a.shortDate,a=qC(s,n,null!=g?g:this.service),i.headers[OC]=o,t.sessionToken&&(i.headers[RC]=t.sessionToken),[4,YC(i,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=H(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(NC,i.headers)&&this.applyChecksum&&(i.headers[NC]=c),u=HC(i,f,d),[4,this.getSignature(o,a,this.getSigningKey(t,n,s,g),this.createCanonicalRequest(i,u,c))];case 6:return c=e.sent(),i.headers[PC]=FC+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+n_(u)+", Signature="+c,[2,i]}})})},e_.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+$C(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},e_.prototype.createStringToSign=function(n,r,i){return q(this,void 0,void 0,function(){var t;return K(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(i),[4,t.digest()];case 1:return t=e.sent(),[2,FC+"\n"+n+"\n"+r+"\n"+AC(t)]}})})},e_.prototype.getCanonicalPath=function(e){e=e.path;return this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},e_.prototype.getSignature=function(s,a,u,c){return q(this,void 0,void 0,function(){var t,n,r,i,o;return K(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(s,a,c)];case 1:return t=e.sent(),i=(r=this.sha256).bind,[4,u];case 2:return(n=new(i.apply(r,[void 0,e.sent()]))).update(t),o=AC,[4,n.digest()];case 3:return[2,o.apply(void 0,[e.sent()])]}})})},e_.prototype.getSigningKey=function(e,t,n,r){return u=this.sha256,c=e,l=n,p=t,d=r||this.service,q(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return K(this,function(e){switch(e.label){case 0:return[4,KC(u,c.secretAccessKey,c.accessKeyId)];case 1:if(o=e.sent(),(t=l+":"+p+":"+d+":"+AC(o)+":"+c.sessionToken)in zC)return[2,zC[t]];for(VC.push(t);50<VC.length;)delete zC[VC.shift()];n="AWS4"+c.secretAccessKey,e.label=2;case 2:e.trys.push([2,7,8,9]),r=H([l,p,d,BC]),i=r.next(),e.label=3;case 3:return i.done?[3,6]:(o=i.value,[4,KC(u,n,o)]);case 4:n=e.sent(),e.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return s=e.sent(),s={error:s},[3,9];case 8:try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 9:return[2,zC[t]=n]}})});var u,c,l,p,d},e_);function e_(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,e=e.uriEscapePath,e=void 0===e||e;this.service=i,this.sha256=o,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=r_(r),this.credentialProvider=i_(n)}var t_=function(e){e=XC(e).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.substr(0,8)}},n_=function(e){return Object.keys(e).sort().join(";")},r_=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},i_=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},o_=(s_.prototype.presign=function(t,e){var n=(e=void 0===e?{}:e).unsignableHeaders,r=void 0===n?new Set:n,n=e.unhoistableHeaders,i=void 0===n?new Set:n,o=j(e,["unsignableHeaders","unhoistableHeaders"]);return q(this,void 0,void 0,function(){return K(this,function(e){return r.add("content-type"),Object.keys(t.headers).map(function(e){return e.toLowerCase()}).filter(function(e){return e.startsWith("x-amz-server-side-encryption")}).forEach(function(e){i.add(e)}),t.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",t.headers.host||(t.headers.host=t.hostname),[2,this.signer.presign(t,F({expiresIn:900,unsignableHeaders:r,unhoistableHeaders:i},o))]})})},s_);function s_(e){e=F({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new QC(e)}var a_=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},c_=new A.ConsoleLogger("axios-http-handler"),l_="sendUploadProgress",p_="sendDownloadProgress";function d_(e,t){var n,r;try{for(var i=a_(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=u_(o.value,2),a=s[0],u=s[1];a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=u,delete e[a])}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}var f_,h_=[function(e,t){return n=e,"undefined"!=typeof Blob&&n instanceof Blob?(d_(t,"Content-Type"),d_(t,"Accept"),e):O.defaults.transformRequest[0].call(null,e,t);var n}],g_=(v_.prototype.destroy=function(){},v_.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,i=e.path;!e.query||(o=SC(e.query))&&(i+="?"+o);var o=e.port,o=e.protocol+"//"+e.hostname+(o?":"+o:"")+i,i={};i.url=o,i.method=e.method,i.headers=e.headers,delete i.headers.host,e.body?i.data=e.body:i.headers["Content-Type"]&&(i.data=null),r&&(i.onUploadProgress=function(e){r.emit(l_,e),c_.debug(e)},i.onDownloadProgress=function(e){r.emit(p_,e),c_.debug(e)}),this.cancelTokenSource&&(i.cancelToken=this.cancelTokenSource.token),i.responseType="blob",A.Platform.isReactNative&&(i.transformRequest=h_);n=[O.request(i).then(function(e){return{response:new la({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw c_.error(e.message),e}),function(n){void 0===n&&(n=0);return new Promise(function(e,t){n&&setTimeout(function(){var e=new Error("Request did not complete within "+n+" ms");e.name="TimeoutError",t(e)},n)})}(n)];return Promise.race(n)},v_);function v_(e,t,n){this.httpOptions=e=void 0===e?{}:e,this.emitter=t,this.cancelTokenSource=n}(WS=f_=f_||{}).NO_CREDENTIALS="No credentials",WS.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',WS.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',(WS=t2=t2||{}).CLEANUP_FAILED="Multipart copy clean up failed",WS.NO_OBJECT_FOUND="Object does not exist",WS.INVALID_QUEUESIZE="Queue size must be a positive number",WS.NO_COPYSOURCE="You must specify a copy source",WS.MAX_NUM_PARTS_EXCEEDED="Only a maximum of 10000 parts are allowed";var m_=function(){return(m_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},b_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},S_=new A.ConsoleLogger("AWSS3ProviderManagedUpload"),w_=(C_.prototype.upload=function(){return y_(this,void 0,void 0,function(){var t,n,r,i,o,s,a=this;return b_(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return(t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize)?(this.params.Body=this.body,n=new fC(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,e.sent().send(n)];case 3:return[4,this.createMultiPartUpload()];case 4:r=e.sent(),i=Math.ceil(this.totalBytesToUpload/this.minPartSize),o=this.createParts(),s=0,e.label=5;case 5:return s<i?[4,this.checkIfUploadCancelled(r)]:[3,10];case 6:return e.sent(),[4,this.uploadParts(r,o.slice(s,s+this.queueSize))];case 7:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 8:e.sent(),e.label=9;case 9:return s+=this.queueSize,[3,5];case 10:return o.map(function(e){a.removeEventListener(e)}),[4,this.finishMultiPartUpload(r)];case 11:return[2,e.sent()]}})})},C_.prototype.createParts=function(){for(var e=[],t=0;t<this.totalBytesToUpload;){var n=Math.min(t+this.minPartSize,this.totalBytesToUpload);e.push({bodyPart:this.body.slice(t,n),partNumber:e.length+1,emitter:new x.EventEmitter,_lastUploadedBytes:0}),t+=this.minPartSize}return e},C_.prototype.createMultiPartUpload=function(){return y_(this,void 0,void 0,function(){var t,n,r=this;return b_(this,function(e){switch(e.label){case 0:return t=new bw(this.params),[4,this._createNewS3Client(this.opts)];case 1:return(n=e.sent()).middlewareStack.add(function(t){return function(e){return r.params.ContentType&&e&&e.request&&e.request.headers&&(e.request.headers["Content-Type"]=r.params.ContentType),t(e)}},{step:"build"}),[4,n.send(t)];case 2:return n=e.sent(),S_.debug(n.UploadId),[2,n.UploadId]}})})},C_.prototype.uploadParts=function(u,o){return y_(this,void 0,void 0,function(){var t,n,r,i=this;return b_(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Promise.all(o.map(function(a){return y_(i,void 0,void 0,function(){var t,n,r,i,o,s;return b_(this,function(e){switch(e.label){case 0:return this.setupEventListener(a),[4,this._createNewS3Client(this.opts,a.emitter)];case 1:return t=e.sent(),s=this.params,n=s.Key,r=s.Bucket,i=s.SSECustomerAlgorithm,o=s.SSECustomerKey,s=s.SSECustomerKeyMD5,[2,t.send(new vC(m_(m_(m_({PartNumber:a.partNumber,Body:a.bodyPart,UploadId:u,Key:n,Bucket:r},i&&{SSECustomerAlgorithm:i}),o&&{SSECustomerKey:o}),s&&{SSECustomerKeyMD5:s})))]}})})}))];case 1:for(t=e.sent(),n=0;n<t.length;n++)this.completedParts.push({PartNumber:o[n].partNumber,ETag:t[n].ETag});return[3,3];case 2:return r=e.sent(),S_.error("error happened while uploading a part. Cancelling the multipart upload",r),this.cancelUpload(),[2];case 3:return[2]}})})},C_.prototype.finishMultiPartUpload=function(i){return y_(this,void 0,void 0,function(){var t,n,r;return b_(this,function(e){switch(e.label){case 0:return r={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:i,MultipartUpload:{Parts:this.completedParts}},t=new pw(r),[4,this._createNewS3Client(this.opts)];case 1:n=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,n.send(t)];case 3:return[2,e.sent().Key];case 4:return r=e.sent(),S_.error("error happened while finishing the upload. Cancelling the multipart upload",r),this.cancelUpload(),[2];case 5:return[2]}})})},C_.prototype.checkIfUploadCancelled=function(r){return y_(this,void 0,void 0,function(){var t,n;return b_(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=" "+n.message,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},C_.prototype.cancelUpload=function(){this.cancel=!0},C_.prototype.cleanup=function(i){return y_(this,void 0,void 0,function(){var t,n,r;return b_(this,function(e){switch(e.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:i},[4,this._createNewS3Client(this.opts)];case 1:return[4,(n=e.sent()).send(new uw(t))];case 2:return e.sent(),[4,n.send(new xw(t))];case 3:if((r=e.sent())&&r.Parts&&0<r.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},C_.prototype.removeEventListener=function(e){e.emitter.removeAllListeners(l_),e.emitter.removeAllListeners(p_)},C_.prototype.setupEventListener=function(t){var n=this;t.emitter.on(l_,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},C_.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(l_,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},C_.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},C_.prototype.validateAndSanitizeBody=function(t){return y_(this,void 0,void 0,function(){return b_(this,function(e){return this.isGenericObject(t)?[2,JSON.stringify(t)]:[2,t]})})},C_.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},C_.prototype._createNewS3Client=function(s,a){return y_(this,void 0,void 0,function(){var t,n,r,i,o;return b_(this,function(e){switch(e.label){case 0:return[4,this._getCredentials()];case 1:return t=e.sent(),n=s.region,r=s.dangerouslyConnectToHttpEndpointForTesting,o=s.cancelTokenSource,i=s.useAccelerateEndpoint,(o=new kS(m_(m_({region:n,credentials:t,useAccelerateEndpoint:i},r?{endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}:{}),{requestHandler:new g_({},a,o),customUserAgent:A.getAmplifyUserAgent()}))).middlewareStack.remove("contentLengthMiddleware"),[2,o]}})})},C_.prototype._getCredentials=function(){return A.Credentials.get().then(function(e){if(!e)return!1;e=A.Credentials.shear(e);return S_.debug("set credentials for storage",e),e}).catch(function(e){return S_.warn("ensure credentials error",e),!1})},C_);function C_(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.completedParts=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function __(e,t,n,r,i){e&&(n={attrs:n},r&&(n.metrics=r),A.Hub.dispatch("storage",{event:t,data:n,message:i},"Storage",T_))}var E_=function(){return(E_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},A_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},I_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},k_=new A.ConsoleLogger("AWSS3Provider"),T_="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",P_=(O_.prototype.getCategory=function(){return O_.CATEGORY},O_.prototype.getProviderName=function(){return O_.PROVIDER_NAME},O_.prototype.configure=function(e){if(k_.debug("configure Storage",e),!e)return this._config;e=A.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,e.Storage),this._config.bucket||k_.debug("Do not have bucket yet"),this._config},O_.prototype.copy=function(m,y,b){return A_(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v;return I_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(f_.NO_CREDENTIALS);if(v=Object.assign({},this._config,b),g=v.acl,t=v.bucket,n=v.cacheControl,r=v.expires,i=v.track,o=v.serverSideEncryption,s=v.SSECustomerAlgorithm,a=v.SSECustomerKey,u=v.SSECustomerKeyMD5,c=v.SSEKMSKeyId,h=m.level,l=void 0===h?"public":h,f=m.identityId,p=m.key,d=y.level,h=void 0===d?"public":d,d=y.key,!p||"string"!=typeof p)throw new Error(f_.NO_SRC_KEY);if(!d||"string"!=typeof d)throw new Error(f_.NO_DEST_KEY);"protected"!==l&&f&&k_.warn('You may copy files from another user if the source level is "protected", currently it\'s '+l),f=this._prefix(E_(E_(E_({},v),{level:l}),f&&{identityId:f})),h=this._prefix(E_(E_({},v),{level:h})),f=t+"/"+f+p,h=""+h+d,k_.debug("copying "+f+" to "+h),h={Bucket:t,CopySource:f,Key:h,MetadataDirective:"COPY"},n&&(h.CacheControl=n),r&&(h.Expires=r),o&&(h.ServerSideEncryption=o),s&&(h.SSECustomerAlgorithm=s),a&&(h.SSECustomerKey=a),u&&(h.SSECustomerKeyMD5=u),c&&(h.SSEKMSKeyId=c),g&&(h.ACL=g),(g=this._createNewS3Client(v)).middlewareStack.remove("contentLengthMiddleware"),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,g.send(new vw(h))];case 3:return e.sent(),__(i,"copy",{method:"copy",result:"success"},null,"Copy success from "+p+" to "+d),[2,{key:d}];case 4:throw v=e.sent(),__(i,"copy",{method:"copy",result:"failed"},null,"Copy failed from "+p+" to "+d),v;case 5:return[2]}})})},O_.prototype.get=function(w,C){return A_(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v,m,y,b,S;return I_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(f_.NO_CREDENTIALS);if(f=Object.assign({},this._config,C),t=f.bucket,v=f.download,n=f.cacheControl,r=f.contentDisposition,i=f.contentEncoding,o=f.contentLanguage,s=f.contentType,a=f.expires,u=f.track,c=f.SSECustomerAlgorithm,l=f.SSECustomerKey,g=f.SSECustomerKeyMD5,p=f.progressCallback,d=this._prefix(f),h=d+w,d=new x.EventEmitter,f=this._createNewS3Client(f,d),k_.debug("get "+w+" from "+h),h={Bucket:t,Key:h},n&&(h.ResponseCacheControl=n),r&&(h.ResponseContentDisposition=r),i&&(h.ResponseContentEncoding=i),o&&(h.ResponseContentLanguage=o),s&&(h.ResponseContentType=s),c&&(h.SSECustomerAlgorithm=c),l&&(h.SSECustomerKey=l),g&&(h.SSECustomerKeyMD5=g),!0!==v)return[3,5];g=new Aw(h),e.label=2;case 2:return e.trys.push([2,4,,5]),p&&("function"==typeof p?d.on(p_,function(e){p(e)}):k_.warn("progressCallback should be a function, not a "+typeof p)),[4,f.send(g)];case 3:return v=e.sent(),d.removeAllListeners(p_),__(u,"download",{method:"get",result:"success"},{fileSize:Number(v.Body.size||v.Body.length)},"Download success for "+w),[2,v];case 4:throw y=e.sent(),__(u,"download",{method:"get",result:"failed"},null,"Download failed with "+y.message),y;case 5:return e.trys.push([5,8,,9]),m=new o_(E_({},f.config)),[4,function(i,o){return q(this,void 0,void 0,function(){var t,n,r=this;return K(this,function(e){switch(e.label){case 0:return t=function(e){return function(t){return q(r,void 0,void 0,function(){return K(this,function(e){return[2,{output:{request:t.request},response:void 0}]})})}},(n=i.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,o.resolveMiddleware(n,i.config,void 0)(o).then(function(e){return e.output.request})];case 1:return[2,e.sent()]}})})}(f,new Aw(h))];case 6:return y=e.sent(),b=wC,[4,m.presign(y,{expiresIn:a||900})];case 7:return S=b.apply(void 0,[e.sent()]),__(u,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+S),[2,S];case 8:throw S=e.sent(),k_.warn("get signed url error",S),__(u,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+w),S;case 9:return[2]}})})},O_.prototype.put=function(S,w,C){return A_(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v,m,y,b;return I_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(f_.NO_CREDENTIALS);y=Object.assign({},this._config,C),t=y.bucket,n=y.track,r=y.progressCallback,g=y.contentType,i=y.contentDisposition,o=y.contentEncoding,s=y.cacheControl,a=y.expires,u=y.metadata,c=y.tagging,l=y.acl,p=y.serverSideEncryption,d=y.SSECustomerAlgorithm,f=y.SSECustomerKey,h=y.SSECustomerKeyMD5,m=y.SSEKMSKeyId,v=g||"binary/octet-stream",g=this._prefix(y),g=g+S,k_.debug("put "+S+" to "+g),v={Bucket:t,Key:g,Body:w,ContentType:v},s&&(v.CacheControl=s),i&&(v.ContentDisposition=i),o&&(v.ContentEncoding=o),a&&(v.Expires=a),u&&(v.Metadata=u),c&&(v.Tagging=c),p&&(v.ServerSideEncryption=p),d&&(v.SSECustomerAlgorithm=d),f&&(v.SSECustomerKey=f),h&&(v.SSECustomerKeyMD5=h),m&&(v.SSEKMSKeyId=m),m=new x.EventEmitter,y=new w_(v,y,m),l&&(v.ACL=l),e.label=2;case 2:return e.trys.push([2,4,,5]),r&&("function"==typeof r?m.on(l_,function(e){r(e)}):k_.warn("progressCallback should be a function, not a "+typeof r)),[4,y.upload()];case 3:return b=e.sent(),k_.debug("upload result",b),__(n,"upload",{method:"put",result:"success"},null,"Upload success for "+S),[2,{key:S}];case 4:throw b=e.sent(),k_.warn("error uploading",b),__(n,"upload",{method:"put",result:"failed"},null,"Error uploading "+S),b;case 5:return[2]}})})},O_.prototype.remove=function(s,a){return A_(this,void 0,void 0,function(){var t,n,r,i,o;return I_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(f_.NO_CREDENTIALS);r=Object.assign({},this._config,a),t=r.bucket,n=r.track,i=this._prefix(r),i=i+s,r=this._createNewS3Client(r),k_.debug("remove "+s+" from "+i),i=new Cw({Bucket:t,Key:i}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=e.sent(),__(n,"delete",{method:"remove",result:"success"},null,"Deleted "+s+" successfully"),[2,o];case 4:throw o=e.sent(),__(n,"delete",{method:"remove",result:"failed"},null,"Deletion of "+s+" failed with "+o),o;case 5:return[2]}})})},O_.prototype.list=function(u,c){return A_(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return I_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent()||!this._isWithCredentials(this._config))throw new Error(f_.NO_CREDENTIALS);i=Object.assign({},this._config,c),t=i.bucket,n=i.track,s=i.maxKeys,r=this._prefix(i),o=r+u,i=this._createNewS3Client(i),k_.debug("list "+u+" from "+o),o=new Tw({Bucket:t,Prefix:o,MaxKeys:s}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,i.send(o)];case 3:return s=e.sent(),a=[],s&&s.Contents&&(a=s.Contents.map(function(e){return{key:e.Key.substr(r.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),__(n,"list",{method:"list",result:"success"},null,a.length+" items returned from list operation"),k_.debug("list",a),[2,a];case 4:throw a=e.sent(),k_.warn("list error",a),__(n,"list",{method:"list",result:"failed"},null,"Listing items failed: "+a.message),a;case 5:return[2]}})})},O_.prototype._ensureCredentials=function(){return A_(this,void 0,void 0,function(){var t,n;return I_(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,A.Credentials.get()];case 1:return(t=e.sent())?(n=A.Credentials.shear(t),k_.debug("set credentials for storage",n),this._config.credentials=n,[2,!0]):[2,!1];case 2:return n=e.sent(),k_.warn("ensure credentials error",n),[2,!1];case 3:return[2]}})})},O_.prototype._isWithCredentials=function(e){return"object"==typeof e&&e.hasOwnProperty("credentials")},O_.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},t=e.identityId||t.identityId,i=(void 0!==r.private?r.private:"private/")+t+"/",o=(void 0!==r.protected?r.protected:"protected/")+t+"/",s=void 0!==r.public?r.public:"public/";switch(n){case"private":return i;case"protected":return o;default:return s}},O_.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i=e.cancelTokenSource,o={};return e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new kS(E_(E_({region:n,credentials:r,customUserAgent:A.getAmplifyUserAgent()},o),{requestHandler:new g_({},t,i)}))},O_.CATEGORY="Storage",O_.PROVIDER_NAME="AWSS3",O_);function O_(e){this._config=e||{},k_.debug("Storage Options",this._config)}var x_=function(){return(x_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},L_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},N_=new A.ConsoleLogger("StorageClass"),R_="AWSS3",M_=(D_.prototype.getModuleName=function(){return"Storage"},D_.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory()){this._pluggables.push(e);return e.configure(this._config[e.getProviderName()])}},D_.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(N_.debug("No plugin found with providerName",t),null):e},D_.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},D_.prototype.configure=function(e){var t=this;if(N_.debug("configure Storage"),!e)return this._config;var n=A.Parser.parseMobilehubConfig(e),r=Object.keys(n.Storage),i=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],o=function(t){return i.some(function(e){return e===t})};return r&&r.find(function(e){return o(e)})&&!n.Storage[R_]&&(n.Storage[R_]={}),Object.entries(n.Storage).map(function(e){var t=L_(e,2),e=t[0],t=t[1];e&&o(e)&&void 0!==t&&(n.Storage[R_][e]=t,delete n.Storage[e])}),Object.keys(n.Storage).forEach(function(e){"string"!=typeof n.Storage[e]&&(t._config[e]=x_(x_({},t._config[e]),n.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new P_),this._config},D_.prototype.getCancellableTokenSource=function(){return O.CancelToken.source()},D_.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenSourceMap.set(e,t)},D_.prototype.cancel=function(e,t){e=this._cancelTokenSourceMap.get(e);e?e.cancel(t):N_.debug("The request does not map to any cancel token")},D_.prototype.copy=function(e,t,n){var r=(null===n||void 0===n?void 0:n.provider)||R_,i=this._pluggables.find(function(e){return e.getProviderName()===r});if(void 0===i)return N_.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource();if("function"!=typeof i.copy)return Promise.reject(".copy is not implemented on provider "+i.getProviderName());n=i.copy(e,t,x_(x_({},n),{cancelTokenSource:o}));return this.updateRequestToBeCancellable(n,o),n},D_.prototype.get=function(e,t){var n=(null===t||void 0===t?void 0:t.provider)||R_,r=this._pluggables.find(function(e){return e.getProviderName()===n});if(void 0===r)return N_.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider");var i=this.getCancellableTokenSource(),t=r.get(e,x_(x_({},t),{cancelTokenSource:i}));return this.updateRequestToBeCancellable(t,i),t},D_.prototype.isCancelError=function(e){return O.isCancel(e)},D_.prototype.put=function(e,t,n){var r=(null===n||void 0===n?void 0:n.provider)||R_,i=this._pluggables.find(function(e){return e.getProviderName()===r});if(void 0===i)return N_.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource(),n=i.put(e,t,x_(x_({},n),{cancelTokenSource:o}));return this.updateRequestToBeCancellable(n,o),n},D_.prototype.remove=function(e,t){var n=(null===t||void 0===t?void 0:t.provider)||R_,r=this._pluggables.find(function(e){return e.getProviderName()===n});return void 0===r?(N_.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.remove(e,t)},D_.prototype.list=function(e,t){var n=(null===t||void 0===t?void 0:t.provider)||R_,r=this._pluggables.find(function(e){return e.getProviderName()===n});return void 0===r?(N_.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.list(e,t)},D_);function D_(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,N_.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}var U_=function(){return(U_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},F_=new A.ConsoleLogger("Storage"),j_=null,B_=function(){if(j_)return j_;F_.debug("Create Storage Instance, debug"),(j_=new M_).vault=new M_;var n=j_.configure;return j_.configure=function(e){F_.debug("storage configure called");var t=U_({},n.call(j_,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=U_(U_({},t[e]),{level:"private"}))}),F_.debug("storage vault configure called"),j_.vault.configure(t)},j_}();A.Amplify.register(B_);var z_=function(){return(z_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},V_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},q_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},K_=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},H_=new A.ConsoleLogger("RestClient"),G_=(W_.prototype.ajax=function(d,f,h){return V_(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p=this;return q_(this,function(e){switch(e.label){case 0:return H_.debug(f,d),r="us-east-1",i="execute-api",l=void 0,"string"==typeof d?(t=this._parseUrl(d),n=d):(n=d.endpoint,l=d.custom_header,r=d.region,i=d.service,t=this._parseUrl(d.endpoint)),o={method:f,url:n,host:t.host,path:t.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},s={},A.Platform.isReactNative&&(a=A.Platform.userAgent||"aws-amplify/0.1.x",s={"User-Agent":a}),a=Object.assign({},h),u=a.response,a.body&&("function"==typeof FormData&&a.body instanceof FormData?(s["Content-Type"]="multipart/form-data",o.data=a.body):(s["Content-Type"]="application/json; charset=UTF-8",o.data=JSON.stringify(a.body))),a.responseType&&(o.responseType=a.responseType),a.withCredentials&&(o.withCredentials=a.withCredentials),a.timeout&&(o.timeout=a.timeout),a.cancellableToken&&(o.cancelToken=a.cancellableToken.token),o.signerServiceInfo=a.signerServiceInfo,"function"!=typeof l?[3,2]:[4,l()];case 1:return c=e.sent(),[3,3];case 2:c=void 0,e.label=3;case 3:return l=c,o.headers=z_(z_(z_({},s),l),a.headers),l=g.parse(n,!0,!0),l.search,l=K_(l,["search"]),o.url=g.format(z_(z_({},l),{query:z_(z_({},l.query),a.queryStringParameters||{})})),void 0!==o.headers.Authorization?(o.headers=Object.keys(o.headers).reduce(function(e,t){return o.headers[t]&&(e[t]=o.headers[t]),e},{}),[2,this._request(o,u)]):[2,this.Credentials.get().then(function(e){return p._signed(z_({},o),e,u,{region:r,service:i}).catch(function(e){if(A.DateUtils.isClockSkewError(e)){var t=e.response.headers,n=t&&(t.date||t.Date),t=new Date(n),n=A.DateUtils.getDateFromHeaderString(o.headers["x-amz-date"]);if(A.DateUtils.isClockSkewed(t))return A.DateUtils.setClockOffset(t.getTime()-n.getTime()),p.ajax(d,f,h)}throw e})},function(e){return H_.debug("No credentials available, the request will be unsigned"),p._request(o,u)})]}})})},W_.prototype.get=function(e,t){return this.ajax(e,"GET",t)},W_.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},W_.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},W_.prototype.post=function(e,t){return this.ajax(e,"POST",t)},W_.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},W_.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},W_.prototype.cancel=function(e,t){e=this._cancelTokenMap.get(e);return e&&e.cancel(t),!0},W_.prototype.isCancel=function(e){return O.isCancel(e)},W_.prototype.getCancellableToken=function(){return O.CancelToken.source()},W_.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},W_.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},W_.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,r=e.signerServiceInfo,e=K_(e,["signerServiceInfo"]),o=o||this._region||this._options.region,i=i||this._service||this._options.service,t={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},r=Object.assign({region:o,service:i},r),r=A.Signer.sign(e,t,r);return r.data&&(r.body=r.data),H_.debug("Signed Request: ",r),delete r.headers.host,O(r).then(function(e){return n?e:e.data}).catch(function(e){throw H_.debug(e),e})},W_.prototype._request=function(e,t){return void 0===t&&(t=!1),O(e).then(function(e){return t?e:e.data}).catch(function(e){throw H_.debug(e),e})},W_.prototype._parseUrl=function(e){e=e.split("/");return{host:e[2],path:"/"+e.slice(3).join("/")}},W_);function W_(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=A.Credentials,this._options=e,H_.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var $_=function(){return($_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Y_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},J_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Z_=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},X_=new A.ConsoleLogger("RestAPI"),Q_=(e2.prototype.getModuleName=function(){return"RestAPI"},e2.prototype.configure=function(e){var t=e||{},e=t.API,e=void 0===e?{}:e,t=Z_(t,["API"]),t=$_($_({},t),e);return X_.debug("configure Rest API",{opt:t}),t.aws_project_region&&(t.aws_cloud_logic_custom&&(e=t.aws_cloud_logic_custom,t.endpoints="string"==typeof e?JSON.parse(e):e),t=Object.assign({},t,{region:t.aws_project_region,header:{}})),Array.isArray(t.endpoints)?t.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(X_.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?t.endpoints=this._options.endpoints:t.endpoints=[],this._options=Object.assign({},this._options,t),this.createInstance(),this._options},e2.prototype.createInstance=function(){return X_.debug("create Rest API instance"),this._api=new G_(this._options),this._api.Credentials=this.Credentials,!0},e2.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e2.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e2.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e2.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e2.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e2.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e2.prototype.isCancel=function(e){return this._api.isCancel(e)},e2.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e2.prototype.endpoint=function(t){return Y_(this,void 0,void 0,function(){return J_(this,function(e){return[2,this._api.endpoint(t)]})})},e2.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");n=n.find(function(e){return e.name===t});if(!n)throw new Error("API "+t+" does not exist");e={endpoint:n.endpoint+e};return"string"==typeof n.region?e.region=n.region:"string"==typeof this._options.region&&(e.region=this._options.region),"string"==typeof n.service?e.service=n.service||"execute-api":e.service="execute-api","function"==typeof n.custom_header?e.custom_header=n.custom_header:e.custom_header=void 0,e},e2);function e2(e){this._api=null,this.Credentials=A.Credentials,this._options=e,X_.debug("API Options",this._options)}var t2=new Q_(null);function n2(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function r2(e,t){var n=e.locationOffset.column-1,r=i2(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,o=t.line+o,n=1===t.line?n:0,n=t.column+n,r=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(o,":").concat(n,")\n")+function(t){var e=t.filter(function(e){e[0];return void 0!==e[1]}),n=0,r=!0,i=!1,t=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value[0];n=Math.max(n,a.length)}}catch(e){i=!0,t=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw t}}return e.map(function(e){var t=e[0],e=e[1];return i2(n-(t=t).length)+t+e}).join("\n")}([["".concat(o-1,": "),r[i-1]],["".concat(o,": "),r[i]],["",i2(n-1)+"^"],["".concat(o+1,": "),r[1+i]]])}function i2(e){return Array(e+1).join(" ")}function o2(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,t=n;!n&&a&&(t=(c=a[0])&&c.loc&&c.loc.source);var u,c=r;(c=!c&&a?a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[]):c)&&0===c.length&&(c=void 0),r&&n?u=r.map(function(e){return n2(n,e)}):a&&(u=a.reduce(function(e,t){return t.loc&&e.push(n2(t.loc.source,t.loc.start)),e},[]));s=s||o&&o.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:u||void 0,enumerable:Boolean(u)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:t||void 0},positions:{value:c||void 0},originalError:{value:o},extensions:{value:s||void 0,enumerable:Boolean(s)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,o2):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}A.Amplify.register(t2),o2.prototype=Object.create(Error.prototype,{constructor:{value:o2},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.loc&&t.push(r2(a.loc.source,n2(a.loc.source,a.loc.start)))}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var u=e.source,c=!0,r=!1,i=void 0;try{for(var l,p=e.locations[Symbol.iterator]();!(c=(l=p.next()).done);c=!0){var d=l.value;t.push(r2(u,d))}}catch(e){r=!0,i=e}finally{try{c||null==p.return||p.return()}finally{if(r)throw i}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var s2={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},a2={};function u2(e,t,n){var r=2<arguments.length&&void 0!==n?n:s2,i=void 0,o=Array.isArray(e),s=[e],a=-1,u=[],c=void 0,l=void 0,p=void 0,d=[],f=[],h=e;do{var g=++a===s.length,v=g&&0!==u.length;if(g){if(l=0===f.length?void 0:d[d.length-1],c=p,p=f.pop(),v){if(o)c=c.slice();else{var m,y={};for(m in c)c.hasOwnProperty(m)&&(y[m]=c[m]);c=y}for(var b=0,S=0;S<u.length;S++){var w=u[S][0],C=u[S][1];o&&(w-=b),o&&null===C?(c.splice(w,1),b++):c[w]=C}}a=i.index,s=i.keys,u=i.edits,o=i.inArray,i=i.prev}else{if(l=p?o?a:s[a]:void 0,null==(c=p?p[l]:h))continue;p&&d.push(l)}var _=void 0;if(!Array.isArray(c)){if(!c2(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var E=function(e,t,n){var r=e[t];{if(r){if(!n&&"function"==typeof r)return r;r=n?r.leave:r.enter;return"function"==typeof r?r:void 0}e=n?e.leave:e.enter;if(e){if("function"==typeof e)return e;t=e[t];return"function"==typeof t?t:void 0}}}(t,c.kind,g);if(E){if((_=E.call(t,c,l,p,d,f))===a2)break;if(!1===_){if(!g){d.pop();continue}}else if(void 0!==_&&(u.push([l,_]),!g)){if(!c2(_)){d.pop();continue}c=_}}}void 0===_&&v&&u.push([l,c]),g?d.pop():(i={inArray:o,index:a,keys:s,edits:u,prev:i},s=(o=Array.isArray(c))?c:r[c.kind]||[],a=-1,u=[],p&&f.push(p),p=c)}while(void 0!==i);return h=0!==u.length?u[u.length-1][1]:h}function c2(e){return Boolean(e&&"string"==typeof e.kind)}function l2(e){return u2(e,{leave:p2})}var p2={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return f2(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=g2("(",f2(e.variableDefinitions,", "),")"),i=f2(e.directives," "),e=e.selectionSet;return n||i||r||"query"!==t?f2([t,f2([n,r]),i,e]," "):e},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,e=e.directives;return t+": "+n+g2(" = ",r)+g2(" ",f2(e," "))},SelectionSet:function(e){return h2(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,e=e.selectionSet;return f2([g2("",t,": ")+n+g2("(",f2(r,", "),")"),f2(i," "),e]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+g2(" ",f2(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,e=e.selectionSet;return f2(["...",g2("on ",t),f2(n," "),e]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,e=e.selectionSet;return"fragment ".concat(t).concat(g2("(",f2(r,", "),")")," ")+"on ".concat(n," ").concat(g2("",f2(i," ")," "))+e},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r=e.value;return e.block?(n="description"===t,t=(e=r).replace(/"""/g,'\\"""')," "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:v2(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+f2(e.values,", ")+"]"},ObjectValue:function(e){return"{"+f2(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+g2("(",f2(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,e=e.operationTypes;return f2(["schema",f2(t," "),h2(e)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:d2(function(e){return f2(["scalar",e.name,f2(e.directives," ")]," ")}),ObjectTypeDefinition:d2(function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return f2(["type",t,g2("implements ",f2(n," & ")),f2(r," "),h2(e)]," ")}),FieldDefinition:d2(function(e){var t=e.name,n=e.arguments,r=e.type,e=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?g2("(",f2(n,", "),")"):g2("(\n",v2(f2(n,"\n")),"\n)"))+": "+r+g2(" ",f2(e," "))}),InputValueDefinition:d2(function(e){var t=e.name,n=e.type,r=e.defaultValue,e=e.directives;return f2([t+": "+n,g2("= ",r),f2(e," ")]," ")}),InterfaceTypeDefinition:d2(function(e){var t=e.name,n=e.directives,e=e.fields;return f2(["interface",t,f2(n," "),h2(e)]," ")}),UnionTypeDefinition:d2(function(e){var t=e.name,n=e.directives,e=e.types;return f2(["union",t,f2(n," "),e&&0!==e.length?"= "+f2(e," | "):""]," ")}),EnumTypeDefinition:d2(function(e){var t=e.name,n=e.directives,e=e.values;return f2(["enum",t,f2(n," "),h2(e)]," ")}),EnumValueDefinition:d2(function(e){return f2([e.name,f2(e.directives," ")]," ")}),InputObjectTypeDefinition:d2(function(e){var t=e.name,n=e.directives,e=e.fields;return f2(["input",t,f2(n," "),h2(e)]," ")}),DirectiveDefinition:d2(function(e){var t=e.name,n=e.arguments,e=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?g2("(",f2(n,", "),")"):g2("(\n",v2(f2(n,"\n")),"\n)"))+" on "+f2(e," | ")}),SchemaExtension:function(e){var t=e.directives,e=e.operationTypes;return f2(["extend schema",f2(t," "),h2(e)]," ")},ScalarTypeExtension:function(e){return f2(["extend scalar",e.name,f2(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return f2(["extend type",t,g2("implements ",f2(n," & ")),f2(r," "),h2(e)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return f2(["extend interface",t,f2(n," "),h2(e)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,e=e.types;return f2(["extend union",t,f2(n," "),e&&0!==e.length?"= "+f2(e," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,e=e.values;return f2(["extend enum",t,f2(n," "),h2(e)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return f2(["extend input",t,f2(n," "),h2(e)]," ")}};function d2(t){return function(e){return f2([e.description,t(e)],"\n")}}function f2(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function h2(e){return e&&0!==e.length?"{\n"+v2(f2(e,"\n"))+"\n}":""}function g2(e,t,n){return t?e+t+(n||""):""}function v2(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function m2(e){return(m2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y2(t){return t&&"object"===m2(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(y2).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(y2(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function b2(e,t){if(!e)throw new Error(t)}function S2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w2(e,t,n){S2(this,"body",void 0),S2(this,"name",void 0),S2(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||b2(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||b2(0,"column in locationOffset is 1-indexed and must be positive")}var C2;function _2(e,t,n){return new o2("Syntax Error: ".concat(n),void 0,e,[t])}function E2(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function A2(e){return E2(e)===e.length}function I2(){return this.lastToken=this.token,this.token=this.lookahead()}function k2(){var e=this.token;if(e.kind!==T2.EOF)for(;(e=e.next||(e.next=function(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){var r=e.length,i=t;for(;i<r;){var o=O2.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===O2.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,a=1+o-e.lineStart;if(i<=o)return new L2(T2.EOF,i,i,s,a,t);var u=O2.call(r,o);switch(u){case 33:return new L2(T2.BANG,o,o+1,s,a,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;for(;o=O2.call(s,++a),null!==o&&(31<o||9===o););return new L2(T2.COMMENT,t,a,n,r,i,x2.call(s,t+1,a))}(n,o,s,a,t);case 36:return new L2(T2.DOLLAR,o,o+1,s,a,t);case 38:return new L2(T2.AMP,o,o+1,s,a,t);case 40:return new L2(T2.PAREN_L,o,o+1,s,a,t);case 41:return new L2(T2.PAREN_R,o,o+1,s,a,t);case 46:if(46===O2.call(r,o+1)&&46===O2.call(r,o+2))return new L2(T2.SPREAD,o,o+3,s,a,t);break;case 58:return new L2(T2.COLON,o,o+1,s,a,t);case 61:return new L2(T2.EQUALS,o,o+1,s,a,t);case 64:return new L2(T2.AT,o,o+1,s,a,t);case 91:return new L2(T2.BRACKET_L,o,o+1,s,a,t);case 93:return new L2(T2.BRACKET_R,o,o+1,s,a,t);case 123:return new L2(T2.BRACE_L,o,o+1,s,a,t);case 124:return new L2(T2.PIPE,o,o+1,s,a,t);case 125:return new L2(T2.BRACE_R,o,o+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){var o=e.body,s=o.length,a=t+1,u=0;for(;a!==s&&null!==(u=O2.call(o,a))&&(95===u||48<=u&&u<=57||65<=u&&u<=90||97<=u&&u<=122);)++a;return new L2(T2.NAME,t,a,n,r,i,x2.call(o,t,a))}(n,o,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,u=t,n=!1;45===a&&(a=O2.call(s,++u));if(48===a){if(48<=(a=O2.call(s,++u))&&a<=57)throw _2(e,u,"Invalid number, unexpected digit after 0: ".concat(N2(a),"."))}else u=R2(e,u,a),a=O2.call(s,u);46===a&&(n=!0,a=O2.call(s,++u),u=R2(e,u,a),a=O2.call(s,u));69!==a&&101!==a||(n=!0,43!==(a=O2.call(s,++u))&&45!==a||(a=O2.call(s,++u)),u=R2(e,u,a));return new L2(n?T2.FLOAT:T2.INT,t,u,r,i,o,x2.call(s,t,u))}(n,o,u,s,a,t);case 34:return 34===O2.call(r,o+1)&&34===O2.call(r,o+2)?function(e,t,n,r,i){var o=e.body,s=t+3,a=s,u=0,c="";for(;s<o.length&&null!==(u=O2.call(o,s));){if(34===u&&34===O2.call(o,s+1)&&34===O2.call(o,s+2))return c+=x2.call(o,a,s),new L2(T2.BLOCK_STRING,t,s+3,n,r,i,function(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=E2(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;0<t.length&&A2(t[0]);)t.shift();for(;0<t.length&&A2(t[t.length-1]);)t.pop();return t.join("\n")}(c));if(u<32&&9!==u&&10!==u&&13!==u)throw _2(e,s,"Invalid character within String: ".concat(N2(u),"."));92===u&&34===O2.call(o,s+1)&&34===O2.call(o,s+2)&&34===O2.call(o,s+3)?(c+=x2.call(o,a,s)+'"""',a=s+=4):++s}throw _2(e,s,"Unterminated string.")}(n,o,s,a,t):function(e,t,n,r,i){var o=e.body,s=t+1,a=s,u=0,c="";for(;s<o.length&&null!==(u=O2.call(o,s))&&10!==u&&13!==u;){if(34===u)return c+=x2.call(o,a,s),new L2(T2.STRING,t,s+1,n,r,i,c);if(u<32&&9!==u)throw _2(e,s,"Invalid character within String: ".concat(N2(u),"."));if(++s,92===u){switch(c+=x2.call(o,a,s-1),u=O2.call(o,s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=function(e,t,n,r){return M2(e)<<12|M2(t)<<8|M2(n)<<4|M2(r)}(O2.call(o,s+1),O2.call(o,s+2),O2.call(o,s+3),O2.call(o,s+4));if(l<0)throw _2(e,s,"Invalid character escape sequence: "+"\\u".concat(o.slice(s+1,s+5),"."));c+=String.fromCharCode(l),s+=4;break;default:throw _2(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}a=++s}}throw _2(e,s,"Unterminated string.")}(n,o,s,a,t)}throw _2(n,o,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return"Cannot contain the invalid character ".concat(N2(e),".");return 39!==e?"Cannot parse the unexpected character ".concat(N2(e),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?"}(u))}(this,e))).kind===T2.COMMENT;);return e}C2=w2,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(C2.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var T2=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function P2(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var O2=String.prototype.charCodeAt,x2=String.prototype.slice;function L2(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function N2(e){return isNaN(e)?T2.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function R2(e,t,n){var r=e.body,i=t,o=n;if(48<=o&&o<=57){for(;48<=(o=O2.call(r,++i))&&o<=57;);return i}throw _2(e,i,"Invalid number, expected digit but got: ".concat(N2(o),"."))}function M2(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}L2.prototype.toJSON=L2.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var D2=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),U2=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function F2(e,t){var n="string"==typeof e?new w2(e):e;if(!(n instanceof w2))throw new TypeError("Must provide Source. Received: ".concat(y2(n)));e=n,n=t||{},t=new L2(T2.SOF,0,0,0,0,null),n={source:e,options:n,lastToken:t,token:t,line:1,lineStart:0,advance:I2,lookahead:k2};return n=(t=n).token,{kind:D2.DOCUMENT,definitions:IE(t,T2.SOF,B2,T2.EOF),loc:bE(t,n)}}function j2(e){var t=_E(e,T2.NAME);return{kind:D2.NAME,value:t.value,loc:bE(e,t)}}function B2(e){if(wE(e,T2.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return z2(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return sE(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===T2.NAME)switch(t.value){case"schema":return function(e){var t=e.token;EE(e,"extend"),EE(e,"schema");var n=rE(e,!0),r=wE(e,T2.BRACE_L)?IE(e,T2.BRACE_L,cE,T2.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:D2.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:bE(e,t)};throw AE(e)}(e);case"scalar":return function(e){var t=e.token;EE(e,"extend"),EE(e,"scalar");var n=j2(e),r=rE(e,!0);if(0!==r.length)return{kind:D2.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:bE(e,t)};throw AE(e)}(e);case"type":return function(e){var t=e.token;EE(e,"extend"),EE(e,"type");var n=j2(e),r=lE(e),i=rE(e,!0),o=pE(e);if(0!==r.length||0!==i.length||0!==o.length)return{kind:D2.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:bE(e,t)};throw AE(e)}(e);case"interface":return function(e){var t=e.token;EE(e,"extend"),EE(e,"interface");var n=j2(e),r=rE(e,!0),i=pE(e);if(0!==r.length||0!==i.length)return{kind:D2.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:bE(e,t)};throw AE(e)}(e);case"union":return function(e){var t=e.token;EE(e,"extend"),EE(e,"union");var n=j2(e),r=rE(e,!0),i=gE(e);if(0!==r.length||0!==i.length)return{kind:D2.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:bE(e,t)};throw AE(e)}(e);case"enum":return function(e){var t=e.token;EE(e,"extend"),EE(e,"enum");var n=j2(e),r=rE(e,!0),i=vE(e);if(0!==r.length||0!==i.length)return{kind:D2.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:bE(e,t)};throw AE(e)}(e);case"input":return function(e){var t=e.token;EE(e,"extend"),EE(e,"input");var n=j2(e),r=rE(e,!0),i=yE(e);if(0!==r.length||0!==i.length)return{kind:D2.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:bE(e,t)};throw AE(e)}(e)}throw AE(e,t)}(e)}else{if(wE(e,T2.BRACE_L))return z2(e);if(aE(e))return sE(e)}throw AE(e)}function z2(e){if(wE(e,T2.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return V2(e);case"fragment":return function(e){var t=e.token;if(EE(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:D2.FRAGMENT_DEFINITION,name:X2(e),variableDefinitions:K2(e),typeCondition:(EE(e,"on"),oE(e)),directives:rE(e,!1),selectionSet:W2(e),loc:bE(e,t)};return{kind:D2.FRAGMENT_DEFINITION,name:X2(e),typeCondition:(EE(e,"on"),oE(e)),directives:rE(e,!1),selectionSet:W2(e),loc:bE(e,t)}}(e)}else if(wE(e,T2.BRACE_L))return V2(e);throw AE(e)}function V2(e){var t=e.token;if(wE(e,T2.BRACE_L))return{kind:D2.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:W2(e),loc:bE(e,t)};var n,r=q2(e);return wE(e,T2.NAME)&&(n=j2(e)),{kind:D2.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:K2(e),directives:rE(e,!1),selectionSet:W2(e),loc:bE(e,t)}}function q2(e){var t=_E(e,T2.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw AE(e,t)}function K2(e){return wE(e,T2.PAREN_L)?IE(e,T2.PAREN_L,H2,T2.PAREN_R):[]}function H2(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:D2.VARIABLE_DEFINITION,variable:G2(e),type:(_E(e,T2.COLON),iE(e)),defaultValue:CE(e,T2.EQUALS)?Q2(e,!0):void 0,directives:rE(e,!0),loc:bE(e,t)}:{kind:D2.VARIABLE_DEFINITION,variable:G2(e),type:(_E(e,T2.COLON),iE(e)),defaultValue:CE(e,T2.EQUALS)?Q2(e,!0):void 0,loc:bE(e,t)}}function G2(e){var t=e.token;return _E(e,T2.DOLLAR),{kind:D2.VARIABLE,name:j2(e),loc:bE(e,t)}}function W2(e){var t=e.token;return{kind:D2.SELECTION_SET,selections:IE(e,T2.BRACE_L,$2,T2.BRACE_R),loc:bE(e,t)}}function $2(e){return(wE(e,T2.SPREAD)?function(e){var t,n=e.token;if(_E(e,T2.SPREAD),wE(e,T2.NAME)&&"on"!==e.token.value)return{kind:D2.FRAGMENT_SPREAD,name:X2(e),directives:rE(e,!1),loc:bE(e,n)};"on"===e.token.value&&(e.advance(),t=oE(e));return{kind:D2.INLINE_FRAGMENT,typeCondition:t,directives:rE(e,!1),selectionSet:W2(e),loc:bE(e,n)}}:function(e){var t,n=e.token,r=j2(e);r=CE(e,T2.COLON)?(t=r,j2(e)):r;return{kind:D2.FIELD,alias:t,name:r,arguments:Y2(e,!1),directives:rE(e,!1),selectionSet:wE(e,T2.BRACE_L)?W2(e):void 0,loc:bE(e,n)}})(e)}function Y2(e,t){return wE(e,T2.PAREN_L)?IE(e,T2.PAREN_L,t?Z2:J2,T2.PAREN_R):[]}function J2(e){var t=e.token;return{kind:D2.ARGUMENT,name:j2(e),value:(_E(e,T2.COLON),Q2(e,!1)),loc:bE(e,t)}}function Z2(e){var t=e.token;return{kind:D2.ARGUMENT,name:j2(e),value:(_E(e,T2.COLON),tE(e)),loc:bE(e,t)}}function X2(e){if("on"===e.token.value)throw AE(e);return j2(e)}function Q2(e,t){var n,r,i,o=e.token;switch(o.kind){case T2.BRACKET_L:return r=t,i=(n=e).token,r=t?tE:nE,{kind:D2.LIST,values:function(e,t,n,r){_E(e,t);var i=[];for(;!CE(e,r);)i.push(n(e));return i}(n,T2.BRACKET_L,r,T2.BRACKET_R),loc:bE(n,i)};case T2.BRACE_L:return function(e,t){var n=e.token;_E(e,T2.BRACE_L);var r=[];for(;!CE(e,T2.BRACE_R);)r.push(function(e,t){var n=e.token;return{kind:D2.OBJECT_FIELD,name:j2(e),value:(_E(e,T2.COLON),Q2(e,t)),loc:bE(e,n)}}(e,t));return{kind:D2.OBJECT,fields:r,loc:bE(e,n)}}(e,t);case T2.INT:return e.advance(),{kind:D2.INT,value:o.value,loc:bE(e,o)};case T2.FLOAT:return e.advance(),{kind:D2.FLOAT,value:o.value,loc:bE(e,o)};case T2.STRING:case T2.BLOCK_STRING:return eE(e);case T2.NAME:return"true"===o.value||"false"===o.value?(e.advance(),{kind:D2.BOOLEAN,value:"true"===o.value,loc:bE(e,o)}):"null"===o.value?(e.advance(),{kind:D2.NULL,loc:bE(e,o)}):(e.advance(),{kind:D2.ENUM,value:o.value,loc:bE(e,o)});case T2.DOLLAR:if(!t)return G2(e)}throw AE(e)}function eE(e){var t=e.token;return e.advance(),{kind:D2.STRING,value:t.value,block:t.kind===T2.BLOCK_STRING,loc:bE(e,t)}}function tE(e){return Q2(e,!0)}function nE(e){return Q2(e,!1)}function rE(e,t){for(var n,r,i,o=[];wE(e,T2.AT);)o.push((r=t,i=void 0,i=(n=e).token,_E(n,T2.AT),{kind:D2.DIRECTIVE,name:j2(n),arguments:Y2(n,r),loc:bE(n,i)}));return o}function iE(e){var t=e.token,n=CE(e,T2.BRACKET_L)?(n=iE(e),_E(e,T2.BRACKET_R),{kind:D2.LIST_TYPE,type:n,loc:bE(e,t)}):oE(e);return CE(e,T2.BANG)?{kind:D2.NON_NULL_TYPE,type:n,loc:bE(e,t)}:n}function oE(e){var t=e.token;return{kind:D2.NAMED_TYPE,name:j2(e),loc:bE(e,t)}}function sE(e){var t=aE(e)?e.lookahead():e.token;if(t.kind===T2.NAME)switch(t.value){case"schema":return function(e){var t=e.token;EE(e,"schema");var n=rE(e,!0),r=IE(e,T2.BRACE_L,cE,T2.BRACE_R);return{kind:D2.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:bE(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=uE(e);EE(e,"scalar");var r=j2(e),i=rE(e,!0);return{kind:D2.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:bE(e,t)}}(e);case"type":return function(e){var t=e.token,n=uE(e);EE(e,"type");var r=j2(e),i=lE(e),o=rE(e,!0),s=pE(e);return{kind:D2.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:bE(e,t)}}(e);case"interface":return function(e){var t=e.token,n=uE(e);EE(e,"interface");var r=j2(e),i=rE(e,!0),o=pE(e);return{kind:D2.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:bE(e,t)}}(e);case"union":return function(e){var t=e.token,n=uE(e);EE(e,"union");var r=j2(e),i=rE(e,!0),o=gE(e);return{kind:D2.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:bE(e,t)}}(e);case"enum":return function(e){var t=e.token,n=uE(e);EE(e,"enum");var r=j2(e),i=rE(e,!0),o=vE(e);return{kind:D2.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:bE(e,t)}}(e);case"input":return function(e){var t=e.token,n=uE(e);EE(e,"input");var r=j2(e),i=rE(e,!0),o=yE(e);return{kind:D2.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:bE(e,t)}}(e);case"directive":return function(e){var t=e.token,n=uE(e);EE(e,"directive"),_E(e,T2.AT);var r=j2(e),i=fE(e);EE(e,"on");var o=function(e){CE(e,T2.PIPE);var t=[];for(;t.push(function(e){var t=e.token,n=j2(e);if(U2.hasOwnProperty(n.value))return n;throw AE(e,t)}(e)),CE(e,T2.PIPE););return t}(e);return{kind:D2.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:bE(e,t)}}(e)}throw AE(e,t)}function aE(e){return wE(e,T2.STRING)||wE(e,T2.BLOCK_STRING)}function uE(e){if(aE(e))return eE(e)}function cE(e){var t=e.token,n=q2(e);_E(e,T2.COLON);var r=oE(e);return{kind:D2.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:bE(e,t)}}function lE(e){var t=[];if("implements"===e.token.value)for(e.advance(),CE(e,T2.AMP);t.push(oE(e)),CE(e,T2.AMP)||e.options.allowLegacySDLImplementsInterfaces&&wE(e,T2.NAME););return t}function pE(e){return e.options.allowLegacySDLEmptyFields&&wE(e,T2.BRACE_L)&&e.lookahead().kind===T2.BRACE_R?(e.advance(),e.advance(),[]):wE(e,T2.BRACE_L)?IE(e,T2.BRACE_L,dE,T2.BRACE_R):[]}function dE(e){var t=e.token,n=uE(e),r=j2(e),i=fE(e);_E(e,T2.COLON);var o=iE(e),s=rE(e,!0);return{kind:D2.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:bE(e,t)}}function fE(e){return wE(e,T2.PAREN_L)?IE(e,T2.PAREN_L,hE,T2.PAREN_R):[]}function hE(e){var t=e.token,n=uE(e),r=j2(e);_E(e,T2.COLON);var i,o=iE(e);CE(e,T2.EQUALS)&&(i=tE(e));var s=rE(e,!0);return{kind:D2.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:bE(e,t)}}function gE(e){var t=[];if(CE(e,T2.EQUALS))for(CE(e,T2.PIPE);t.push(oE(e)),CE(e,T2.PIPE););return t}function vE(e){return wE(e,T2.BRACE_L)?IE(e,T2.BRACE_L,mE,T2.BRACE_R):[]}function mE(e){var t=e.token,n=uE(e),r=j2(e),i=rE(e,!0);return{kind:D2.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:bE(e,t)}}function yE(e){return wE(e,T2.BRACE_L)?IE(e,T2.BRACE_L,hE,T2.BRACE_R):[]}function bE(e,t){if(!e.options.noLocation)return new SE(t,e.lastToken,e.source)}function SE(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function wE(e,t){return e.token.kind===t}function CE(e,t){t=e.token.kind===t;return t&&e.advance(),t}function _E(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw _2(e.source,n.start,"Expected ".concat(t,", found ").concat(P2(n)))}function EE(e,t){var n=e.token;if(n.kind===T2.NAME&&n.value===t)return e.advance(),n;throw _2(e.source,n.start,'Expected "'.concat(t,'", found ').concat(P2(n)))}function AE(e,t){t=t||e.token;return _2(e.source,t.start,"Unexpected ".concat(P2(t)))}function IE(e,t,n,r){_E(e,t);for(var i=[n(e)];!CE(e,r);)i.push(n(e));return i}SE.prototype.toJSON=SE.prototype.inspect=function(){return{start:this.start,end:this.end}};var kE=L,TE=function(){return(TE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},PE=new A.ConsoleLogger("AbstractPubSubProvider"),WS=(OE.prototype.configure=function(e){return this._config=TE(TE({},e=void 0===e?{}:e),this._config),PE.debug("configure "+this.getProviderName(),this._config),this.options},OE.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(OE.prototype,"options",{get:function(){return TE({},this._config)},enumerable:!0,configurable:!0}),OE);function OE(e){this._config=e=void 0===e?{}:e}var xE,t2=(xE=function(e,t){return(xE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}xE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),LE=function(){return(LE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},NE=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},RE=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ME=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},DE=new A.ConsoleLogger("MqttOverWSProvider");var UE=(FE.prototype.get=function(n,r){return NE(this,void 0,void 0,function(){var t;return RE(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(FE.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),FE.prototype.remove=function(e){this.promises.delete(e)},FE);function FE(){this.promises=new Map}var jE,BE="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",L=(t2(zE,jE=WS),Object.defineProperty(zE.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(zE.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(zE.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(zE.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),zE.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[BE]},zE.prototype.getProviderName=function(){return"MqttOverWSProvider"},zE.prototype.onDisconnect=function(e){var r,t=this,n=e.clientId,i=e.errorCode,e=ME(e,["clientId","errorCode"]);0!==i&&(DE.warn(n,JSON.stringify(LE({errorCode:i},e),null,2)),r=[],(e=this._clientIdObservers.get(n))&&(e.forEach(function(n){n.error("Disconnected, error code: "+i),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&r.push(t)})}),this._clientIdObservers.delete(n),r.forEach(function(e){t._topicObservers.delete(e)})))},zE.prototype.newClient=function(e){var t=e.url,i=e.clientId;return NE(this,void 0,void 0,function(){var n,r=this;return RE(this,function(e){switch(e.label){case 0:return DE.debug("Creating new MQTT client",i),(n=new N.Client(t,i)).onMessageArrived=function(e){var t=e.destinationName,e=e.payloadString;r._onMessage(t,e)},n.onConnectionLost=function(e){var t=e.errorCode,e=ME(e,["errorCode"]);r.onDisconnect(LE({clientId:i,errorCode:t},e))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},zE.prototype.connect=function(n,r){return void 0===r&&(r={}),NE(this,void 0,void 0,function(){var t=this;return RE(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(LE(LE({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},zE.prototype.disconnect=function(n){return NE(this,void 0,void 0,function(){var t;return RE(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},zE.prototype.publish=function(o,s){return NE(this,void 0,void 0,function(){var t,n,r,i;return RE(this,function(e){switch(e.label){case 0:return t=[].concat(o),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return i=e.sent(),DE.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return i.send(e,n)}),[2]}})})},zE.prototype._onMessage=function(n,t){try{var r=[];this._topicObservers.forEach(function(e,t){!function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return}return r===i.length}(t,n)||r.push(e)});var i=JSON.parse(t);"object"==typeof i&&(i[BE]=n),r.forEach(function(e){e.forEach(function(e){return e.next(i)})})}catch(e){DE.warn("Error handling message",e,t)}},zE.prototype.subscribe=function(e,u){var n=this;void 0===u&&(u={});var c=[].concat(e);return DE.debug("Subscribing to topic(s)",c.join(",")),new kE(function(o){var s;c.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(o)});var e=u.clientId,a=void 0===e?n.clientId:e,e=n._clientIdObservers.get(a);return(e=e||new Set).add(o),n._clientIdObservers.set(a,e),NE(n,void 0,void 0,function(){var t,n,r,i;return RE(this,function(e){switch(e.label){case 0:return void 0!==(t=u.url)?[3,2]:[4,this.endpoint];case 1:return r=e.sent(),[3,3];case 2:r=t,e.label=3;case 3:n=r,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(a,{url:n})];case 5:return s=e.sent(),c.forEach(function(e){s.subscribe(e)}),[3,7];case 6:return i=e.sent(),o.error(i),[3,7];case 7:return[2]}})}),function(){return DE.debug("Unsubscribing from topic(s)",c.join(",")),s&&(n._clientIdObservers.get(a).delete(o),0===n._clientIdObservers.get(a).size&&(n.disconnect(a),n._clientIdObservers.delete(a)),c.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(o),0===t.size&&(n._topicObservers.delete(e),s.isConnected()&&s.unsubscribe(e))})),null}})},zE);function zE(e){e=jE.call(this,LE(LE({},e=void 0===e?{}:e),{clientId:e.clientId||h.v4()}))||this;return e._clientsQueue=new UE,e._topicObservers=new Map,e._clientIdObservers=new Map,e}var VE,qE,t2=(VE=function(e,t){return(VE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}VE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),KE=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},HE=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},GE=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},WE=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},$E=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(WE(arguments[t]));return e},YE=new A.ConsoleLogger("AWSAppSyncProvider"),JE=(t2(ZE,qE=L),Object.defineProperty(ZE.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),ZE.prototype.getProviderName=function(){return"AWSAppSyncProvider"},ZE.prototype.publish=function(e,t,n){return KE(this,void 0,void 0,function(){return HE(this,function(e){throw new Error("Operation not supported")})})},ZE.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return WE(e,2)[1].clientId===t}).map(function(e){return WE(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},ZE.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},ZE.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=GE(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return WE(e,2)[1].clientId===n}).map(function(e){return WE(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(i)}),t._topicObservers.delete(e))}),this._cleanUp(n))},ZE.prototype.disconnect=function(t){return KE(this,void 0,void 0,function(){return HE(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,qE.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},ZE.prototype.subscribe=function(e,o){var n=this;void 0===o&&(o={});var t=new kE(function(a){var r=[].concat(e);return YE.debug("Subscribing to topic(s)",r.join(",")),KE(n,void 0,void 0,function(){var i,t,n=this;return HE(this,function(e){switch(e.label){case 0:return r.forEach(function(e){n._topicObservers.has(e)||n._topicObservers.set(e,new Set),n._topicObservers.get(e).add(a)}),t=o.mqttConnections,i=void 0===t?[]:t,t=o.newSubscriptions,t=Object.entries(t).map(function(e){var t=WE(e,2),e=t[0];return[t[1].topic,e]}),this._topicAlias=new Map($E(Array.from(this._topicAlias.entries()),t)),t=Object.entries(r.reduce(function(e,t){var n,r=i.find(function(e){return-1<e.topics.indexOf(t)});return r&&(n=r.client,r=r.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(t.map(function(e){var e=WE(e,2),i=e[0],e=e[1],o=e.url,s=e.topics;return KE(n,void 0,void 0,function(){var t,n,r=this;return HE(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(i,{clientId:i,url:o})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),a.error({message:"Failed to connect",error:n}),a.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){YE.debug("Unsubscribing from topic(s)",r.join(",")),r.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return kE.from(t).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=WE(t,2),t=n[0],n=n[1];return e[r||t]=n,e},{}),e})},ZE);function ZE(){var e=null!==qE&&qE.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}var XE,QE,e3,t3,t2=(XE=function(e,t){return(XE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}XE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n3=function(){return(n3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r3=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},i3=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},o3=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s3=new A.Logger("AWSAppSyncRealTimeProvider"),a3="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",u3=[400,401,403];(L=QE=QE||{}).GQL_CONNECTION_INIT="connection_init",L.GQL_CONNECTION_ERROR="connection_error",L.GQL_CONNECTION_ACK="connection_ack",L.GQL_START="start",L.GQL_START_ACK="start_ack",L.GQL_DATA="data",L.GQL_CONNECTION_KEEP_ALIVE="ka",L.GQL_STOP="stop",L.GQL_COMPLETE="complete",L.GQL_ERROR="error",(L=e3=e3||{})[L.PENDING=0]="PENDING",L[L.CONNECTED=1]="CONNECTED",L[L.FAILED=2]="FAILED",(L=t3=t3||{})[L.CLOSED=0]="CLOSED",L[L.READY=1]="READY",L[L.CONNECTING=2]="CONNECTING";var c3,l3={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},p3=(t2(d3,c3=WS),d3.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},d3.prototype.newClient=function(){throw new Error("Not used here")},d3.prototype.publish=function(e,t,n){return r3(this,void 0,void 0,function(){return i3(this,function(e){throw new Error("Operation not supported")})})},d3.prototype.subscribe=function(e,r){var i=this,o=r.appSyncGraphqlEndpoint;return new kE(function(t){if(o){var n=h.v4();return i._startSubscriptionWithAWSAppSyncRealTime({options:r,observer:t,subscriptionId:n}).catch(function(e){t.error({errors:[n3({},new o2(y3.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+e))]}),t.complete()}),function(){return r3(i,void 0,void 0,function(){var t;return i3(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(n)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(n)||{}).subscriptionState))return[2];if(t!==e3.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(n),[3,4];case 2:return t=e.sent(),s3.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(n),[7];case 4:return[2]}})})}}t.error({errors:[n3({},new o2("Subscribe only available for AWS AppSync endpoint"))]}),t.complete()})},Object.defineProperty(d3.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),d3.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var m=e.options,y=e.observer,b=e.subscriptionId;return r3(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v=this;return i3(this,function(e){switch(e.label){case 0:return t=m.appSyncGraphqlEndpoint,n=m.authenticationType,r=m.query,i=m.variables,o=m.apiKey,s=m.region,p=m.graphql_headers,a=void 0===p?function(){return{}}:p,l=m.additionalHeaders,u=void 0===l?{}:l,c=e3.PENDING,p={query:r,variables:i},this.subscriptionObserverMap.set(b,{observer:y,query:r,variables:i,subscriptionState:c,startAckTimeoutId:null}),l=JSON.stringify(p),p=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,payload:l,canonicalUri:"",region:s,additionalHeaders:u})];case 1:return d=[n3.apply(void 0,p.concat([e.sent()]))],[4,a()];case 2:g=n3.apply(void 0,[n3.apply(void 0,[n3.apply(void 0,d.concat([e.sent()])),u]),((g={})[A.USER_AGENT_HEADER]=A.Constants.userAgent,g)]),g={id:b,payload:{data:l,extensions:{authorization:n3({},g)}},type:QE.GQL_START},g=JSON.stringify(g),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,region:s,additionalHeaders:u})];case 4:return e.sent(),[3,6];case 5:return h=e.sent(),s3.debug({err:h}),f=h.message,h=void 0===f?"":f,y.error({errors:[n3({},new o2(y3.CONNECTION_FAILED+": "+h))]}),y.complete(),"function"==typeof(f=(this.subscriptionObserverMap.get(b)||{}).subscriptionFailedCallback)&&f(),[2];case 6:return h=this.subscriptionObserverMap.get(b),f=h.subscriptionFailedCallback,h=h.subscriptionReadyCallback,this.subscriptionObserverMap.set(b,{observer:y,subscriptionState:c,variables:i,query:r,subscriptionReadyCallback:h,subscriptionFailedCallback:f,startAckTimeoutId:setTimeout(function(){v._timeoutStartSubscriptionAck.call(v,b)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(g),[2]}})})},d3.prototype._waitForSubscriptionToBeConnected=function(a){return r3(this,void 0,void 0,function(){var s=this;return i3(this,function(e){return this.subscriptionObserverMap.get(a).subscriptionState===e3.PENDING?[2,new Promise(function(e,t){var n=s.subscriptionObserverMap.get(a),r=n.observer,i=n.subscriptionState,o=n.variables,n=n.query;s.subscriptionObserverMap.set(a,{observer:r,subscriptionState:i,variables:o,query:n,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},d3.prototype._sendUnsubscriptionMessage=function(e){try{var t,n;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===t3.READY&&(t={id:e,type:QE.GQL_STOP},n=JSON.stringify(t),this.awsRealTimeSocket.send(n))}catch(e){s3.debug({err:e})}},d3.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},d3.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(s3.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=t3.CLOSED):this.socketStatus=t3.CLOSED)},d3.prototype._handleIncomingSubscriptionMessage=function(e){s3.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,i=t.payload,o=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,u=void 0===a?null:a,e=s.query,n=void 0===e?"":e,t=s.variables,a=void 0===t?{}:t,e=s.startAckTimeoutId,t=s.subscriptionReadyCallback,s=s.subscriptionFailedCallback;if(s3.debug({id:r,observer:u,query:n,variables:a}),o===QE.GQL_DATA&&i&&i.data)u?u.next(i):s3.debug("observer not found for id: "+r);else if(o!==QE.GQL_START_ACK){if(o===QE.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,y3.TIMEOUT_DISCONNECT),this.keepAliveTimeout));o===QE.GQL_ERROR&&(c=e3.FAILED,this.subscriptionObserverMap.set(r,{observer:u,query:n,variables:a,startAckTimeoutId:e,subscriptionReadyCallback:t,subscriptionFailedCallback:s,subscriptionState:c}),u.error({errors:[n3({},new o2(y3.CONNECTION_FAILED+": "+JSON.stringify(i)))]}),clearTimeout(e),u.complete(),"function"==typeof s&&s())}else{s3.debug("subscription ready for "+JSON.stringify({query:n,variables:a})),"function"==typeof t&&t(),clearTimeout(e),o=y3.SUBSCRIPTION_ACK,i={query:n,variables:a},e="Connection established for subscription",A.Hub.dispatch("api",{event:o,data:i,message:e},"PubSub",a3);var c=e3.CONNECTED;this.subscriptionObserverMap.set(r,{observer:u,query:n,variables:a,startAckTimeoutId:null,subscriptionState:c,subscriptionReadyCallback:t,subscriptionFailedCallback:s})}},d3.prototype._errorDisconnect=function(t){s3.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(e){e=e.observer;e&&!e.closed&&e.error({errors:[n3({},new o2(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=t3.CLOSED},d3.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,t=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:t,subscriptionState:e3.FAILED}),n&&!n.closed&&(n.error({errors:[n3({},new o2("Subscription timeout "+JSON.stringify({query:r,variables:t})))]}),n.complete()),s3.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:t})))},d3.prototype._initializeWebSocketConnection=function(e){var t=this,l=e.appSyncGraphqlEndpoint,p=e.authenticationType,d=e.apiKey,f=e.region,h=e.additionalHeaders;if(this.socketStatus!==t3.READY)return new Promise(function(u,c){return r3(t,void 0,void 0,function(){var t,n,r,i,o,s,a;return i3(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:u,rej:c}),this.socketStatus!==t3.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=t3.CONNECTING,o=this.isSSLEnabled?"wss://":"ws://",t=l.replace("https://",o).replace("http://",o).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),n="{}",i=(r=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:p,payload:n,canonicalUri:"/connect",apiKey:d,appSyncGraphqlEndpoint:l,region:f,additionalHeaders:h})];case 2:return s=i.apply(r,[e.sent()]),o=v.Buffer.from(s).toString("base64"),s=v.Buffer.from(n).toString("base64"),s=t+"?header="+o+"&payload="+s,[4,this._initializeRetryableHandshake({awsRealTimeUrl:s})];case 3:return e.sent(),this.promiseArray.forEach(function(e){e=e.res;s3.debug("Notifying connection successful"),e()}),this.socketStatus=t3.READY,this.promiseArray=[],[3,5];case 4:return a=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(a)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=t3.CLOSED,[3,5];case 5:return[2]}})})})},d3.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return r3(this,void 0,void 0,function(){return i3(this,function(e){switch(e.label){case 0:return s3.debug("Initializaling retryable Handshake"),[4,A.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},d3.prototype._initializeHandshake=function(e){var i=e.awsRealTimeUrl;return r3(this,void 0,void 0,function(){var t,n,r,s=this;return i3(this,function(e){switch(e.label){case 0:s3.debug("Initializing handshake "+i),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(i,"graphql-ws");n.onerror=function(){s3.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return s.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(r,i){var o=!1;s.awsRealTimeSocket.onerror=function(e){s3.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){s3.debug("WebSocket closed "+e.reason),i(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(e){s3.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,e=t.payload,e=(void 0===e?{}:e).connectionTimeoutMs;if(n===QE.GQL_CONNECTION_ACK)return o=!0,s.keepAliveTimeout=void 0===e?3e5:e,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){s3.debug(e),s._errorDisconnect(y3.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){s3.debug("WebSocket closed "+e.reason),s._errorDisconnect(y3.CONNECTION_CLOSED)},void r("Cool, connected to AWS AppSyncRealTime");n===QE.GQL_CONNECTION_ERROR&&(t=(void 0===(n=t.payload)?{}:n).errors,n=(t=void 0===(n=o3(void 0===t?[]:t,1)[0])?{}:n).errorType,t=t.errorCode,i({errorType:void 0===n?"":n,errorCode:void 0===t?0:t}))};var e={type:QE.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){o||i(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(s),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,u3.includes(r)?new A.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},d3.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.apiKey,u=e.region,c=e.additionalHeaders;return r3(this,void 0,void 0,function(){var t,n;return i3(this,function(e){switch(e.label){case 0:return(n={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},"function"!=typeof(t=n[r]))?(s3.debug("Authentication type "+r+" not supported"),[2,""]):(n=g.parse(s).host,[4,t({payload:i,canonicalUri:o,appSyncGraphqlEndpoint:s,apiKey:a,region:u,host:n,additionalHeaders:c})]);case 1:return[2,e.sent()]}})})},d3.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return r3(this,void 0,void 0,function(){return i3(this,function(e){switch(e.label){case 0:return[4,Jv.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},d3.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return r3(this,void 0,void 0,function(){var t,n;return i3(this,function(e){switch(e.label){case 0:return[4,Ff.getItem("federatedInfo")];case 1:return(n=e.sent())?(t=n.token,[3,4]):[3,2];case 2:return[4,Jv.currentAuthenticatedUser()];case 3:(n=e.sent())&&(t=n.token),e.label=4;case 4:if(!t)throw new Error("No federated jwt");return[2,{Authorization:t,host:r}]}})})},d3.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,r=e.host;return r3(this,void 0,void 0,function(){var t;return i3(this,function(e){return t=new Date,t=t.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:r,"x-amz-date":t,"x-api-key":n}]})})},d3.prototype._awsRealTimeIAMHeader=function(e){var i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return r3(this,void 0,void 0,function(){var t,n,r;return i3(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,A.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+o,data:i,method:"POST",headers:n3({},l3)},[2,A.Signer.sign(r,n,t).headers]}})})},d3.prototype._customAuthHeader=function(e){var t=e.host,e=e.additionalHeaders;if(!e.Authorization)throw new Error("No auth token specified");return{Authorization:e.Authorization,host:t}},d3.prototype._ensureCredentials=function(){return A.Credentials.get().then(function(e){if(!e)return!1;e=A.Credentials.shear(e);return s3.debug("set credentials for AWSAppSyncRealTimeProvider",e),!0}).catch(function(e){return s3.warn("ensure credentials error",e),!1})},d3);function d3(){var e=null!==c3&&c3.apply(this,arguments)||this;return e.socketStatus=t3.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}var f3=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},h3=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},g3=A.browserOrNode().isNode,v3=new A.ConsoleLogger("PubSub");function m3(e){this._options=e,v3.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}var y3,b3,S3=new(Object.defineProperty(m3.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new JE(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(m3.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new p3(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),m3.prototype.getModuleName=function(){return"PubSub"},m3.prototype.configure=function(e){var t=this,e=e?e.PubSub||e:{};return v3.debug("configure PubSub",{opt:e}),this._options=Object.assign({},this._options,e),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},m3.prototype.addPluggable=function(t){return f3(this,void 0,void 0,function(){return h3(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},m3.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},m3.prototype.getProviderByName=function(t){return t===A.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===A.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},m3.prototype.getProviders=function(e){var t=(e=void 0===e?{}:e).provider;if(!t)return this._pluggables;e=this.getProviderByName(t);if(!e)throw new Error("Could not find provider named "+t);return[e]},m3.prototype.publish=function(t,n,r){return f3(this,void 0,void 0,function(){return h3(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},m3.prototype.subscribe=function(t,r){if(g3&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");v3.debug("subscribe options",r);var i=this.getProviders(r);return new kE(function(n){var e=i.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},m3)(null);A.Amplify.register(S3),(WS=y3=y3||{}).CONNECTION_CLOSED="Connection closed",WS.CONNECTION_FAILED="Connection failed",WS.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",WS.SUBSCRIPTION_ACK="Subscription ack",WS.TIMEOUT_DISCONNECT="Timeout disconnect",(WS=U3=U3||{}).API_KEY="API_KEY",WS.AWS_IAM="AWS_IAM",WS.OPENID_CONNECT="OPENID_CONNECT",WS.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",WS.AWS_LAMBDA="AWS_LAMBDA",(U3=b3=b3||{}).NO_API_KEY="No api-key configured",U3.NO_CURRENT_USER="No current user",U3.NO_CREDENTIALS="No credentials",U3.NO_FEDERATED_JWT="No federated jwt",U3.NO_AUTH_TOKEN="No auth token specified";var w3=function(){return(w3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},C3=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},_3=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},E3=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},A3=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},I3=new A.ConsoleLogger("GraphQLAPI"),k3=(T3.prototype.getModuleName=function(){return"GraphQLAPI"},T3.prototype.configure=function(e){var t=e||{},e=t.API,e=void 0===e?{}:e,t=E3(t,["API"]),e=w3(w3({},t),e);return I3.debug("configure GraphQL API",{opt:e}),void 0!==(e=e.aws_project_region?Object.assign({},e,{region:e.aws_project_region,header:{}}):e).graphql_headers&&"function"!=typeof e.graphql_headers&&(I3.warn("graphql_headers should be a function"),e.graphql_headers=void 0),this._options=Object.assign({},this._options,e),this.createInstance(),this._options},T3.prototype.createInstance=function(){return I3.debug("create Rest instance"),this._options?(this._api=new G_(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},T3.prototype._headerBasedAuth=function(s,a){return void 0===a&&(a={}),C3(this,void 0,void 0,function(){var t,n,r,i,o;return _3(this,function(e){switch(e.label){case 0:switch(n=this._options,i=n.aws_appsync_authenticationType,t=n.aws_appsync_apiKey,n={},s||i||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!t)throw new Error(b3.NO_API_KEY);return n={Authorization:null,"X-Api-Key":t},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error(b3.NO_CREDENTIALS);return[3,17];case 4:return e.trys.push([4,9,,10]),r=void 0,[4,Ff.getItem("federatedInfo")];case 5:return(i=e.sent())?(r=i.token,[3,8]):[3,6];case 6:return[4,Jv.currentAuthenticatedUser()];case 7:(o=e.sent())&&(r=o.token),e.label=8;case 8:if(!r)throw new Error(b3.NO_FEDERATED_JWT);return n={Authorization:r},[3,10];case 9:throw e.sent(),new Error(b3.NO_CURRENT_USER);case 10:return[3,17];case 11:return e.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return o=e.sent(),n={Authorization:o.getAccessToken().getJwtToken()},[3,14];case 13:throw e.sent(),new Error(b3.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!a.Authorization)throw new Error(b3.NO_AUTH_TOKEN);return n={Authorization:a.Authorization},[3,17];case 16:return n={Authorization:null},[3,17];case 17:return[2,n]}})})},T3.prototype.getGraphqlOperationType=function(e){e=F2(e);return A3(e.definitions,1)[0].operation},T3.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,e=e.authToken,s=F2("string"==typeof n?n:l2(n)),n=A3(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],n=(void 0===n?{}:n).operation,a=t||{};switch(e&&(a.Authorization=e),n){case"query":case"mutation":var u=this._api.getCancellableToken(),c=this._graphql({query:s,variables:i,authMode:o},a,{cancellableToken:u});return this._api.updateRequestToBeCancellable(c,u),c;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},a)}throw new Error("invalid operation type: "+n)},T3.prototype._graphql=function(e,v,m){var y=e.query,b=e.variables,S=e.authMode;return void 0===v&&(v={}),void 0===m&&(m={}),C3(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g;return _3(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return a=this._options,t=a.aws_appsync_region,n=a.aws_appsync_graphqlEndpoint,s=a.graphql_headers,r=void 0===s?function(){return{}}:s,i=a.graphql_endpoint,o=a.graphql_endpoint_iam_region,s=[{}],(a=!i)?[4,this._headerBasedAuth(S,v)]:[3,4];case 3:a=e.sent(),e.label=4;case 4:return u=[w3.apply(void 0,s.concat([a]))],(c=i)?o?[4,this._headerBasedAuth(S,v)]:[3,6]:[3,8];case 5:return l=e.sent(),[3,7];case 6:l={Authorization:null},e.label=7;case 7:c=l,e.label=8;case 8:return p=[w3.apply(void 0,u.concat([c]))],[4,r({query:y,variables:b})];case 9:if(d=w3.apply(void 0,[w3.apply(void 0,[w3.apply(void 0,p.concat([e.sent()])),v]),!i&&((g={})["x-amz-user-agent"]=A.Constants.userAgent,g)]),g={query:l2(y),variables:b},d=Object.assign({headers:d,body:g,signerServiceInfo:{service:i?"execute-api":"appsync",region:i?o:t}},m),!(g=i||n))throw{data:{},errors:[new o2("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(g,d)];case 11:return f=e.sent(),[3,13];case 12:if(h=e.sent(),this._api.isCancel(h))throw h;return f={data:{},errors:[new o2(h.message,null,null,null,null,h)]},[3,13];case 13:if((h=f.errors)&&h.length)throw f;return[2,f]}})})},T3.prototype.isCancel=function(e){return this._api.isCancel(e)},T3.prototype.cancel=function(e,t){return this._api.cancel(e,t)},T3.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode,o=e.authToken;void 0===t&&(t={});var s=this._options,a=s.aws_appsync_region,u=s.aws_appsync_graphqlEndpoint,c=s.aws_appsync_authenticationType,e=s.aws_appsync_apiKey,s=s.graphql_headers,s=void 0===s?function(){return{}}:s;if(S3&&"function"==typeof S3.subscribe)return S3.subscribe("",{provider:A.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:u,authenticationType:i||c||"AWS_IAM",apiKey:e,query:l2(n),region:a,variables:r,graphql_headers:s,additionalHeaders:t,authToken:o});throw I3.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},T3.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){if(!e)return!1;e=t.Credentials.shear(e);return I3.debug("set credentials for api",e),!0}).catch(function(e){return I3.warn("ensure credentials error",e),!1})},T3);function T3(e){this._api=null,this.Auth=Jv,this.Cache=Ff,this.Credentials=A.Credentials,this._options=e,I3.debug("API Options",this._options)}WS=new k3(null);A.Amplify.register(WS);var P3=function(){return(P3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},O3=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},x3=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},L3=new A.ConsoleLogger("API");function N3(e){this.Auth=Jv,this.Cache=Ff,this.Credentials=A.Credentials,this._options=e,this._restApi=new Q_(e),this._graphqlApi=new k3(e),L3.debug("API Options",this._options)}var R3=new(N3.prototype.getModuleName=function(){return"API"},N3.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),e=this._graphqlApi.configure(this._options);return P3(P3({},t),e)},N3.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},N3.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},N3.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},N3.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},N3.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},N3.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},N3.prototype.isCancel=function(e){return this._restApi.isCancel(e)},N3.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},N3.prototype.endpoint=function(t){return O3(this,void 0,void 0,function(){return x3(this,function(e){return[2,this._restApi.endpoint(t)]})})},N3.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},N3.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},N3)(null);A.Amplify.register(R3);var M3=function(){return(M3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},D3=new A.ConsoleLogger("AbstractInteractionsProvider"),U3=(F3.prototype.configure=function(e){return void 0===e&&(e={}),this._config=M3(M3({},this._config),e),D3.debug("configure "+this.getProviderName(),this._config),this.options},F3.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(F3.prototype,"options",{get:function(){return M3({},this._config)},enumerable:!0,configurable:!0}),F3);function F3(e){this._config=e=void 0===e?{}:e}var j3=function(e,t){return(j3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function B3(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}j3(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var z3=function(){return(z3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function V3(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function q3(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function K3(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var H3,G3,W3,$3,Y3,J3,Z3,X3,Q3,eA,tA,nA,rA,iA,WS="3.6.1",oA="runtime.lex.{region}.amazonaws.com",sA=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),aA=new Set(["cn-north-1","cn-northwest-1"]),uA=new Set(["us-iso-east-1"]),cA=new Set(["us-isob-east-1"]),lA=new Set(["us-gov-east-1","us-gov-west-1"]),xe={apiVersion:"2016-11-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"runtime.lex.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-1":n={hostname:"runtime.lex.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-2":n={hostname:"runtime.lex.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-central-1":n={hostname:"runtime.lex.eu-central-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-2":n={hostname:"runtime.lex.eu-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:sA.has(e)&&(n={hostname:oA.replace("{region}",e),partition:"aws",signingService:"lex"}),aA.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),uA.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),cA.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=lA.has(e)?{hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:oA.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(z3({signingService:"lex"},n))},serviceId:"Lex Runtime Service",urlParser:xe},pA=z3(z3({},xe),{runtime:"node",base64Decoder:Wu,base64Encoder:$u,bodyLengthChecker:Yu,credentialDefaultProvider:Gn,defaultUserAgentProvider:pn({serviceId:xe.serviceId,clientVersion:WS}),maxAttempts:Ka(st),region:Ka(ln,vn),requestHandler:new $n,sha256:ut.bind(null,"sha256"),streamCollector:Ft,utf8Decoder:un,utf8Encoder:C}),dA=(B3(fA,H3=Re),fA.prototype.destroy=function(){H3.prototype.destroy.call(this)},fA);function fA(e){var t=this,e=z3(z3({},pA),e),e=Ro(e),e=Jc(No(e)),e=nl(xa(e));return(t=H3.call(this,e)||this).config=e,t.middlewareStack.use(el(t.config)),t.middlewareStack.use(aa(t.config)),t.middlewareStack.use(oc(t.config)),t.middlewareStack.use(cc(t.config)),t.middlewareStack.use(dc(t.config)),t.middlewareStack.use(il(t.config)),t}(G3||(G3={})).filterSensitiveLog=function(e){return z3({},e)},(W3||(W3={})).filterSensitiveLog=function(e){return z3(z3({},e),e.parameters&&{parameters:_l})},($3||($3={})).filterSensitiveLog=function(e){return z3({},e)},(Y3||(Y3={})).filterSensitiveLog=function(e){return z3({},e)},(J3||(J3={})).filterSensitiveLog=function(e){return z3({},e)},(Z3||(Z3={})).filterSensitiveLog=function(e){return z3({},e)},(SA||(SA={})).filterSensitiveLog=function(e){return z3({},e)},(CA||(CA={})).filterSensitiveLog=function(e){return z3({},e)},(pI||(pI={})).filterSensitiveLog=function(e){return z3({},e)},(vI||(vI={})).filterSensitiveLog=function(e){return z3({},e)},(SA=d4=d4||{}).FAILED="Failed",SA.FULFILLED="Fulfilled",SA.READY_FOR_FULFILLMENT="ReadyForFulfillment",(CA=wA=wA||{}).COMPOSITE="Composite",CA.CUSTOM_PAYLOAD="CustomPayload",CA.PLAIN_TEXT="PlainText",CA.SSML="SSML",(pI=JA=JA||{}).CLOSE="Close",pI.CONFIRM_INTENT="ConfirmIntent",pI.DELEGATE="Delegate",pI.ELICIT_INTENT="ElicitIntent",pI.ELICIT_SLOT="ElicitSlot",(X3||(X3={})).filterSensitiveLog=function(e){return z3(z3(z3({},e),e.slots&&{slots:_l}),e.message&&{message:_l})},(vI=gI=gI||{}).CONFIRMED="Confirmed",vI.DENIED="Denied",vI.NONE="None",(Q3||(Q3={})).filterSensitiveLog=function(e){return z3(z3({},e),e.slots&&{slots:_l})},(FI||(FI={})).filterSensitiveLog=function(e){return z3(z3(z3(z3(z3({},e),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return Q3.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:_l}),e.dialogAction&&{dialogAction:X3.filterSensitiveLog(e.dialogAction)}),e.activeContexts&&{activeContexts:_l})},(i4||(i4={})).filterSensitiveLog=function(e){return z3({},e)},(a4||(a4={})).filterSensitiveLog=function(e){return z3({},e)},(c4||(c4={})).filterSensitiveLog=function(e){return z3({},e)},(l4||(l4={})).filterSensitiveLog=function(e){return z3({},e)},(eA||(eA={})).filterSensitiveLog=function(e){return z3(z3(z3(z3({},e),e.sessionAttributes&&{sessionAttributes:_l}),e.requestAttributes&&{requestAttributes:_l}),e.activeContexts&&{activeContexts:_l})},(d4=p4=p4||{}).CONFIRM_INTENT="ConfirmIntent",d4.ELICIT_INTENT="ElicitIntent",d4.ELICIT_SLOT="ElicitSlot",d4.FAILED="Failed",d4.FULFILLED="Fulfilled",d4.READY_FOR_FULFILLMENT="ReadyForFulfillment",(tA||(tA={})).filterSensitiveLog=function(e){return z3(z3(z3({},e),e.message&&{message:_l}),e.activeContexts&&{activeContexts:_l})},(f4||(f4={})).filterSensitiveLog=function(e){return z3({},e)},(h4||(h4={})).filterSensitiveLog=function(e){return z3({},e)},(nA||(nA={})).filterSensitiveLog=function(e){return z3(z3(z3(z3(z3({},e),e.sessionAttributes&&{sessionAttributes:_l}),e.requestAttributes&&{requestAttributes:_l}),e.inputText&&{inputText:_l}),e.activeContexts&&{activeContexts:_l})},(g4||(g4={})).filterSensitiveLog=function(e){return z3({},e)},(rA||(rA={})).filterSensitiveLog=function(e){return z3(z3({},e),e.slots&&{slots:_l})},(v4=v4||{}).GENERIC="application/vnd.amazonaws.card.generic",(m4||(m4={})).filterSensitiveLog=function(e){return z3({},e)},(y4||(y4={})).filterSensitiveLog=function(e){return z3({},e)},(b4||(b4={})).filterSensitiveLog=function(e){return z3({},e)},(S4||(S4={})).filterSensitiveLog=function(e){return z3({},e)},(iA||(iA={})).filterSensitiveLog=function(e){return z3(z3(z3(z3(z3(z3({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map(function(e){return rA.filterSensitiveLog(e)})}),e.slots&&{slots:_l}),e.sessionAttributes&&{sessionAttributes:_l}),e.message&&{message:_l}),e.activeContexts&&{activeContexts:_l})},(w4||(w4={})).filterSensitiveLog=function(e){return z3(z3(z3(z3(z3({},e),e.sessionAttributes&&{sessionAttributes:_l}),e.dialogAction&&{dialogAction:X3.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return Q3.filterSensitiveLog(e)})}),e.activeContexts&&{activeContexts:_l})},(C4||(C4={})).filterSensitiveLog=function(e){return z3(z3(z3({},e),e.message&&{message:_l}),e.activeContexts&&{activeContexts:_l})};function hA(e,t){return Object.entries(e).reduce(function(e,t){var n=K3(t,2),t=n[0],n=n[1];return null===n?e:z3(z3({},e),((e={})[t]=n,e))},{})}function gA(e,t){return{attachmentLinkUrl:void 0!==e.attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?(e.buttons||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:DA(e)}):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}}function vA(e,t){return{score:void 0!==e.score&&null!==e.score?e.score:void 0}}function mA(e,t){return Object.entries(e).reduce(function(e,t){var n=K3(t,2),t=n[0],n=n[1];return null===n?e:z3(z3({},e),((e={})[t]=n,e))},{})}function yA(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var bA,SA=function(a,u){return V3(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return q3(this,function(e){switch(e.label){case 0:if(t={"content-type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",fl(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",fl(o)),void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",fl(o)),r=JSON.stringify(z3(z3(z3(z3({},void 0!==a.activeContexts&&null!==a.activeContexts&&{activeContexts:a.activeContexts.filter(function(e){return null!=e}).map(function(e){return null===e?null:RA(e)})}),void 0!==a.inputText&&null!==a.inputText&&{inputText:a.inputText}),void 0!==a.requestAttributes&&null!==a.requestAttributes&&{requestAttributes:hA(a.requestAttributes)}),void 0!==a.sessionAttributes&&null!==a.sessionAttributes&&{sessionAttributes:hA(a.sessionAttributes)})),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})})},wA=function(r,i){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,(y=r,b=i,V3(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v,m;return q3(this,function(e){switch(e.label){case 0:return n=[z3({},y)],m={},[4,zA(y.body,b)];case 1:switch(t=z3.apply(void 0,n.concat([(m.body=e.sent(),m)])),i="UnknownError",i=VA(y,t.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return o=[{}],[4,_A(t)];case 3:return r=z3.apply(void 0,[z3.apply(void 0,o.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 4:return s=[{}],[4,EA(t)];case 5:return r=z3.apply(void 0,[z3.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 6:return a=[{}],[4,AA(t)];case 7:return r=z3.apply(void 0,[z3.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 8:return u=[{}],[4,IA(t)];case 9:return r=z3.apply(void 0,[z3.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 10:return c=[{}],[4,kA(t)];case 11:return r=z3.apply(void 0,[z3.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 12:return l=[{}],[4,TA(t)];case 13:return r=z3.apply(void 0,[z3.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 14:return p=[{}],[4,PA(t)];case 15:return r=z3.apply(void 0,[z3.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 16:return d=[{}],[4,OA(t)];case 17:return r=z3.apply(void 0,[z3.apply(void 0,d.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 18:return f=[{}],[4,xA(t)];case 19:return r=z3.apply(void 0,[z3.apply(void 0,f.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 20:return h=[{}],[4,LA(t)];case 21:return r=z3.apply(void 0,[z3.apply(void 0,h.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 22:return g=[{}],[4,NA(t)];case 23:return r=z3.apply(void 0,[z3.apply(void 0,g.concat([e.sent()])),{name:i,$metadata:jA(y)}]),[3,25];case 24:v=t.body,i=v.code||v.Code||i,r=z3(z3({},v),{name:""+i,message:v.message||v.Message||i,$fault:"client",$metadata:jA(y)}),e.label=25;case 25:return v=r.message||r.Message||i,r.message=v,delete r.Message,[2,Promise.reject(Object.assign(new Error(v),r))]}})}))]:(t={$metadata:jA(r),activeContexts:void 0,alternativeIntents:void 0,audioStream:void 0,botVersion:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-nlu-intent-confidence"]&&(t.nluIntentConfidence=new ml(fu.from(r.headers["x-amz-lex-nlu-intent-confidence"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-alternative-intents"]&&(t.alternativeIntents=new ml(fu.from(r.headers["x-amz-lex-alternative-intents"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new ml(fu.from(r.headers["x-amz-lex-slots"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new ml(fu.from(r.headers["x-amz-lex-session-attributes"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-bot-version"]&&(t.botVersion=r.headers["x-amz-lex-bot-version"]),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-active-contexts"]&&(t.activeContexts=new ml(fu.from(r.headers["x-amz-lex-active-contexts"],"base64").toString("ascii"))),n=r.body,t.audioStream=n,[2,Promise.resolve(t)]);var y,b})})},CA=function(i,o){return V3(void 0,void 0,void 0,function(){var n,r;return q3(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&300<=i.statusCode?[2,(g=i,v=o,V3(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h;return q3(this,function(e){switch(e.label){case 0:return n=[z3({},g)],h={},[4,zA(g.body,v)];case 1:switch(t=z3.apply(void 0,n.concat([(h.body=e.sent(),h)])),i="UnknownError",i=VA(g,t.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return o=[{}],[4,_A(t)];case 3:return r=z3.apply(void 0,[z3.apply(void 0,o.concat([e.sent()])),{name:i,$metadata:jA(g)}]),[3,19];case 4:return s=[{}],[4,EA(t)];case 5:return r=z3.apply(void 0,[z3.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:jA(g)}]),[3,19];case 6:return a=[{}],[4,AA(t)];case 7:return r=z3.apply(void 0,[z3.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:jA(g)}]),[3,19];case 8:return u=[{}],[4,IA(t)];case 9:return r=z3.apply(void 0,[z3.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:jA(g)}]),[3,19];case 10:return c=[{}],[4,kA(t)];case 11:return r=z3.apply(void 0,[z3.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:jA(g)}]),[3,19];case 12:return l=[{}],[4,TA(t)];case 13:return r=z3.apply(void 0,[z3.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:jA(g)}]),[3,19];case 14:return p=[{}],[4,PA(t)];case 15:return r=z3.apply(void 0,[z3.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:jA(g)}]),[3,19];case 16:return d=[{}],[4,xA(t)];case 17:return r=z3.apply(void 0,[z3.apply(void 0,d.concat([e.sent()])),{name:i,$metadata:jA(g)}]),[3,19];case 18:f=t.body,i=f.code||f.Code||i,r=z3(z3({},f),{name:""+i,message:f.message||f.Message||i,$fault:"client",$metadata:jA(g)}),e.label=19;case 19:return f=r.message||r.Message||i,r.message=f,delete r.Message,[2,Promise.reject(Object.assign(new Error(f),r))]}})}))]:(n={$metadata:jA(i),activeContexts:void 0,alternativeIntents:void 0,botVersion:void 0,dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,zA(i.body,o)]);case 1:return void 0!==(r=e.sent()).activeContexts&&null!==r.activeContexts&&(n.activeContexts=(r.activeContexts||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:MA(e)})),void 0!==r.alternativeIntents&&null!==r.alternativeIntents&&(n.alternativeIntents=(r.alternativeIntents||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:FA(e)})),void 0!==r.botVersion&&null!==r.botVersion&&(n.botVersion=r.botVersion),void 0!==r.dialogState&&null!==r.dialogState&&(n.dialogState=r.dialogState),void 0!==r.intentName&&null!==r.intentName&&(n.intentName=r.intentName),void 0!==r.message&&null!==r.message&&(n.message=r.message),void 0!==r.messageFormat&&null!==r.messageFormat&&(n.messageFormat=r.messageFormat),void 0!==r.nluIntentConfidence&&null!==r.nluIntentConfidence&&(n.nluIntentConfidence=vA(r.nluIntentConfidence)),void 0!==r.responseCard&&null!==r.responseCard&&(n.responseCard={contentType:void 0!==(t=r.responseCard).contentType&&null!==t.contentType?t.contentType:void 0,genericAttachments:void 0!==t.genericAttachments&&null!==t.genericAttachments?UA(t.genericAttachments):void 0,version:void 0!==t.version&&null!==t.version?t.version:void 0}),void 0!==r.sentimentResponse&&null!==r.sentimentResponse&&(n.sentimentResponse={sentimentLabel:void 0!==(t=r.sentimentResponse).sentimentLabel&&null!==t.sentimentLabel?t.sentimentLabel:void 0,sentimentScore:void 0!==t.sentimentScore&&null!==t.sentimentScore?t.sentimentScore:void 0}),void 0!==r.sessionAttributes&&null!==r.sessionAttributes&&(n.sessionAttributes=mA(r.sessionAttributes)),void 0!==r.sessionId&&null!==r.sessionId&&(n.sessionId=r.sessionId),void 0!==r.slotToElicit&&null!==r.slotToElicit&&(n.slotToElicit=r.slotToElicit),void 0!==r.slots&&null!==r.slots&&(n.slots=mA(r.slots)),[2,Promise.resolve(n)]}var t,g,v})})},_A=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:jA(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},EA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:jA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},AA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:jA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},IA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:jA(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},kA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:jA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},TA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:jA(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},PA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:jA(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},OA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:jA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},xA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:jA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},LA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:jA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},NA=function(r,e){return V3(void 0,void 0,void 0,function(){var t,n;return q3(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:jA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},RA=function(e,t){return z3(z3(z3({},void 0!==e.name&&null!==e.name&&{name:e.name}),void 0!==e.parameters&&null!==e.parameters&&{parameters:(n=e.parameters,Object.entries(n).reduce(function(e,t){var n=K3(t,2),t=n[0],n=n[1];return null===n?e:z3(z3({},e),((e={})[t]=n,e))},{}))}),void 0!==e.timeToLive&&null!==e.timeToLive&&{timeToLive:(e=e.timeToLive,z3(z3({},void 0!==e.timeToLiveInSeconds&&null!==e.timeToLiveInSeconds&&{timeToLiveInSeconds:e.timeToLiveInSeconds}),void 0!==e.turnsToLive&&null!==e.turnsToLive&&{turnsToLive:e.turnsToLive}))});var n},MA=function(e,t){return{name:void 0!==e.name&&null!==e.name?e.name:void 0,parameters:void 0!==e.parameters&&null!==e.parameters?(n=e.parameters,Object.entries(n).reduce(function(e,t){var n=K3(t,2),t=n[0],n=n[1];return null===n?e:z3(z3({},e),((e={})[t]=n,e))},{})):void 0,timeToLive:void 0!==e.timeToLive&&null!==e.timeToLive?{timeToLiveInSeconds:void 0!==(e=e.timeToLive).timeToLiveInSeconds&&null!==e.timeToLiveInSeconds?e.timeToLiveInSeconds:void 0,turnsToLive:void 0!==e.turnsToLive&&null!==e.turnsToLive?e.turnsToLive:void 0}:void 0};var n},DA=function(e,t){return{text:void 0!==e.text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}},UA=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:gA(e)})},FA=function(e,t){return{intentName:void 0!==e.intentName&&null!==e.intentName?e.intentName:void 0,nluIntentConfidence:void 0!==e.nluIntentConfidence&&null!==e.nluIntentConfidence?vA(e.nluIntentConfidence):void 0,slots:void 0!==e.slots&&null!==e.slots?mA(e.slots):void 0}},jA=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},BA=function(e,t){return n=t,((e=void 0===(e=e)?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n},zA=function(e,t){return BA(e,t).then(function(e){return e.length?JSON.parse(e):{}})},VA=function(e,t){function n(e){return e=0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,i,o=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===i.toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},qA=(B3(KA,bA=cn),KA.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostContentCommand",inputFilterSensitiveLog:eA.filterSensitiveLog,outputFilterSensitiveLog:tA.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},KA.prototype.serialize=function(e,t){return a=e,u=t,V3(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return q3(this,function(e){switch(e.label){case 0:if(t=z3(z3(z3(z3(z3({"content-type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},yA(a.sessionAttributes)&&{"x-amz-lex-session-attributes":fu.from(ml.fromObject(a.sessionAttributes)).toString("base64")}),yA(a.requestAttributes)&&{"x-amz-lex-request-attributes":fu.from(ml.fromObject(a.requestAttributes)).toString("base64")}),yA(a.contentType)&&{"content-type":a.contentType}),yA(a.accept)&&{accept:a.accept}),yA(a.activeContexts)&&{"x-amz-lex-active-contexts":fu.from(ml.fromObject(a.activeContexts)).toString("base64")}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",fl(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",fl(o)),void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",fl(o)),void 0!==a.inputStream&&(r=a.inputStream),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new da({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},KA.prototype.deserialize=wA,KA);function KA(e){var t=bA.call(this)||this;return t.input=e,t}var HA,GA=(B3(WA,HA=cn),WA.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(wf(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostTextCommand",inputFilterSensitiveLog:nA.filterSensitiveLog,outputFilterSensitiveLog:iA.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},WA.prototype.serialize=SA,WA.prototype.deserialize=CA,WA);function WA(e){var t=HA.call(this)||this;return t.input=e,t}var $A,YA,JA=($A=function(e,t){return($A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}$A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ZA=function(){return(ZA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},XA=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},QA=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},eI=new A.ConsoleLogger("AWSLexProvider"),tI=(JA(nI,YA=U3),nI.prototype.getProviderName=function(){return"AWSLexProvider"},nI.prototype.reportBotStatus=function(e,t){var n=this;eI.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},nI.prototype.sendMessage=function(u,c){return XA(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return QA(this,function(e){switch(e.label){case 0:return this._config[u]?[4,A.Credentials.get()]:[2,Promise.reject("Bot "+u+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new dA({region:this._config[u].region,credentials:t,customUserAgent:A.getAmplifyUserAgent()}),"string"!=typeof c)return[3,6];n={botAlias:this._config[u].alias,botName:u,inputText:c,userId:t.identityId},eI.debug("postText to lex",c),e.label=2;case 2:return e.trys.push([2,4,,5]),r=new GA(n),[4,this.lexRuntimeServiceClient.send(r)];case 3:return s=e.sent(),this.reportBotStatus(s,u),[2,s];case 4:return i=e.sent(),[2,Promise.reject(i)];case 5:return[3,11];case 6:o=c.content,i=c.options.messageType,n="voice"===i?{botAlias:this._config[u].alias,botName:u,contentType:"audio/x-l16; sample-rate=16000",inputStream:o,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[u].alias,botName:u,contentType:"text/plain; charset=utf-8",inputStream:o,userId:t.identityId,accept:"audio/mpeg"},eI.debug("postContent to lex",c),e.label=7;case 7:return e.trys.push([7,10,,11]),o=new qA(n),[4,this.lexRuntimeServiceClient.send(o)];case 8:return[4,function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)});throw new Error("Readable is not supported.")}((s=e.sent()).audioStream)];case 9:return a=e.sent(),this.reportBotStatus(s,u),[2,ZA(ZA({},s),{audioStream:a})];case 10:return a=e.sent(),[2,Promise.reject(a)];case 11:return[2]}})})},nI.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},nI);function nI(e){e=YA.call(this,e=void 0===e?{}:e)||this;return e._botsCompleteCallback={},e}var rI=function(){return(rI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},iI=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},oI=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},sI=new A.ConsoleLogger("Interactions");function aI(e){this._options=e,sI.debug("Interactions Options",this._options),this._pluggables={}}var uI=new(aI.prototype.getModuleName=function(){return"Interactions"},aI.prototype.configure=function(e){var t=this,e=e?e.Interactions||e:{};sI.debug("configure Interactions",{opt:e}),this._options=rI(rI({bots:{}},e),e.Interactions);var e=this._options.aws_bots_config,n=this._options.bots;return!Object.keys(n).length&&e&&Array.isArray(e)&&e.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&n&&Object.keys(n).map(function(e){return n[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new tI),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},aI.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");e.configure(this._options.bots),this._pluggables[e.getProviderName()]=e}},aI.prototype.send=function(n,r){return iI(this,void 0,void 0,function(){var t;return oI(this,function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[n])throw new Error("Bot "+n+" does not exist");if(t=this._options.bots[n].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(n,r)];case 1:return[2,e.sent()]}})})},aI.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},aI)(null);A.Amplify.register(uI);var cI=function(){return(cI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},lI=new A.ConsoleLogger("AbstractXRProvider"),pI=(dI.prototype.configure=function(e){return this._config=cI(cI({},e=void 0===e?{}:e),this._config),lI.debug("configure "+this.getProviderName(),this._config),this.options},dI.prototype.getCategory=function(){return"XR"},Object.defineProperty(dI.prototype,"options",{get:function(){return cI({},this._config)},enumerable:!0,configurable:!0}),dI);function dI(e){this._config=e=void 0===e?{}:e}var fI,hI,gI=(fI=function(e,t){return(fI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}fI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),vI=(hI=Error,gI(mI,hI),mI);function mI(){return null!==hI&&hI.apply(this,arguments)||this}var yI,bI=(gI(SI,yI=vI),SI);function SI(){return null!==yI&&yI.apply(this,arguments)||this}var wI,CI=(gI(_I,wI=vI),_I);function _I(){return null!==wI&&wI.apply(this,arguments)||this}var EI,AI=(gI(II,EI=vI),II);function II(){return null!==EI&&EI.apply(this,arguments)||this}var kI,TI=(gI(PI,kI=vI),PI);function PI(){return null!==kI&&kI.apply(this,arguments)||this}var OI,xI=(gI(LI,OI=vI),LI);function LI(){return null!==OI&&OI.apply(this,arguments)||this}var NI,RI=(gI(MI,NI=vI),MI);function MI(){return null!==NI&&NI.apply(this,arguments)||this}var DI,UI,FI=(DI=function(e,t){return(DI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}DI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),jI=function(){return(jI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},BI=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},zI=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},VI=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qI=new A.ConsoleLogger("SumerianProvider"),KI=(FI(HI,UI=pI),HI.prototype.getProviderName=function(){return"SumerianProvider"},HI.prototype.loadScript=function(r){return BI(this,void 0,void 0,function(){return zI(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},HI.prototype.loadScene=function(C,_,E){return BI(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v,m,y,b,S,w;return zI(this,function(e){switch(e.label){case 0:if(!C)throw s="No scene name passed into loadScene",qI.error(s),new xI(s);if(!_)throw s="No dom element id passed into loadScene",qI.error(s),new TI(s);if(!(t=document.getElementById(_)))throw s="DOM element id, "+_+" not found",qI.error(s),new TI(s);if(!(n=this.getScene(C)).sceneConfig)throw s="No scene config configured for scene: "+C,qI.error(s),new xI(s);if(r=n.sceneConfig.url,i=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))o=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw s="No region configured for scene: "+C,qI.error(s),new xI(s);o=this.options.region}a={region:o,customUserAgent:A.Constants.userAgent+"-SumerianScene"},u={headers:{"X-Amz-User-Agent":A.Constants.userAgent}},c=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,A.Credentials.get()];case 2:return f=e.sent(),a.credentials=f,l={secret_key:f.secretAccessKey,access_key:f.accessKeyId,session_token:f.sessionToken},f={region:o,service:"sumerian"},f=A.Signer.sign({method:"GET",url:r},l,f),u.headers=jI(jI({},u.headers),f.headers),c=f.url,[3,4];case 3:return e.sent(),qI.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(c,u)];case 5:return[4,(p=e.sent()).json()];case 6:if(d=e.sent(),403===p.status)throw d.message?(qI.error("Failure to authenticate user: "+d.message),new xI("Failure to authenticate user: "+d.message)):(qI.error("Failure to authenticate user"),new xI("Failure to authenticate user"));return f=d.bundleData[i],[4,fetch(f.url,{headers:f.headers})];case 7:return[4,e.sent().json()];case 8:h=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(h[i].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw g=e.sent(),qI.error(g),new xI(g);case 12:return g=E.progressCallback||void 0,v=n.publishParamOverrides||void 0,v={element:t,sceneId:i,sceneBundle:h,apiResponse:d,progressCallback:g,publishParamOverrides:v,awsSDKConfigOverride:a},[4,window.SumerianBootstrapper.loadScene(v)];case 13:v=e.sent(),n.sceneController=v,n.isLoaded=!0;try{for(m=VI(v.sceneLoadWarnings),y=m.next();!y.done;y=m.next())b=y.value,qI.warn("loadScene warning: "+b)}catch(e){S={error:e}}finally{try{y&&!y.done&&(w=m.return)&&w.call(m)}finally{if(S)throw S.error}}return[2]}})})},HI.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},HI.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw qI.error(t),new bI(t)}if(!e){t="No scene name was passed";throw qI.error(t),new CI(t)}if(this.options.scenes[e])return this.options.scenes[e];t="Scene '"+e+"' is not configured";throw qI.error(t),new CI(t)},HI.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw qI.error(t),new bI(t)}var n=this.options.scenes[e];if(!n){t="Scene '"+e+"' is not configured";throw qI.error(t),new CI(t)}n=n.sceneController;if(n)return n;t="Scene controller for '"+e+"' has not been loaded";throw qI.error(t),new AI(t)},HI.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},HI.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},HI.prototype.start=function(e){this.getSceneController(e).start()},HI.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},HI.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},HI.prototype.isMuted=function(e){return this.getSceneController(e).muted},HI.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},HI.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},HI.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},HI);function HI(e){return UI.call(this,e=void 0===e?{}:e)||this}var GI=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},WI=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},$I=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},YI=new A.ConsoleLogger("XR");function JI(e){this._options=e,YI.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new KI)}var ZI=new(JI.prototype.configure=function(e){var n=this,r=e?e.XR||e:{};return YI.debug("configure XR",{opt:r}),this._options=Object.assign({},this._options,r),Object.entries(this._pluggables).map(function(e){var t=$I(e,2),e=t[0],t=t[1];e!==n._defaultProvider||r[n._defaultProvider]?t.configure(n._options[e]):t.configure(n._options)}),this._options},JI.prototype.addPluggable=function(t){return GI(this,void 0,void 0,function(){return WI(this,function(e){return t&&"XR"===t.getCategory()?(this._pluggables[t.getProviderName()]=t,[2,t.configure(this._options)]):[2]})})},JI.prototype.loadScene=function(t,n,r,i){return void 0===r&&(r={}),void 0===i&&(i=this._defaultProvider),GI(this,void 0,void 0,function(){return WI(this,function(e){switch(e.label){case 0:if(!this._pluggables[i])throw new RI("Provider '"+i+"' not configured");return[4,this._pluggables[i].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},JI.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},JI.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},JI.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},JI.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},JI.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},JI.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},JI.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},JI.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},JI.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new RI("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},JI.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new RI("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},JI.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new RI("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},JI)(null);A.Amplify.register(ZI);var XI=(QI.prototype.auth=function(){return this._auth||Jv},QI.prototype.analytics=function(){return this._analytics||Xh},QI.prototype.storage=function(){return this._storage||B_},QI.prototype.api=function(){return this._api||R3},QI.prototype.interactions=function(){return this._interactions||uI},QI.prototype.cache=function(){return this._cache},QI.prototype.pubsub=function(){return this._pubsub||S3},QI.prototype.logger=function(e,t){return new this._logger(e,t)},QI.prototype.xr=function(){return this._xr||ZI},QI.prototype.i18n=function(){return this._i18n},QI.prototype.authState=function(){return this._authState},QI.prototype.setAuthState=function(e){this._authState.next(e)},QI.decorators=[{type:f.Injectable}],QI.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:["modules"]},{type:f.Optional}]}]},QI);function QI(e){this.modules=e=void 0===e?{}:e,this._authState=new me,this.authStateChange$=this._authState.asObservable();e=e||M;Io(this._authState,e.Auth),this._auth=e.Auth,this._analytics=e.Analytics,this._storage=e.Storage,this._api=e.API,this._cache=e.Cache,this._pubsub=e.PubSub,this._interactions=e.Interactions,this._xr=e.XR,this._i18n=A.I18n,this._logger=A.Logger}var e4=(t4.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(t4.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(t4.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(t4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),t4.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},t4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},t4.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],t4.ctorParameters=function(){return[{type:XI}]},t4.propDecorators={hide:[{type:f.Input}],data:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},t4);function t4(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var n4,r4,i4=(n4=function(e,t){return(n4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}n4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o4=(i4(s4,r4=e4),s4.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],s4.ctorParameters=function(){return[{type:XI}]},s4);function s4(e){var t=r4.call(this,e)||this;return t.amplifyService=e,t}var a4=(u4.prototype.ngOnInit=function(){this.loadComponent()},u4.prototype.ngOnDestroy=function(){},u4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(o4,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new Eo(e4,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},u4.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],u4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},u4.propDecorators={framework:[{type:f.Input}],hide:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},u4);function u4(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var c4="sumerian-scene-container",l4="sumerian-scene",p4="sumerian-scene-loading",d4="sumerian-scene-loading-logo",f4="sumerian-scene-loading-scene-name",h4="sumerian-scene-loading-bar",g4="sumerian-scene-error-text",v4="sumerian-scene-bar",m4="sumerian-scene-actions",y4={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},b4={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},S4={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},w4={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},C4={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},wA={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},cn={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"},SA={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},CA='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+cn.section+'">\n    <div class="amplify-form-body" data-test="'+cn.bodySection+'">\n    <div class="amplify-form-header" data-test="'+cn.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+cn.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+cn.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+cn.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',_4=(Object.defineProperty(E4.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(E4.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),E4.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},E4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},E4.prototype.setCode=function(e){this.code=e},E4.prototype.onConfirm=function(){var t=this,e=this._authState.user,n=e.challengeName,n="SOFTWARE_TOKEN_MFA"===n?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},E4.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},E4.prototype.onAlertClose=function(){this._setError(null)},E4.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},E4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:CA}]}],E4.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},E4.propDecorators={data:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}]},E4);function E4(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var A4,I4,JA=(A4=function(e,t){return(A4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}A4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),U3='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+cn.section+'">\n  <div class="amplify-form-body" data-test="'+cn.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+cn.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+cn.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+cn.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',k4=(JA(T4,I4=_4),T4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:U3}]}],T4.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},T4);function T4(e){var t=I4.call(this,e)||this;return t.amplifyService=e,t}P4.prototype.ngOnInit=function(){this.loadComponent()},P4.prototype.ngOnDestroy=function(){},P4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(k4,{authState:this.authState,hide:this.hide}):new Eo(_4,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},P4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],P4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},P4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},gI=P4;function P4(e){this.componentFactoryResolver=e,this.hide=[]}function O4(e,t){return 0<e.filter(function(e){return e===t}).length}function x4(e,t){return"+"+e+t.replace(/[-()]/g,"")}var L4={email:"Email",phone_number:"Phone Number",username:"Username"},vI='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+wA.section+'">\n  <div class="amplify-form-body" data-test="'+wA.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+wA.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+wA.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+wA.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+wA.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+wA.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+wA.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',N4=(Object.defineProperty(R4.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(R4.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(R4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),R4.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},R4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},R4.prototype.setUsername=function(e){this.username=e},R4.prototype.setCode=function(e){this.code=e},R4.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},R4.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},R4.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},R4.prototype.onAlertClose=function(){this._setError(null)},R4.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},R4.prototype.getUsernameLabel=function(){return L4[this._usernameAttributes]||this._usernameAttributes},R4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:vI}]}],R4.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},R4.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},R4);function R4(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var M4,D4,FI=(M4=function(e,t){return(M4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}M4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),pI='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+wA.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+wA.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+wA.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+wA.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+wA.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+wA.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+wA.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+wA.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',U4=(FI(F4,D4=N4),F4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:pI}]}],F4.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},F4);function F4(e){var t=D4.call(this,e)||this;return t.amplifyService=e,t}var j4,i4=(B4.prototype.ngOnInit=function(){this.loadComponent()},B4.prototype.ngOnDestroy=function(){},B4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(U4,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new Eo(N4,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},B4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],B4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},B4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},B4);function B4(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(CA=j4=j4||{}).EMAIL="email",CA.PHONE_NUMBER="phone_number",CA.USERNAME="username";var cn='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+y4.section+'">\n    <div class="amplify-form-body" data-test="'+y4.bodySection+'">\n      <div class="amplify-form-header" data-test="'+y4.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+y4.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+y4.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+y4.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+y4.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+y4.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',z4=(Object.defineProperty(V4.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=O4(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(V4.prototype,"authState",{set:function(e){this._authState=e,this._show=O4(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=(e.user&&e.user.country_code?e.user:this).country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(V4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),V4.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},V4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},V4.prototype.setUsername=function(e){this.username=e},V4.prototype.setPassword=function(e){this.password=e},V4.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},V4.prototype.onAlertClose=function(){this._setError(null)},V4.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},V4.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},V4.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},V4.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},V4.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},V4.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case j4.EMAIL:return this.email;case j4.PHONE_NUMBER:return x4(this.country_code,this.local_phone_number);default:return this.username}},V4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-core",template:cn}]}],V4.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},V4.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},V4);function V4(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var q4,K4,JA=(q4=function(e,t){return(q4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}q4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),U3='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+y4.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+y4.bodySection+'">\n    <div class="amplify-form-header" data-test="'+y4.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+y4.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+y4.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+y4.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+y4.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',H4=(JA(G4,K4=z4),G4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:U3}]}],G4.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},G4);function G4(e){var t=K4.call(this,e)||this;return t.amplifyService=e,t}W4.prototype.ngOnInit=function(){this.loadComponent()},W4.prototype.ngOnDestroy=function(){},W4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new Eo(H4,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new Eo(z4,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},W4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],W4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},W4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},vI=W4;function W4(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var $4=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],Y4=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],J4=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],wA='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+b4.section+'">\n    <div class="amplify-form-body" data-test="'+b4.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+b4.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+b4.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+b4.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+b4.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Z4=(Object.defineProperty(X4.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===j4.EMAIL?(this.signUpFields=Y4,this.defaultSignUpFields=Y4):this._usernameAttributes===j4.PHONE_NUMBER&&(this.signUpFields=J4,this.defaultSignUpFields=J4),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(X4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===j4.EMAIL?(this.signUpFields=Y4,this.defaultSignUpFields=Y4):this._usernameAttributes===j4.PHONE_NUMBER&&(this.signUpFields=J4,this.defaultSignUpFields=J4)},enumerable:!0,configurable:!0}),Object.defineProperty(X4.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(X4.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),X4.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},X4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},X4.prototype.onSignUp=function(){var n=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=x4(this.country_code,this.local_phone_number));var e=Object.keys(this.user),r=e.map(function(e){return n.user[e]});e.forEach(function(e,t){"username"!==e&&"password"!==e&&"attributes"!==e&&(e=(n.needPrefix(e)?"custom:":"")+e,n.user.attributes[e]=r[t])});var t=!1;if(this.signUpFields.forEach(function(e){e.label===n.getUsernameLabel()&&(n.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),n.user.username=n.user.attributes[e.key]||n.user.username,t=!0)}),!t&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=n.user.username;n.user={},n.onAlertClose(),n.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return n._setError(e)})},X4.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},X4.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},X4.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},X4.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},X4.prototype.onAlertClose=function(){this._setError(null)},X4.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},X4.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},X4.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},X4.prototype.getUsernameLabel=function(){return L4[this._usernameAttributes]||this._usernameAttributes},X4.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},X4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-core",template:wA}]}],X4.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},X4.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],usernameAttributes:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}]},X4);function X4(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=$4,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var Q4,ek,FI=(Q4=function(e,t){return(Q4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Q4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),pI='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+b4.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+b4.bodySection+'">\n    <div class="amplify-form-header" data-test="'+b4.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+b4.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+b4.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+b4.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+b4.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',tk=(FI(nk,ek=Z4),nk.prototype.setProp=function(e){return this.user[e.name]=e.value},nk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:pI}]}],nk.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},nk);function nk(e){var t=ek.call(this,e)||this;return t.amplifyService=e,t}rk.prototype.ngOnInit=function(){this.loadComponent()},rk.prototype.ngOnDestroy=function(){},rk.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(tk,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new Eo(Z4,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},rk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],rk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},rk.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},CA=rk;function rk(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var cn='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+S4.section+'">\n  <div class="amplify-form-body" data-test="'+S4.bodySection+'">\n  <div class="amplify-form-header" data-test="'+S4.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+S4.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+S4.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+S4.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',ik=(Object.defineProperty(ok.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(ok.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide||this.hide},enumerable:!0,configurable:!0}),ok.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},ok.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},ok.prototype.setPassword=function(e){this.password=e},ok.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},ok.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},ok.prototype.onAlertClose=function(){this._setError(null)},ok.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},ok.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-core",template:cn}]}],ok.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},ok.propDecorators={authState:[{type:f.Input}],hide:[{type:f.Input}],data:[{type:f.Input}]},ok);function ok(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var sk,ak,y4=(sk=function(e,t){return(sk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}sk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),JA='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+S4.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+S4.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+S4.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+S4.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+S4.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+S4.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',uk=(y4(ck,ak=ik),ck.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:JA}]}],ck.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},ck);function ck(e){var t=ak.call(this,e)||this;return t.amplifyService=e,t}lk.prototype.ngOnInit=function(){this.loadComponent()},lk.prototype.ngOnDestroy=function(){},lk.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(uk,{authState:this.authState,hide:this.hide}):new Eo(ik,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},lk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],lk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},lk.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},U3=lk;function lk(e){this.componentFactoryResolver=e,this.hide=[]}var wA='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+C4.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",pk=(Object.defineProperty(dk.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),dk.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},dk.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},dk.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===j4.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===j4.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},dk.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},dk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-core",template:wA}]}],dk.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},dk.propDecorators={authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},dk);function dk(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var fk,hk,b4=(fk=function(e,t){return(fk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}fk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),FI='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+C4.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",gk=(b4(vk,hk=pk),vk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-ionic",template:FI}]}],vk.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},vk);function vk(e){var t=hk.call(this,e)||this;return t.amplifyService=e,t}mk.prototype.ngOnInit=function(){this.loadComponent()},mk.prototype.ngOnDestroy=function(){},mk.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(gk,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new Eo(pk,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},mk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],mk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},mk.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},pI=mk;function mk(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}var cn='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+SA.section+'">\n    <div class="amplify-form-body" data-test="'+SA.bodySection+'">\n    <div class="amplify-form-header" data-test="'+SA.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+SA.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+SA.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+SA.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+SA.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+SA.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+SA.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',yk=(Object.defineProperty(bk.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide||this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),bk.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(bk.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),bk.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(bk.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),bk.prototype.setCode=function(e){this.code=e},bk.prototype.setPassword=function(e){this.password=e},bk.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case j4.EMAIL:return this.email;case j4.PHONE_NUMBER:return x4(this.country_code,this.local_phone_number);default:return this.username}},bk.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},bk.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},bk.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},bk.prototype.onAlertClose=function(){this._setError(null)},bk.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},bk.prototype.getUsernameLabel=function(){return L4[this._usernameAttributes]||this._usernameAttributes},bk.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},bk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-core",template:cn}]}],bk.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},bk.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},bk);function bk(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var Sk,wk,S4=(Sk=function(e,t){return(Sk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Sk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y4='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+SA.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+SA.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+SA.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+SA.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+SA.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+SA.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+SA.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',Ck=(S4(_k,wk=yk),_k.prototype.onCodeChange=function(e){this.country_code=e},_k.prototype.onNumberChange=function(e){this.local_phone_number=e},_k.prototype.setUsername=function(e){this.username=e},_k.prototype.setEmail=function(e){this.email=e},_k.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:y4}]}],_k.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},_k);function _k(e){var t=wk.call(this,e)||this;return t.amplifyService=e,t}Ek.prototype.ngOnInit=function(){this.loadComponent()},Ek.prototype.ngOnDestroy=function(){},Ek.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(Ck,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new Eo(yk,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Ek.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Ek.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Ek.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},JA=Ek;function Ek(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var Ak=function(){return(Ak=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},wA='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+w4.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+w4.usernameInput+'"\n        />\n    </div>\n</div>\n',C4=(Object.defineProperty(Ik.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(Ik.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(Ik.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Ik.prototype.ngOnInit=function(){var e;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(e=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(e),this.username=e)},Ik.prototype.ngOnDestroy=function(){},Ik.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},Ik.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},Ik.prototype.getUsernameLabel=function(){return L4[this._usernameAttributes]||this._usernameAttributes},Ik.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},Ik.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(Ak({},e))},Ik.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-core",template:wA}]}],Ik.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},Ik.propDecorators={data:[{type:f.Input}],usernameAttributes:[{type:f.Input}],placeholder:[{type:f.Input}],usernameFieldChanged:[{type:f.Output}]},Ik);function Ik(e){this.amplifyService=e,this._usernameAttributes=j4.USERNAME,this._placeholder="",this.usernameFieldChanged=new f.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var kk=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],b4='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+w4.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+w4.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',FI=(Object.defineProperty(Tk.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(Tk.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(Tk.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(Tk.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(Tk.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),Tk.prototype.ngOnInit=function(){},Tk.prototype.ngOnDestroy=function(){},Tk.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},Tk.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},Tk.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},Tk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-core",template:b4}]}],Tk.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},Tk.propDecorators={data:[{type:f.Input}],placeholder:[{type:f.Input}],label:[{type:f.Input}],required:[{type:f.Input}],defaultCountryCode:[{type:f.Input}],phoneFieldChanged:[{type:f.Output}]},Tk);function Tk(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new f.EventEmitter,this._countries=kk}var Pk=(Ok.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},Ok.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(Ok.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(Ok.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(Ok.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),Ok.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},Ok.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],Ok.ctorParameters=function(){return[{type:XI}]},Ok.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},Ok);function Ok(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var xk,Lk,cn=(xk=function(e,t){return(xk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}xk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Nk=(cn(Rk,Lk=Pk),Rk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],Rk.ctorParameters=function(){return[{type:XI}]},Rk);function Rk(e){var t=Lk.call(this,e)||this;return t.amplifyService=e,t}Mk.prototype.ngOnInit=function(){this.loadComponent()},Mk.prototype.ngOnDestroy=function(){},Mk.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(Nk,{path:this.path,options:this.options}):new Eo(Pk,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},Mk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Mk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Mk.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[d]}]},SA=Mk;function Mk(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}var Dk=(Object.defineProperty(Uk.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(Uk.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(Uk.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),Uk.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},Uk.prototype.onImageClicked=function(){this.selected.emit(this.url)},Uk.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},Uk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],Uk.ctorParameters=function(){return[{type:XI}]},Uk.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},Uk);function Uk(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var Fk,jk,S4=(Fk=function(e,t){return(Fk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Fk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Bk=(S4(zk,jk=Dk),zk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],zk.ctorParameters=function(){return[{type:XI}]},zk);function zk(e){var t=jk.call(this,e)||this;return t.amplifyService=e,t}Vk.prototype.ngOnInit=function(){this.loadComponent()},Vk.prototype.ngOnDestroy=function(){},Vk.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(Bk,{path:this.path,options:this.options}):new Eo(Dk,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},Vk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Vk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Vk.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[d]}]},y4=Vk;function Vk(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}var qk=(Object.defineProperty(Kk.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(Kk.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(Kk.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(Kk.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),Kk.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},Kk.prototype.pick=function(e){var t,n=e.target.files[0];n&&(this._storageOptions.contentType||(this._storageOptions.contentType=n.type),n.name,n.size,n.type,this.picked.emit(n),this.s3ImagePath=this.s3ImagePath+"/"+n.name,this.s3ImageFile=n,t=this,(e=new FileReader).onload=function(e){e=e.target.result;t.photoUrl=e,t.hasPhoto=!0,t.loaded.emit(e)},e.readAsDataURL(n))},Kk.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},Kk.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},Kk.prototype.onPhotoError=function(){this.hasPhoto=!1},Kk.prototype.onAlertClose=function(){this._setError(null)},Kk.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Kk.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],Kk.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},Kk.propDecorators={url:[{type:f.Input}],storageOptions:[{type:f.Input}],path:[{type:f.Input}],data:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}]},Kk);function Kk(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var Hk,Gk,wA=(Hk=function(e,t){return(Hk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Hk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Wk=(wA($k,Gk=qk),$k.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],$k.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},$k);function $k(e){var t=Gk.call(this,e)||this;return t.amplifyService=e,t}Yk.prototype.ngOnInit=function(){this.loadComponent()},Yk.prototype.ngOnDestroy=function(){},Yk.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(Wk,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new Eo(qk,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.picked.subscribe(function(e){t.picked.emit(e)}),n.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),n.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},Yk.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],Yk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Yk.propDecorators={framework:[{type:f.Input}],url:[{type:f.Input}],path:[{type:f.Input}],storageOptions:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[d]}]},b4=Yk;function Yk(e){this.componentFactoryResolver=e,this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter}var Jk=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Zk=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};require("./aws-lex-audio.js");var Xk={INITIAL:{MESSAGE:"Type your message or click  🎤",ICON:"🎤"},LISTENING:{MESSAGE:"Listening... click 🔴 again to cancel",ICON:"🔴"},SENDING:{MESSAGE:"Please wait...",ICON:"🔊"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},Qk={silenceDetectionConfig:{time:2e3,amplitude:.2}},eT=(Object.defineProperty(tT.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=void 0!==e.conversationModeOn&&e.conversationModeOn,this.voiceEnabled=void 0!==e.voiceEnabled&&e.voiceEnabled,this.textEnabled=void 0===e.textEnabled||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",Xk.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",Xk.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(tT.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(tT.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(tT.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),tT.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},tT.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},tT.prototype.onInputChange=function(e){this.inputText=e},tT.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},tT.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=Xk.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=Xk.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},tT.prototype.onError=function(e){this.logger.error(e)},tT.prototype.lexResponseHandler=function(){return Jk(this,void 0,void 0,function(){var t;return Zk(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return t=e.sent(),this.lexResponse=t,this.currentVoiceState=Xk.SPEAKING.MESSAGE,this.micText=Xk.SPEAKING.ICON,this.micButtonDisabled=!0,t={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",t.bot=this.lexResponse.message,t.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(t),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},tT.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=Xk.LISTENING.MESSAGE,e.micText=Xk.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=Xk.INITIAL.MESSAGE,e.micText=Xk.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=Xk.INITIAL.MESSAGE,this.micText=Xk.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},tT.prototype.micButtonHandler=function(){return Jk(this,void 0,void 0,function(){return Zk(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=Xk.LISTENING.MESSAGE,this.micText=Xk.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},tT.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],tT.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},tT.propDecorators={complete:[{type:f.Output}],data:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearOnComplete:[{type:f.Input}]},tT);function tT(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=Xk.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=Xk.INITIAL.ICON,this.voiceConfig=Qk,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new f.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=Xk.SENDING.MESSAGE,n.audioInput=e,n.micText=Xk.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var nT,rT,cn=(nT=function(e,t){return(nT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}nT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),iT=(cn(oT,rT=eT),oT.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],oT.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},oT);function oT(e,t){e=rT.call(this,e,t)||this;return e.amplifyService=t,e}sT.prototype.ngOnInit=function(){this.loadComponent()},sT.prototype.ngOnDestroy=function(){},sT.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(iT,e):new Eo(eT,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component),e=this.componentHost.viewContainerRef;e.clear();r=e.createComponent(r);r.instance.data=n.data,r.instance.complete.subscribe(function(e){t.complete.emit(e)})},sT.decorators=[{type:f.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],sT.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},sT.propDecorators={framework:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearComplete:[{type:f.Input}],conversationModeOn:[{type:f.Input}],voiceConfig:[{type:f.Input}],voiceEnabled:[{type:f.Input}],textEnabled:[{type:f.Input}],complete:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[d]}]},S4=sT;function sT(e){this.componentFactoryResolver=e,this.complete=new f.EventEmitter}Object.defineProperty(aT.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),aT.decorators=[{type:f.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],aT.propDecorators={title:[{type:f.Input}]},wA=aT;function aT(){}var uT=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},cT=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},cn='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+c4+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+l4+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+p4+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+v4+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+m4+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',lT=(Object.defineProperty(pT.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),pT.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},pT.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},pT.prototype.loadAndStartScene=function(){return uT(this,void 0,void 0,function(){var t,n,r=this;return cT(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,n),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return r.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return r.showEnableAudio=!0}),[2]}})})},pT.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},pT.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},pT.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},pT.prototype.maximize=function(){return uT(this,void 0,void 0,function(){var t;return cT(this,function(e){return t=document.getElementById("sumerian-scene-container"),(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},pT.prototype.minimize=function(){return uT(this,void 0,void 0,function(){var t;return cT(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},pT.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-core",template:cn}]}],pT.ctorParameters=function(){return[{type:XI}]},pT.propDecorators={sceneName:[{type:f.Input}],data:[{type:f.Input}]},pT);function pT(e){var t=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){t.loadPercentage=100*e},this.amplifyUI=R,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var dT,fT,cn=(dT=function(e,t){return(dT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}dT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v4='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+c4+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+l4+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+p4+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+v4+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+m4+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',hT=(cn(gT,fT=lT),gT.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-ionic",template:v4}]}],gT.ctorParameters=function(){return[{type:XI}]},gT);function gT(e){var t=fT.call(this,e)||this;return t.amplifyService=e,t}vT.prototype.ngOnInit=function(){this.loadComponent()},vT.prototype.ngOnDestroy=function(){},vT.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Eo(hT,{sceneName:this.sceneName}):new Eo(lT,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},vT.decorators=[{type:f.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],vT.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},vT.propDecorators={framework:[{type:f.Input}],sceneName:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[d]}]},m4=vT;function vT(e){this.componentFactoryResolver=e}mT.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-core",template:'\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+d4+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+f4+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+g4+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+h4+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n"}]}],mT.ctorParameters=function(){return[]},mT.propDecorators={loadPercentage:[{type:f.Input}],sceneName:[{type:f.Input}],sceneError:[{type:f.Input}]},cn=mT;function mT(){this.AmplifyUI=R}v4=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},m4=[a4,e4,gI,_4,i4,N4,vI,z4,CA,Z4,U3,ik,pI,pk,JA,yk,C4,FI,SA,Pk,y4,Dk,b4,qk,S4,eT,wA,m4,lT,cn],yT.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,p],declarations:v4([d],m4),entryComponents:v4(m4),providers:[],exports:v4(m4)}]}],d=yT;function yT(){}var bT,ST,v4=(bT=function(e,t){return(bT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}bT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m4='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+w4.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+w4.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',FI=(v4(wT,ST=FI),wT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:m4}]}],wT.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},wT);function wT(e){var t=ST.call(this,e)||this;return t.amplifyService=e,t}var CT,_T,m4=(CT=function(e,t){return(CT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}CT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w4='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+w4.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+w4.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',C4=(m4(ET,_T=C4),ET.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-ionic",template:w4}]}],ET.ctorParameters=function(){return[{type:XI,decorators:[{type:f.Inject,args:[XI]}]}]},ET);function ET(e){var t=_T.call(this,e)||this;return t.amplifyService=e,t}var AT,IT,w4=(AT=function(e,t){return(AT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}AT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h4='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+d4+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+f4+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+g4+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+h4+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",cn=(w4(kT,IT=cn),kT.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-ionic",template:h4}]}],kT.ctorParameters=function(){return[]},kT);function kT(){return IT.call(this)||this}h4=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},cn=[o4,k4,U4,Ck,gk,H4,tk,C4,FI,uk,Wk,Nk,Bk,iT,hT,cn],TT.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,p],declarations:h4(cn),entryComponents:h4(cn),providers:[XI],schemas:[f.CUSTOM_ELEMENTS_SCHEMA],exports:h4(cn)}]}],cn=TT;function TT(){}e.AmplifyAngularModule=d,e.AmplifyIonicModule=cn,e.AmplifyModules=function(e){return new XI(e)},e.AmplifyService=XI,Object.defineProperty(e,"__esModule",{value:!0})});
